<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ç½‘ç«™å¯¼èˆª</title>
      <link href="/2019/08/23/%E7%BD%91%E7%AB%99%E5%AF%BC%E8%88%AA/"/>
      <url>/2019/08/23/%E7%BD%91%E7%AB%99%E5%AF%BC%E8%88%AA/</url>
      
        <content type="html"><![CDATA[<h3 id="åœ¨çº¿å­¦ä¹ "><a href="#åœ¨çº¿å­¦ä¹ " class="headerlink" title="åœ¨çº¿å­¦ä¹ "></a>åœ¨çº¿å­¦ä¹ </h3><div class="note default">            <p><a href="https://study.163.com" target="_blank" rel="noopener">ç½‘æ˜“äº‘è¯¾å ‚</a><br><a href="https://ke.qq.com" target="_blank" rel="noopener">è…¾è®¯è¯¾å ‚</a><br><a href="https://edu.aliyun.com" target="_blank" rel="noopener">é˜¿é‡Œäº‘å¤§å­¦</a><br><a href="https://chuanke.baidu.com" target="_blank" rel="noopener">ç™¾åº¦ä¼ è¯¾</a><br><a href="https://www.imooc.com" target="_blank" rel="noopener">æ…•è¯¾ç½‘</a><br><a href="https://edu.51cto.com" target="_blank" rel="noopener">51CTOå­¦é™¢</a><br><a href="https://www.jikexueyuan.com" target="_blank" rel="noopener">æå®¢å­¦é™¢</a><br><a href="http://www.maiziedu.com" title="éº¦å­å­¦é™¢" target="_blank" rel="noopener">éº¦å­å­¦é™¢</a><br><a href="https://www.icourse163.org" target="_blank" rel="noopener">ä¸­å›½å¤§å­¦MOOC</a><br><a href="https://www.mooc.cn" target="_blank" rel="noopener">MOOCä¸­å›½</a><br><a href="http://www.xuetangx.com" target="_blank" rel="noopener">å­¦å ‚åœ¨çº¿</a><br><a href="http://www.duobei.com" target="_blank" rel="noopener">å¤šè´å…¬å¼€è¯¾</a><br><a href="https://cn.udacity.com" target="_blank" rel="noopener">ä¼˜è¾¾å­¦åŸ</a><br><a href="https://www.udemy.com" target="_blank" rel="noopener">Udemy</a><br><a href="https://www.coursera.org" target="_blank" rel="noopener">coursera</a>                                                               </p>          </div> <a id="more"></a> <h3 id="åœ¨çº¿å·¥å…·"><a href="#åœ¨çº¿å·¥å…·" class="headerlink" title="åœ¨çº¿å·¥å…·"></a>åœ¨çº¿å·¥å…·</h3><p><a href="http://www.atoolbox.net" target="_blank" rel="noopener">åœ¨çº¿å·¥å…· â€”â€” å¥½ç”¨çš„åœ¨çº¿å·¥å…·éƒ½åœ¨è¿™é‡Œ</a><br><a href="https://www.qtool.net" target="_blank" rel="noopener">åœ¨çº¿å·¥å…· â€”â€” QTOOLå·¥å…·å¤§å®¶å¸¸ç”¨çš„å·¥å…·ç®±</a><br><a href="https://www.iamwawa.cn" target="_blank" rel="noopener">åœ¨çº¿å·¥å…· â€”â€” è›™è›™ä¾¿æ·çš„åœ¨çº¿å·¥å…·é›†åˆç½‘ç«™</a><br><a href="http://www.nicetool.net" target="_blank" rel="noopener">åœ¨çº¿å·¥å…· â€”â€” NiceToolç”¨å®Œå³èµ°ï¼Œè§¦æ‰‹å¯åŠ</a><br><a href="http://www.qijishow.com/down/index.html" target="_blank" rel="noopener">åœ¨çº¿å·¥å…· â€”â€” å¥‡è¿¹ç§€å·¥å…·ç®±</a><br><a href="https://tools.imiku.me" target="_blank" rel="noopener">åœ¨çº¿å·¥å…· â€”â€” MikuToolsä¸€ä¸ªè½»é‡çš„å·¥å…·é›†åˆ</a><br><a href="http://tools.jb51.net" target="_blank" rel="noopener">åœ¨çº¿å·¥å…· â€”â€” è„šæœ¬ä¹‹å®¶åœ¨çº¿å·¥å…·</a><br><a href="https://tool.lu" target="_blank" rel="noopener">åœ¨çº¿å·¥å…· â€”â€” ç¨‹åºå‘˜çš„å·¥å…·ç®±</a><br><a href="https://www.toolfk.com" target="_blank" rel="noopener">åœ¨çº¿å·¥å…· â€”â€” ToolFKç¨‹åºå‘˜å¼€å‘å·¥å…·å¤§å…¨</a></p><h3 id="IT-æŠ€æœ¯"><a href="#IT-æŠ€æœ¯" class="headerlink" title="IT æŠ€æœ¯"></a>IT æŠ€æœ¯</h3><div class="note default">            <h4 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h4><p><a href="https://git-scm.com/book/zh/v2" target="_blank" rel="noopener">Git Book</a>ï¼ˆä¸­æ–‡ç‰ˆï¼‰<br><a href="https://www.runoob.com/git/git-tutorial.html" target="_blank" rel="noopener">Git æ•™ç¨‹</a></p><h4 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h4><p><a href="https://developer.android.google.cn" target="_blank" rel="noopener">Android Developers</a>ï¼ˆä¸­æ–‡ç‰ˆï¼‰<br><a href="åº”ç”¨å¼€å‘è€…æ–‡æ¡£">Android åº”ç”¨å¼€å‘è€…æ–‡æ¡£</a><br><a href="https://chinagdg.org/resource-list" target="_blank" rel="noopener">Android æŠ€æœ¯èµ„æºæ±‡æ€»</a><br><a href="https://www.androidos.net.cn/sourcecode" target="_blank" rel="noopener">Android OS åœ¨çº¿æºç </a><br><a href="https://www.mdui.org/design" target="_blank" rel="noopener">Material Design è®¾è®¡</a>ï¼ˆä¸­æ–‡ç‰ˆï¼‰</p><h5 id="Android-æ¶æ„"><a href="#Android-æ¶æ„" class="headerlink" title="Android æ¶æ„"></a>Android æ¶æ„</h5><p><a href="https://github.com/googlesamples/android-architecture" target="_blank" rel="noopener">Google å®˜æ–¹æ¶æ„ Samples</a><br><a href="https://github.com/Juude/Awesome-Android-Architecture" target="_blank" rel="noopener">Android æ¶æ„é›†åˆ</a><br><a href="https://www.jianshu.com/p/2d5c1d855c31" target="_blank" rel="noopener">Android APP æ¶æ„å¿ƒå¾—</a></p><h5 id="Android-æŠ€æœ¯åšå®¢"><a href="#Android-æŠ€æœ¯åšå®¢" class="headerlink" title="Android æŠ€æœ¯åšå®¢"></a>Android æŠ€æœ¯åšå®¢</h5><p><a href="https://www.cmonbaby.com" target="_blank" rel="noopener">å½­é”¡</a> â€”â€” GitHubï¼š<a href="https://github.com/cnmen" target="_blank" rel="noopener">https://github.com/cnmen</a><br><a href="https://xiandan.in" target="_blank" rel="noopener">é—²è›‹</a> â€”â€” GitHubï¼š<a href="https://github.com/dengyuhan" target="_blank" rel="noopener">https://github.com/dengyuhan</a><br><a href="https://www.trinea.cn" target="_blank" rel="noopener">Trinea</a> â€”â€” GitHubï¼š<a href="https://github.com/trinea" target="_blank" rel="noopener">https://github.com/trinea</a><br><a href="https://www.cnblogs.com/halzhang" target="_blank" rel="noopener">å¼ æ±‰å›½</a> â€”â€” GitHubï¼š<a href="https://github.com/halzhang" target="_blank" rel="noopener">https://github.com/halzhang</a><br><a href="https://my.oschina.net/u/1171837" target="_blank" rel="noopener">wyouflf</a> â€”â€” GitHubï¼š<a href="https://github.com/wyouflf" target="_blank" rel="noopener">https://github.com/wyouflf</a><br><a href="https://blog.daimajia.com" target="_blank" rel="noopener">ä»£ç å®¶</a> â€”â€” GitHubï¼š<a href="https://github.com/daimajia" target="_blank" rel="noopener">https://github.com/daimajia</a><br><a href="https://stormzhang.com" target="_blank" rel="noopener">stormzhang</a> â€”â€” GitHubï¼š<a href="https://github.com/stormzhang" target="_blank" rel="noopener">https://github.com/stormzhang</a><br><a href="https://blog.csdn.net/lmj623565791" target="_blank" rel="noopener">å¼ é¸¿æ´‹</a> â€”â€” GitHubï¼š<a href="https://github.com/hongyangAndroid" target="_blank" rel="noopener">https://github.com/hongyangAndroid</a><br><a href="https://blog.csdn.net/singwhatiwanna" target="_blank" rel="noopener">ä»»ç‰åˆš</a> â€”â€” GitHubï¼š<a href="https://github.com/singwhatiwanna" target="_blank" rel="noopener">https://github.com/singwhatiwanna</a><br><a href="https://over140.cnblogs.com" target="_blank" rel="noopener">å†œæ°‘ä¼¯ä¼¯</a> â€”â€” GitHubï¼š<a href="https://github.com/over140" target="_blank" rel="noopener">https://github.com/over140</a><br><a href="https://pedant.cn" target="_blank" rel="noopener">ä¹¦å‘†å­</a> â€”â€” GitHubï¼š<a href="https://github.com/pedant" target="_blank" rel="noopener">https://github.com/pedant</a><br><a href="https://blog.csdn.net/lzyzsd" target="_blank" rel="noopener">å¤§å¤´é¬¼</a> â€”â€” GitHubï¼š<a href="https://github.com/lzyzsd" target="_blank" rel="noopener">https://github.com/lzyzsd</a><br><a href="http://blog.zhaiyifan.cn" target="_blank" rel="noopener">markzhai</a> â€”â€” GitHubï¼š<a href="https://github.com/markzhai" target="_blank" rel="noopener">https://github.com/markzhai</a></p><h5 id="Android-ç¤¾åŒº"><a href="#Android-ç¤¾åŒº" class="headerlink" title="Android ç¤¾åŒº"></a>Android ç¤¾åŒº</h5><p><a href="https://stackoverflow.com" target="_blank" rel="noopener">Stack OverFlow</a><br><a href="https://segmentfault.com/t/android" target="_blank" rel="noopener">SegmentFault</a><br><a href="https://juejin.im/welcome/android" target="_blank" rel="noopener">ç¨€åœŸæ˜é‡‘</a><br><a href="https://chinagdg.org" target="_blank" rel="noopener">è°·æ­Œå¼€å‘è€…ç¤¾åŒº</a><br><a href="http://www.android-studio.org" target="_blank" rel="noopener">Android Studio ä¸­æ–‡ç¤¾åŒº</a></p><h5 id="Android-é¢è¯•"><a href="#Android-é¢è¯•" class="headerlink" title="Android é¢è¯•"></a>Android é¢è¯•</h5><p><a href="https://github.com/stormzhang/android-interview-questions-cn" target="_blank" rel="noopener">Android é¢è¯•æŒ‡å—</a><br><a href="https://www.jianshu.com/p/d1efe2f31b6d" target="_blank" rel="noopener">Android é¢è¯•èµ„æ–™é›†åˆ</a></p><h4 id="RxJava"><a href="#RxJava" class="headerlink" title="RxJava"></a>RxJava</h4><p><a href="https://mcxiaoke.gitbooks.io/rxdocs/content" target="_blank" rel="noopener">RxJava æ–‡æ¡£</a>ï¼ˆä¸­æ–‡ç‰ˆï¼‰</p><h4 id="Flutter"><a href="#Flutter" class="headerlink" title="Flutter"></a>Flutter</h4><p><a href="https://flutterchina.club" target="_blank" rel="noopener">Flutter ä¸­æ–‡ç½‘</a><br><a href="https://book.flutterchina.club" target="_blank" rel="noopener">Flutter å®æˆ˜</a></p><h4 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h4><p><a href="https://hexo.io/zh-cn/docs" target="_blank" rel="noopener">Hexo æ–‡æ¡£</a>ï¼ˆä¸­æ–‡ç‰ˆï¼‰<br><a href="https://theme-next.org/docs" target="_blank" rel="noopener">Next Theme æ–‡æ¡£</a></p><h4 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h4><p><a href="https://www.runoob.com/markdown/md-tutorial.html" target="_blank" rel="noopener">Markdown æ•™ç¨‹</a></p>          </div> <h3 id="æ‹›è˜ç½‘ç«™"><a href="#æ‹›è˜ç½‘ç«™" class="headerlink" title="æ‹›è˜ç½‘ç«™"></a>æ‹›è˜ç½‘ç«™</h3><div class="note default">            <p><a href="https://www.lagou.com" target="_blank" rel="noopener">æ‹‰é’©ç½‘</a><br><a href="https://www.zhipin.com" target="_blank" rel="noopener">BOSSç›´è˜</a><br><a href="https://www.zhipin.com" target="_blank" rel="noopener">çŒè˜ç½‘</a><br><a href="https://cn.100offer.com" target="_blank" rel="noopener">100offer</a><br><a href="https://www.neitui.me" target="_blank" rel="noopener">å†…æ¨</a></p>          </div> ]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™å¯¼èˆª </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åœ¨çº¿å­¦ä¹  </tag>
            
            <tag> åœ¨çº¿è¯¾å ‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoå¸¸ç”¨å‘½ä»¤è¯¦è§£</title>
      <link href="/2018/08/20/Hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/"/>
      <url>/2018/08/20/Hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init [folder]</span><br></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªç½‘ç«™ã€‚å¦‚æœæ²¡æœ‰è®¾ç½® folder ï¼ŒHexo é»˜è®¤åœ¨ç›®å‰çš„æ–‡ä»¶å¤¹å»ºç«‹ç½‘ç«™ã€‚</p><h3 id="new"><a href="#new" class="headerlink" title="new"></a>new</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure><p>æ–°å»ºä¸€ç¯‡æ–‡ç« ã€‚å¦‚æœæ²¡æœ‰è®¾ç½® layout çš„è¯ï¼Œé»˜è®¤ä½¿ç”¨ _config.yml ä¸­çš„ default_layout å‚æ•°ä»£æ›¿ã€‚å¦‚æœæ ‡é¢˜åŒ…å«ç©ºæ ¼çš„è¯ï¼Œè¯·ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚</p><a id="more"></a><h3 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br></pre></td></tr></table></figure><p>æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚<br>åœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åï¼‰ï¼Œå¦‚æœå‘ç°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚</p><h3 id="generate"><a href="#generate" class="headerlink" title="generate"></a>generate</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate    # ç®€å†™ï¼šhexo g</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆé™æ€æ–‡ä»¶ã€‚</p><h3 id="server"><a href="#server" class="headerlink" title="server"></a>server</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server    # ç®€å†™ï¼šhexo s</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š <a href="http://localhost:4000/ã€‚" target="_blank" rel="noopener">http://localhost:4000/ã€‚</a></p><h3 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy    # ç®€å†™ï¼šhexo d</span><br></pre></td></tr></table></figure><p>éƒ¨ç½²ç½‘ç«™ã€‚</p><h3 id="publish"><a href="#publish" class="headerlink" title="publish"></a>publish</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo publish [layout] &lt;filename&gt;</span><br></pre></td></tr></table></figure><p>å‘è¡¨è‰ç¨¿</p><h3 id="render"><a href="#render" class="headerlink" title="render"></a>render</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo render &lt;file1&gt; [file2] ...</span><br></pre></td></tr></table></figure><p>æ¸²æŸ“æ–‡ä»¶ã€‚</p><h3 id="migrate"><a href="#migrate" class="headerlink" title="migrate"></a>migrate</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo migrate &lt;type&gt;</span><br></pre></td></tr></table></figure><p>ä»å…¶ä»–åšå®¢ç³»ç»Ÿè¿ç§»å†…å®¹ã€‚</p><h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo list &lt;type&gt;</span><br></pre></td></tr></table></figure><p>åˆ—å‡ºç½‘ç«™èµ„æ–™ã€‚</p><h3 id="version"><a href="#version" class="headerlink" title="version"></a>version</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo version    # ç®€å†™ï¼šhexo v</span><br></pre></td></tr></table></figure><p>æ˜¾ç¤º Hexo ç‰ˆæœ¬ã€‚</p><h3 id="é€‰é¡¹"><a href="#é€‰é¡¹" class="headerlink" title="é€‰é¡¹"></a>é€‰é¡¹</h3><h4 id="å®‰å…¨æ¨¡å¼"><a href="#å®‰å…¨æ¨¡å¼" class="headerlink" title="å®‰å…¨æ¨¡å¼"></a>å®‰å…¨æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo --safe</span><br></pre></td></tr></table></figure><p>åœ¨å®‰å…¨æ¨¡å¼ä¸‹ï¼Œä¸ä¼šè½½å…¥æ’ä»¶å’Œè„šæœ¬ã€‚å½“æ‚¨åœ¨å®‰è£…æ–°æ’ä»¶é­é‡é—®é¢˜æ—¶ï¼Œå¯ä»¥å°è¯•ä»¥å®‰å…¨æ¨¡å¼é‡æ–°æ‰§è¡Œã€‚</p><h4 id="è°ƒè¯•æ¨¡å¼"><a href="#è°ƒè¯•æ¨¡å¼" class="headerlink" title="è°ƒè¯•æ¨¡å¼"></a>è°ƒè¯•æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo --debug</span><br></pre></td></tr></table></figure><p>åœ¨ç»ˆç«¯ä¸­æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯å¹¶è®°å½•åˆ° debug.logã€‚å½“æ‚¨ç¢°åˆ°é—®é¢˜æ—¶ï¼Œå¯ä»¥å°è¯•ç”¨è°ƒè¯•æ¨¡å¼é‡æ–°æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ æäº¤è°ƒè¯•ä¿¡æ¯åˆ° GitHubã€‚</p><h4 id="ç®€æ´æ¨¡å¼"><a href="#ç®€æ´æ¨¡å¼" class="headerlink" title="ç®€æ´æ¨¡å¼"></a>ç®€æ´æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo --silent</span><br></pre></td></tr></table></figure><p>éšè—ç»ˆç«¯ä¿¡æ¯ã€‚</p><h4 id="è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„"><a href="#è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„" class="headerlink" title="è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„"></a>è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># ä½¿ç”¨ custom.yml ä»£æ›¿é»˜è®¤çš„ _config.yml</span><br><span class="line">$ hexo server --config custom.yml</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨ custom.yml å’Œ custom2.jsonï¼Œå…¶ä¸­ custom2.json ä¼˜å…ˆçº§æ›´é«˜</span><br><span class="line">$ hexo generate --config custom.yml,custom2.json,custom3.yml</span><br></pre></td></tr></table></figure><p>è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼ŒæŒ‡å®šè¿™ä¸ªå‚æ•°åå°†ä¸å†ä½¿ç”¨é»˜è®¤çš„ _config.ymlã€‚<br>ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª YAML æˆ– JSON æ–‡ä»¶çš„è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€—å·åˆ†éš”ï¼ˆæ— ç©ºæ ¼ï¼‰çš„å¤šä¸ª YAML æˆ– JSON æ–‡ä»¶çš„è·¯å¾„ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># ä½¿ç”¨ custom.yml ä»£æ›¿é»˜è®¤çš„ _config.yml</span><br><span class="line">$ hexo server --config custom.yml</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨ custom.yml, custom2.json å’Œ custom3.ymlï¼Œå…¶ä¸­ custom3.yml ä¼˜å…ˆçº§æœ€é«˜ï¼Œå…¶æ¬¡æ˜¯ custom2.json</span><br><span class="line">$ hexo generate --config custom.yml,custom2.json,custom3.yml</span><br></pre></td></tr></table></figure><p>å½“ä½ æŒ‡å®šäº†å¤šä¸ªé…ç½®æ–‡ä»¶ä»¥åï¼ŒHexo ä¼šæŒ‰é¡ºåºå°†è¿™éƒ¨åˆ†é…ç½®æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ª _multiconfig.ymlã€‚å¦‚æœé‡åˆ°é‡å¤çš„é…ç½®ï¼Œæ’åœ¨åé¢çš„æ–‡ä»¶çš„é…ç½®ä¼šè¦†ç›–æ’åœ¨å‰é¢çš„æ–‡ä»¶çš„é…ç½®ã€‚è¿™ä¸ªåŸåˆ™é€‚ç”¨äºä»»æ„æ•°é‡ã€ä»»æ„æ·±åº¦çš„ YAML å’Œ JSON æ–‡ä»¶ã€‚</p><h4 id="æ˜¾ç¤ºè‰ç¨¿"><a href="#æ˜¾ç¤ºè‰ç¨¿" class="headerlink" title="æ˜¾ç¤ºè‰ç¨¿"></a>æ˜¾ç¤ºè‰ç¨¿</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo --draft</span><br></pre></td></tr></table></figure><p>æ˜¾ç¤º source/_drafts æ–‡ä»¶å¤¹ä¸­çš„è‰ç¨¿æ–‡ç« ã€‚</p><h4 id="è‡ªå®šä¹‰-CWD"><a href="#è‡ªå®šä¹‰-CWD" class="headerlink" title="è‡ªå®šä¹‰ CWD"></a>è‡ªå®šä¹‰ CWD</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo --cwd /path/to/cwd</span><br></pre></td></tr></table></figure><p>è‡ªå®šä¹‰å½“å‰å·¥ä½œç›®å½•ï¼ˆCurrent working directoryï¼‰çš„è·¯å¾„ã€‚</p><h3 id="ç»„åˆå‘½ä»¤"><a href="#ç»„åˆå‘½ä»¤" class="headerlink" title="ç»„åˆå‘½ä»¤"></a>ç»„åˆå‘½ä»¤</h3><ol><li><p>ç”Ÿæˆé™æ€æ–‡ä»¶åè‡ªåŠ¨éƒ¨ç½²ç½‘ç«™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate --deploy    # ç®€å†™ï¼šhexo g -d</span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿæˆé™æ€æ–‡ä»¶åè‡ªåŠ¨éƒ¨ç½²ç½‘ç«™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate &amp;&amp; hexo deploy    # ç®€å†™ï¼šhexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure></li><li><p>å…ˆæ¸…é™¤ç¼“å­˜æ–‡ä»¶ï¼Œç„¶åå†ç”Ÿæˆé™æ€æ–‡ä»¶åè‡ªåŠ¨éƒ¨ç½²ç½‘ç«™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy    # ç®€å†™ï¼šhexo clean &amp;&amp; hexo g &amp;&amp; hexo  d</span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿæˆé™æ€æ–‡ä»¶åè‡ªåŠ¨å¯åŠ¨ Hexo æœåŠ¡å™¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate &amp;&amp; hexo server    # ç®€å†™ï¼šhexo g &amp;&amp; hexo  s</span><br></pre></td></tr></table></figure></li><li><p>å…ˆæ¸…é™¤ç¼“å­˜æ–‡ä»¶ï¼Œç„¶åå†ç”Ÿæˆé™æ€æ–‡ä»¶åè‡ªåŠ¨å¯åŠ¨ Hexo æœåŠ¡å™¨</p><pre><code>$ hexo clean &amp;&amp; hexo generate &amp;&amp; hexo server    # ç®€å†™ï¼šhexo clean &amp;&amp; hexo g &amp;&amp; hexo  s</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoæ­å»ºä¸ªäººåšå®¢ï¼ˆä¸‰ï¼‰ï¼šä¸»é¢˜ç¾åŒ–</title>
      <link href="/2018/08/17/Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96/"/>
      <url>/2018/08/17/Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h3 id="è‡ªå®šæ ·å¼"><a href="#è‡ªå®šæ ·å¼" class="headerlink" title="è‡ªå®šæ ·å¼"></a>è‡ªå®šæ ·å¼</h3><p>æ‚¨å¯ä»¥å°†æ‰€æœ‰è‡ªå®šä¹‰æ ·å¼æ–‡ä»¶æ”¾åœ¨ <code>hexo-size/source/_data</code> ç›®å½•ä¸‹ã€‚<br>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code> ï¼Œå–æ¶ˆ <code>custom_file_path</code> å‰é¢çš„æ³¨é‡Šã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">custom_file_path:</span><br><span class="line">  #head: source/_data/head.swig</span><br><span class="line">  #header: source/_data/header.swig</span><br><span class="line">  #sidebar: source/_data/sidebar.swig</span><br><span class="line">  #postMeta: source/_data/post-meta.swig</span><br><span class="line">  #postBodyEnd: source/_data/post-body-end.swig</span><br><span class="line">  #footer: source/_data/footer.swig</span><br><span class="line">  #bodyEnd: source/_data/body-end.swig</span><br><span class="line">  #variable: source/_data/variables.styl</span><br><span class="line">  #mixin: source/_data/mixins.styl</span><br><span class="line">  style: source/_data/styles.styl</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="è®¾ç½®-RSS"><a href="#è®¾ç½®-RSS" class="headerlink" title="è®¾ç½® RSS"></a>è®¾ç½® RSS</h3><p>NexT ä¸­ RSS æœ‰ä¸‰ä¸ªè®¾ç½®é€‰é¡¹ï¼Œæ»¡è¶³ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯ã€‚</p><ul><li>falseï¼šç¦ç”¨ RSSï¼Œä¸åœ¨é¡µé¢ä¸Šæ˜¾ç¤º RSS è¿æ¥ã€‚</li><li>ç•™ç©ºï¼šä½¿ç”¨ Hexo ç”Ÿæˆçš„ Feed é“¾æ¥ã€‚ ä½ å¯ä»¥éœ€è¦å…ˆå®‰è£… <a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="noopener">hexo-generator-feed</a> æ’ä»¶ã€‚</li><li>å…·ä½“çš„URLï¼šè¿™ä¸ªURLéœ€è¦æ‚¨æå‰ç”Ÿæˆï¼ˆå¦‚ï¼š/atom.xmlï¼‰ã€‚<br>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code> ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rss: false    # ç¦ç”¨ RSS</span><br></pre></td></tr></table></figure></li></ul><h3 id="æ·»åŠ ã€Œåˆ†ç±»ã€é¡µé¢"><a href="#æ·»åŠ ã€Œåˆ†ç±»ã€é¡µé¢" class="headerlink" title="æ·»åŠ ã€Œåˆ†ç±»ã€é¡µé¢"></a>æ·»åŠ ã€Œåˆ†ç±»ã€é¡µé¢</h3><p>åœ¨ç»ˆç«¯çª—å£ä¸‹ï¼Œå®šä½åˆ° Hexo ç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œä½¿ç”¨ <code>hexo new page</code> å‘½ä»¤æ–°å»ºä¸€ä¸ªé¡µé¢ï¼Œå‘½åä¸º <code>categories</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new page categories</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä¼šåœ¨ <code>hexo-size/source</code> ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª <code>categories</code> æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€ <code>categories</code> æ–‡ä»¶å¤¹ï¼Œä¿®æ”¹ <code>index.md</code> æ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: åˆ†ç±»</span><br><span class="line">date: 2019-08-20 13:17:57</span><br><span class="line">type: &quot;categories&quot;    # å°†é¡µé¢çš„ç±»å‹è®¾ç½®ä¸º categories</span><br><span class="line">comments: false       # è¯¥é¡µé¢ç¦ç”¨è¯„è®º</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code> ï¼Œ æ·»åŠ  <code>categories</code> åˆ° <code>menu</code> ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || home                       # é¦–é¡µ</span><br><span class="line">  archives: /archives/ || archive       # å½’æ¡£</span><br><span class="line">  categories: /categories/ || th        # åˆ†ç±»</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ ã€Œæ ‡ç­¾ã€é¡µé¢"><a href="#æ·»åŠ ã€Œæ ‡ç­¾ã€é¡µé¢" class="headerlink" title="æ·»åŠ ã€Œæ ‡ç­¾ã€é¡µé¢"></a>æ·»åŠ ã€Œæ ‡ç­¾ã€é¡µé¢</h3><p>åœ¨ç»ˆç«¯çª—å£ä¸‹ï¼Œå®šä½åˆ° Hexo ç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œä½¿ç”¨ <code>hexo new page</code> å‘½ä»¤æ–°å»ºä¸€ä¸ªé¡µé¢ï¼Œå‘½åä¸º <code>tags</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new page tags</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä¼šåœ¨ <code>hexo-size/source</code> ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª <code>tags</code> æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€ <code>tags</code> æ–‡ä»¶å¤¹ï¼Œä¿®æ”¹ <code>index.md</code> æ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: æ ‡ç­¾</span><br><span class="line">date: 2019-08-20 13:17:57</span><br><span class="line">type: &quot;tags&quot;       # å°†é¡µé¢çš„ç±»å‹è®¾ç½®ä¸º tags</span><br><span class="line">comments: false    # è¯¥é¡µé¢ç¦ç”¨è¯„è®º</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code> ï¼Œ æ·»åŠ  <code>tags</code> åˆ° <code>menu</code> ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || home                       # é¦–é¡µ</span><br><span class="line">  archives: /archives/ || archive       # å½’æ¡£</span><br><span class="line">  categories: /categories/ || th        # åˆ†ç±»</span><br><span class="line">  tags: /tags/ || tags                  # æ ‡ç­¾</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ ã€Œå…³äºã€é¡µé¢"><a href="#æ·»åŠ ã€Œå…³äºã€é¡µé¢" class="headerlink" title="æ·»åŠ ã€Œå…³äºã€é¡µé¢"></a>æ·»åŠ ã€Œå…³äºã€é¡µé¢</h3><p>åœ¨ç»ˆç«¯çª—å£ä¸‹ï¼Œå®šä½åˆ° Hexo ç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œä½¿ç”¨ <code>hexo new page</code> å‘½ä»¤æ–°å»ºä¸€ä¸ªé¡µé¢ï¼Œå‘½åä¸º <code>about</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new page about</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä¼šåœ¨ <code>hexo-size/source</code> ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª <code>about</code> æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€ <code>about</code> æ–‡ä»¶å¤¹ï¼Œä¿®æ”¹ <code>index.md</code> æ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">title: å…³äº</span><br><span class="line">date: 2019-08-20 13:17:57</span><br><span class="line">type: &quot;about&quot;      # å°†é¡µé¢çš„ç±»å‹è®¾ç½®ä¸º about</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code> ï¼Œ æ·»åŠ  <code>about</code> åˆ° <code>menu</code> ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || home                       # é¦–é¡µ</span><br><span class="line">  archives: /archives/ || archive       # å½’æ¡£</span><br><span class="line">  categories: /categories/ || th        # åˆ†ç±»</span><br><span class="line">  tags: /tags/ || tags                  # æ ‡ç­¾</span><br><span class="line">  about: /about/ || user                # å…³äº</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®ä»£ç å—æ ·å¼"><a href="#è®¾ç½®ä»£ç å—æ ·å¼" class="headerlink" title="è®¾ç½®ä»£ç å—æ ·å¼"></a>è®¾ç½®ä»£ç å—æ ·å¼</h3><p>NexT ä½¿ç”¨ <a href="https://github.com/chriskempson/tomorrow-theme" target="_blank" rel="noopener">Tomorrow Theme</a> ä½œä¸ºä»£ç é«˜äº®ï¼Œå…±æœ‰5æ¬¾ä¸»é¢˜ä¾›ä½ é€‰æ‹©ã€‚</p><ul><li>normal</li><li>night</li><li>night blue</li><li>night bright</li><li>night eighties</li></ul><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">codeblock:  </span><br><span class="line">  highlight_theme: night    # è®¾ç½®ä»£ç é«˜äº®ä¸»é¢˜ä¸ºï¼šnight         </span><br><span class="line">  copy_button:</span><br><span class="line">    enable: true            # ä»£ç å—æ˜¯å¦æ·»åŠ å¤åˆ¶æŒ‰é’®</span><br><span class="line">    show_result: true       # æ˜¯å¦æ˜¾ç¤ºæ–‡æœ¬å¤åˆ¶ç»“æœ</span><br><span class="line">    style: flat             # å¤åˆ¶æŒ‰é’®çš„æ ·å¼ï¼Œå€¼ï¼šdefaultã€flatã€mac</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®é˜…è¯»è¿›åº¦æ¡æ ·å¼"><a href="#è®¾ç½®é˜…è¯»è¿›åº¦æ¡æ ·å¼" class="headerlink" title="è®¾ç½®é˜…è¯»è¿›åº¦æ¡æ ·å¼"></a>è®¾ç½®é˜…è¯»è¿›åº¦æ¡æ ·å¼</h3><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">reading_progress:</span><br><span class="line">  enable: false    # æ˜¯å¦å¯ç”¨é˜…è¯»è¿›åº¦æ¡</span><br><span class="line">  position: top    # ä½ç½®ï¼Œå€¼ï¼štopã€bottom</span><br><span class="line">  color: &quot;#37c6c0&quot; # é¢œè‰²</span><br><span class="line">  height: 2px      # é«˜åº¦</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®ä¹¦ç­¾"><a href="#è®¾ç½®ä¹¦ç­¾" class="headerlink" title="è®¾ç½®ä¹¦ç­¾"></a>è®¾ç½®ä¹¦ç­¾</h3><p>ä¹¦ç­¾æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œå…è®¸æ‚¨é˜…è¯»çš„æ—¶å€™ä¿å­˜é˜…è¯»è¿›åº¦ã€‚æ‚¨å¯ä»¥åœ¨é¡µé¢ä¸Šå•å‡»ä¹¦ç­¾å›¾æ ‡ï¼ˆå¦‚ï¼šğŸ”–ï¼‰ï¼Œå°†ä¼šä¿å­˜æ»šåŠ¨çš„ä½ç½®ï¼Œå½“æ‚¨ä¸‹æ¬¡å†è®¿é—®çš„æ—¶å€™ï¼Œä¾¿å¯ä»¥è‡ªåŠ¨æ¢å¤åˆ°æ¯ä¸ªé¡µé¢çš„æœ€åæ»šåŠ¨ä½ç½®ã€‚<br>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bookmark:   </span><br><span class="line">  enable: false    # æ˜¯å¦å¯ç”¨ä¹¦ç­¾</span><br><span class="line">  color: &quot;#222&quot;    # ä¹¦ç­¾é¢œè‰²</span><br><span class="line">  # å¦‚æœæ˜¯ auto ï¼Œåˆ™åœ¨å…³é—­é¡µé¢æˆ–å•å‡»ä¹¦ç­¾å›¾æ ‡æ—¶ä¿å­˜é˜…è¯»è¿›åº¦</span><br><span class="line">  # å¦‚æœæ˜¯ manual ï¼Œåˆ™éœ€ç‚¹å‡»ä¹¦ç­¾å›¾æ ‡ä¿å­˜å®ƒ</span><br><span class="line">  save: auto       # ä¿å­˜è®¾ç½®ï¼Œå€¼ï¼šautoã€manual</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®ç¤¾äº¤é“¾æ¥"><a href="#è®¾ç½®ç¤¾äº¤é“¾æ¥" class="headerlink" title="è®¾ç½®ç¤¾äº¤é“¾æ¥"></a>è®¾ç½®ç¤¾äº¤é“¾æ¥</h3><p>ä¾§æ ç¤¾äº¤é“¾æ¥çš„ä¿®æ”¹åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€æ˜¯é“¾æ¥ï¼Œç¬¬äºŒæ˜¯é“¾æ¥å›¾æ ‡ã€‚</p><ul><li>socialï¼šè®¾ç½®ç¤¾äº¤é“¾æ¥ã€‚</li><li>social_iconsï¼šè®¾ç½®ç¤¾äº¤é“¾æ¥å›¾æ ‡ã€‚</li></ul><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">social:</span><br><span class="line">  GitHub: https://github.com/pengzhenjin || github</span><br><span class="line">  E-Mail: mailto:562260994@qq.com || envelope</span><br><span class="line">  #Weibo: https://weibo.com/yourname || weibo</span><br><span class="line">  #Google: https://plus.google.com/yourname || google</span><br><span class="line">  #Twitter: https://twitter.com/yourname || twitter</span><br><span class="line">  #FB Page: https://www.facebook.com/yourname || facebook</span><br><span class="line">  #VK Group: https://vk.com/yourname || vk</span><br><span class="line">  #StackOverflow: https://stackoverflow.com/yourname || stack-overflow</span><br><span class="line">  #YouTube: https://youtube.com/yourname || youtube</span><br><span class="line">  #Instagram: https://instagram.com/yourname || instagram</span><br><span class="line">  #Skype: skype:yourname?call|chat || skype</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">social_icons:</span><br><span class="line">  enable: true        # æ˜¯å¦å¯ç”¨ç¤¾äº¤é“¾æ¥å›¾æ ‡</span><br><span class="line">  icons_only: false</span><br><span class="line">  transition: false</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®å‹æƒ…é“¾æ¥"><a href="#è®¾ç½®å‹æƒ…é“¾æ¥" class="headerlink" title="è®¾ç½®å‹æƒ…é“¾æ¥"></a>è®¾ç½®å‹æƒ…é“¾æ¥</h3><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">links_settings:</span><br><span class="line">  icon: link        # å‹æƒ…é“¾æ¥å›¾æ ‡</span><br><span class="line">  title: å‹æƒ…é“¾æ¥    # å‹æƒ…é“¾æ¥æ ‡é¢˜</span><br><span class="line">  layout: inline    # å‹æƒ…é“¾æ¥å¸ƒå±€æ ·å¼ï¼Œå€¼ï¼šblockã€inline</span><br><span class="line"></span><br><span class="line">links:</span><br><span class="line">  Hexo: https://hexo.io/zh-cn</span><br><span class="line">  NexT: https://theme-next.org/docs</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®æ–‡ç« ç›®å½•"><a href="#è®¾ç½®æ–‡ç« ç›®å½•" class="headerlink" title="è®¾ç½®æ–‡ç« ç›®å½•"></a>è®¾ç½®æ–‡ç« ç›®å½•</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNexT çš„æ–‡ç« ç›®å½•æ˜¾ç¤ºåœ¨ä¾§è¾¹æ ä¸­ã€‚<br>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">toc:</span><br><span class="line">  enable: true      # æ˜¯å¦ä½¿ç”¨æ–‡ç« ç›®å½•</span><br><span class="line">  number: true      # æ˜¯å¦è‡ªåŠ¨ç¼–å·</span><br><span class="line">  wrap: false       # å¦‚æœæ ‡é¢˜è¶…é•¿ï¼Œæ˜¯å¦æ¢è¡Œ</span><br><span class="line">  expand_all: true  # æ ‡é¢˜ç›®å½•æ˜¯å¦å®Œå…¨å±•å¼€</span><br><span class="line">  max_depth: 6      # æœ€å¤§å±‚æ¬¡æ·±åº¦</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®å›åˆ°é¡¶éƒ¨æŒ‰é’®"><a href="#è®¾ç½®å›åˆ°é¡¶éƒ¨æŒ‰é’®" class="headerlink" title="è®¾ç½®å›åˆ°é¡¶éƒ¨æŒ‰é’®"></a>è®¾ç½®å›åˆ°é¡¶éƒ¨æŒ‰é’®</h3><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">back2top:</span><br><span class="line">  enable: true         # æ˜¯å¦å¯ç”¨å›åˆ°é¡¶éƒ¨æŒ‰é’®</span><br><span class="line">  sidebar: false       # æ˜¯å¦åœ¨ä¾§è¾¹æ æ˜¾ç¤ºå›åˆ°é¡¶éƒ¨æŒ‰é’®</span><br><span class="line">  scrollpercent: true  # æ˜¯å¦æ˜¾ç¤ºå½“å‰æ»šåŠ¨è¿›åº¦ç™¾åˆ†æ¯”</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®ç«™ç‚¹å»ºç«‹æ—¶é—´"><a href="#è®¾ç½®ç«™ç‚¹å»ºç«‹æ—¶é—´" class="headerlink" title="è®¾ç½®ç«™ç‚¹å»ºç«‹æ—¶é—´"></a>è®¾ç½®ç«™ç‚¹å»ºç«‹æ—¶é—´</h3><p>è¿™ä¸ªæ—¶é—´å°†åœ¨ç«™ç‚¹çš„åº•éƒ¨æ˜¾ç¤ºï¼Œä¾‹å¦‚ Â© 2018 - 2019ã€‚<br>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">footer:</span><br><span class="line">  since: 2018    # ç«™ç‚¹å»ºç«™å¹´ä»½ï¼Œå¦‚æœä¸é…ç½®ï¼Œé‡‡ç”¨å½“å‰å¹´ä»½</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®ç«™ç‚¹åº•éƒ¨å›¾æ ‡"><a href="#è®¾ç½®ç«™ç‚¹åº•éƒ¨å›¾æ ‡" class="headerlink" title="è®¾ç½®ç«™ç‚¹åº•éƒ¨å›¾æ ‡"></a>è®¾ç½®ç«™ç‚¹åº•éƒ¨å›¾æ ‡</h3><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">footer:</span><br><span class="line">  icon:                 </span><br><span class="line">    name: user        # å›¾æ ‡åç§°ï¼ŒSee: https://fontawesome.com/v4.7.0/icons</span><br><span class="line">    animated: true    # æ˜¯å¦å¼€å¯å›¾æ ‡åŠ¨ç”»</span><br><span class="line">    color: &quot;#808080&quot;  # å›¾æ ‡é¢œè‰²</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®ç«™ç‚¹åº•éƒ¨ç‰ˆæƒå£°æ˜"><a href="#è®¾ç½®ç«™ç‚¹åº•éƒ¨ç‰ˆæƒå£°æ˜" class="headerlink" title="è®¾ç½®ç«™ç‚¹åº•éƒ¨ç‰ˆæƒå£°æ˜"></a>è®¾ç½®ç«™ç‚¹åº•éƒ¨ç‰ˆæƒå£°æ˜</h3><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">footer:</span><br><span class="line">  copyright: &apos;å¼ ä¸‰ ç‰ˆæƒæ‰€æœ‰&apos;    # ç‰ˆæƒå£°æ˜</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®ç«™ç‚¹åº•éƒ¨å¹³å°ä¿¡æ¯"><a href="#è®¾ç½®ç«™ç‚¹åº•éƒ¨å¹³å°ä¿¡æ¯" class="headerlink" title="è®¾ç½®ç«™ç‚¹åº•éƒ¨å¹³å°ä¿¡æ¯"></a>è®¾ç½®ç«™ç‚¹åº•éƒ¨å¹³å°ä¿¡æ¯</h3><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">footer:</span><br><span class="line">  powered:          </span><br><span class="line">    enable: false   # æ˜¯å¦æ˜¾ç¤º Hexo é“¾æ¥(Powered by Hexo)</span><br><span class="line">    version: false  # æ˜¯å¦æ˜¾ç¤º Hexo é“¾æ¥åçš„ç‰ˆæœ¬ä¿¡æ¯(vX.X.X)</span><br><span class="line"></span><br><span class="line">  theme:    </span><br><span class="line">    enable: false   # æ˜¯å¦æ˜¾ç¤º Theme é“¾æ¥ä¿¡æ¯(Theme - NexT.scheme)</span><br><span class="line">    version: false  # æ˜¯å¦æ˜¾ç¤º Theme é“¾æ¥ä¿¡æ¯åçš„ç‰ˆæœ¬ä¿¡æ¯(vX.X.X)</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®ç«™ç‚¹åº•éƒ¨å¤‡æ¡ˆä¿¡æ¯"><a href="#è®¾ç½®ç«™ç‚¹åº•éƒ¨å¤‡æ¡ˆä¿¡æ¯" class="headerlink" title="è®¾ç½®ç«™ç‚¹åº•éƒ¨å¤‡æ¡ˆä¿¡æ¯"></a>è®¾ç½®ç«™ç‚¹åº•éƒ¨å¤‡æ¡ˆä¿¡æ¯</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNexT ä¸ä¼šæ˜¾ç¤º å¤‡æ¡ˆ ä¿¡æ¯ã€‚<br>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">footer:</span><br><span class="line">  beian:</span><br><span class="line">    enable: true</span><br><span class="line">    icp: äº¬ICPå¤‡ 1234567890å·-1</span><br><span class="line">    gongan_id: 1234567890</span><br><span class="line">    gongan_num: äº¬å…¬ç½‘å®‰å¤‡ 1234567890å·</span><br><span class="line">    gongan_icon_url: /uploads/beian.png</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®æ–‡ç« æ‘˜è¦"><a href="#è®¾ç½®æ–‡ç« æ‘˜è¦" class="headerlink" title="è®¾ç½®æ–‡ç« æ‘˜è¦"></a>è®¾ç½®æ–‡ç« æ‘˜è¦</h3><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">auto_excerpt:      </span><br><span class="line">  enable: true      # æ˜¯å¦å¯ç”¨è‡ªåŠ¨æ‘˜è¦,ä¸å»ºè®®ï¼Œè¯·ä½¿ç”¨&lt;!-- more --&gt;è¿›è¡Œç²¾ç¡®æ§åˆ¶</span><br><span class="line">  length: 150       # ä»å¼€å§‹å¾€åé€‰å–çš„æ‘˜è¦æ–‡å­—æ•°é‡</span><br><span class="line"></span><br><span class="line">read_more_btn: true # æ˜¯å¦æ˜¾ç¤º â€œé˜…è¯»å…¨æ–‡â€ æŒ‰é’®</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®æ–‡ç« -Meta"><a href="#è®¾ç½®æ–‡ç« -Meta" class="headerlink" title="è®¾ç½®æ–‡ç«  Meta"></a>è®¾ç½®æ–‡ç«  Meta</h3><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">post_meta:          </span><br><span class="line">  item_text: true      # æ˜¯å¦æ˜¾ç¤ºæ–‡ç«  â€œå‘è¡¨äºXXâ€</span><br><span class="line">  created_at: true     # æ˜¯å¦æ˜¾ç¤ºæ–‡ç« åˆ›å»ºæ—¥æœŸ</span><br><span class="line">  updated_at:    </span><br><span class="line">    enable: false      # æ˜¯å¦æ˜¾ç¤ºæ–‡ç« ä¿®æ”¹æ—¥æœŸ</span><br><span class="line">    another_day: true</span><br><span class="line">  categories: true     # æ˜¯å¦æ˜¾ç¤ºæ–‡ç« æ‰€å±åˆ†ç±»</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®æ–‡ç« å­—æ•°ç»Ÿè®¡å’Œé˜…è¯»æ—¶é•¿"><a href="#è®¾ç½®æ–‡ç« å­—æ•°ç»Ÿè®¡å’Œé˜…è¯»æ—¶é•¿" class="headerlink" title="è®¾ç½®æ–‡ç« å­—æ•°ç»Ÿè®¡å’Œé˜…è¯»æ—¶é•¿"></a>è®¾ç½®æ–‡ç« å­—æ•°ç»Ÿè®¡å’Œé˜…è¯»æ—¶é•¿</h3><p>ä¾èµ–ç¬¬ä¸‰æ–¹æ’ä»¶ <code>hexo-symbols-count-time</code>ï¼ŒSeeï¼š<a href="https://github.com/theme-next/hexo-symbols-count-time" target="_blank" rel="noopener">https://github.com/theme-next/hexo-symbols-count-time</a>ã€‚<br>åœ¨ç»ˆç«¯çª—å£ä¸‹ï¼Œå®šä½åˆ° Hexo ç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œä½¿ç”¨ <code>npm install hexo-symbols-count-time --save</code> å‘½ä»¤å®‰è£…æ’ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-symbols-count-time --save</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåï¼Œåœ¨ ç«™ç‚¹é…ç½®æ–‡ä»¶ <code>_config.yml</code> ä¸­é…ç½® <code>symbols_count_time</code> ä¿¡æ¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">symbols_count_time:</span><br><span class="line">  symbols: true            # æ˜¯å¦åœ¨æ–‡ç«  meta ä¸­æ˜¾ç¤ºæœ¬æ–‡å­—æ•°</span><br><span class="line">  time: true               # æ˜¯å¦åœ¨æ–‡ç«  meta ä¸­æ˜¾ç¤ºé˜…è¯»æ—¶é•¿</span><br><span class="line">  total_symbols: true      # æ˜¯å¦åœ¨ç«™ç‚¹åº•éƒ¨æ˜¾ç¤ºæ€»å­—æ•°</span><br><span class="line">  total_time: true         # æ˜¯å¦åœ¨ç«™ç‚¹åº•éƒ¨æ˜¾ç¤ºé˜…è¯»æ—¶é•¿</span><br><span class="line">  exclude_codeblock: false</span><br></pre></td></tr></table></figure><p>æœ€ååœ¨ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code> ä¸­é…ç½® <code>symbols_count_time</code> ä¿¡æ¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">symbols_count_time:</span><br><span class="line">  separated_meta: true  </span><br><span class="line">  item_text_post: true  </span><br><span class="line">  item_text_total: true </span><br><span class="line">  awl: 4</span><br><span class="line">  wpm: 275</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®æ–‡ç« åº•éƒ¨æ ‡ç­¾å›¾æ ‡"><a href="#è®¾ç½®æ–‡ç« åº•éƒ¨æ ‡ç­¾å›¾æ ‡" class="headerlink" title="è®¾ç½®æ–‡ç« åº•éƒ¨æ ‡ç­¾å›¾æ ‡"></a>è®¾ç½®æ–‡ç« åº•éƒ¨æ ‡ç­¾å›¾æ ‡</h3><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tag_icon: true    # æ˜¯å¦æ˜¾ç¤ºæ ‡ç­¾å›¾æ ‡ï¼Œé»˜è®¤æ˜¾ç¤º â€œ#â€ ç¬¦å·</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®æ–‡ç« å¾®ä¿¡è®¢é˜…"><a href="#è®¾ç½®æ–‡ç« å¾®ä¿¡è®¢é˜…" class="headerlink" title="è®¾ç½®æ–‡ç« å¾®ä¿¡è®¢é˜…"></a>è®¾ç½®æ–‡ç« å¾®ä¿¡è®¢é˜…</h3><p>è·å–æ‚¨çš„å¾®ä¿¡äºŒç»´ç å›¾ç‰‡ï¼Œå°†å…¶æ”¾å…¥ <code>hexo-size/source/uploads</code> ç›®å½•ä¸‹ï¼Œå¦‚æœ uploads ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™æ–°å»ºã€‚<br>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wechat_subscriber:</span><br><span class="line">  enable: true</span><br><span class="line">  qcode: /uploads/wechat-qcode.jpg</span><br><span class="line">  description: Welcome to scan the WeChat Public Account QRcode and subscribe my blog!</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®æ‰“èµåŠŸèƒ½"><a href="#è®¾ç½®æ‰“èµåŠŸèƒ½" class="headerlink" title="è®¾ç½®æ‰“èµåŠŸèƒ½"></a>è®¾ç½®æ‰“èµåŠŸèƒ½</h3><p>è·å–æ‚¨çš„å¾®ä¿¡ã€æ”¯ä»˜å®æ”¶æ¬¾äºŒç»´ç å›¾ç‰‡ï¼Œå°†å…¶æ”¾å…¥ <code>hexo-size/source/uploads</code> ç›®å½•ä¸‹ï¼Œå¦‚æœ uploads ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™æ–°å»ºã€‚<br>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">reward_settings:</span><br><span class="line">  # If true, reward would be displayed in every article by default. # å¦‚æœä¸ºtrueï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ç¯‡æ–‡ç« éƒ½ä¼šæ˜¾ç¤ºå¥–åŠ±ã€‚</span><br><span class="line">  # You can show or hide reward in a specific article throuth `reward: true | false` in Front-matter.</span><br><span class="line">  enable: true</span><br><span class="line">  animation: false</span><br><span class="line">  #comment: Donate comment here.</span><br><span class="line"></span><br><span class="line">reward:</span><br><span class="line">  wechatpay: /uploads/wechatpay.png      # å¾®ä¿¡æ‰“èµäºŒç»´ç </span><br><span class="line">  alipay: /uploads/alipay.png            # æ”¯ä»˜å®æ‰“èµäºŒç»´ç </span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®ç›¸å…³æ–‡ç« åŠŸèƒ½"><a href="#è®¾ç½®ç›¸å…³æ–‡ç« åŠŸèƒ½" class="headerlink" title="è®¾ç½®ç›¸å…³æ–‡ç« åŠŸèƒ½"></a>è®¾ç½®ç›¸å…³æ–‡ç« åŠŸèƒ½</h3><p>ä¾èµ–ç¬¬ä¸‰æ–¹æ’ä»¶ <code>hexo-related-popular-posts</code>ï¼ŒSeeï¼š<a href="https://github.com/tea3/hexo-related-popular-posts" target="_blank" rel="noopener">https://github.com/tea3/hexo-related-popular-posts</a>ã€‚<br>åœ¨ç»ˆç«¯çª—å£ä¸‹ï¼Œå®šä½åˆ° Hexo ç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œä½¿ç”¨ <code>npm install hexo-related-popular-posts --save</code> å‘½ä»¤å®‰è£…æ’ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-related-popular-posts --save</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåï¼Œåœ¨ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code>ä¸­é…ç½® <code>related_posts</code> ä¿¡æ¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">related_posts: </span><br><span class="line">  enable: true</span><br><span class="line">  title:                   # é»˜è®¤æƒ…å†µä¸‹ï¼ŒNexT ä½¿ç”¨ â€œç›¸å…³æ–‡ç« â€ ä½œä¸ºæ ‡é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰</span><br><span class="line">  display_in_home: false   # æ˜¯å¦åœ¨ä¸»é¡µé¢æ˜¾ç¤ºç›¸å…³æ–‡ç« ä¿¡æ¯</span><br><span class="line">  params:</span><br><span class="line">    maxCount: 5            # æœ€å¤šæ˜¾ç¤º5ç¯‡ç›¸å…³æ–‡ç« ä¿¡æ¯ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ æœ¬åœ°æœç´¢"><a href="#æ·»åŠ æœ¬åœ°æœç´¢" class="headerlink" title="æ·»åŠ æœ¬åœ°æœç´¢"></a>æ·»åŠ æœ¬åœ°æœç´¢</h3><p>ä¾èµ–ç¬¬ä¸‰æ–¹æ’ä»¶ <code>hexo-generator-search</code>ï¼ŒSeeï¼š<a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener">https://github.com/wzpan/hexo-generator-search</a>ã€‚<br>åœ¨ç»ˆç«¯çª—å£ä¸‹ï¼Œå®šä½åˆ° Hexo ç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œä½¿ç”¨ <code>npm install hexo-generator-search --save</code> å‘½ä»¤å®‰è£…æ’ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåï¼Œåœ¨ ç«™ç‚¹é…ç½®æ–‡ä»¶ <code>_config.yml</code>ä¸­é…ç½® <code>search</code> ä¿¡æ¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 10000</span><br></pre></td></tr></table></figure><p>æœ€ååœ¨ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code> ä¸­é…ç½® <code>local_search</code> ä¿¡æ¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">local_search:</span><br><span class="line">  enable: true</span><br><span class="line"></span><br><span class="line">  # å¦‚æœå€¼ä¸º&apos;auto&apos;ï¼Œé€šè¿‡æ”¹å˜è¾“å…¥ä¿¡æ¯æ¥è§¦å‘æœç´¢ï¼›å¦‚æœå€¼ä¸º&apos;manual&apos;ï¼ŒæŒ‰enteré”®æˆ–searchæŒ‰é’®æ¥è§¦å‘æœç´¢</span><br><span class="line">  trigger: auto</span><br><span class="line"></span><br><span class="line">  # æ˜¾ç¤ºæ¯ç¯‡æ–‡ç« çš„å‰nä¸ªç»“æœï¼Œé€šè¿‡è®¾ç½®ä¸º-1æ˜¾ç¤ºæ‰€æœ‰ç»“æœ</span><br><span class="line">  top_n_per_article: 1</span><br><span class="line"></span><br><span class="line">  # æ˜¯å¦å°†htmlå­—ç¬¦ä¸²è§£ä¹‰ä¸ºå¯è¯»çš„å­—ç¬¦ä¸²</span><br><span class="line">  unescape: false</span><br><span class="line"></span><br><span class="line">  # æ˜¯å¦åœ¨é¡µé¢åŠ è½½æ—¶é¢„åŠ è½½æœç´¢æ•°æ®</span><br><span class="line">  preload: false</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®Gitalkè¯„è®ºç³»ç»Ÿ"><a href="#è®¾ç½®Gitalkè¯„è®ºç³»ç»Ÿ" class="headerlink" title="è®¾ç½®Gitalkè¯„è®ºç³»ç»Ÿ"></a>è®¾ç½®Gitalkè¯„è®ºç³»ç»Ÿ</h3><p>Gitalk æ˜¯ä¸€ä¸ªåŸºäº Github Issue çš„è¯„è®ºæ’ä»¶ï¼Œä½¿ç”¨ Github å¸å·ç™»å½•ï¼Œç•Œé¢å¹²å‡€æ•´æ´ï¼Œæ”¯æŒ MarkDown è¯­æ³•ã€‚</p><p>åœ¨è‡ªå·±çš„ Github è´¦å·ä¸‹åˆ›å»ºä¸€ä¸ªä»“åº“ç”¨æ¥å­˜æ”¾è¯„è®ºä¿¡æ¯ï¼Œä»“åº“ç±»å‹ä¸º public ã€‚<br><img src="screenshot_1.png" alt></p><p>åˆ›å»º Github OAuth Application ç”¨æ¥æˆæƒç™»å½•ï¼Œå¦‚æœæ²¡æœ‰ ç‚¹å‡»è¿™é‡Œæ³¨å†Œä¸€ä¸ªæ–°çš„ <a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">OAuth Application</a>ã€‚<br><img src="screenshot_2.png" alt></p><p>åˆ›å»ºå®Œæˆåï¼Œä¼šç”Ÿæˆä¸€ä¸ª <code>Client ID</code> å’Œ <code>Client Secret</code><br><img src="screenshot_3.png" alt></p><p>æœ€ååœ¨ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code> ä¸­é…ç½® <code>gitalk</code> ä¿¡æ¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">gitalk:</span><br><span class="line">  enable: true</span><br><span class="line">  github_id: &apos;pengzhenjin&apos;                                   # GitHubè´¦æˆ·å</span><br><span class="line">  repo: &apos;pengzhenjin.github.io&apos;                              # å­˜å‚¨è¯„è®ºçš„ä»“åº“å</span><br><span class="line">  client_id: &apos;2e07c2563cfbca1908e8&apos;                          # GitHub Application Client ID</span><br><span class="line">  client_secret: &apos;e7669e875bc3881cb2c3fea6ce057d03fd7afc5a&apos;  # GitHub Application Client Secret</span><br><span class="line">  admin_user: &apos;pengzhenjin&apos;                                  # GitHubè´¦æˆ·å</span><br><span class="line">  distraction_free_mode: true</span><br><span class="line">  language: zh-CN</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> åšå®¢ </tag>
            
            <tag> NexT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoæ­å»ºä¸ªäººåšå®¢ï¼ˆäºŒï¼‰ï¼šä¸»é¢˜é…ç½®</title>
      <link href="/2018/08/16/Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/08/16/Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯-NexT-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-NexT-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ NexT ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ NexT ï¼Ÿ</h3><p>Next æ˜¯ä¸“é—¨ä¸º Hexo è€Œå®šåˆ¶çš„ä¸€æ¬¾ä¸»é¢˜ã€‚å®ƒç®€å•ã€æ¸…æ–°ã€ä¼˜é›…ï¼Œä¸€ä¸ªä¸»é¢˜ï¼Œä¸‰ç§å¤–è§‚ï¼Œè€Œä¸”è¿˜æ”¯æŒå¤šç§è¯­è¨€ï¼Œé€‰æ‚¨æ‰€å¥½ã€‚</p><h3 id="é…ç½®æ–‡ä»¶è¯´æ˜"><a href="#é…ç½®æ–‡ä»¶è¯´æ˜" class="headerlink" title="é…ç½®æ–‡ä»¶è¯´æ˜"></a>é…ç½®æ–‡ä»¶è¯´æ˜</h3><p>åœ¨ Hexo ä¸­æœ‰ä¸¤ä»½ä¸»è¦çš„é…ç½®æ–‡ä»¶ï¼Œå…¶åç§°éƒ½æ˜¯ <code>_config.yml</code>ã€‚ å…¶ä¸­ï¼Œä¸€ä»½ä½äºç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œä¸»è¦åŒ…å« Hexo æœ¬èº«çš„é…ç½®ï¼›å¦ä¸€ä»½ä½äºä¸»é¢˜ç›®å½•ä¸‹ï¼Œè¿™ä»½é…ç½®ç”±ä¸»é¢˜ä½œè€…æä¾›ï¼Œä¸»è¦ç”¨äºé…ç½®ä¸»é¢˜ç›¸å…³çš„é€‰é¡¹ã€‚</p><a id="more"></a><p>ä¸ºäº†æè¿°æ–¹ä¾¿ï¼Œåœ¨ä»¥ä¸‹è¯´æ˜ä¸­ï¼Œå°†å‰è€…ç§°ä¸º <span class="label info">ç«™ç‚¹é…ç½®æ–‡ä»¶</span> ï¼Œ åè€…ç§°ä¸º <span class="label primary">ä¸»é¢˜é…ç½®æ–‡ä»¶</span> ã€‚</p><h3 id="å®‰è£…-NexT-ä¸»é¢˜"><a href="#å®‰è£…-NexT-ä¸»é¢˜" class="headerlink" title="å®‰è£… NexT ä¸»é¢˜"></a>å®‰è£… NexT ä¸»é¢˜</h3><p>Hexo å®‰è£…ä¸»é¢˜çš„æ–¹å¼éå¸¸ç®€å•ï¼Œåªéœ€è¦å°†ä¸»é¢˜æ–‡ä»¶æ‹·è´è‡³ Hexo ç«™ç‚¹æ ¹ç›®å½•çš„ themes ç›®å½•ä¸‹ï¼Œ ç„¶åä¿®æ”¹ä¸‹é…ç½®æ–‡ä»¶å³å¯ã€‚å…·ä½“åˆ° NexT æ¥è¯´ï¼Œå®‰è£…æ­¥éª¤å¦‚ä¸‹ã€‚</p><h3 id="ä¸‹è½½ä¸»é¢˜"><a href="#ä¸‹è½½ä¸»é¢˜" class="headerlink" title="ä¸‹è½½ä¸»é¢˜"></a>ä¸‹è½½ä¸»é¢˜</h3><p>åœ¨ Hexo ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¸‹è½½ä¸»é¢˜æ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><h3 id="å¯ç”¨ä¸»é¢˜"><a href="#å¯ç”¨ä¸»é¢˜" class="headerlink" title="å¯ç”¨ä¸»é¢˜"></a>å¯ç”¨ä¸»é¢˜</h3><p>ä¸æ‰€æœ‰ Hexo ä¸»é¢˜å¯ç”¨çš„æ¨¡å¼ä¸€æ ·ã€‚ å½“ å…‹éš†/ä¸‹è½½ å®Œæˆåï¼Œæ‰“å¼€ Hexo ç«™ç‚¹é…ç½®æ–‡ä»¶ <code>_config.yml</code> ï¼Œ æ‰¾åˆ° theme å­—æ®µï¼Œå¹¶å°†å…¶å€¼æ›´æ”¹ä¸º nextã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure><p>åˆ°æ­¤ï¼ŒNexT ä¸»é¢˜å®‰è£…å®Œæˆã€‚ä¸‹ä¸€æ­¥æˆ‘ä»¬å°†éªŒè¯ä¸»é¢˜æ˜¯å¦æ­£ç¡®å¯ç”¨ã€‚åœ¨åˆ‡æ¢ä¸»é¢˜ä¹‹åï¼ŒéªŒè¯ä¹‹å‰ï¼Œ æˆ‘ä»¬æœ€å¥½ä½¿ç”¨ <code>hexo clean</code> æ¥æ¸…é™¤ Hexo çš„ç¼“å­˜ã€‚</p><h3 id="éªŒè¯ä¸»é¢˜"><a href="#éªŒè¯ä¸»é¢˜" class="headerlink" title="éªŒè¯ä¸»é¢˜"></a>éªŒè¯ä¸»é¢˜</h3><p>é¦–å…ˆå¯åŠ¨ Hexo æœ¬åœ°ç«™ç‚¹ï¼Œå¹¶å¼€å¯è°ƒè¯•æ¨¡å¼ï¼ˆå³åŠ ä¸Š â€“debugï¼‰ï¼Œæ•´ä¸ªå‘½ä»¤æ˜¯ <code>hexo s --debug</code> ã€‚ åœ¨æœåŠ¡å¯åŠ¨çš„è¿‡ç¨‹ï¼Œæ³¨æ„è§‚å¯Ÿå‘½ä»¤è¡Œè¾“å‡ºæ˜¯å¦æœ‰ä»»ä½•å¼‚å¸¸ä¿¡æ¯ï¼Œå¦‚æœä½ ç¢°åˆ°é—®é¢˜ï¼Œè¿™äº›ä¿¡æ¯å°†å¸®åŠ©ä»–äººæ›´å¥½çš„å®šä½é”™è¯¯ã€‚ å½“å‘½ä»¤è¡Œè¾“å‡ºä¸­æç¤ºå‡ºã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INFO  Hexo is running at http://0.0.0.0:4000/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å³å¯ä½¿ç”¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> ï¼Œæ£€æŸ¥ç«™ç‚¹æ˜¯å¦æ­£ç¡®è¿è¡Œã€‚</p><div class="note success">            <p>å½“ä½ çœ‹åˆ°ç«™ç‚¹çš„å¤–è§‚ä¸ä¸‹å›¾æ‰€ç¤ºç±»ä¼¼æ—¶å³è¯´æ˜ä½ å·²æˆåŠŸå®‰è£… NexT ä¸»é¢˜ã€‚è¿™æ˜¯ NexT é»˜è®¤çš„ Scheme â€”â€” Muse<br><img src="screenshot_2.png" alt></p>          </div><p>ç°åœ¨ï¼Œä½ å·²ç»æˆåŠŸå®‰è£…å¹¶å¯ç”¨äº† NexT ä¸»é¢˜ã€‚</p><h3 id="ä¸»é¢˜è®¾å®š"><a href="#ä¸»é¢˜è®¾å®š" class="headerlink" title="ä¸»é¢˜è®¾å®š"></a>ä¸»é¢˜è®¾å®š</h3><h4 id="é€‰æ‹©-Scheme"><a href="#é€‰æ‹©-Scheme" class="headerlink" title="é€‰æ‹© Scheme"></a>é€‰æ‹© Scheme</h4><p>Scheme æ˜¯ NexT æä¾›çš„ä¸€ç§ç‰¹æ€§ï¼Œå€ŸåŠ©äº Schemeï¼ŒNexT ä¸ºä½ æä¾›å¤šç§ä¸åŒçš„å¤–è§‚ã€‚åŒæ—¶ï¼Œå‡ ä¹æ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥ åœ¨ Scheme ä¹‹é—´å…±ç”¨ã€‚ç›®å‰ NexT æ”¯æŒä¸‰ç§ Schemeï¼Œä»–ä»¬æ˜¯ï¼š</p><ul><li>Muse - é»˜è®¤ Schemeï¼Œè¿™æ˜¯ NexT æœ€åˆçš„ç‰ˆæœ¬ï¼Œé»‘ç™½ä¸»è°ƒï¼Œå¤§é‡ç•™ç™½ã€‚</li><li>Mist - Muse çš„ç´§å‡‘ç‰ˆæœ¬ï¼Œæ•´æ´æœ‰åºçš„å•æ å¤–è§‚ã€‚</li><li>Pisces - åŒæ  Schemeï¼Œå°å®¶ç¢§ç‰ä¼¼çš„æ¸…æ–°ã€‚</li><li>Gemini - çœ‹èµ·æ¥åƒ Pisces ï¼Œä½†æœ‰æ˜æ˜¾çš„æŸ±å—ä¸é˜´å½±ï¼Œä»¥æ˜¾å¾—æ›´æ•æ„Ÿçš„æ•ˆæœã€‚</li></ul><p>Scheme çš„åˆ‡æ¢é€šè¿‡æ›´æ”¹ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code> ï¼Œæœç´¢ scheme å…³é”®å­—ã€‚ ä½ ä¼šçœ‹åˆ°æœ‰å››è¡Œ scheme çš„é…ç½®ï¼Œå°†ä½ éœ€ç”¨å¯ç”¨çš„ scheme å‰é¢æ³¨é‡Š # å»é™¤å³å¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#scheme: Muse</span><br><span class="line">#scheme: Mist</span><br><span class="line">#scheme: Pisces</span><br><span class="line">scheme: Gemini</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®åŸºæœ¬ä¿¡æ¯"><a href="#è®¾ç½®åŸºæœ¬ä¿¡æ¯" class="headerlink" title="è®¾ç½®åŸºæœ¬ä¿¡æ¯"></a>è®¾ç½®åŸºæœ¬ä¿¡æ¯</h4><p>ç¼–è¾‘ ç«™ç‚¹é…ç½®æ–‡ä»¶ <code>_config.yml</code> ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">title: å¼ ä¸‰çš„åšå®¢ # ç«™ç‚¹åç§°</span><br><span class="line">subtitle:        # ç«™ç‚¹å‰¯æ ‡é¢˜</span><br><span class="line">description:     # ç«™ç‚¹æè¿°</span><br><span class="line">language: zh-CN  # è®¾ç½®ç½‘ç«™è¯­è¨€ä¸ºç®€ä½“ä¸­æ–‡</span><br><span class="line">author: å¼ ä¸‰     # ä½œè€…åç§°</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®èœå•ä¿¡æ¯"><a href="#è®¾ç½®èœå•ä¿¡æ¯" class="headerlink" title="è®¾ç½®èœå•ä¿¡æ¯"></a>è®¾ç½®èœå•ä¿¡æ¯</h4><p>èœå•è®¾ç½®é¡¹çš„æ ¼å¼ä¸º <code>Key: /link/ || icon</code> ã€‚</p><ul><li>Keyï¼šèœå•çš„åç§°(å¦‚ï¼šhomeã€tagsç­‰)ã€‚</li><li>linkï¼šèœå•çš„é“¾æ¥(å¦‚ï¼štagsã€categories)ã€‚</li><li>iconï¼šèœå•çš„å›¾æ ‡(å¦‚ï¼štagsã€thç­‰)ï¼ŒNexT ä½¿ç”¨çš„æ˜¯ <a href="https://fontawesome.com/?from=io" target="_blank" rel="noopener">Font Awesome</a> æä¾›çš„å›¾æ ‡ã€‚</li></ul><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code> ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || home                   # ä¸»é¡µ</span><br><span class="line">  tags: /tags/ || tags              # æ ‡ç­¾</span><br><span class="line">  categories: /categories/ || th    # åˆ†ç±»</span><br><span class="line">  archives: /archives/ || archive   # å½’æ¡£</span><br><span class="line">  #about: /about/ || user           # å…³äº</span><br><span class="line">  #schedule: /schedule/ || calendar # æ—¥ç¨‹è¡¨</span><br><span class="line">  #sitemap: /sitemap.xml || sitemap # ç«™ç‚¹åœ°å›¾</span><br><span class="line">  #commonweal: /404/ || heartbeat   # å…¬ç›Š404</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®ä¾§æ ä¿¡æ¯"><a href="#è®¾ç½®ä¾§æ ä¿¡æ¯" class="headerlink" title="è®¾ç½®ä¾§æ ä¿¡æ¯"></a>è®¾ç½®ä¾§æ ä¿¡æ¯</h4><p>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code> ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sidebar:</span><br><span class="line">  position: left  # ä¾§æ ä½ç½®ï¼Œå€¼ï¼šleftã€rigth</span><br><span class="line">  display: post  # ä¾§æ æ˜¾ç¤ºçš„æ—¶æœºï¼ˆä»…é€‚ç”¨äº Museã€Mist ä¸»é¢˜ï¼‰ï¼Œå€¼ï¼špostã€alwaysã€hideã€remove</span><br><span class="line">  offset: 12      # ä¾§æ è·ç¦»é¡¶éƒ¨èœå•æ¡çš„è·ç¦»ï¼ˆä»…é€‚ç”¨äº Piscesã€Gemini ä¸»é¢˜ï¼‰ï¼Œå€¼ï¼šxxåƒç´ </span><br><span class="line">  onmobile: false # æ˜¯å¦åœ¨çª„å±è®¾å¤‡ä¸Šæ˜¾ç¤ºä¾§æ ï¼ˆä»…é€‚ç”¨äº Museã€Mist ä¸»é¢˜ï¼‰ï¼Œå€¼ï¼štrueã€false</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®ç½‘ç«™å›¾æ ‡"><a href="#è®¾ç½®ç½‘ç«™å›¾æ ‡" class="headerlink" title="è®¾ç½®ç½‘ç«™å›¾æ ‡"></a>è®¾ç½®ç½‘ç«™å›¾æ ‡</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHexo ä½¿ç”¨ <code>hexo-site/themes/next/source/images</code> ç›®å½•ä¸­çš„ NexT faviconsï¼Œä¸åŒçš„è®¾å¤‡ä½¿ç”¨ä¸åŒå¤§å°çš„ NexT favicons ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ä½ è‡ªå·±çš„å›¾æ ‡æ›¿æ¢å®ƒä»¬ã€‚<br>æ‚¨å¯ä»¥å°†æ‚¨çš„ favicons æ”¾åœ¨ <code>hexo-site/source/images</code> ç›®å½•ä¸‹ã€‚<br>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code> ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">favicon:</span><br><span class="line">  small: /images/favicon-16x16-next.png</span><br><span class="line">  medium: /images/favicon-32x32-next.png</span><br><span class="line">  apple_touch_icon: /images/apple-touch-icon-next.png</span><br><span class="line">  safari_pinned_tab: /images/logo.svg</span><br><span class="line">  android_manifest: /images/manifest.json</span><br><span class="line">  ms_browserconfig: /images/browserconfig.xml</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®å¤´åƒ"><a href="#è®¾ç½®å¤´åƒ" class="headerlink" title="è®¾ç½®å¤´åƒ"></a>è®¾ç½®å¤´åƒ</h4><p>å°†æ‚¨çš„å¤´åƒå›¾ç‰‡æ”¾åœ¨ <code>themes/next/source/images</code> ç›®å½•ä¸‹ã€‚<br>ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.yml</code> ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">avatar:</span><br><span class="line">  url: /images/avatar.png # å¤´åƒè·¯å¾„</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> åšå®¢ </tag>
            
            <tag> NexT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoæ­å»ºä¸ªäººåšå®¢ï¼ˆä¸€ï¼‰ï¼šåŸºç¡€å®‰è£…</title>
      <link href="/2018/08/15/Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%9F%BA%E7%A1%80%E5%AE%89%E8%A3%85/"/>
      <url>/2018/08/15/Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%9F%BA%E7%A1%80%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>éšç€äº’è”ç½‘æµªæ½®çš„ç¿»è…¾ï¼Œå›½å†…å¤–å·²ç»æ¶Œç°å‡ºè¶Šæ¥è¶Šå¤šä¼˜ç§€çš„ç¤¾äº¤ç½‘ç«™è®©ç”¨æˆ·åˆ†äº«ä¿¡æ¯æ›´åŠ ä¾¿æ·ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ªä¸ç”˜å •è½çš„å·¥ç¨‹ç‹®æˆ–ç¨‹åºçŒ¿ï¼Œæ˜¯å¦ä¹Ÿæƒ³è¦æ‹¥æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢ç½‘ç«™å‘¢ï¼Ÿå¦‚æœä½ æ›¾ç»æˆ–è€…ç°åœ¨æ­£æœ‰è¿™æ ·çš„æƒ³æ³•ï¼Œé‚£å°±è¯·è·Ÿéšè¿™ç¯‡æ–‡ç« ï¼Œå‘æŒ¥ä½ çš„Geekç²¾ç¥ï¼Œè®©ä½ å¿«é€Ÿæ‹¥æœ‰è‡ªå·±çš„åšå®¢ç½‘ç«™ã€‚æ–‡ç« å†…å®¹å¦‚æœæœ‰é”™è¯¯ï¼Œè¯·åœ¨æ–‡ç« ä¸‹é¢çš„è¯„è®ºä¸­ç•™è¨€æŒ‡æ­£ï¼Œè°¢è°¢ï¼</p><a id="more"></a><h3 id="ä»€ä¹ˆæ˜¯-Hexo-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Hexo-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Hexo ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Hexo ï¼Ÿ</h3><p><a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚<a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> ä½¿ç”¨ <a href="https://daringfireball.net/projects/markdown" target="_blank" rel="noopener">Markdown</a>ï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚</p><p><img src="screenshot_1.jpg" alt></p><h3 id="å®‰è£…-Node-js"><a href="#å®‰è£…-Node-js" class="headerlink" title="å®‰è£… Node.js"></a>å®‰è£… Node.js</h3><p>åœ¨ <a href="https://nodejs.org/en/download" target="_blank" rel="noopener">Node.js å®˜ç½‘</a> ä¸‹è½½ 6.9 åŠä»¥ä¸Šç‰ˆæœ¬çš„å®‰è£…åŒ…ï¼Œå¹¶è¿›è¡Œå®‰è£…ã€‚ Node.js çš„å®‰è£…å¯ä»¥å‚è€ƒ<a href="https://www.runoob.com/nodejs/nodejs-install-setup.html" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><p>å®‰è£…å®Œåï¼Œè¯·åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒæŸ¥çœ‹ Node.js ç‰ˆæœ¬ï¼Œæ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œå¦‚ï¼š<code>v10.10.3</code>ï¼Œåˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸï¼Œå¦åˆ™å®‰è£…å¤±è´¥ã€‚</p><h3 id="å®‰è£…-Git"><a href="#å®‰è£…-Git" class="headerlink" title="å®‰è£… Git"></a>å®‰è£… Git</h3><p>åœ¨ <a href="https://git-scm.com/download/win" target="_blank" rel="noopener">Gitå®˜ç½‘</a> ä¸‹è½½å®‰è£…åŒ…ï¼Œå¹¶è¿›è¡Œå®‰è£…ã€‚Gitçš„å®‰è£…å¯ä»¥å‚è€ƒ<a href="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><p>å®‰è£…å®Œåï¼Œè¯·åœ¨ Git Bash ä¸­æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒæŸ¥çœ‹ Git ç‰ˆæœ¬ï¼Œæ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œå¦‚ï¼š<code>git version 2.22.0.windows.1</code>ï¼Œåˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸï¼Œå¦åˆ™å®‰è£…å¤±è´¥ã€‚</p><p>è¯·åœ¨ Git Bash ä¸­æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼Œè®¾ç½® user.name å’Œ user.email é…ç½®ä¿¡æ¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;ä½ çš„githubç”¨æˆ·å&quot;</span><br><span class="line">git config --global user.email &quot;ä½ çš„githubæ³¨å†Œé‚®ç®±&quot;</span><br></pre></td></tr></table></figure><p>è¯·åœ¨ Git Bash ä¸­æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼Œç”Ÿæˆ SSH å…¬é’¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;é‚®ä»¶åœ°å€&quot;</span><br></pre></td></tr></table></figure><p>ç„¶åè¿ç»­æŒ‰3æ¬¡å›è½¦é”®ï¼Œä¼šåœ¨ç”¨æˆ·ç›®å½•ä¸‹ç”Ÿæˆ id_rsa.pub å…¬é’¥æ–‡ä»¶ã€‚<br>ç„¶ååœ¨ Git Bash ä¸­æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼Œå¤åˆ¶ id_rsa.pub å…¬é’¥æ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clip &lt; ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><p>æœ€ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ä½ çš„ github ä¸»é¡µï¼Œè¿›å…¥ Settings â€“&gt; SSH and GPG keys â€“&gt; New SSH keyï¼Œå°†åˆšå¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ° Key é‚£é‡Œï¼ŒTitle éšä¾¿å¡«ï¼Œç‚¹å‡» Add SSH keyã€‚</p><h3 id="å®‰è£…-Hexo"><a href="#å®‰è£…-Hexo" class="headerlink" title="å®‰è£… Hexo"></a>å®‰è£… Hexo</h3><p>æ‰€æœ‰å¿…å¤‡çš„åº”ç”¨ç¨‹åºå®‰è£…å®Œæˆåï¼Œå³å¯ä½¿ç”¨ npm å®‰è£… Hexoã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p><font color="#FF0000">æ³¨æ„ï¼šä»¥ä¸Šå‘½ä»¤è‚¯èƒ½å®‰è£…å¤±è´¥ï¼ŒåŸå› æ˜¯å›½å†… npm æºæœ‰é—®é¢˜ï¼Œè¯·ä½¿ç”¨æ·˜å®çš„ npm é•œåƒå®‰è£…ã€‚</font></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line">cnpm install hexo-cli -g</span><br></pre></td></tr></table></figure><p>å®‰è£… Hexo å®Œæˆåï¼Œè¯·æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;folder&gt;# å¦‚ï¼šhexo init blog</span><br><span class="line">cd &lt;folder&gt;# å¦‚ï¼šcd blog</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ node_modules// ä¾èµ–å®‰è£…ç›®å½•</span><br><span class="line">â”œâ”€â”€ scaffolds// æ¨¡ç‰ˆæ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ® scaffold æ¥å»ºç«‹æ–‡ä»¶ã€‚           </span><br><span class="line">â”œâ”€â”€ source// èµ„æºæ–‡ä»¶å¤¹ï¼Œç”¨äºæ”¾ç½®å›¾ç‰‡ã€æ•°æ®ã€æ–‡ç« ç­‰èµ„æº</span><br><span class="line">|   â””â”€â”€ _posts// æ–‡ç« ç›®å½•</span><br><span class="line">â”œâ”€â”€ themes// ä¸»é¢˜æ–‡ä»¶å¤¹ã€‚Hexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚</span><br><span class="line">|â””â”€â”€ landscape// é»˜è®¤ä¸»é¢˜</span><br><span class="line">â”œâ”€â”€ _config.yml// ç½‘ç«™çš„é…ç½®ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚</span><br><span class="line">â””â”€â”€ package.json// åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¯åŠ¨ Hex oå†…ç½®çš„ Web å®¹å™¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g# ç”Ÿæˆé™æ€æ–‡ä»¶</span><br><span class="line">$ hexo s# å¯åŠ¨ Hexo æœåŠ¡å™¨</span><br></pre></td></tr></table></figure><p>æœ€ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥åœ°å€ <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> å°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹é¡µé¢äº†ã€‚</p><p><img src="screenshot_2.png" alt></p><h3 id="å‘å¸ƒåˆ°-GitHub"><a href="#å‘å¸ƒåˆ°-GitHub" class="headerlink" title="å‘å¸ƒåˆ° GitHub"></a>å‘å¸ƒåˆ° GitHub</h3><p>åœ¨è‡ªå·±çš„ Github è´¦å·ä¸‹åˆ›å»ºä¸€ä¸ªä»“åº“ï¼Œæ¯”å¦‚ï¼Œæ‚¨çš„GitHubè´¦æˆ·åæ˜¯ zhangsan ï¼Œé‚£æ‚¨åˆ›å»ºçš„ä»“åº“ååº”è¯¥ä¸ºï¼šzhangsan.github.io ï¼Œè¿™æ˜¯å›ºå®šå†™æ³•ï¼ˆå¿…é¡»æ˜¯æ‚¨çš„ç”¨æˆ·åï¼Œå…¶å®ƒåç§°æ— æ•ˆï¼‰ï¼Œä»¥åæ‚¨çš„ç½‘ç«™è®¿é—®åœ°å€å°±æ˜¯ <a href="http://www.zhangsan.github.io" target="_blank" rel="noopener">http://www.zhangsan.github.io</a> ã€‚<br><img src="screenshot_3.png" alt></p><p>åœ¨ ç«™ç‚¹é…ç½®æ–‡ä»¶ <code>_config.yml</code>ï¼Œé…ç½®éƒ¨ç½²æœåŠ¡å™¨ä¿¡æ¯ï¼Œæ‚¨å¯åŒæ—¶ä½¿ç”¨å¤šä¸ª deployerï¼ŒHexo ä¼šä¾ç…§é¡ºåºæ‰§è¡Œæ¯ä¸ª deployerã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">deploy:            </span><br><span class="line">- type: git</span><br><span class="line">  repo: git@github.com:pengzhenjin/zhangsan.github.io.git    # éƒ¨ç½²åˆ°githubå¹³å°</span><br><span class="line">  branch: master</span><br><span class="line">- type: git</span><br><span class="line">  repo: git@git.dev.tencent.com:zhangsan/zhangsan.git        # éƒ¨ç½²åˆ°è…¾è®¯äº‘å¼€å‘è€…å¹³å°</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>åœ¨ç»ˆç«¯çª—å£ä¸‹ï¼Œå®šä½åˆ° Hexo ç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œä½¿ç”¨ <code>hexo clean</code> å‘½ä»¤æ¸…é™¤ç¼“å­˜æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ <code>hexo generate</code> å‘½ä»¤ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œæœ€åä½¿ç”¨ <code>hexo deploy</code> å‘½ä»¤éƒ¨ç½²åˆ°æœåŠ¡å™¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æ¸…é™¤ç¼“å­˜æ–‡ä»¶</span><br><span class="line">$ hexo clean</span><br><span class="line"></span><br><span class="line"># ç”Ÿæˆé™æ€æ–‡ä»¶</span><br><span class="line">$ hexo generate    # ç®€å†™ï¼šhexo g</span><br><span class="line"></span><br><span class="line"># éƒ¨ç½²åˆ°æœåŠ¡å™¨</span><br><span class="line">$ hexo deploy    # ç®€å†™ï¼šhexo d</span><br></pre></td></tr></table></figure><p>éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨å°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <a href="http://www.zhangsan.github.io" target="_blank" rel="noopener">http://www.zhangsan.github.io</a> ç½‘å€å°±è¡Œè®¿é—®äº†ã€‚</p><h3 id="ç»‘å®šåŸŸå"><a href="#ç»‘å®šåŸŸå" class="headerlink" title="ç»‘å®šåŸŸå"></a>ç»‘å®šåŸŸå</h3><p>åŸŸåæ˜¯ç½‘ç«™çš„å…¥å£ï¼Œä¹Ÿæ˜¯ç½‘ç«™çš„ç¬¬ä¸€å°è±¡ï¼Œå¦‚æœæ‚¨æƒ³æ›´ä¸ªæ€§ä¸€ç‚¹ï¼Œæƒ³æ‹¥æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„åŸŸåï¼Œé‚£å°±å¯ä»¥å»ç”³è¯·ä¸€ä¸ªåŸŸåï¼Œç„¶åè¿›è¡ŒåŸŸåç»‘å®šï¼Œå½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä¸ç»‘å®šåŸŸåï¼Œé‚£å°±ä½¿ç”¨é»˜è®¤çš„ <a href="http://www.zhangsan.github.io" target="_blank" rel="noopener">http://www.zhangsan.github.io</a> ç½‘å€è¿›è¡Œè®¿é—®ã€‚</p><p>ç”³è¯·åŸŸåçš„åœ°æ–¹æœ‰å¾ˆå¤šï¼Œè¿™é‡Œæ¨èå»é˜¿é‡Œäº‘ç”³è¯·ã€‚</p><p>ç”³è¯·æˆåŠŸåï¼Œç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œè¿›è¡ŒåŸŸåè§£æã€‚<br><img src="screenshot_4.png" alt></p><p>è¿›å…¥åœ¨æ‚¨ GitHubï¼Œæ‰“å¼€æ‚¨åˆ›å»ºçš„ zhangsan.github.io ä»“åº“ï¼Œè¿›è¡Œ Settings é¡µé¢è¿›è¡ŒåŸŸåç»‘å®šã€‚<br><img src="screenshot_5.png" alt><br><img src="screenshot_6.png" alt></p><p>æœ€åå°±å¯ä»¥ç”¨æ‚¨çš„åŸŸåè¿›è¡Œè®¿é—®äº†ï¼Œèµ¶ç´§è¯•è¯•å§ï¼</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> åšå®¢ </tag>
            
            <tag> NexT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitï¼šå†…éƒ¨åŸç†</title>
      <link href="/2018/06/12/Git%EF%BC%9A%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86/"/>
      <url>/2018/06/12/Git%EF%BC%9A%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>æ— è®ºæ˜¯ä»ä¹‹å‰çš„ç« èŠ‚ç›´æ¥è·³åˆ°æœ¬ç« ï¼Œè¿˜æ˜¯è¯»å®Œäº†å…¶ä½™ç« èŠ‚ä¸€ç›´åˆ°è¿™â€”â€”ä½ éƒ½å°†åœ¨æœ¬ç« è§è¯†åˆ° Git çš„å†…éƒ¨å·¥ä½œåŸç†å’Œå®ç°æ–¹å¼ã€‚ æˆ‘ä»¬å‘ç°å­¦ä¹ è¿™éƒ¨åˆ†å†…å®¹å¯¹äºç†è§£ Git çš„ç”¨é€”å’Œå¼ºå¤§è‡³å…³é‡è¦ã€‚ä¸è¿‡ä¹Ÿæœ‰äººè®¤ä¸ºè¿™äº›å†…å®¹å¯¹äºåˆå­¦è€…è€Œè¨€å¯èƒ½éš¾ä»¥ç†è§£ä¸”è¿‡äºå¤æ‚ã€‚ å› æ­¤æˆ‘ä»¬æŠŠè¿™éƒ¨åˆ†å†…å®¹æ”¾åœ¨æœ€åä¸€ç« ï¼Œåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­å¯ä»¥å…ˆé˜…è¯»è¿™éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥æ™šç‚¹é˜…è¯»è¿™éƒ¨åˆ†ï¼Œè¿™å–å†³äºä½ è‡ªå·±ã€‚</p><a id="more"></a><p>æ— è®ºå¦‚ä½•ï¼Œæ—¢ç„¶å·²ç»è¯»åˆ°äº†è¿™é‡Œï¼Œå°±è®©æˆ‘ä»¬å¼€å§‹å§ã€‚ é¦–å…ˆè¦å¼„æ˜ç™½ä¸€ç‚¹ï¼Œä»æ ¹æœ¬ä¸Šæ¥è®² Git æ˜¯ä¸€ä¸ªå†…å®¹å¯»å€ï¼ˆcontent-addressableï¼‰æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨æ­¤ä¹‹ä¸Šæä¾›äº†ä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ç”¨æˆ·ç•Œé¢ã€‚ é©¬ä¸Šä½ å°±ä¼šå­¦åˆ°è¿™æ„å‘³ç€ä»€ä¹ˆã€‚</p><p>æ—©æœŸçš„ Gitï¼ˆä¸»è¦æ˜¯ 1.5 ä¹‹å‰çš„ç‰ˆæœ¬ï¼‰çš„ç”¨æˆ·ç•Œé¢è¦æ¯”ç°åœ¨å¤æ‚çš„å¤šï¼Œå› ä¸ºå®ƒæ›´ä¾§é‡äºä½œä¸ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ‰“ç£¨è¿‡çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚ ä¸æ—¶ä¼šæœ‰ä¸€äº›é™ˆè¯æ»¥è°ƒæŠ±æ€¨æ—©æœŸé‚£ä¸ªæ™¦æ¶©å¤æ‚çš„ Git ç”¨æˆ·ç•Œé¢ï¼›ä¸è¿‡æœ€è¿‘å‡ å¹´æ¥ï¼Œå®ƒå·²ç»è¢«æ”¹è¿›åˆ°ä¸è¾“äºä»»ä½•å…¶ä»–ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿåœ°æ¸…æ™°æ˜“ç”¨äº†ã€‚</p><p>å†…å®¹å¯»å€æ–‡ä»¶ç³»ç»Ÿå±‚æ˜¯ä¸€å¥—ç›¸å½“é…·çš„ä¸œè¥¿ï¼Œæ‰€ä»¥åœ¨æœ¬ç« æˆ‘ä»¬ä¼šå…ˆè®²è§£è¿™éƒ¨åˆ†å†…å®¹ã€‚éšåæˆ‘ä»¬ä¼šå­¦ä¹ ä¼ è¾“æœºåˆ¶å’Œç‰ˆæœ¬åº“ç®¡ç†ä»»åŠ¡â€”â€”ä½ è¿Ÿæ—©ä¼šå’Œå®ƒä»¬æ‰“äº¤é“ã€‚</p><h3 id="åº•å±‚å‘½ä»¤å’Œé«˜å±‚å‘½ä»¤"><a href="#åº•å±‚å‘½ä»¤å’Œé«˜å±‚å‘½ä»¤" class="headerlink" title="åº•å±‚å‘½ä»¤å’Œé«˜å±‚å‘½ä»¤"></a>åº•å±‚å‘½ä»¤å’Œé«˜å±‚å‘½ä»¤</h3><p>æœ¬ä¹¦æ—¨åœ¨è®¨è®ºå¦‚ä½•é€šè¿‡ checkoutã€branchã€remote ç­‰å¤§çº¦ 30 ä¸ªè¯¸å¦‚æ­¤ç±»åŠ¨è¯å½¢å¼çš„å‘½ä»¤æ¥ç©è½¬ Gitã€‚ ç„¶è€Œï¼Œç”±äº Git æœ€åˆæ˜¯ä¸€å¥—é¢å‘ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„å·¥å…·é›†ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€ç”¨æˆ·å‹å¥½çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ‰€ä»¥å®ƒè¿˜åŒ…å«äº†ä¸€éƒ¨åˆ†ç”¨äºå®Œæˆåº•å±‚å·¥ä½œçš„å‘½ä»¤ã€‚ è¿™äº›å‘½ä»¤è¢«è®¾è®¡æˆèƒ½ä»¥ UNIX å‘½ä»¤è¡Œçš„é£æ ¼è¿æ¥åœ¨ä¸€èµ·ï¼ŒæŠ‘æˆ–è—‰ç”±è„šæœ¬è°ƒç”¨ï¼Œæ¥å®Œæˆå·¥ä½œã€‚ è¿™éƒ¨åˆ†å‘½ä»¤ä¸€èˆ¬è¢«ç§°ä½œâ€œåº•å±‚ï¼ˆplumbingï¼‰â€å‘½ä»¤ï¼Œè€Œé‚£äº›æ›´å‹å¥½çš„å‘½ä»¤åˆ™è¢«ç§°ä½œâ€œé«˜å±‚ï¼ˆporcelainï¼‰â€å‘½ä»¤ã€‚</p><p>æœ¬ä¹¦å‰ä¹ç« ä¸“æ³¨äºæ¢è®¨é«˜å±‚å‘½ä»¤ã€‚ ç„¶è€Œåœ¨æœ¬ç« ï¼Œæˆ‘ä»¬å°†ä¸»è¦é¢å¯¹åº•å±‚å‘½ä»¤ã€‚ å› ä¸ºï¼Œåº•å±‚å‘½ä»¤å¾—ä»¥è®©ä½ çª¥æ¢ Git å†…éƒ¨çš„å·¥ä½œæœºåˆ¶ï¼Œä¹Ÿæœ‰åŠ©äºè¯´æ˜ Git æ˜¯å¦‚ä½•å®Œæˆå·¥ä½œçš„ï¼Œä»¥åŠå®ƒä¸ºä½•å¦‚æ­¤è¿ä½œã€‚ å¤šæ•°åº•å±‚å‘½ä»¤å¹¶ä¸é¢å‘æœ€ç»ˆç”¨æˆ·ï¼šå®ƒä»¬æ›´é€‚åˆä½œä¸ºæ–°å‘½ä»¤å’Œè‡ªå®šä¹‰è„šæœ¬çš„ç»„æˆéƒ¨åˆ†ã€‚</p><p>å½“åœ¨ä¸€ä¸ªæ–°ç›®å½•æˆ–å·²æœ‰ç›®å½•æ‰§è¡Œ git init æ—¶ï¼ŒGit ä¼šåˆ›å»ºä¸€ä¸ª .git ç›®å½•ã€‚ è¿™ä¸ªç›®å½•åŒ…å«äº†å‡ ä¹æ‰€æœ‰ Git å­˜å‚¨å’Œæ“ä½œçš„å¯¹è±¡ã€‚ å¦‚è‹¥æƒ³å¤‡ä»½æˆ–å¤åˆ¶ä¸€ä¸ªç‰ˆæœ¬åº“ï¼Œåªéœ€æŠŠè¿™ä¸ªç›®å½•æ‹·è´è‡³å¦ä¸€å¤„å³å¯ã€‚ æœ¬ç« æ¢è®¨çš„æ‰€æœ‰å†…å®¹ï¼Œå‡ä½äºè¿™ä¸ªç›®å½•å†…ã€‚ è¯¥ç›®å½•çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ls -F1</span><br><span class="line">HEAD</span><br><span class="line">config*</span><br><span class="line">description</span><br><span class="line">hooks/</span><br><span class="line">info/</span><br><span class="line">objects/</span><br><span class="line">refs/</span><br></pre></td></tr></table></figure><p>è¯¥ç›®å½•ä¸‹å¯èƒ½è¿˜ä¼šåŒ…å«å…¶ä»–æ–‡ä»¶ï¼Œä¸è¿‡å¯¹äºä¸€ä¸ªå…¨æ–°çš„ git init ç‰ˆæœ¬åº“ï¼Œè¿™å°†æ˜¯ä½ çœ‹åˆ°çš„é»˜è®¤ç»“æ„ã€‚ description æ–‡ä»¶ä»…ä¾› GitWeb ç¨‹åºä½¿ç”¨ï¼Œæˆ‘ä»¬æ— éœ€å…³å¿ƒã€‚ config æ–‡ä»¶åŒ…å«é¡¹ç›®ç‰¹æœ‰çš„é…ç½®é€‰é¡¹ã€‚ info ç›®å½•åŒ…å«ä¸€ä¸ªå…¨å±€æ€§æ’é™¤ï¼ˆglobal excludeï¼‰æ–‡ä»¶ï¼Œç”¨ä»¥æ”¾ç½®é‚£äº›ä¸å¸Œæœ›è¢«è®°å½•åœ¨ .gitignore æ–‡ä»¶ä¸­çš„å¿½ç•¥æ¨¡å¼ï¼ˆignored patternsï¼‰ã€‚ hooks ç›®å½•åŒ…å«å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯çš„é’©å­è„šæœ¬ï¼ˆhook scriptsï¼‰ï¼Œåœ¨ Git é’©å­ ä¸­è¿™éƒ¨åˆ†è¯é¢˜å·²è¢«è¯¦ç»†æ¢è®¨è¿‡ã€‚</p><p>å‰©ä¸‹çš„å››ä¸ªæ¡ç›®å¾ˆé‡è¦ï¼šHEAD æ–‡ä»¶ã€ï¼ˆå°šå¾…åˆ›å»ºçš„ï¼‰index æ–‡ä»¶ï¼Œå’Œ objects ç›®å½•ã€refs ç›®å½•ã€‚ è¿™äº›æ¡ç›®æ˜¯ Git çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ã€‚ objects ç›®å½•å­˜å‚¨æ‰€æœ‰æ•°æ®å†…å®¹ï¼›refs ç›®å½•å­˜å‚¨æŒ‡å‘æ•°æ®ï¼ˆåˆ†æ”¯ï¼‰çš„æäº¤å¯¹è±¡çš„æŒ‡é’ˆï¼›HEAD æ–‡ä»¶æŒ‡ç¤ºç›®å‰è¢«æ£€å‡ºçš„åˆ†æ”¯ï¼›index æ–‡ä»¶ä¿å­˜æš‚å­˜åŒºä¿¡æ¯ã€‚ æˆ‘ä»¬å°†è¯¦ç»†åœ°é€ä¸€æ£€è§†è¿™å››éƒ¨åˆ†ï¼Œä»¥æœŸç†è§£ Git æ˜¯å¦‚ä½•è¿è½¬çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitï¼šè‡ªå®šä¹‰</title>
      <link href="/2018/06/11/Git%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89/"/>
      <url>/2018/06/11/Git%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitï¼šå·¥å…·</title>
      <link href="/2018/06/10/Git%EF%BC%9A%E5%B7%A5%E5%85%B7/"/>
      <url>/2018/06/10/Git%EF%BC%9A%E5%B7%A5%E5%85%B7/</url>
      
        <content type="html"><![CDATA[<p>ç°åœ¨ï¼Œä½ å·²ç»å­¦ä¹ äº†ç®¡ç†æˆ–è€…ç»´æŠ¤ Git ä»“åº“ã€å®ç°ä»£ç æ§åˆ¶æ‰€éœ€çš„å¤§å¤šæ•°æ—¥å¸¸å‘½ä»¤å’Œå·¥ä½œæµç¨‹ã€‚ ä½ å·²ç»å°è¯•äº†è·Ÿè¸ªå’Œæäº¤æ–‡ä»¶çš„åŸºæœ¬æ“ä½œï¼Œå¹¶ä¸”å‘æŒ¥äº†æš‚å­˜åŒºå’Œè½»é‡çº§çš„åˆ†æ”¯åŠåˆå¹¶çš„å¨åŠ›ã€‚</p><p>æ¥ä¸‹æ¥ä½ å°†å­¦ä¹ ä¸€äº› Git çš„å¼ºå¤§åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä½ å¯èƒ½å¹¶ä¸ä¼šåœ¨æ—¥å¸¸æ“ä½œä¸­ä½¿ç”¨ï¼Œä½†åœ¨æŸäº›æ—¶å€™ä½ å¯èƒ½ä¼šéœ€è¦ã€‚</p><h3 id="é€‰æ‹©ä¿®è®¢ç‰ˆæœ¬"><a href="#é€‰æ‹©ä¿®è®¢ç‰ˆæœ¬" class="headerlink" title="é€‰æ‹©ä¿®è®¢ç‰ˆæœ¬"></a>é€‰æ‹©ä¿®è®¢ç‰ˆæœ¬</h3><p>Git å…è®¸ä½ é€šè¿‡å‡ ç§æ–¹æ³•æ¥æŒ‡æ˜ç‰¹å®šçš„æˆ–è€…ä¸€å®šèŒƒå›´å†…çš„æäº¤ã€‚ äº†è§£å®ƒä»¬å¹¶ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†æ˜¯äº†è§£ä¸€ä¸‹æ€»æ²¡åå¤„ã€‚</p><a id="more"></a><h4 id="å•ä¸ªä¿®è®¢ç‰ˆæœ¬"><a href="#å•ä¸ªä¿®è®¢ç‰ˆæœ¬" class="headerlink" title="å•ä¸ªä¿®è®¢ç‰ˆæœ¬"></a>å•ä¸ªä¿®è®¢ç‰ˆæœ¬</h4><p>ä½ å¯ä»¥é€šè¿‡ Git ç»™å‡ºçš„ SHA-1 å€¼æ¥è·å–ä¸€æ¬¡æäº¤ï¼Œä¸è¿‡è¿˜æœ‰å¾ˆå¤šæ›´äººæ€§åŒ–çš„æ–¹å¼æ¥åšåŒæ ·çš„äº‹æƒ…ã€‚ æœ¬èŠ‚å°†ä¼šä»‹ç»è·å–å•ä¸ªæäº¤çš„å¤šç§æ–¹æ³•ã€‚</p><h4 id="ç®€çŸ­çš„-SHA-1"><a href="#ç®€çŸ­çš„-SHA-1" class="headerlink" title="ç®€çŸ­çš„ SHA-1"></a>ç®€çŸ­çš„ SHA-1</h4><p>Git ååˆ†æ™ºèƒ½ï¼Œä½ åªéœ€è¦æä¾› SHA-1 çš„å‰å‡ ä¸ªå­—ç¬¦å°±å¯ä»¥è·å¾—å¯¹åº”çš„é‚£æ¬¡æäº¤ï¼Œå½“ç„¶ä½ æä¾›çš„ SHA-1 å­—ç¬¦æ•°é‡ä¸å¾—å°‘äº 4 ä¸ªï¼Œå¹¶ä¸”æ²¡æœ‰æ­§ä¹‰â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å‰ä»“åº“ä¸­åªæœ‰ä¸€ä¸ªå¯¹è±¡ä»¥è¿™æ®µ SHA-1 å¼€å¤´ã€‚</p><p>ä¾‹å¦‚æŸ¥çœ‹ä¸€æ¬¡æŒ‡å®šçš„æäº¤ï¼Œå‡è®¾ä½ æ‰§è¡Œ <code>git log</code> å‘½ä»¤æ¥æŸ¥çœ‹ä¹‹å‰æ–°å¢ä¸€ä¸ªåŠŸèƒ½çš„é‚£æ¬¡æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">commit 734713bc047d87bf7eac9674765ae793478c50d3</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Fri Jan 2 18:32:33 2009 -0800</span><br><span class="line"></span><br><span class="line">    fixed refs handling, added gc auto, updated tests</span><br><span class="line"></span><br><span class="line">commit d921970aadf03b3cf0e71becdaab3147ba71cdef</span><br><span class="line">Merge: 1c002dd... 35cfb2b...</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 11 15:08:43 2008 -0800</span><br><span class="line"></span><br><span class="line">    Merge commit &apos;phedders/rdocs&apos;</span><br><span class="line"></span><br><span class="line">commit 1c002dd4b536e7479fe34593e72e6c6c1819e53b</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 11 14:58:32 2008 -0800</span><br><span class="line"></span><br><span class="line">    added some blame and merge stuff</span><br></pre></td></tr></table></figure><p>å‡è®¾è¿™ä¸ªæäº¤æ˜¯ <code>1c002dd....</code>ï¼Œå¦‚æœä½ æƒ³ <code>git show</code> è¿™ä¸ªæäº¤ï¼Œä¸‹é¢çš„å‘½ä»¤æ˜¯ç­‰ä»·çš„ï¼ˆå‡è®¾ç®€çŸ­çš„ç‰ˆæœ¬æ²¡æœ‰æ­§ä¹‰ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git show 1c002dd4b536e7479fe34593e72e6c6c1819e53b</span><br><span class="line">$ git show 1c002dd4b536e7479f</span><br><span class="line">$ git show 1c002d</span><br></pre></td></tr></table></figure><p>Git å¯ä»¥ä¸º SHA-1 å€¼ç”Ÿæˆå‡ºç®€çŸ­ä¸”å”¯ä¸€çš„ç¼©å†™ã€‚ å¦‚æœä½ åœ¨ <code>git log</code> ååŠ ä¸Š <code>--abbrev-commit</code> å‚æ•°ï¼Œè¾“å‡ºç»“æœé‡Œå°±ä¼šæ˜¾ç¤ºç®€çŸ­ä¸”å”¯ä¸€çš„å€¼ï¼›é»˜è®¤ä½¿ç”¨ä¸ƒä¸ªå­—ç¬¦ï¼Œä¸è¿‡æœ‰æ—¶ä¸ºäº†é¿å… SHA-1 çš„æ­§ä¹‰ï¼Œä¼šå¢åŠ å­—ç¬¦æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git log --abbrev-commit --pretty=oneline</span><br><span class="line">ca82a6d changed the version number</span><br><span class="line">085bb3b removed unnecessary test code</span><br><span class="line">a11bef0 first commit</span><br></pre></td></tr></table></figure><p>é€šå¸¸ 8 åˆ° 10 ä¸ªå­—ç¬¦å°±å·²ç»è¶³å¤Ÿåœ¨ä¸€ä¸ªé¡¹ç›®ä¸­é¿å… SHA-1 çš„æ­§ä¹‰ã€‚</p><p>æ¯”å¦‚ Linux å†…æ ¸è¿™ä¸ªç›¸å½“å¤§çš„ Git é¡¹ç›®ï¼Œç›®å‰æœ‰è¶…è¿‡ 45 ä¸‡ä¸ªæäº¤ï¼ŒåŒ…å« 360 ä¸‡ä¸ªå¯¹è±¡ï¼Œä¹Ÿåªéœ€è¦å‰ 11 ä¸ªå­—ç¬¦å°±èƒ½ä¿è¯å”¯ä¸€æ€§ã€‚</p><h4 id="åˆ†æ”¯å¼•ç”¨"><a href="#åˆ†æ”¯å¼•ç”¨" class="headerlink" title="åˆ†æ”¯å¼•ç”¨"></a>åˆ†æ”¯å¼•ç”¨</h4><p>æŒ‡æ˜ä¸€æ¬¡æäº¤æœ€ç›´æ¥çš„æ–¹æ³•æ˜¯æœ‰ä¸€ä¸ªæŒ‡å‘å®ƒçš„åˆ†æ”¯å¼•ç”¨ã€‚ è¿™æ ·ä½ å°±å¯ä»¥åœ¨ä»»æ„ä¸€ä¸ª Git å‘½ä»¤ä¸­ä½¿ç”¨è¿™ä¸ªåˆ†æ”¯åæ¥ä»£æ›¿å¯¹åº”çš„æäº¤å¯¹è±¡æˆ–è€… SHA-1 å€¼ã€‚ ä¾‹å¦‚ï¼Œä½ æƒ³è¦æŸ¥çœ‹ä¸€ä¸ªåˆ†æ”¯çš„æœ€åä¸€æ¬¡æäº¤çš„å¯¹è±¡ï¼Œå‡è®¾ <code>topic1</code> åˆ†æ”¯æŒ‡å‘ <code>ca82a6d</code> ï¼Œé‚£ä¹ˆä»¥ä¸‹çš„å‘½ä»¤æ˜¯ç­‰ä»·çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git show ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">$ git show topic1</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³çŸ¥é“æŸä¸ªåˆ†æ”¯æŒ‡å‘å“ªä¸ªç‰¹å®šçš„ SHA-1ï¼Œæˆ–è€…æƒ³çœ‹ä»»ä½•ä¸€ä¸ªä¾‹å­ä¸­è¢«ç®€å†™çš„ SHA-1 ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå«åš <code>rev-parse</code> çš„ Git æ¢æµ‹å·¥å…·ã€‚ ä½ å¯ä»¥åœ¨ Git å†…éƒ¨åŸç† ä¸­æŸ¥çœ‹æ›´å¤šå…³äºæ¢æµ‹å·¥å…·çš„ä¿¡æ¯ã€‚ç®€å•æ¥è¯´ï¼Œ<code>rev-parse</code> æ˜¯ä¸ºäº†åº•å±‚æ“ä½œè€Œä¸æ˜¯æ—¥å¸¸æ“ä½œè®¾è®¡çš„ã€‚ ä¸è¿‡ï¼Œæœ‰æ—¶ä½ æƒ³çœ‹ Git ç°åœ¨åˆ°åº•å¤„äºä»€ä¹ˆçŠ¶æ€æ—¶ï¼Œå®ƒå¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚ ä½ å¯ä»¥åœ¨ä½ çš„åˆ†æ”¯ä¸Šæ‰§è¡Œ <code>rev-parse</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git rev-parse topic1</span><br><span class="line">ca82a6dff817ec66f44342007202690a93763949</span><br></pre></td></tr></table></figure><h4 id="å¼•ç”¨æ—¥å¿—"><a href="#å¼•ç”¨æ—¥å¿—" class="headerlink" title="å¼•ç”¨æ—¥å¿—"></a>å¼•ç”¨æ—¥å¿—</h4><p>å½“ä½ åœ¨å·¥ä½œæ—¶ï¼Œ Git ä¼šåœ¨åå°ä¿å­˜ä¸€ä¸ªå¼•ç”¨æ—¥å¿—ï¼ˆreflogï¼‰ï¼Œå¼•ç”¨æ—¥å¿—è®°å½•äº†æœ€è¿‘å‡ ä¸ªæœˆä½ çš„ HEAD å’Œåˆ†æ”¯å¼•ç”¨æ‰€æŒ‡å‘çš„å†å²ã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨ <code>git reflog</code> æ¥æŸ¥çœ‹å¼•ç”¨æ—¥å¿—</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog</span><br><span class="line">734713b HEAD@&#123;0&#125;: commit: fixed refs handling, added gc auto, updated</span><br><span class="line">d921970 HEAD@&#123;1&#125;: merge phedders/rdocs: Merge made by recursive.</span><br><span class="line">1c002dd HEAD@&#123;2&#125;: commit: added some blame and merge stuff</span><br><span class="line">1c36188 HEAD@&#123;3&#125;: rebase -i (squash): updating HEAD</span><br><span class="line">95df984 HEAD@&#123;4&#125;: commit: # This is a combination of two commits.</span><br><span class="line">1c36188 HEAD@&#123;5&#125;: rebase -i (squash): updating HEAD</span><br><span class="line">7e05da5 HEAD@&#123;6&#125;: rebase -i (pick): updating HEAD</span><br></pre></td></tr></table></figure><p>æ¯å½“ä½ çš„ HEAD æ‰€æŒ‡å‘çš„ä½ç½®å‘ç”Ÿäº†å˜åŒ–ï¼ŒGit å°±ä¼šå°†è¿™ä¸ªä¿¡æ¯å­˜å‚¨åˆ°å¼•ç”¨æ—¥å¿—è¿™ä¸ªå†å²è®°å½•é‡Œã€‚ é€šè¿‡è¿™äº›æ•°æ®ï¼Œä½ å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è·å–ä¹‹å‰çš„æäº¤å†å²ã€‚ å¦‚æœä½ æƒ³æŸ¥çœ‹ä»“åº“ä¸­ HEAD åœ¨äº”æ¬¡å‰çš„æ‰€æŒ‡å‘çš„æäº¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>@{n}</code> æ¥å¼•ç”¨ reflog ä¸­è¾“å‡ºçš„æäº¤è®°å½•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git show HEAD@&#123;5&#125;</span><br></pre></td></tr></table></figure><p>ä½ åŒæ ·å¯ä»¥ä½¿ç”¨è¿™ä¸ªè¯­æ³•æ¥æŸ¥çœ‹æŸä¸ªåˆ†æ”¯åœ¨ä¸€å®šæ—¶é—´å‰çš„ä½ç½®ã€‚ ä¾‹å¦‚ï¼ŒæŸ¥çœ‹ä½ çš„ <code>master</code> åˆ†æ”¯åœ¨æ˜¨å¤©çš„æ—¶å€™æŒ‡å‘äº†å“ªä¸ªæäº¤ï¼Œä½ å¯ä»¥è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git show master@&#123;yesterday&#125;</span><br></pre></td></tr></table></figure><p>å°±ä¼šæ˜¾ç¤ºæ˜¨å¤©è¯¥åˆ†æ”¯çš„é¡¶ç«¯æŒ‡å‘äº†å“ªä¸ªæäº¤ã€‚ è¿™ä¸ªæ–¹æ³•åªå¯¹è¿˜åœ¨ä½ å¼•ç”¨æ—¥å¿—é‡Œçš„æ•°æ®æœ‰ç”¨ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥æŸ¥å¥½å‡ ä¸ªæœˆä¹‹å‰çš„æäº¤ã€‚</p><p>å¯ä»¥è¿è¡Œ <code>git log -g</code> æ¥æŸ¥çœ‹ç±»ä¼¼äº <code>git log</code> è¾“å‡ºæ ¼å¼çš„å¼•ç”¨æ—¥å¿—ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ git log -g master</span><br><span class="line">commit 734713bc047d87bf7eac9674765ae793478c50d3</span><br><span class="line">Reflog: master@&#123;0&#125; (Scott Chacon &lt;schacon@gmail.com&gt;)</span><br><span class="line">Reflog message: commit: fixed refs handling, added gc auto, updated</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Fri Jan 2 18:32:33 2009 -0800</span><br><span class="line"></span><br><span class="line">    fixed refs handling, added gc auto, updated tests</span><br><span class="line"></span><br><span class="line">commit d921970aadf03b3cf0e71becdaab3147ba71cdef</span><br><span class="line">Reflog: master@&#123;1&#125; (Scott Chacon &lt;schacon@gmail.com&gt;)</span><br><span class="line">Reflog message: merge phedders/rdocs: Merge made by recursive.</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 11 15:08:43 2008 -0800</span><br><span class="line"></span><br><span class="line">    Merge commit &apos;phedders/rdocs&apos;</span><br></pre></td></tr></table></figure><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¼•ç”¨æ—¥å¿—åªå­˜åœ¨äºæœ¬åœ°ä»“åº“ï¼Œä¸€ä¸ªè®°å½•ä½ åœ¨ä½ è‡ªå·±çš„ä»“åº“é‡Œåšè¿‡ä»€ä¹ˆçš„æ—¥å¿—ã€‚ å…¶ä»–äººæ‹·è´çš„ä»“åº“é‡Œçš„å¼•ç”¨æ—¥å¿—ä¸ä¼šå’Œä½ çš„ç›¸åŒï¼›è€Œä½ æ–°å…‹éš†ä¸€ä¸ªä»“åº“çš„æ—¶å€™ï¼Œå¼•ç”¨æ—¥å¿—æ˜¯ç©ºçš„ï¼Œå› ä¸ºä½ åœ¨ä»“åº“é‡Œè¿˜æ²¡æœ‰æ“ä½œã€‚ <code>git show HEAD@{2.months.ago}</code> è¿™æ¡å‘½ä»¤åªæœ‰åœ¨ä½ å…‹éš†äº†ä¸€ä¸ªé¡¹ç›®è‡³å°‘ä¸¤ä¸ªæœˆæ—¶æ‰ä¼šæœ‰ç”¨â€”â€”å¦‚æœä½ æ˜¯äº”åˆ†é’Ÿå‰å…‹éš†çš„ä»“åº“ï¼Œé‚£ä¹ˆå®ƒå°†ä¸ä¼šæœ‰ç»“æœè¿”å›ã€‚</p><h4 id="ç¥–å…ˆå¼•ç”¨"><a href="#ç¥–å…ˆå¼•ç”¨" class="headerlink" title="ç¥–å…ˆå¼•ç”¨"></a>ç¥–å…ˆå¼•ç”¨</h4><p>ç¥–å…ˆå¼•ç”¨æ˜¯å¦ä¸€ç§æŒ‡æ˜ä¸€ä¸ªæäº¤çš„æ–¹å¼ã€‚ å¦‚æœä½ åœ¨å¼•ç”¨çš„å°¾éƒ¨åŠ ä¸Šä¸€ä¸ª <code>^</code>ï¼Œ Git ä¼šå°†å…¶è§£æä¸ºè¯¥å¼•ç”¨çš„ä¸Šä¸€ä¸ªæäº¤ã€‚ å‡è®¾ä½ çš„æäº¤å†å²æ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=format:&apos;%h %s&apos; --graph</span><br><span class="line">* 734713b fixed refs handling, added gc auto, updated tests</span><br><span class="line">*   d921970 Merge commit &apos;phedders/rdocs&apos;</span><br><span class="line">|\</span><br><span class="line">| * 35cfb2b Some rdoc changes</span><br><span class="line">* | 1c002dd added some blame and merge stuff</span><br><span class="line">|/</span><br><span class="line">* 1c36188 ignore *.gem</span><br><span class="line">* 9b29157 add open3_detach to gemspec file list</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨ <code>HEAD^</code> æ¥æŸ¥çœ‹ä¸Šä¸€ä¸ªæäº¤ï¼Œä¹Ÿå°±æ˜¯ â€œHEAD çš„çˆ¶æäº¤â€ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git show HEAD^</span><br><span class="line">commit d921970aadf03b3cf0e71becdaab3147ba71cdef</span><br><span class="line">Merge: 1c002dd... 35cfb2b...</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 11 15:08:43 2008 -0800</span><br><span class="line"></span><br><span class="line">    Merge commit &apos;phedders/rdocs&apos;</span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥åœ¨ <code>^</code> åé¢æ·»åŠ ä¸€ä¸ªæ•°å­—â€”â€”ä¾‹å¦‚ <code>d921970^2</code> ä»£è¡¨ â€œd921970 çš„ç¬¬äºŒçˆ¶æäº¤â€ è¿™ä¸ªè¯­æ³•åªé€‚ç”¨äºåˆå¹¶ï¼ˆmergeï¼‰çš„æäº¤ï¼Œå› ä¸ºåˆå¹¶æäº¤ä¼šæœ‰å¤šä¸ªçˆ¶æäº¤ã€‚ ç¬¬ä¸€çˆ¶æäº¤æ˜¯ä½ åˆå¹¶æ—¶æ‰€åœ¨åˆ†æ”¯ï¼Œè€Œç¬¬äºŒçˆ¶æäº¤æ˜¯ä½ æ‰€åˆå¹¶çš„åˆ†æ”¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git show d921970^</span><br><span class="line">commit 1c002dd4b536e7479fe34593e72e6c6c1819e53b</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 11 14:58:32 2008 -0800</span><br><span class="line"></span><br><span class="line">    added some blame and merge stuff</span><br><span class="line"></span><br><span class="line">$ git show d921970^2</span><br><span class="line">commit 35cfb2b795a55793d7cc56a6cc2060b4bb732548</span><br><span class="line">Author: Paul Hedderly &lt;paul+git@mjr.org&gt;</span><br><span class="line">Date:   Wed Dec 10 22:22:03 2008 +0000</span><br><span class="line"></span><br><span class="line">    Some rdoc changes</span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§æŒ‡æ˜ç¥–å…ˆæäº¤çš„æ–¹æ³•æ˜¯ <code>~</code>ã€‚ åŒæ ·æ˜¯æŒ‡å‘ç¬¬ä¸€çˆ¶æäº¤ï¼Œå› æ­¤ <code>HEAD~</code> å’Œ <code>HEAD^</code> æ˜¯ç­‰ä»·çš„ã€‚ è€ŒåŒºåˆ«åœ¨äºä½ åœ¨åé¢åŠ æ•°å­—çš„æ—¶å€™ã€‚ <code>HEAD~2</code> ä»£è¡¨â€œç¬¬ä¸€çˆ¶æäº¤çš„ç¬¬ä¸€çˆ¶æäº¤â€ï¼Œä¹Ÿå°±æ˜¯â€œç¥–çˆ¶æäº¤â€â€”â€” Git ä¼šæ ¹æ®ä½ æŒ‡å®šçš„æ¬¡æ•°è·å–å¯¹åº”çš„ç¬¬ä¸€çˆ¶æäº¤ã€‚ ä¾‹å¦‚ï¼Œåœ¨ä¹‹å‰çš„åˆ—å‡ºçš„æäº¤å†å²ä¸­ï¼Œ<code>HEAD~3</code> å°±æ˜¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git show HEAD~3</span><br><span class="line">commit 1c3618887afb5fbcbea25b7c013f4e2114448b8d</span><br><span class="line">Author: Tom Preston-Werner &lt;tom@mojombo.com&gt;</span><br><span class="line">Date:   Fri Nov 7 13:47:59 2008 -0500</span><br><span class="line"></span><br><span class="line">    ignore *.gem</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥å†™æˆ <code>HEAD^^^</code>ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€çˆ¶æäº¤çš„ç¬¬ä¸€çˆ¶æäº¤çš„ç¬¬ä¸€çˆ¶æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git show HEAD^^^</span><br><span class="line">commit 1c3618887afb5fbcbea25b7c013f4e2114448b8d</span><br><span class="line">Author: Tom Preston-Werner &lt;tom@mojombo.com&gt;</span><br><span class="line">Date:   Fri Nov 7 13:47:59 2008 -0500</span><br><span class="line"></span><br><span class="line">    ignore *.gem</span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥ç»„åˆä½¿ç”¨è¿™ä¸¤ä¸ªè¯­æ³•â€”â€”ä½ å¯ä»¥é€šè¿‡ <code>HEAD~3^2</code> æ¥å–å¾—ä¹‹å‰å¼•ç”¨çš„ç¬¬äºŒçˆ¶æäº¤ï¼ˆå‡è®¾å®ƒæ˜¯ä¸€ä¸ªåˆå¹¶æäº¤ï¼‰ã€‚</p><h4 id="æäº¤åŒºé—´"><a href="#æäº¤åŒºé—´" class="headerlink" title="æäº¤åŒºé—´"></a>æäº¤åŒºé—´</h4><p>ä½ å·²ç»å­¦ä¼šå¦‚ä½•å•æ¬¡çš„æäº¤ï¼Œç°åœ¨æ¥çœ‹çœ‹å¦‚ä½•æŒ‡æ˜ä¸€å®šåŒºé—´çš„æäº¤ã€‚ å½“ä½ æœ‰å¾ˆå¤šåˆ†æ”¯æ—¶ï¼Œè¿™å¯¹ç®¡ç†ä½ çš„åˆ†æ”¯æ—¶ååˆ†æœ‰ç”¨ï¼Œä½ å¯ä»¥ç”¨æäº¤åŒºé—´æ¥è§£å†³â€œè¿™ä¸ªåˆ†æ”¯è¿˜æœ‰å“ªäº›æäº¤å°šæœªåˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼Ÿâ€çš„é—®é¢˜</p><p><strong>åŒç‚¹</strong><br>æœ€å¸¸ç”¨çš„æŒ‡æ˜æäº¤åŒºé—´è¯­æ³•æ˜¯åŒç‚¹ã€‚ è¿™ç§è¯­æ³•å¯ä»¥è®© Git é€‰å‡ºåœ¨ä¸€ä¸ªåˆ†æ”¯ä¸­è€Œä¸åœ¨å¦ä¸€ä¸ªåˆ†æ”¯ä¸­çš„æäº¤ã€‚ ä¾‹å¦‚ï¼Œä½ æœ‰å¦‚ä¸‹çš„æäº¤å†å² Example history for range selection.</p><p><img src="git-chapter-1/img1.png" alt></p><p>ä½ æƒ³è¦æŸ¥çœ‹ experiment åˆ†æ”¯ä¸­è¿˜æœ‰å“ªäº›æäº¤å°šæœªè¢«åˆå¹¶å…¥ master åˆ†æ”¯ã€‚ ä½ å¯ä»¥ä½¿ç”¨ <code>master..experiment</code> æ¥è®© Git æ˜¾ç¤ºè¿™äº›æäº¤ã€‚ä¹Ÿå°±æ˜¯â€œåœ¨ experiment åˆ†æ”¯ä¸­è€Œä¸åœ¨ master åˆ†æ”¯ä¸­çš„æäº¤â€ã€‚ ä¸ºäº†ä½¿ä¾‹å­ç®€å•æ˜äº†ï¼Œæˆ‘ä½¿ç”¨äº†ç¤ºæ„å›¾ä¸­æäº¤å¯¹è±¡çš„å­—æ¯æ¥ä»£æ›¿çœŸå®æ—¥å¿—çš„è¾“å‡ºï¼Œæ‰€ä»¥ä¼šæ˜¾ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git log master..experiment</span><br><span class="line">D</span><br><span class="line">C</span><br></pre></td></tr></table></figure><p>åè¿‡æ¥ï¼Œå¦‚æœä½ æƒ³æŸ¥çœ‹åœ¨ <code>master</code> åˆ†æ”¯ä¸­è€Œä¸åœ¨ <code>experiment</code> åˆ†æ”¯ä¸­çš„æäº¤ï¼Œä½ åªè¦äº¤æ¢åˆ†æ”¯åå³å¯ã€‚ <code>experiment..master</code> ä¼šæ˜¾ç¤ºåœ¨ <code>master</code> åˆ†æ”¯ä¸­è€Œä¸åœ¨ <code>experiment</code> åˆ†æ”¯ä¸­çš„æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git log experiment..master</span><br><span class="line">F</span><br><span class="line">E</span><br></pre></td></tr></table></figure><p>è¿™å¯ä»¥è®©ä½ ä¿æŒ <code>experiment</code> åˆ†æ”¯è·Ÿéšæœ€æ–°çš„è¿›åº¦ä»¥åŠæŸ¥çœ‹ä½ å³å°†åˆå¹¶çš„å†…å®¹ã€‚ å¦ä¸€ä¸ªå¸¸ç”¨çš„åœºæ™¯æ˜¯æŸ¥çœ‹ä½ å³å°†æ¨é€åˆ°è¿œç«¯çš„å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log origin/master..HEAD</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šè¾“å‡ºåœ¨ä½ å½“å‰åˆ†æ”¯ä¸­è€Œä¸åœ¨è¿œç¨‹ <code>origin</code> ä¸­çš„æäº¤ã€‚ å¦‚æœä½ æ‰§è¡Œ <code>git push</code> å¹¶ä¸”ä½ çš„å½“å‰åˆ†æ”¯æ­£åœ¨è·Ÿè¸ª <code>origin/master</code>ï¼Œç”± <code>git log origin/master..HEAD</code> æ‰€è¾“å‡ºçš„æäº¤å°±æ˜¯ä¼šè¢«ä¼ è¾“åˆ°è¿œç«¯æœåŠ¡å™¨çš„æäº¤ã€‚ å¦‚æœä½ ç•™ç©ºäº†å…¶ä¸­çš„ä¸€è¾¹ï¼Œ Git ä¼šé»˜è®¤ä¸º HEADã€‚ ä¾‹å¦‚ï¼Œ <code>git log origin/master..</code> å°†ä¼šè¾“å‡ºä¸ä¹‹å‰ä¾‹å­ç›¸åŒçš„ç»“æœ â€”â€” Git ä½¿ç”¨ HEAD æ¥ä»£æ›¿ç•™ç©ºçš„ä¸€è¾¹ã€‚</p><p><strong>å¤šç‚¹</strong><br>åŒç‚¹è¯­æ³•å¾ˆå¥½ç”¨ï¼Œä½†æœ‰æ—¶å€™ä½ å¯èƒ½éœ€è¦ä¸¤ä¸ªä»¥ä¸Šçš„åˆ†æ”¯æ‰èƒ½ç¡®å®šä½ æ‰€éœ€è¦çš„ä¿®è®¢ï¼Œæ¯”å¦‚æŸ¥çœ‹å“ªäº›æäº¤æ˜¯è¢«åŒ…å«åœ¨æŸäº›åˆ†æ”¯ä¸­çš„ä¸€ä¸ªï¼Œä½†æ˜¯ä¸åœ¨ä½ å½“å‰çš„åˆ†æ”¯ä¸Šã€‚ Git å…è®¸ä½ åœ¨ä»»æ„å¼•ç”¨å‰åŠ ä¸Š <code>^</code> å­—ç¬¦æˆ–è€… <code>--not</code> æ¥æŒ‡æ˜ä½ ä¸å¸Œæœ›æäº¤è¢«åŒ…å«å…¶ä¸­çš„åˆ†æ”¯ã€‚ å› æ­¤ä¸‹åˆ—3ä¸ªå‘½ä»¤æ˜¯ç­‰ä»·çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git log refA..refB</span><br><span class="line">$ git log ^refA refB</span><br><span class="line">$ git log refB --not refA</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè¯­æ³•å¾ˆå¥½ç”¨ï¼Œå› ä¸ºä½ å¯ä»¥åœ¨æŸ¥è¯¢ä¸­æŒ‡å®šè¶…è¿‡ä¸¤ä¸ªçš„å¼•ç”¨ï¼Œè¿™æ˜¯åŒç‚¹è¯­æ³•æ— æ³•å®ç°çš„ã€‚ æ¯”å¦‚ï¼Œä½ æƒ³æŸ¥çœ‹æ‰€æœ‰è¢« <code>refA</code> æˆ– <code>refB</code> åŒ…å«çš„ä½†æ˜¯ä¸è¢« <code>refC</code> åŒ…å«çš„æäº¤ï¼Œä½ å¯ä»¥è¾“å…¥ä¸‹é¢ä¸­çš„ä»»æ„ä¸€ä¸ªå‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git log refA refB ^refC</span><br><span class="line">$ git log refA refB --not refC</span><br></pre></td></tr></table></figure><p>è¿™å°±æ„æˆäº†ä¸€ä¸ªååˆ†å¼ºå¤§çš„ä¿®è®¢æŸ¥è¯¢ç³»ç»Ÿï¼Œä½ å¯ä»¥é€šè¿‡å®ƒæ¥æŸ¥çœ‹ä½ çš„åˆ†æ”¯é‡ŒåŒ…å«äº†å“ªäº›ä¸œè¥¿ã€‚</p><p><strong>ä¸‰ç‚¹</strong><br>æœ€åä¸€ç§ä¸»è¦çš„åŒºé—´é€‰æ‹©è¯­æ³•æ˜¯ä¸‰ç‚¹ï¼Œè¿™ä¸ªè¯­æ³•å¯ä»¥é€‰æ‹©å‡ºè¢«ä¸¤ä¸ªå¼•ç”¨ä¸­çš„ä¸€ä¸ªåŒ…å«ä½†åˆä¸è¢«ä¸¤è€…åŒæ—¶åŒ…å«çš„æäº¤ã€‚ å†çœ‹çœ‹ä¹‹å‰åŒç‚¹ä¾‹å­ä¸­çš„æäº¤å†å²ã€‚ å¦‚æœä½ æƒ³çœ‹ <code>master</code> æˆ–è€… <code>experiment</code> ä¸­åŒ…å«çš„ä½†ä¸æ˜¯ä¸¤è€…å…±æœ‰çš„æäº¤ï¼Œä½ å¯ä»¥æ‰§è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git log master...experiment</span><br><span class="line">F</span><br><span class="line">E</span><br><span class="line">D</span><br><span class="line">C</span><br></pre></td></tr></table></figure><p>è¿™å’Œé€šå¸¸ <code>log</code> æŒ‰æ—¥æœŸæ’åºçš„è¾“å‡ºä¸€æ ·ï¼Œä»…ä»…ç»™å‡ºäº†4ä¸ªæäº¤çš„ä¿¡æ¯ã€‚</p><p>è¿™ç§æƒ…å½¢ä¸‹ï¼Œ<code>log</code> å‘½ä»¤çš„ä¸€ä¸ªå¸¸ç”¨å‚æ•°æ˜¯ <code>--left-right</code>ï¼Œå®ƒä¼šæ˜¾ç¤ºæ¯ä¸ªæäº¤åˆ°åº•å¤„äºå“ªä¸€ä¾§çš„åˆ†æ”¯ã€‚ è¿™ä¼šè®©è¾“å‡ºæ•°æ®æ›´åŠ æ¸…æ™°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git log --left-right master...experiment</span><br><span class="line">&lt; F</span><br><span class="line">&lt; E</span><br><span class="line">&gt; D</span><br><span class="line">&gt; C</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™äº›å·¥å…·ï¼Œä½ å°±å¯ä»¥ååˆ†æ–¹ä¾¿åœ°æŸ¥çœ‹ä½  Git ä»“åº“ä¸­çš„æäº¤ã€‚</p><h3 id="äº¤äº’å¼æš‚å­˜"><a href="#äº¤äº’å¼æš‚å­˜" class="headerlink" title="äº¤äº’å¼æš‚å­˜"></a>äº¤äº’å¼æš‚å­˜</h3><p>Git è‡ªå¸¦çš„ä¸€äº›è„šæœ¬å¯ä»¥ä½¿åœ¨å‘½ä»¤è¡Œä¸‹å·¥ä½œæ›´å®¹æ˜“ã€‚ æœ¬èŠ‚çš„å‡ ä¸ªäº¤äº’å‘½ä»¤å¯ä»¥å¸®åŠ©ä½ å°†æ–‡ä»¶çš„ç‰¹å®šéƒ¨åˆ†ç»„åˆæˆæäº¤ã€‚ å½“ä½ ä¿®æ”¹ä¸€ç»„æ–‡ä»¶åï¼Œå¸Œæœ›è¿™äº›æ”¹åŠ¨èƒ½æ”¾åˆ°è‹¥å¹²æäº¤è€Œä¸æ˜¯æ··æ‚åœ¨ä¸€èµ·æˆä¸ºä¸€ä¸ªæäº¤æ—¶ï¼Œè¿™å‡ ä¸ªå·¥å…·ä¼šéå¸¸æœ‰ç”¨ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥ç¡®ä¿æäº¤æ˜¯é€»è¾‘ä¸Šç‹¬ç«‹çš„å˜æ›´é›†ï¼ŒåŒæ—¶ä¹Ÿä¼šä½¿å…¶ä»–å¼€å‘è€…åœ¨ä¸ä½ å·¥ä½œæ—¶å¾ˆå®¹æ˜“åœ°å®¡æ ¸ã€‚ å¦‚æœè¿è¡Œ <code>git ad</code>d æ—¶ä½¿ç”¨ <code>-i</code> æˆ–è€… <code>--interactive</code> é€‰é¡¹ï¼ŒGit å°†ä¼šè¿›å…¥ä¸€ä¸ªäº¤äº’å¼ç»ˆç«¯æ¨¡å¼ï¼Œæ˜¾ç¤ºç±»ä¼¼ä¸‹é¢çš„ä¸œè¥¿ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git add -i</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:    unchanged        +0/-1 TODO</span><br><span class="line">  2:    unchanged        +1/-1 index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br><span class="line"></span><br><span class="line">*** Commands ***</span><br><span class="line">  1: status     2: update      3: revert     4: add untracked</span><br><span class="line">  5: patch      6: diff        7: quit       8: help</span><br><span class="line">What now&gt;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªå‘½ä»¤ä»¥éå¸¸ä¸åŒçš„è§†å›¾æ˜¾ç¤ºäº†æš‚å­˜åŒºâ€”â€”åŸºæœ¬ä¸Šä¸ <code>git status</code> æ˜¯ç›¸åŒçš„ä¿¡æ¯ï¼Œä½†æ˜¯æ›´ç®€æ˜æ‰¼è¦ä¸€äº›ã€‚ å®ƒå°†æš‚å­˜çš„ä¿®æ”¹åˆ—åœ¨å·¦ä¾§ï¼Œæœªæš‚å­˜çš„ä¿®æ”¹åˆ—åœ¨å³ä¾§ã€‚</p><p>åœ¨è¿™å—åŒºåŸŸåæ˜¯å‘½ä»¤åŒºåŸŸã€‚ åœ¨è¿™é‡Œä½ å¯ä»¥åšä¸€äº›å·¥ä½œï¼ŒåŒ…æ‹¬æš‚å­˜æ–‡ä»¶ã€å–æ¶ˆæš‚å­˜æ–‡ä»¶ã€æš‚å­˜æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ã€æ·»åŠ æœªè¢«è¿½è¸ªçš„æ–‡ä»¶ã€æŸ¥çœ‹æš‚å­˜å†…å®¹çš„åŒºåˆ«ã€‚</p><h4 id="æš‚å­˜ä¸å–æ¶ˆæš‚å­˜æ–‡ä»¶"><a href="#æš‚å­˜ä¸å–æ¶ˆæš‚å­˜æ–‡ä»¶" class="headerlink" title="æš‚å­˜ä¸å–æ¶ˆæš‚å­˜æ–‡ä»¶"></a>æš‚å­˜ä¸å–æ¶ˆæš‚å­˜æ–‡ä»¶</h4><p>å¦‚æœåœ¨ <code>What now&gt;</code> æç¤ºç¬¦åé”®å…¥ <code>2</code> æˆ– <code>u</code>ï¼Œè„šæœ¬å°†ä¼šæç¤ºæƒ³è¦æš‚å­˜å“ªä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">What now&gt; 2</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:    unchanged        +0/-1 TODO</span><br><span class="line">  2:    unchanged        +1/-1 index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br><span class="line">Update&gt;&gt;</span><br></pre></td></tr></table></figure><p>è¦æš‚å­˜ TODO ä¸ index.html æ–‡ä»¶ï¼Œå¯ä»¥è¾“å…¥æ•°å­—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Update&gt;&gt; 1,2</span><br><span class="line">           staged     unstaged path</span><br><span class="line">* 1:    unchanged        +0/-1 TODO</span><br><span class="line">* 2:    unchanged        +1/-1 index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br><span class="line">Update&gt;&gt;</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªæ–‡ä»¶å‰é¢çš„ <code>*</code> æ„å‘³ç€é€‰ä¸­çš„æ–‡ä»¶å°†ä¼šè¢«æš‚å­˜ã€‚ å¦‚æœåœ¨ <code>Update&gt;&gt;</code> æç¤ºç¬¦åä¸è¾“å…¥ä»»ä½•ä¸œè¥¿å¹¶ç›´æ¥æŒ‰å›è½¦ï¼ŒGit å°†ä¼šæš‚å­˜ä¹‹å‰é€‰æ‹©çš„æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Update&gt;&gt;</span><br><span class="line">updated 2 paths</span><br><span class="line"></span><br><span class="line">*** Commands ***</span><br><span class="line">  1: status     2: update      3: revert     4: add untracked</span><br><span class="line">  5: patch      6: diff        7: quit       8: help</span><br><span class="line">What now&gt; 1</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:        +0/-1      nothing TODO</span><br><span class="line">  2:        +1/-1      nothing index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br></pre></td></tr></table></figure><p>ç°åœ¨å¯ä»¥çœ‹åˆ° TODO ä¸ index.html æ–‡ä»¶å·²ç»è¢«æš‚å­˜è€Œ simplegit.rb æ–‡ä»¶è¿˜æœªè¢«æš‚å­˜ã€‚ å¦‚æœè¿™æ—¶æƒ³è¦å–æ¶ˆæš‚å­˜ TODO æ–‡ä»¶ï¼Œä½¿ç”¨ <code>3</code> æˆ– <code>r</code>ï¼ˆæ’¤æ¶ˆï¼‰é€‰é¡¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">*** Commands ***</span><br><span class="line">  1: status     2: update      3: revert     4: add untracked</span><br><span class="line">  5: patch      6: diff        7: quit       8: help</span><br><span class="line">What now&gt; 3</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:        +0/-1      nothing TODO</span><br><span class="line">  2:        +1/-1      nothing index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br><span class="line">Revert&gt;&gt; 1</span><br><span class="line">           staged     unstaged path</span><br><span class="line">* 1:        +0/-1      nothing TODO</span><br><span class="line">  2:        +1/-1      nothing index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br><span class="line">Revert&gt;&gt; [enter]</span><br><span class="line">reverted one path</span><br></pre></td></tr></table></figure><p>å†æ¬¡æŸ¥çœ‹ Git çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å–æ¶ˆæš‚å­˜ TODO æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">*** Commands ***</span><br><span class="line">  1: status     2: update      3: revert     4: add untracked</span><br><span class="line">  5: patch      6: diff        7: quit       8: help</span><br><span class="line">What now&gt; 1</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:    unchanged        +0/-1 TODO</span><br><span class="line">  2:        +1/-1      nothing index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦æŸ¥çœ‹å·²æš‚å­˜å†…å®¹çš„åŒºåˆ«ï¼Œå¯ä»¥ä½¿ç”¨ <code>6</code> æˆ– <code>d</code>ï¼ˆåŒºåˆ«ï¼‰å‘½ä»¤ã€‚ å®ƒä¼šæ˜¾ç¤ºæš‚å­˜æ–‡ä»¶çš„ä¸€ä¸ªåˆ—è¡¨ï¼Œå¯ä»¥ä»ä¸­é€‰æ‹©æƒ³è¦æŸ¥çœ‹çš„æš‚å­˜åŒºåˆ«ã€‚ è¿™è·Ÿä½ åœ¨å‘½ä»¤è¡ŒæŒ‡å®š <code>git diff --cached</code> éå¸¸ç›¸ä¼¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">*** Commands ***</span><br><span class="line">  1: status     2: update      3: revert     4: add untracked</span><br><span class="line">  5: patch      6: diff        7: quit       8: help</span><br><span class="line">What now&gt; 6</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:        +1/-1      nothing index.html</span><br><span class="line">Review diff&gt;&gt; 1</span><br><span class="line">diff --git a/index.html b/index.html</span><br><span class="line">index 4d07108..4335f49 100644</span><br><span class="line">--- a/index.html</span><br><span class="line">+++ b/index.html</span><br><span class="line">@@ -16,7 +16,7 @@ Date Finder</span><br><span class="line"></span><br><span class="line"> &lt;p id=&quot;out&quot;&gt;...&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">-&lt;div id=&quot;footer&quot;&gt;contact : support@github.com&lt;/div&gt;</span><br><span class="line">+&lt;div id=&quot;footer&quot;&gt;contact : email.support@github.com&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"> &lt;script type=&quot;text/javascript&quot;&gt;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™äº›åŸºæœ¬å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨äº¤äº’å¼æ·»åŠ æ¨¡å¼æ¥è½»æ¾åœ°å¤„ç†æš‚å­˜åŒºã€‚</p><h4 id="æš‚å­˜è¡¥ä¸"><a href="#æš‚å­˜è¡¥ä¸" class="headerlink" title="æš‚å­˜è¡¥ä¸"></a>æš‚å­˜è¡¥ä¸</h4><p>Git ä¹Ÿå¯ä»¥æš‚å­˜æ–‡ä»¶çš„ç‰¹å®šéƒ¨åˆ†ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœåœ¨ simplegit.rb æ–‡ä»¶ä¸­åšäº†ä¸¤å¤„ä¿®æ”¹ï¼Œä½†åªæƒ³è¦æš‚å­˜å…¶ä¸­çš„ä¸€ä¸ªè€Œä¸æ˜¯å¦ä¸€ä¸ªï¼ŒGit ä¼šå¸®ä½ è½»æ¾åœ°å®Œæˆã€‚ ä»äº¤äº’å¼æç¤ºç¬¦ä¸­ï¼Œè¾“å…¥ <code>5</code> æˆ– <code>p</code>ï¼ˆè¡¥ä¸ï¼‰ã€‚ Git ä¼šè¯¢é—®ä½ æƒ³è¦éƒ¨åˆ†æš‚å­˜å“ªäº›æ–‡ä»¶ï¼›ç„¶åï¼Œå¯¹å·²é€‰æ‹©æ–‡ä»¶çš„æ¯ä¸€ä¸ªéƒ¨åˆ†ï¼Œå®ƒéƒ½ä¼šä¸€ä¸ªä¸ªåœ°æ˜¾ç¤ºæ–‡ä»¶åŒºåˆ«å¹¶è¯¢é—®ä½ æ˜¯å¦æƒ³è¦æš‚å­˜å®ƒä»¬ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/lib/simplegit.rb b/lib/simplegit.rb</span><br><span class="line">index dd5ecc4..57399e0 100644</span><br><span class="line">--- a/lib/simplegit.rb</span><br><span class="line">+++ b/lib/simplegit.rb</span><br><span class="line">@@ -22,7 +22,7 @@ class SimpleGit</span><br><span class="line">   end</span><br><span class="line"></span><br><span class="line">   def log(treeish = &apos;master&apos;)</span><br><span class="line">-    command(&quot;git log -n 25 #&#123;treeish&#125;&quot;)</span><br><span class="line">+    command(&quot;git log -n 30 #&#123;treeish&#125;&quot;)</span><br><span class="line">   end</span><br><span class="line"></span><br><span class="line">   def blame(path)</span><br><span class="line">Stage this hunk [y,n,a,d,/,j,J,g,e,?]?</span><br></pre></td></tr></table></figure><p>è¿™æ—¶æœ‰å¾ˆå¤šé€‰é¡¹ã€‚ è¾“å…¥ <code>?</code> æ˜¾ç¤ºæ‰€æœ‰å¯ä»¥ä½¿ç”¨çš„å‘½ä»¤åˆ—è¡¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Stage this hunk [y,n,a,d,/,j,J,g,e,?]? ?</span><br><span class="line">y - stage this hunk</span><br><span class="line">n - do not stage this hunk</span><br><span class="line">a - stage this and all the remaining hunks in the file</span><br><span class="line">d - do not stage this hunk nor any of the remaining hunks in the file</span><br><span class="line">g - select a hunk to go to</span><br><span class="line">/ - search for a hunk matching the given regex</span><br><span class="line">j - leave this hunk undecided, see next undecided hunk</span><br><span class="line">J - leave this hunk undecided, see next hunk</span><br><span class="line">k - leave this hunk undecided, see previous undecided hunk</span><br><span class="line">K - leave this hunk undecided, see previous hunk</span><br><span class="line">s - split the current hunk into smaller hunks</span><br><span class="line">e - manually edit the current hunk</span><br><span class="line">? - print help</span><br></pre></td></tr></table></figure><p>é€šå¸¸æƒ…å†µä¸‹å¯ä»¥è¾“å…¥ <code>y</code> æˆ– <code>n</code> æ¥é€‰æ‹©æ˜¯å¦è¦æš‚å­˜æ¯ä¸€ä¸ªåŒºå—ï¼Œå½“ç„¶ï¼Œæš‚å­˜ç‰¹å®šæ–‡ä»¶ä¸­çš„æ‰€æœ‰éƒ¨åˆ†æˆ–ä¸ºä¹‹åçš„é€‰æ‹©è·³è¿‡ä¸€ä¸ªåŒºå—ä¹Ÿæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ å¦‚æœä½ åªæš‚å­˜æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼ŒçŠ¶æ€è¾“å‡ºå¯èƒ½ä¼šåƒä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">What now&gt; 1</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:    unchanged        +0/-1 TODO</span><br><span class="line">  2:        +1/-1      nothing index.html</span><br><span class="line">  3:        +1/-1        +4/-0 lib/simplegit.rb</span><br></pre></td></tr></table></figure><p>simplegit.rb æ–‡ä»¶çš„çŠ¶æ€å¾ˆæœ‰è¶£ã€‚ å®ƒæ˜¾ç¤ºå‡ºè‹¥å¹²è¡Œè¢«æš‚å­˜ä¸è‹¥å¹²è¡Œæœªè¢«æš‚å­˜ã€‚ å·²ç»éƒ¨åˆ†åœ°æš‚å­˜äº†è¿™ä¸ªæ–‡ä»¶ã€‚ åœ¨è¿™æ—¶ï¼Œå¯ä»¥é€€å‡ºäº¤äº’å¼æ·»åŠ è„šæœ¬å¹¶ä¸”è¿è¡Œ <code>git commit</code> æ¥æäº¤éƒ¨åˆ†æš‚å­˜çš„æ–‡ä»¶ã€‚</p><p>ä¹Ÿå¯ä»¥ä¸å¿…åœ¨äº¤äº’å¼æ·»åŠ æ¨¡å¼ä¸­åšéƒ¨åˆ†æ–‡ä»¶æš‚å­˜â€”â€”å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ <code>git add -p</code> æˆ– <code>git add --patch</code> æ¥å¯åŠ¨åŒæ ·çš„è„šæœ¬ã€‚</p><p>æ›´è¿›ä¸€æ­¥åœ°ï¼Œå¯ä»¥ä½¿ç”¨ <code>reset --patch</code> å‘½ä»¤çš„è¡¥ä¸æ¨¡å¼æ¥éƒ¨åˆ†é‡ç½®æ–‡ä»¶ï¼Œé€šè¿‡ <code>checkout --patch</code> å‘½ä»¤æ¥éƒ¨åˆ†æ£€å‡ºæ–‡ä»¶ä¸ <code>stash save --patch</code> å‘½ä»¤æ¥éƒ¨åˆ†æš‚å­˜æ–‡ä»¶ã€‚ æˆ‘ä»¬å°†ä¼šåœ¨æ¥è§¦è¿™äº›å‘½ä»¤çš„é«˜çº§ä½¿ç”¨æ–¹æ³•æ—¶äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚</p><h3 id="å‚¨è—ä¸æ¸…ç†"><a href="#å‚¨è—ä¸æ¸…ç†" class="headerlink" title="å‚¨è—ä¸æ¸…ç†"></a>å‚¨è—ä¸æ¸…ç†</h3><p>æœ‰æ—¶ï¼Œå½“ä½ åœ¨é¡¹ç›®çš„ä¸€éƒ¨åˆ†ä¸Šå·²ç»å·¥ä½œä¸€æ®µæ—¶é—´åï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½è¿›å…¥äº†æ··ä¹±çš„çŠ¶æ€ï¼Œè€Œè¿™æ—¶ä½ æƒ³è¦åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯åšä¸€ç‚¹åˆ«çš„äº‹æƒ…ã€‚ é—®é¢˜æ˜¯ï¼Œä½ ä¸æƒ³ä»…ä»…å› ä¸ºè¿‡ä¼šå„¿å›åˆ°è¿™ä¸€ç‚¹è€Œä¸ºåšäº†ä¸€åŠçš„å·¥ä½œåˆ›å»ºä¸€æ¬¡æäº¤ã€‚ é’ˆå¯¹è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯ <code>git stash</code> å‘½ä»¤ã€‚</p><p>å‚¨è—ä¼šå¤„ç†å·¥ä½œç›®å½•çš„è„çš„çŠ¶æ€â€”â€”å³è·Ÿè¸ªæ–‡ä»¶çš„ä¿®æ”¹ä¸æš‚å­˜çš„æ”¹åŠ¨â€”â€”ç„¶åå°†æœªå®Œæˆçš„ä¿®æ”¹ä¿å­˜åˆ°ä¸€ä¸ªæ ˆä¸Šï¼Œè€Œä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™é‡æ–°åº”ç”¨è¿™äº›æ”¹åŠ¨ã€‚</p><h4 id="å‚¨è—å·¥ä½œ"><a href="#å‚¨è—å·¥ä½œ" class="headerlink" title="å‚¨è—å·¥ä½œ"></a>å‚¨è—å·¥ä½œ</h4><p>ä¸ºäº†æ¼”ç¤ºï¼Œè¿›å…¥é¡¹ç›®å¹¶æ”¹åŠ¨å‡ ä¸ªæ–‡ä»¶ï¼Œç„¶åå¯èƒ½æš‚å­˜å…¶ä¸­çš„ä¸€ä¸ªæ”¹åŠ¨ã€‚ å¦‚æœè¿è¡Œ <code>git status</code>ï¼Œå¯ä»¥çœ‹åˆ°æœ‰æ”¹åŠ¨çš„çŠ¶æ€ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">modified:   index.html</span><br><span class="line"></span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">modified:   lib/simplegit.rb</span><br></pre></td></tr></table></figure><p>ç°åœ¨æƒ³è¦åˆ‡æ¢åˆ†æ”¯ï¼Œä½†æ˜¯è¿˜ä¸æƒ³è¦æäº¤ä¹‹å‰çš„å·¥ä½œï¼›æ‰€ä»¥å‚¨è—ä¿®æ”¹ã€‚ å°†æ–°çš„å‚¨è—æ¨é€åˆ°æ ˆä¸Šï¼Œè¿è¡Œ <code>git stash</code> æˆ– <code>git stash save</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git stash</span><br><span class="line">Saved working directory and index state \</span><br><span class="line">  &quot;WIP on master: 049d078 added the index file&quot;</span><br><span class="line">HEAD is now at 049d078 added the index file</span><br><span class="line">(To restore them type &quot;git stash apply&quot;)</span><br></pre></td></tr></table></figure><p>å·¥ä½œç›®å½•æ˜¯å¹²å‡€çš„äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line"># On branch master</span><br><span class="line">nothing to commit, working directory clean</span><br></pre></td></tr></table></figure><p>åœ¨è¿™æ—¶ï¼Œä½ èƒ½å¤Ÿè½»æ˜“åœ°åˆ‡æ¢åˆ†æ”¯å¹¶åœ¨å…¶ä»–åœ°æ–¹å·¥ä½œï¼›ä½ çš„ä¿®æ”¹è¢«å­˜å‚¨åœ¨æ ˆä¸Šã€‚ è¦æŸ¥çœ‹å‚¨è—çš„ä¸œè¥¿ï¼Œå¯ä»¥ä½¿ç”¨ <code>git stash list</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git stash list</span><br><span class="line">stash@&#123;0&#125;: WIP on master: 049d078 added the index file</span><br><span class="line">stash@&#123;1&#125;: WIP on master: c264051 Revert &quot;added file_size&quot;</span><br><span class="line">stash@&#123;2&#125;: WIP on master: 21d80a5 added number to log</span><br></pre></td></tr></table></figure><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œæœ‰ä¸¤ä¸ªä¹‹å‰åšçš„å‚¨è—ï¼Œæ‰€ä»¥ä½ æ¥è§¦åˆ°äº†ä¸‰ä¸ªä¸åŒçš„å‚¨è—å·¥ä½œã€‚ å¯ä»¥é€šè¿‡åŸæ¥ <code>stash</code> å‘½ä»¤çš„å¸®åŠ©æç¤ºä¸­çš„å‘½ä»¤å°†ä½ åˆšåˆšå‚¨è—çš„å·¥ä½œé‡æ–°åº”ç”¨ï¼š<code>git stash apply</code>ã€‚ å¦‚æœæƒ³è¦åº”ç”¨å…¶ä¸­ä¸€ä¸ªæ›´æ—§çš„å‚¨è—ï¼Œå¯ä»¥é€šè¿‡åå­—æŒ‡å®šå®ƒï¼Œåƒè¿™æ ·ï¼š<code>git stash apply stash@{2}</code>ã€‚ å¦‚æœä¸æŒ‡å®šä¸€ä¸ªå‚¨è—ï¼ŒGit è®¤ä¸ºæŒ‡å®šçš„æ˜¯æœ€è¿‘çš„å‚¨è—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git stash apply</span><br><span class="line"># On branch master</span><br><span class="line"># Changed but not updated:</span><br><span class="line">#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">#</span><br><span class="line">#      modified:   index.html</span><br><span class="line">#      modified:   lib/simplegit.rb</span><br><span class="line">#</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° Git é‡æ–°ä¿®æ”¹äº†å½“ä½ ä¿å­˜å‚¨è—æ—¶æ’¤æ¶ˆçš„æ–‡ä»¶ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œå½“å°è¯•åº”ç”¨å‚¨è—æ—¶æœ‰ä¸€ä¸ªå¹²å‡€çš„å·¥ä½œç›®å½•ï¼Œå¹¶ä¸”å°è¯•å°†å®ƒåº”ç”¨åœ¨ä¿å­˜å®ƒæ—¶æ‰€åœ¨çš„åˆ†æ”¯ï¼›ä½†æ˜¯æœ‰ä¸€ä¸ªå¹²å‡€çš„å·¥ä½œç›®å½•ä¸åº”ç”¨åœ¨åŒä¸€åˆ†æ”¯å¹¶ä¸æ˜¯æˆåŠŸåº”ç”¨å‚¨è—çš„å……åˆ†å¿…è¦æ¡ä»¶ã€‚ å¯ä»¥åœ¨ä¸€ä¸ªåˆ†æ”¯ä¸Šä¿å­˜ä¸€ä¸ªå‚¨è—ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œç„¶åå°è¯•é‡æ–°åº”ç”¨è¿™äº›ä¿®æ”¹ã€‚ å½“åº”ç”¨å‚¨è—æ—¶å·¥ä½œç›®å½•ä¸­ä¹Ÿå¯ä»¥æœ‰ä¿®æ”¹ä¸æœªæäº¤çš„æ–‡ä»¶â€”â€”å¦‚æœæœ‰ä»»ä½•ä¸œè¥¿ä¸èƒ½å¹²å‡€åœ°åº”ç”¨ï¼ŒGit ä¼šäº§ç”Ÿåˆå¹¶å†²çªã€‚</p><p>æ–‡ä»¶çš„æ”¹åŠ¨è¢«é‡æ–°åº”ç”¨äº†ï¼Œä½†æ˜¯ä¹‹å‰æš‚å­˜çš„æ–‡ä»¶å´æ²¡æœ‰é‡æ–°æš‚å­˜ã€‚ æƒ³è¦é‚£æ ·çš„è¯ï¼Œå¿…é¡»ä½¿ç”¨ <code>--index</code> é€‰é¡¹æ¥è¿è¡Œ <code>git stash apply</code> å‘½ä»¤ï¼Œæ¥å°è¯•é‡æ–°åº”ç”¨æš‚å­˜çš„ä¿®æ”¹ã€‚ å¦‚æœå·²ç»é‚£æ ·åšäº†ï¼Œé‚£ä¹ˆä½ å°†å›åˆ°åŸæ¥çš„ä½ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git stash apply --index</span><br><span class="line"># On branch master</span><br><span class="line"># Changes to be committed:</span><br><span class="line">#   (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line">#</span><br><span class="line">#      modified:   index.html</span><br><span class="line">#</span><br><span class="line"># Changed but not updated:</span><br><span class="line">#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">#</span><br><span class="line">#      modified:   lib/simplegit.rb</span><br><span class="line">#</span><br></pre></td></tr></table></figure><p>åº”ç”¨é€‰é¡¹åªä¼šå°è¯•åº”ç”¨æš‚å­˜çš„å·¥ä½œâ€”â€”åœ¨å †æ ˆä¸Šè¿˜æœ‰å®ƒã€‚ å¯ä»¥è¿è¡Œ <code>git stash drop</code> åŠ ä¸Šå°†è¦ç§»é™¤çš„å‚¨è—çš„åå­—æ¥ç§»é™¤å®ƒï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git stash list</span><br><span class="line">stash@&#123;0&#125;: WIP on master: 049d078 added the index file</span><br><span class="line">stash@&#123;1&#125;: WIP on master: c264051 Revert &quot;added file_size&quot;</span><br><span class="line">stash@&#123;2&#125;: WIP on master: 21d80a5 added number to log</span><br><span class="line">$ git stash drop stash@&#123;0&#125;</span><br><span class="line">Dropped stash@&#123;0&#125; (364e91f3f268f0900bc3ee613f9f733e82aaed43)</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥è¿è¡Œ <code>git stash pop</code> æ¥åº”ç”¨å‚¨è—ç„¶åç«‹å³ä»æ ˆä¸Šæ‰”æ‰å®ƒã€‚</p><h4 id="åˆ›é€ æ€§çš„å‚¨è—"><a href="#åˆ›é€ æ€§çš„å‚¨è—" class="headerlink" title="åˆ›é€ æ€§çš„å‚¨è—"></a>åˆ›é€ æ€§çš„å‚¨è—</h4><p>æœ‰å‡ ä¸ªå‚¨è—çš„å˜ç§å¯èƒ½ä¹Ÿå¾ˆæœ‰ç”¨ã€‚ ç¬¬ä¸€ä¸ªéå¸¸æµè¡Œçš„é€‰é¡¹æ˜¯ <code>stash save</code> å‘½ä»¤çš„ <code>--keep-index</code> é€‰é¡¹ã€‚ å®ƒå‘Šè¯‰ Git ä¸è¦å‚¨è—ä»»ä½•ä½ é€šè¿‡ <code>git add</code> å‘½ä»¤å·²æš‚å­˜çš„ä¸œè¥¿ã€‚</p><p>å½“ä½ åšäº†å‡ ä¸ªæ”¹åŠ¨å¹¶åªæƒ³æäº¤å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œè¿‡ä¸€ä¼šå„¿å†å›æ¥å¤„ç†å‰©ä½™æ”¹åŠ¨æ—¶ï¼Œè¿™ä¸ªåŠŸèƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git status -s</span><br><span class="line">M  index.html</span><br><span class="line"> M lib/simplegit.rb</span><br><span class="line"></span><br><span class="line">$ git stash --keep-index</span><br><span class="line">Saved working directory and index state WIP on master: 1b65b17 added the index file</span><br><span class="line">HEAD is now at 1b65b17 added the index file</span><br><span class="line"></span><br><span class="line">$ git status -s</span><br><span class="line">M  index.html</span><br></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªç»å¸¸ä½¿ç”¨å‚¨è—æ¥åšçš„äº‹æƒ…æ˜¯åƒå‚¨è—è·Ÿè¸ªæ–‡ä»¶ä¸€æ ·å‚¨è—æœªè·Ÿè¸ªæ–‡ä»¶ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>git stash</code> åªä¼šå‚¨è—å·²ç»åœ¨ç´¢å¼•ä¸­çš„æ–‡ä»¶ã€‚ å¦‚æœæŒ‡å®š <code>--include-untracked</code> æˆ– <code>-u</code> æ ‡è®°ï¼ŒGit ä¹Ÿä¼šå‚¨è—ä»»ä½•åˆ›å»ºçš„æœªè·Ÿè¸ªæ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git status -s</span><br><span class="line">M  index.html</span><br><span class="line"> M lib/simplegit.rb</span><br><span class="line">?? new-file.txt</span><br><span class="line"></span><br><span class="line">$ git stash -u</span><br><span class="line">Saved working directory and index state WIP on master: 1b65b17 added the index file</span><br><span class="line">HEAD is now at 1b65b17 added the index file</span><br><span class="line"></span><br><span class="line">$ git status -s</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆï¼Œå¦‚æœæŒ‡å®šäº† <code>--patch</code> æ ‡è®°ï¼ŒGit ä¸ä¼šå‚¨è—æ‰€æœ‰ä¿®æ”¹è¿‡çš„ä»»ä½•ä¸œè¥¿ï¼Œä½†æ˜¯ä¼šäº¤äº’å¼åœ°æç¤ºå“ªäº›æ”¹åŠ¨æƒ³è¦å‚¨è—ã€å“ªäº›æ”¹åŠ¨éœ€è¦ä¿å­˜åœ¨å·¥ä½œç›®å½•ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ git stash --patch</span><br><span class="line">diff --git a/lib/simplegit.rb b/lib/simplegit.rb</span><br><span class="line">index 66d332e..8bb5674 100644</span><br><span class="line">--- a/lib/simplegit.rb</span><br><span class="line">+++ b/lib/simplegit.rb</span><br><span class="line">@@ -16,6 +16,10 @@ class SimpleGit</span><br><span class="line">         return `#&#123;git_cmd&#125; 2&gt;&amp;1`.chomp</span><br><span class="line">       end</span><br><span class="line">     end</span><br><span class="line">+</span><br><span class="line">+    def show(treeish = &apos;master&apos;)</span><br><span class="line">+      command(&quot;git show #&#123;treeish&#125;&quot;)</span><br><span class="line">+    end</span><br><span class="line"></span><br><span class="line"> end</span><br><span class="line"> test</span><br><span class="line">Stash this hunk [y,n,q,a,d,/,e,?]? y</span><br><span class="line"></span><br><span class="line">Saved working directory and index state WIP on master: 1b65b17 added the index file</span><br></pre></td></tr></table></figure><h4 id="ä»å‚¨è—åˆ›å»ºä¸€ä¸ªåˆ†æ”¯"><a href="#ä»å‚¨è—åˆ›å»ºä¸€ä¸ªåˆ†æ”¯" class="headerlink" title="ä»å‚¨è—åˆ›å»ºä¸€ä¸ªåˆ†æ”¯"></a>ä»å‚¨è—åˆ›å»ºä¸€ä¸ªåˆ†æ”¯</h4><p>å¦‚æœå‚¨è—äº†ä¸€äº›å·¥ä½œï¼Œå°†å®ƒç•™åœ¨é‚£å„¿äº†ä¸€ä¼šå„¿ï¼Œç„¶åç»§ç»­åœ¨å‚¨è—çš„åˆ†æ”¯ä¸Šå·¥ä½œï¼Œåœ¨é‡æ–°åº”ç”¨å·¥ä½œæ—¶å¯èƒ½ä¼šæœ‰é—®é¢˜ã€‚ å¦‚æœåº”ç”¨å°è¯•ä¿®æ”¹åˆšåˆšä¿®æ”¹çš„æ–‡ä»¶ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªåˆå¹¶å†²çªå¹¶ä¸å¾—ä¸è§£å†³å®ƒã€‚ å¦‚æœæƒ³è¦ä¸€ä¸ªè½»æ¾çš„æ–¹å¼æ¥å†æ¬¡æµ‹è¯•å‚¨è—çš„æ”¹åŠ¨ï¼Œå¯ä»¥è¿è¡Œ <code>git stash branch</code> åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œæ£€å‡ºå‚¨è—å·¥ä½œæ—¶æ‰€åœ¨çš„æäº¤ï¼Œé‡æ–°åœ¨é‚£åº”ç”¨å·¥ä½œï¼Œç„¶ååœ¨åº”ç”¨æˆåŠŸåæ‰”æ‰å‚¨è—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git stash branch testchanges</span><br><span class="line">Switched to a new branch &quot;testchanges&quot;</span><br><span class="line"># On branch testchanges</span><br><span class="line"># Changes to be committed:</span><br><span class="line">#   (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line">#</span><br><span class="line">#      modified:   index.html</span><br><span class="line">#</span><br><span class="line"># Changed but not updated:</span><br><span class="line">#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">#</span><br><span class="line">#      modified:   lib/simplegit.rb</span><br><span class="line">#</span><br><span class="line">Dropped refs/stash@&#123;0&#125; (f0dfc4d5dc332d1cee34a634182e168c4efc3359)</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯åœ¨æ–°åˆ†æ”¯è½»æ¾æ¢å¤å‚¨è—å·¥ä½œå¹¶ç»§ç»­å·¥ä½œçš„ä¸€ä¸ªå¾ˆä¸é”™çš„é€”å¾„ã€‚</p><h4 id="æ¸…ç†å·¥ä½œç›®å½•"><a href="#æ¸…ç†å·¥ä½œç›®å½•" class="headerlink" title="æ¸…ç†å·¥ä½œç›®å½•"></a>æ¸…ç†å·¥ä½œç›®å½•</h4><p>å¯¹äºå·¥ä½œç›®å½•ä¸­ä¸€äº›å·¥ä½œæˆ–æ–‡ä»¶ï¼Œä½ æƒ³åšçš„ä¹Ÿè®¸ä¸æ˜¯å‚¨è—è€Œæ˜¯ç§»é™¤ã€‚ <code>git clean</code> å‘½ä»¤ä¼šå¸®ä½ åšè¿™äº›äº‹ã€‚</p><p>æœ‰ä¸€äº›é€šç”¨çš„åŸå› æ¯”å¦‚è¯´ä¸ºäº†ç§»é™¤ç”±åˆå¹¶æˆ–å¤–éƒ¨å·¥å…·ç”Ÿæˆçš„ä¸œè¥¿ï¼Œæˆ–æ˜¯ä¸ºäº†è¿è¡Œä¸€ä¸ªå¹²å‡€çš„æ„å»ºè€Œç§»é™¤ä¹‹å‰æ„å»ºçš„æ®‹ç•™ã€‚</p><p>ä½ éœ€è¦è°¨æ…åœ°ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œå› ä¸ºå®ƒè¢«è®¾è®¡ä¸ºä»å·¥ä½œç›®å½•ä¸­ç§»é™¤æœªè¢«è¿½è¸ªçš„æ–‡ä»¶ã€‚ å¦‚æœä½ æ”¹å˜ä¸»æ„äº†ï¼Œä½ ä¹Ÿä¸ä¸€å®šèƒ½æ‰¾å›æ¥é‚£äº›æ–‡ä»¶çš„å†…å®¹ã€‚ ä¸€ä¸ªæ›´å®‰å…¨çš„é€‰é¡¹æ˜¯è¿è¡Œ <code>git stash --all</code> æ¥ç§»é™¤æ¯ä¸€æ ·ä¸œè¥¿å¹¶å­˜æ”¾åœ¨æ ˆä¸­ã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨ <code>git clean</code> å‘½ä»¤å»é™¤å†—ä½™æ–‡ä»¶æˆ–è€…æ¸…ç†å·¥ä½œç›®å½•ã€‚ ä½¿ç”¨ <code>git clean -f -d</code> å‘½ä»¤æ¥ç§»é™¤å·¥ä½œç›®å½•ä¸­æ‰€æœ‰æœªè¿½è¸ªçš„æ–‡ä»¶ä»¥åŠç©ºçš„å­ç›®å½•ã€‚ <code>-f</code> æ„å‘³ç€ å¼ºåˆ¶ æˆ– â€œç¡®å®šç§»é™¤â€ã€‚</p><p>å¦‚æœåªæ˜¯æƒ³è¦çœ‹çœ‹å®ƒä¼šåšä»€ä¹ˆï¼Œå¯ä»¥ä½¿ç”¨ <code>-n</code> é€‰é¡¹æ¥è¿è¡Œå‘½ä»¤ï¼Œè¿™æ„å‘³ç€ â€œåšä¸€æ¬¡æ¼”ä¹ ç„¶åå‘Šè¯‰ä½  å°†è¦ ç§»é™¤ä»€ä¹ˆâ€ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git clean -d -n</span><br><span class="line">Would remove test.o</span><br><span class="line">Would remove tmp/</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>git clean</code> å‘½ä»¤åªä¼šç§»é™¤æ²¡æœ‰å¿½ç•¥çš„æœªè·Ÿè¸ªæ–‡ä»¶ã€‚ ä»»ä½•ä¸ <code>.gitiignore</code> æˆ–å…¶ä»–å¿½ç•¥æ–‡ä»¶ä¸­çš„æ¨¡å¼åŒ¹é…çš„æ–‡ä»¶éƒ½ä¸ä¼šè¢«ç§»é™¤ã€‚ å¦‚æœä½ ä¹Ÿæƒ³è¦ç§»é™¤é‚£äº›æ–‡ä»¶ï¼Œä¾‹å¦‚ä¸ºäº†åšä¸€æ¬¡å®Œå…¨å¹²å‡€çš„æ„å»ºè€Œç§»é™¤æ‰€æœ‰ç”±æ„å»ºç”Ÿæˆçš„ <code>.o</code> æ–‡ä»¶ï¼Œå¯ä»¥ç»™ <code>clean</code> å‘½ä»¤å¢åŠ ä¸€ä¸ª <code>-x</code> é€‰é¡¹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git status -s</span><br><span class="line"> M lib/simplegit.rb</span><br><span class="line">?? build.TMP</span><br><span class="line">?? tmp/</span><br><span class="line"></span><br><span class="line">$ git clean -n -d</span><br><span class="line">Would remove build.TMP</span><br><span class="line">Would remove tmp/</span><br><span class="line"></span><br><span class="line">$ git clean -n -d -x</span><br><span class="line">Would remove build.TMP</span><br><span class="line">Would remove test.o</span><br><span class="line">Would remove tmp/</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸çŸ¥é“ <code>git clean</code> å‘½ä»¤å°†ä¼šåšä»€ä¹ˆï¼Œåœ¨å°† <code>-n</code> æ”¹ä¸º <code>-f</code> æ¥çœŸæ­£åšä¹‹å‰æ€»æ˜¯å…ˆç”¨ <code>-n</code> æ¥è¿è¡Œå®ƒåšåŒé‡æ£€æŸ¥ã€‚ å¦ä¸€ä¸ªå°å¿ƒå¤„ç†è¿‡ç¨‹çš„æ–¹å¼æ˜¯ä½¿ç”¨ <code>-i</code> æˆ– â€œinteractiveâ€ æ ‡è®°æ¥è¿è¡Œå®ƒã€‚</p><p>è¿™å°†ä¼šä»¥äº¤äº’æ¨¡å¼è¿è¡Œ <code>clean</code> å‘½ä»¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git clean -x -i</span><br><span class="line">Would remove the following items:</span><br><span class="line">  build.TMP  test.o</span><br><span class="line">*** Commands ***</span><br><span class="line">    1: clean    2: filter by pattern    3: select by numbers    4: ask each    5: quit    6: help</span><br><span class="line">What now&gt;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼ä¸‹å¯ä»¥åˆ†åˆ«åœ°æ£€æŸ¥æ¯ä¸€ä¸ªæ–‡ä»¶æˆ–è€…äº¤äº’åœ°æŒ‡å®šåˆ é™¤çš„æ¨¡å¼ã€‚</p><h3 id="ç­¾ç½²å·¥ä½œ"><a href="#ç­¾ç½²å·¥ä½œ" class="headerlink" title="ç­¾ç½²å·¥ä½œ"></a>ç­¾ç½²å·¥ä½œ</h3><p>Git è™½ç„¶æ˜¯å¯†ç çº§å®‰å…¨çš„ï¼Œä½†å®ƒä¸æ˜¯ä¸‡æ— ä¸€å¤±çš„ã€‚ å¦‚æœä½ ä»å› ç‰¹ç½‘ä¸Šçš„å…¶ä»–äººé‚£é‡Œæ‹¿å–å·¥ä½œï¼Œå¹¶ä¸”æƒ³è¦éªŒè¯æäº¤æ˜¯ä¸æ˜¯çœŸæ­£åœ°æ¥è‡ªäºå¯ä¿¡æ¥æºï¼ŒGit æä¾›äº†å‡ ç§é€šè¿‡ GPG æ¥ç­¾ç½²å’ŒéªŒè¯å·¥ä½œçš„æ–¹å¼ã€‚</p><h4 id="GPG-ä»‹ç»"><a href="#GPG-ä»‹ç»" class="headerlink" title="GPG ä»‹ç»"></a>GPG ä»‹ç»</h4><p>é¦–å…ˆï¼Œåœ¨å¼€å§‹ç­¾åä¹‹å‰ä½ éœ€è¦å…ˆé…ç½® GPG å¹¶å®‰è£…ä¸ªäººå¯†é’¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --list-keys</span><br><span class="line">/Users/schacon/.gnupg/pubring.gpg</span><br><span class="line">---------------------------------</span><br><span class="line">pub   2048R/0A46826A 2014-06-04</span><br><span class="line">uid                  Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;</span><br><span class="line">sub   2048R/874529A9 2014-06-04</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…ä¸€ä¸ªå¯†é’¥ï¼Œå¯ä»¥ä½¿ç”¨ <code>gpg --gen-key</code> ç”Ÿæˆä¸€ä¸ªã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --gen-key</span><br></pre></td></tr></table></figure><p>ä¸€æ—¦ä½ æœ‰ä¸€ä¸ªå¯ä»¥ç­¾ç½²çš„ç§é’¥ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® Git çš„ <code>user.signingkey</code> é€‰é¡¹æ¥ç­¾ç½²ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.signingkey 0A46826A</span><br></pre></td></tr></table></figure><p>ç°åœ¨ Git é»˜è®¤ä½¿ç”¨ä½ çš„å¯†é’¥æ¥ç­¾ç½²æ ‡ç­¾ä¸æäº¤ã€‚</p><h4 id="ç­¾ç½²æ ‡ç­¾"><a href="#ç­¾ç½²æ ‡ç­¾" class="headerlink" title="ç­¾ç½²æ ‡ç­¾"></a>ç­¾ç½²æ ‡ç­¾</h4><p>å¦‚æœå·²ç»è®¾ç½®å¥½ä¸€ä¸ª GPG ç§é’¥ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥ç­¾ç½²æ–°çš„æ ‡ç­¾ã€‚ æ‰€æœ‰éœ€è¦åšçš„åªæ˜¯ä½¿ç”¨ <code>-s</code> ä»£æ›¿ <code>-a</code> å³å¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -s v1.5 -m &apos;my signed 1.5 tag&apos;</span><br><span class="line"></span><br><span class="line">You need a passphrase to unlock the secret key for</span><br><span class="line">user: &quot;Ben Straub &lt;ben@straub.cc&gt;&quot;</span><br><span class="line">2048-bit RSA key, ID 800430EB, created 2014-05-04</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨é‚£ä¸ªæ ‡ç­¾ä¸Šè¿è¡Œ <code>git show</code>ï¼Œä¼šçœ‹åˆ°ä½ çš„ GPG ç­¾åé™„å±åœ¨åé¢ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ git show v1.5</span><br><span class="line">tag v1.5</span><br><span class="line">Tagger: Ben Straub &lt;ben@straub.cc&gt;</span><br><span class="line">Date:   Sat May 3 20:29:41 2014 -0700</span><br><span class="line"></span><br><span class="line">my signed 1.5 tag</span><br><span class="line">-----BEGIN PGP SIGNATURE-----</span><br><span class="line">Version: GnuPG v1</span><br><span class="line"></span><br><span class="line">iQEcBAABAgAGBQJTZbQlAAoJEF0+sviABDDrZbQH/09PfE51KPVPlanr6q1v4/Ut</span><br><span class="line">LQxfojUWiLQdg2ESJItkcuweYg+kc3HCyFejeDIBw9dpXt00rY26p05qrpnG+85b</span><br><span class="line">hM1/PswpPLuBSr+oCIDj5GMC2r2iEKsfv2fJbNW8iWAXVLoWZRF8B0MfqX/YTMbm</span><br><span class="line">ecorc4iXzQu7tupRihslbNkfvfciMnSDeSvzCpWAHl7h8Wj6hhqePmLm9lAYqnKp</span><br><span class="line">8S5B/1SSQuEAjRZgI4IexpZoeKGVDptPHxLLS38fozsyi0QyDyzEgJxcJQVMXxVi</span><br><span class="line">RUysgqjcpT8+iQM1PblGfHR4XAhuOqN5Fx06PSaFZhqvWFezJ28/CLyX5q+oIVk=</span><br><span class="line">=EFTF</span><br><span class="line">-----END PGP SIGNATURE-----</span><br><span class="line"></span><br><span class="line">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class="line"></span><br><span class="line">    changed the version number</span><br></pre></td></tr></table></figure><h4 id="éªŒè¯æ ‡ç­¾"><a href="#éªŒè¯æ ‡ç­¾" class="headerlink" title="éªŒè¯æ ‡ç­¾"></a>éªŒè¯æ ‡ç­¾</h4><p>è¦éªŒè¯ä¸€ä¸ªç­¾ç½²çš„æ ‡ç­¾ï¼Œå¯ä»¥è¿è¡Œ <code>git tag -v [tag-name]</code>ã€‚ è¿™ä¸ªå‘½ä»¤ä½¿ç”¨ GPG æ¥éªŒè¯ç­¾åã€‚ ä¸ºäº†éªŒè¯èƒ½æ­£å¸¸å·¥ä½œï¼Œç­¾ç½²è€…çš„å…¬é’¥éœ€è¦åœ¨ä½ çš„é’¥åŒ™é“¾ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -v v1.4.2.1</span><br><span class="line">object 883653babd8ee7ea23e6a5c392bb739348b1eb61</span><br><span class="line">type commit</span><br><span class="line">tag v1.4.2.1</span><br><span class="line">tagger Junio C Hamano &lt;junkio@cox.net&gt; 1158138501 -0700</span><br><span class="line"></span><br><span class="line">GIT 1.4.2.1</span><br><span class="line"></span><br><span class="line">Minor fixes since 1.4.2, including git-mv and git-http with alternates.</span><br><span class="line">gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A</span><br><span class="line">gpg: Good signature from &quot;Junio C Hamano &lt;junkio@cox.net&gt;&quot;</span><br><span class="line">gpg:                 aka &quot;[jpeg image of size 1513]&quot;</span><br><span class="line">Primary key fingerprint: 3565 2A26 2040 E066 C9A7  4A7D C0C6 D9A4 F311 9B9A</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰ç­¾ç½²è€…çš„å…¬é’¥ï¼Œé‚£ä¹ˆä½ å°†ä¼šå¾—åˆ°ç±»ä¼¼ä¸‹é¢çš„ä¸œè¥¿ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A</span><br><span class="line">gpg: Can&apos;t check signature: public key not found</span><br><span class="line">error: could not verify the tag &apos;v1.4.2.1&apos;</span><br></pre></td></tr></table></figure><h4 id="ç­¾ç½²æäº¤"><a href="#ç­¾ç½²æäº¤" class="headerlink" title="ç­¾ç½²æäº¤"></a>ç­¾ç½²æäº¤</h4><p>åœ¨æœ€æ–°ç‰ˆæœ¬çš„ Git ä¸­ï¼ˆv1.7.9 åŠä»¥ä¸Šï¼‰ï¼Œä¹Ÿå¯ä»¥ç­¾ç½²ä¸ªäººæäº¤ã€‚ å¦‚æœç›¸å¯¹äºæ ‡ç­¾è€Œè¨€ä½ å¯¹ç›´æ¥ç­¾ç½²åˆ°æäº¤æ›´æ„Ÿå…´è¶£çš„è¯ï¼Œæ‰€æœ‰è¦åšçš„åªæ˜¯å¢åŠ ä¸€ä¸ª <code>-S</code> åˆ° <code>git commit</code> å‘½ä»¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -a -S -m &apos;signed commit&apos;</span><br><span class="line"></span><br><span class="line">You need a passphrase to unlock the secret key for</span><br><span class="line">user: &quot;Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;&quot;</span><br><span class="line">2048-bit RSA key, ID 0A46826A, created 2014-06-04</span><br><span class="line"></span><br><span class="line">[master 5c3386c] signed commit</span><br><span class="line"> 4 files changed, 4 insertions(+), 24 deletions(-)</span><br><span class="line"> rewrite Rakefile (100%)</span><br><span class="line"> create mode 100644 lib/git.rb</span><br><span class="line">git log ä¹Ÿæœ‰ä¸€ä¸ª --show-signature é€‰é¡¹æ¥æŸ¥çœ‹åŠéªŒè¯è¿™äº›ç­¾åã€‚</span><br><span class="line"></span><br><span class="line">$ git log --show-signature -1</span><br><span class="line">commit 5c3386cf54bba0a33a32da706aa52bc0155503c2</span><br><span class="line">gpg: Signature made Wed Jun  4 19:49:17 2014 PDT using RSA key ID 0A46826A</span><br><span class="line">gpg: Good signature from &quot;Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;&quot;</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Wed Jun 4 19:49:17 2014 -0700</span><br><span class="line"></span><br><span class="line">    signed commit</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œä¹Ÿå¯ä»¥é…ç½® <code>git log</code> æ¥éªŒè¯ä»»ä½•æ‰¾åˆ°çš„ç­¾åå¹¶å°†å®ƒä»¬ä»¥ <code>%G?</code> æ ¼å¼åˆ—åœ¨è¾“å‡ºä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=&quot;format:%h %G? %aN  %s&quot;</span><br><span class="line"></span><br><span class="line">5c3386c G Scott Chacon  signed commit</span><br><span class="line">ca82a6d N Scott Chacon  changed the version number</span><br><span class="line">085bb3b N Scott Chacon  removed unnecessary test code</span><br><span class="line">a11bef0 N Scott Chacon  first commit</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åªæœ‰æœ€åä¸€æ¬¡æäº¤æ˜¯ç­¾ç½²å¹¶æœ‰æ•ˆçš„ï¼Œè€Œä¹‹å‰çš„æäº¤éƒ½ä¸æ˜¯ã€‚</p><p>åœ¨ Git 1.8.3 åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œâ€œgit mergeâ€ ä¸â€œgit pullâ€ å¯ä»¥ä½¿ç”¨ <code>--verify-signatures</code> é€‰é¡¹æ¥æ£€æŸ¥å¹¶æ‹’ç»æ²¡æœ‰æºå¸¦å¯ä¿¡ GPG ç­¾åçš„æäº¤ã€‚</p><p>å¦‚æœä½¿ç”¨è¿™ä¸ªé€‰é¡¹æ¥åˆå¹¶ä¸€ä¸ªåŒ…å«æœªç­¾åæˆ–æœ‰æ•ˆçš„æäº¤çš„åˆ†æ”¯æ—¶ï¼Œåˆå¹¶ä¸ä¼šç”Ÿæ•ˆã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --verify-signatures non-verify</span><br><span class="line">fatal: Commit ab06180 does not have a GPG signature.</span><br></pre></td></tr></table></figure><p>å¦‚æœåˆå¹¶åŒ…å«çš„åªæœ‰æœ‰æ•ˆçš„ç­¾åçš„æäº¤ï¼Œåˆå¹¶å‘½ä»¤ä¼šæç¤ºæ‰€æœ‰çš„ç­¾åå®ƒå·²ç»æ£€æŸ¥è¿‡äº†ç„¶åä¼šç»§ç»­å‘å‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --verify-signatures signed-branch</span><br><span class="line">Commit 13ad65e has a good GPG signature by Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;</span><br><span class="line">Updating 5c3386c..13ad65e</span><br><span class="line">Fast-forward</span><br><span class="line"> README | 2 ++</span><br><span class="line"> 1 file changed, 2 insertions(+)</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç»™ <code>git merge</code> å‘½ä»¤é™„åŠ  <code>-S</code> é€‰é¡¹æ¥ç­¾ç½²è‡ªå·±ç”Ÿæˆçš„åˆå¹¶æäº¤ã€‚ ä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºäº†éªŒè¯å°†è¦åˆå¹¶çš„åˆ†æ”¯çš„æ¯ä¸€ä¸ªæäº¤éƒ½æ˜¯ç­¾åçš„å¹¶ä¸”ç­¾ç½²æœ€åç”Ÿæˆçš„åˆå¹¶æäº¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --verify-signatures -S  signed-branch</span><br><span class="line">Commit 13ad65e has a good GPG signature by Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;</span><br><span class="line"></span><br><span class="line">You need a passphrase to unlock the secret key for</span><br><span class="line">user: &quot;Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;&quot;</span><br><span class="line">2048-bit RSA key, ID 0A46826A, created 2014-06-04</span><br><span class="line"></span><br><span class="line">Merge made by the &apos;recursive&apos; strategy.</span><br><span class="line"> README | 2 ++</span><br><span class="line"> 1 file changed, 2 insertions(+)</span><br></pre></td></tr></table></figure><h4 id="æ¯ä¸ªäººå¿…é¡»ç­¾ç½²"><a href="#æ¯ä¸ªäººå¿…é¡»ç­¾ç½²" class="headerlink" title="æ¯ä¸ªäººå¿…é¡»ç­¾ç½²"></a>æ¯ä¸ªäººå¿…é¡»ç­¾ç½²</h4><p>ç­¾ç½²æ ‡ç­¾ä¸æäº¤å¾ˆæ£’ï¼Œä½†æ˜¯å¦‚æœå†³å®šåœ¨æ­£å¸¸çš„å·¥ä½œæµç¨‹ä¸­ä½¿ç”¨å®ƒï¼Œä½ å¿…é¡»ç¡®ä¿å›¢é˜Ÿä¸­çš„æ¯ä¸€ä¸ªäººéƒ½ç†è§£å¦‚ä½•è¿™æ ·åšã€‚ å¦‚æœæ²¡æœ‰ï¼Œä½ å°†ä¼šèŠ±è´¹å¤§é‡æ—¶é—´å¸®åŠ©å…¶ä»–äººæ‰¾å‡ºå¹¶ç”¨ç­¾åçš„ç‰ˆæœ¬é‡å†™æäº¤ã€‚ åœ¨é‡‡ç”¨ç­¾ç½²æˆä¸ºæ ‡å‡†å·¥ä½œæµç¨‹çš„ä¸€éƒ¨åˆ†å‰ï¼Œç¡®ä¿ä½ å®Œå…¨ç†è§£ GPG åŠç­¾ç½²å¸¦æ¥çš„å¥½å¤„ã€‚</p><h3 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h3><p>æ— è®ºä»“åº“é‡Œçš„ä»£ç é‡æœ‰å¤šå°‘ï¼Œä½ ç»å¸¸éœ€è¦æŸ¥æ‰¾ä¸€ä¸ªå‡½æ•°æ˜¯åœ¨å“ªé‡Œè°ƒç”¨æˆ–è€…å®šä¹‰çš„ï¼Œæˆ–è€…ä¸€ä¸ªæ–¹æ³•çš„å˜æ›´å†å²ã€‚ Git æä¾›äº†ä¸¤ä¸ªæœ‰ç”¨çš„å·¥å…·æ¥å¿«é€Ÿåœ°ä»å®ƒçš„æ•°æ®åº“ä¸­æµè§ˆä»£ç å’Œæäº¤ã€‚ æˆ‘ä»¬æ¥ç®€å•çš„çœ‹ä¸€ä¸‹ã€‚</p><h4 id="Git-Grep"><a href="#Git-Grep" class="headerlink" title="Git Grep"></a>Git Grep</h4><p>Git æä¾›äº†ä¸€ä¸ª <code>grep</code> å‘½ä»¤ï¼Œä½ å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä»æäº¤å†å²æˆ–è€…å·¥ä½œç›®å½•ä¸­æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…æ­£åˆ™è¡¨è¾¾å¼ã€‚ æˆ‘ä»¬ç”¨ Git æœ¬èº«æºä»£ç çš„æŸ¥æ‰¾ä½œä¸ºä¾‹å­ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ Git ä¼šæŸ¥æ‰¾ä½ å·¥ä½œç›®å½•çš„æ–‡ä»¶ã€‚ ä½ å¯ä»¥ä¼ å…¥ <code>-n</code> å‚æ•°æ¥è¾“å‡º Git æ‰€æ‰¾åˆ°çš„åŒ¹é…è¡Œè¡Œå·ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git grep -n gmtime_r</span><br><span class="line">compat/gmtime.c:3:#undef gmtime_r</span><br><span class="line">compat/gmtime.c:8:      return git_gmtime_r(timep, &amp;result);</span><br><span class="line">compat/gmtime.c:11:struct tm *git_gmtime_r(const time_t *timep, struct tm *result)</span><br><span class="line">compat/gmtime.c:16:     ret = gmtime_r(timep, result);</span><br><span class="line">compat/mingw.c:606:struct tm *gmtime_r(const time_t *timep, struct tm *result)</span><br><span class="line">compat/mingw.h:162:struct tm *gmtime_r(const time_t *timep, struct tm *result);</span><br><span class="line">date.c:429:             if (gmtime_r(&amp;now, &amp;now_tm))</span><br><span class="line">date.c:492:             if (gmtime_r(&amp;time, tm)) &#123;</span><br><span class="line">git-compat-util.h:721:struct tm *git_gmtime_r(const time_t *, struct tm *);</span><br><span class="line">git-compat-util.h:723:#define gmtime_r git_gmtime_r</span><br></pre></td></tr></table></figure><p><code>grep</code> å‘½ä»¤æœ‰ä¸€äº›æœ‰è¶£çš„é€‰é¡¹ã€‚</p><p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>--count</code> é€‰é¡¹æ¥ä½¿ Git è¾“å‡ºæ¦‚è¿°çš„ä¿¡æ¯ï¼Œä»…ä»…åŒ…æ‹¬å“ªäº›æ–‡ä»¶åŒ…å«åŒ¹é…ä»¥åŠæ¯ä¸ªæ–‡ä»¶åŒ…å«äº†å¤šå°‘ä¸ªåŒ¹é…ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git grep --count gmtime_r</span><br><span class="line">compat/gmtime.c:4</span><br><span class="line">compat/mingw.c:1</span><br><span class="line">compat/mingw.h:1</span><br><span class="line">date.c:2</span><br><span class="line">git-compat-util.h:2</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³çœ‹åŒ¹é…çš„è¡Œæ˜¯å±äºå“ªä¸€ä¸ªæ–¹æ³•æˆ–è€…å‡½æ•°ï¼Œä½ å¯ä»¥ä¼ å…¥ <code>-p</code> é€‰é¡¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git grep -p gmtime_r *.c</span><br><span class="line">date.c=static int match_multi_number(unsigned long num, char c, const char *date, char *end, struct tm *tm)</span><br><span class="line">date.c:         if (gmtime_r(&amp;now, &amp;now_tm))</span><br><span class="line">date.c=static int match_digit(const char *date, struct tm *tm, int *offset, int *tm_gmt)</span><br><span class="line">date.c:         if (gmtime_r(&amp;time, tm)) &#123;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ date.c æ–‡ä»¶ä¸­æœ‰ <code>match_multi_number</code> å’Œ <code>match_digit</code> ä¸¤ä¸ªå‡½æ•°è°ƒç”¨äº† <code>gmtime_r</code>ã€‚</p><p>ä½ è¿˜å¯ä»¥ä½¿ç”¨ <code>--and</code> æ ‡å¿—æ¥æŸ¥çœ‹å¤æ‚çš„å­—ç¬¦ä¸²ç»„åˆï¼Œä¹Ÿå°±æ˜¯åœ¨åŒä¸€è¡ŒåŒæ—¶åŒ…å«å¤šä¸ªåŒ¹é…ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦æŸ¥çœ‹åœ¨æ—§ç‰ˆæœ¬ 1.8.0 çš„ Git ä»£ç åº“ä¸­å®šä¹‰äº†å¸¸é‡ååŒ…å« â€œLINKâ€ æˆ–è€… â€œBUF_MAXâ€ è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€åœ¨çš„è¡Œã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä¹Ÿç”¨åˆ°äº† <code>--break</code> å’Œ <code>--heading</code> é€‰é¡¹æ¥ä½¿è¾“å‡ºæ›´åŠ å®¹æ˜“é˜…è¯»ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ git grep --break --heading \</span><br><span class="line">    -n -e &apos;#define&apos; --and \( -e LINK -e BUF_MAX \) v1.8.0</span><br><span class="line">v1.8.0:builtin/index-pack.c</span><br><span class="line">62:#define FLAG_LINK (1u&lt;&lt;20)</span><br><span class="line"></span><br><span class="line">v1.8.0:cache.h</span><br><span class="line">73:#define S_IFGITLINK  0160000</span><br><span class="line">74:#define S_ISGITLINK(m)       (((m) &amp; S_IFMT) == S_IFGITLINK)</span><br><span class="line"></span><br><span class="line">v1.8.0:environment.c</span><br><span class="line">54:#define OBJECT_CREATION_MODE OBJECT_CREATION_USES_HARDLINKS</span><br><span class="line"></span><br><span class="line">v1.8.0:strbuf.c</span><br><span class="line">326:#define STRBUF_MAXLINK (2*PATH_MAX)</span><br><span class="line"></span><br><span class="line">v1.8.0:symlinks.c</span><br><span class="line">53:#define FL_SYMLINK  (1 &lt;&lt; 2)</span><br><span class="line"></span><br><span class="line">v1.8.0:zlib.c</span><br><span class="line">30:/* #define ZLIB_BUF_MAX ((uInt)-1) */</span><br><span class="line">31:#define ZLIB_BUF_MAX ((uInt) 1024 * 1024 * 1024) /* 1GB */</span><br></pre></td></tr></table></figure><p>ç›¸æ¯”äºä¸€äº›å¸¸ç”¨çš„æœç´¢å‘½ä»¤æ¯”å¦‚ <code>grep</code> å’Œ <code>ack</code>ï¼Œ<code>git grep</code> å‘½ä»¤æœ‰ä¸€äº›çš„ä¼˜ç‚¹ã€‚ ç¬¬ä¸€å°±æ˜¯é€Ÿåº¦éå¸¸å¿«ï¼Œç¬¬äºŒæ˜¯ä½ ä¸ä»…ä»…å¯ä»¥å¯ä»¥æœç´¢å·¥ä½œç›®å½•ï¼Œè¿˜å¯ä»¥æœç´¢ä»»æ„çš„ Git æ ‘ã€‚ åœ¨ä¸Šä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªæ—§ç‰ˆæœ¬çš„ Git æºä»£ç ä¸­æŸ¥æ‰¾ï¼Œè€Œä¸æ˜¯å½“å‰æ£€å‡ºçš„ç‰ˆæœ¬ã€‚</p><h4 id="Git-æ—¥å¿—æœç´¢"><a href="#Git-æ—¥å¿—æœç´¢" class="headerlink" title="Git æ—¥å¿—æœç´¢"></a>Git æ—¥å¿—æœç´¢</h4><p>æˆ–è®¸ä½ ä¸æƒ³çŸ¥é“æŸä¸€é¡¹åœ¨ å“ªé‡Œ ï¼Œè€Œæ˜¯æƒ³çŸ¥é“æ˜¯ä»€ä¹ˆ æ—¶å€™ å­˜åœ¨æˆ–è€…å¼•å…¥çš„ã€‚ <code>git log</code> å‘½ä»¤æœ‰è®¸å¤šå¼ºå¤§çš„å·¥å…·å¯ä»¥é€šè¿‡æäº¤ä¿¡æ¯ç”šè‡³æ˜¯ diff çš„å†…å®¹æ¥æ‰¾åˆ°æŸä¸ªç‰¹å®šçš„æäº¤ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ‰¾åˆ° <code>ZLIB_BUF_MAX</code> å¸¸é‡æ˜¯ä»€ä¹ˆæ—¶å€™å¼•å…¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>-S</code> é€‰é¡¹æ¥æ˜¾ç¤ºæ–°å¢å’Œåˆ é™¤è¯¥å­—ç¬¦ä¸²çš„æäº¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git log -SZLIB_BUF_MAX --oneline</span><br><span class="line">e01503b zlib: allow feeding more than 4GB in one go</span><br><span class="line">ef49a7a zlib: zlib can only process 4GB at a time</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æŸ¥çœ‹è¿™äº›æäº¤çš„ diffï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ <code>ef49a7a</code> è¿™ä¸ªæäº¤å¼•å…¥äº†å¸¸é‡ï¼Œå¹¶ä¸”åœ¨ <code>e01503b</code> è¿™ä¸ªæäº¤ä¸­è¢«ä¿®æ”¹äº†ã€‚</p><p>å¦‚æœä½ å¸Œæœ›å¾—åˆ°æ›´ç²¾ç¡®çš„ç»“æœï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>-G</code> é€‰é¡¹æ¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢ã€‚</p><p><strong>è¡Œæ—¥å¿—æœç´¢</strong><br>è¡Œæ—¥å¿—æœç´¢æ˜¯å¦ä¸€ä¸ªç›¸å½“é«˜çº§å¹¶ä¸”æœ‰ç”¨çš„æ—¥å¿—æœç´¢åŠŸèƒ½ã€‚ è¿™æ˜¯ä¸€ä¸ªæœ€è¿‘æ–°å¢çš„ä¸å¤ªçŸ¥åçš„åŠŸèƒ½ï¼Œä½†å´æ˜¯ååˆ†æœ‰ç”¨ã€‚ åœ¨ <code>git log</code> ååŠ ä¸Š <code>-L</code> é€‰é¡¹å³å¯è°ƒç”¨ï¼Œå®ƒå¯ä»¥å±•ç¤ºä»£ç ä¸­ä¸€è¡Œæˆ–è€…ä¸€ä¸ªå‡½æ•°çš„å†å²ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æƒ³æŸ¥çœ‹ <code>zlib.c</code> æ–‡ä»¶ä¸­<code>git_deflate_bound</code> å‡½æ•°çš„æ¯ä¸€æ¬¡å˜æ›´ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œ <code>git log -L :git_deflate_bound:zlib.c</code>ã€‚ Git ä¼šå°è¯•æ‰¾å‡ºè¿™ä¸ªå‡½æ•°çš„èŒƒå›´ï¼Œç„¶åæŸ¥æ‰¾å†å²è®°å½•ï¼Œå¹¶ä¸”æ˜¾ç¤ºä»å‡½æ•°åˆ›å»ºä¹‹åä¸€ç³»åˆ—å˜æ›´å¯¹åº”çš„è¡¥ä¸ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$ git log -L :git_deflate_bound:zlib.c</span><br><span class="line">commit ef49a7a0126d64359c974b4b3b71d7ad42ee3bca</span><br><span class="line">Author: Junio C Hamano &lt;gitster@pobox.com&gt;</span><br><span class="line">Date:   Fri Jun 10 11:52:15 2011 -0700</span><br><span class="line"></span><br><span class="line">    zlib: zlib can only process 4GB at a time</span><br><span class="line"></span><br><span class="line">diff --git a/zlib.c b/zlib.c</span><br><span class="line">--- a/zlib.c</span><br><span class="line">+++ b/zlib.c</span><br><span class="line">@@ -85,5 +130,5 @@</span><br><span class="line">-unsigned long git_deflate_bound(z_streamp strm, unsigned long size)</span><br><span class="line">+unsigned long git_deflate_bound(git_zstream *strm, unsigned long size)</span><br><span class="line"> &#123;</span><br><span class="line">-       return deflateBound(strm, size);</span><br><span class="line">+       return deflateBound(&amp;strm-&gt;z, size);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">commit 225a6f1068f71723a910e8565db4e252b3ca21fa</span><br><span class="line">Author: Junio C Hamano &lt;gitster@pobox.com&gt;</span><br><span class="line">Date:   Fri Jun 10 11:18:17 2011 -0700</span><br><span class="line"></span><br><span class="line">    zlib: wrap deflateBound() too</span><br><span class="line"></span><br><span class="line">diff --git a/zlib.c b/zlib.c</span><br><span class="line">--- a/zlib.c</span><br><span class="line">+++ b/zlib.c</span><br><span class="line">@@ -81,0 +85,5 @@</span><br><span class="line">+unsigned long git_deflate_bound(z_streamp strm, unsigned long size)</span><br><span class="line">+&#123;</span><br><span class="line">+       return deflateBound(strm, size);</span><br><span class="line">+&#125;</span><br><span class="line">+</span><br></pre></td></tr></table></figure><p>å¦‚æœ Git æ— æ³•è®¡ç®—å‡ºå¦‚ä½•åŒ¹é…ä½ ä»£ç ä¸­çš„å‡½æ•°æˆ–è€…æ–¹æ³•ï¼Œä½ å¯ä»¥æä¾›ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚ ä¾‹å¦‚ï¼Œè¿™ä¸ªå‘½ä»¤å’Œä¸Šé¢çš„æ˜¯ç­‰åŒçš„ï¼š<code>git log -L &#39;/unsigned long git_deflate_bound/&#39;,/^}/:zlib.c</code>ã€‚ ä½ ä¹Ÿå¯ä»¥æä¾›å•è¡Œæˆ–è€…ä¸€ä¸ªèŒƒå›´çš„è¡Œå·æ¥è·å¾—ç›¸åŒçš„è¾“å‡ºã€‚</p><h3 id="é‡å†™å†å²"><a href="#é‡å†™å†å²" class="headerlink" title="é‡å†™å†å²"></a>é‡å†™å†å²</h3><p>è®¸å¤šæ—¶å€™ï¼Œåœ¨ä½¿ç”¨ Git æ—¶ï¼Œå¯èƒ½ä¼šå› ä¸ºæŸäº›åŸå› æƒ³è¦ä¿®æ­£æäº¤å†å²ã€‚ Git å¾ˆæ£’çš„ä¸€ç‚¹æ˜¯å®ƒå…è®¸ä½ åœ¨æœ€åæ—¶åˆ»åšå†³å®šã€‚ ä½ å¯ä»¥åœ¨å°†æš‚å­˜åŒºå†…å®¹æäº¤å‰å†³å®šå“ªäº›æ–‡ä»¶è¿›å…¥æäº¤ï¼Œå¯ä»¥é€šè¿‡ stash å‘½ä»¤æ¥å†³å®šä¸ä¸æŸäº›å†…å®¹å·¥ä½œï¼Œä¹Ÿå¯ä»¥é‡å†™å·²ç»å‘ç”Ÿçš„æäº¤å°±åƒå®ƒä»¬ä»¥å¦ä¸€ç§æ–¹å¼å‘ç”Ÿçš„ä¸€æ ·ã€‚ è¿™å¯èƒ½æ¶‰åŠæ”¹å˜æäº¤çš„é¡ºåºï¼Œæ”¹å˜æäº¤ä¸­çš„ä¿¡æ¯æˆ–ä¿®æ”¹æ–‡ä»¶ï¼Œå°†æäº¤å‹ç¼©æˆ–æ˜¯æ‹†åˆ†ï¼Œæˆ–å®Œå…¨åœ°ç§»é™¤æäº¤â€”â€”åœ¨å°†ä½ çš„å·¥ä½œæˆæœä¸ä»–äººå…±äº«ä¹‹å‰ã€‚</p><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å¯ä»¥å­¦åˆ°å¦‚ä½•å®Œæˆè¿™äº›éå¸¸æœ‰ç”¨çš„å·¥ä½œï¼Œè¿™æ ·åœ¨ä¸ä»–äººåˆ†äº«ä½ çš„å·¥ä½œæˆæœæ—¶ä½ çš„æäº¤å†å²å°†å¦‚ä½ æ‰€æ„¿åœ°å±•ç¤ºå‡ºæ¥ã€‚</p><h4 id="ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤"><a href="#ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤" class="headerlink" title="ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤"></a>ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤</h4><p>ä¿®æ”¹ä½ æœ€è¿‘ä¸€æ¬¡æäº¤å¯èƒ½æ˜¯æ‰€æœ‰ä¿®æ”¹å†å²æäº¤çš„æ“ä½œä¸­æœ€å¸¸è§çš„ä¸€ä¸ªã€‚ å¯¹äºä½ çš„æœ€è¿‘ä¸€æ¬¡æäº¤ï¼Œä½ å¾€å¾€æƒ³åšä¸¤ä»¶äº‹æƒ…ï¼šä¿®æ”¹æäº¤ä¿¡æ¯ï¼Œæˆ–è€…ä¿®æ”¹ä½ æ·»åŠ ã€ä¿®æ”¹å’Œç§»é™¤çš„æ–‡ä»¶çš„å¿«ç…§ã€‚</p><p>å¦‚æœï¼Œä½ åªæ˜¯æƒ³ä¿®æ”¹æœ€è¿‘ä¸€æ¬¡æäº¤çš„æäº¤ä¿¡æ¯ï¼Œé‚£ä¹ˆå¾ˆç®€å•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit --amend</span><br></pre></td></tr></table></figure><p>è¿™ä¼šæŠŠä½ å¸¦å…¥æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œé‡Œé¢åŒ…å«äº†ä½ æœ€è¿‘ä¸€æ¡æäº¤ä¿¡æ¯ï¼Œä¾›ä½ ä¿®æ”¹ã€‚ å½“ä¿å­˜å¹¶å…³é—­ç¼–è¾‘å™¨åï¼Œç¼–è¾‘å™¨å°†ä¼šç”¨ä½ è¾“å…¥çš„å†…å®¹æ›¿æ¢æœ€è¿‘ä¸€æ¡æäº¤ä¿¡æ¯ã€‚</p><p>å¦‚æœä½ å·²ç»å®Œæˆæäº¤ï¼Œåˆå› ä¸ºä¹‹å‰æäº¤æ—¶å¿˜è®°æ·»åŠ ä¸€ä¸ªæ–°åˆ›å»ºçš„æ–‡ä»¶ï¼Œæƒ³é€šè¿‡æ·»åŠ æˆ–ä¿®æ”¹æ–‡ä»¶æ¥æ›´æ”¹æäº¤çš„å¿«ç…§ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç±»ä¼¼çš„æ“ä½œæ¥å®Œæˆã€‚ é€šè¿‡ä¿®æ”¹æ–‡ä»¶ç„¶åè¿è¡Œ <code>git add</code> æˆ– <code>git rm</code> ä¸€ä¸ªå·²è¿½è¸ªçš„æ–‡ä»¶ï¼Œéšåè¿è¡Œ <code>git commit --amend</code> æ‹¿èµ°å½“å‰çš„æš‚å­˜åŒºåŸŸå¹¶ä½¿å…¶åšä¸ºæ–°æäº¤çš„å¿«ç…§ã€‚</p><p>ä½¿ç”¨è¿™ä¸ªæŠ€å·§çš„æ—¶å€™éœ€è¦å°å¿ƒï¼Œå› ä¸ºä¿®æ­£ä¼šæ”¹å˜æäº¤çš„ SHA-1 æ ¡éªŒå’Œã€‚ å®ƒç±»ä¼¼äºä¸€ä¸ªå°çš„å˜åŸºâ€”â€”å¦‚æœå·²ç»æ¨é€äº†æœ€åä¸€æ¬¡æäº¤å°±ä¸è¦ä¿®æ­£å®ƒã€‚</p><h4 id="ä¿®æ”¹å¤šä¸ªæäº¤ä¿¡æ¯"><a href="#ä¿®æ”¹å¤šä¸ªæäº¤ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹å¤šä¸ªæäº¤ä¿¡æ¯"></a>ä¿®æ”¹å¤šä¸ªæäº¤ä¿¡æ¯</h4><p>ä¸ºäº†ä¿®æ”¹åœ¨æäº¤å†å²ä¸­è¾ƒè¿œçš„æäº¤ï¼Œå¿…é¡»ä½¿ç”¨æ›´å¤æ‚çš„å·¥å…·ã€‚ Git æ²¡æœ‰ä¸€ä¸ªæ”¹å˜å†å²å·¥å…·ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨å˜åŸºå·¥å…·æ¥å˜åŸºä¸€ç³»åˆ—æäº¤ï¼ŒåŸºäºå®ƒä»¬åŸæ¥çš„ HEAD è€Œä¸æ˜¯å°†å…¶ç§»åŠ¨åˆ°å¦ä¸€ä¸ªæ–°çš„ä¸Šé¢ã€‚ é€šè¿‡äº¤äº’å¼å˜åŸºå·¥å…·ï¼Œå¯ä»¥åœ¨ä»»ä½•æƒ³è¦ä¿®æ”¹çš„æäº¤ååœæ­¢ï¼Œç„¶åä¿®æ”¹ä¿¡æ¯ã€æ·»åŠ æ–‡ä»¶æˆ–åšä»»ä½•æƒ³åšçš„äº‹æƒ…ã€‚ å¯ä»¥é€šè¿‡ç»™ <code>git rebase</code> å¢åŠ  <code>-i</code> é€‰é¡¹æ¥äº¤äº’å¼åœ°è¿è¡Œå˜åŸºã€‚ å¿…é¡»æŒ‡å®šæƒ³è¦é‡å†™å¤šä¹…è¿œçš„å†å²ï¼Œè¿™å¯ä»¥é€šè¿‡å‘Šè¯‰å‘½ä»¤å°†è¦å˜åŸºåˆ°çš„æäº¤æ¥åšåˆ°ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹æœ€è¿‘ä¸‰æ¬¡æäº¤ä¿¡æ¯ï¼Œæˆ–è€…é‚£ç»„æäº¤ä¸­çš„ä»»æ„ä¸€ä¸ªæäº¤ä¿¡æ¯ï¼Œå°†æƒ³è¦ä¿®æ”¹çš„æœ€è¿‘ä¸€æ¬¡æäº¤çš„çˆ¶æäº¤ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>git rebase -i</code> å‘½ä»¤ï¼Œå³ <code>HEAD~2^</code> æˆ– <code>HEAD~3</code>ã€‚ è®°ä½ <code>~3</code> å¯èƒ½æ¯”è¾ƒå®¹æ˜“ï¼Œå› ä¸ºä½ æ­£å°è¯•ä¿®æ”¹æœ€åä¸‰æ¬¡æäº¤ï¼›ä½†æ˜¯æ³¨æ„å®é™…ä¸ŠæŒ‡å®šäº†ä»¥å‰çš„å››æ¬¡æäº¤ï¼Œå³æƒ³è¦ä¿®æ”¹æäº¤çš„çˆ¶æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase -i HEAD~3</span><br></pre></td></tr></table></figure><p>å†æ¬¡è®°ä½è¿™æ˜¯ä¸€ä¸ªå˜åŸºå‘½ä»¤â€”â€”åœ¨ <code>HEAD~3..HEAD</code> èŒƒå›´å†…çš„æ¯ä¸€ä¸ªæäº¤éƒ½ä¼šè¢«é‡å†™ï¼Œæ— è®ºä½ æ˜¯å¦ä¿®æ”¹ä¿¡æ¯ã€‚ ä¸è¦æ¶‰åŠä»»ä½•å·²ç»æ¨é€åˆ°ä¸­å¤®æœåŠ¡å™¨çš„æäº¤â€”â€”è¿™æ ·åšä¼šäº§ç”Ÿä¸€æ¬¡å˜æ›´çš„ä¸¤ä¸ªç‰ˆæœ¬ï¼Œå› è€Œä½¿ä»–äººå›°æƒ‘ã€‚</p><p>è¿è¡Œè¿™ä¸ªå‘½ä»¤ä¼šåœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸Šç»™ä½ ä¸€ä¸ªæäº¤çš„åˆ—è¡¨ï¼Œçœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">pick f7f3f6d changed my name a bit</span><br><span class="line">pick 310154e updated README formatting and added blame</span><br><span class="line">pick a5f4a0d added cat-file</span><br><span class="line"></span><br><span class="line"># Rebase 710f0f8..a5f4a0d onto 710f0f8</span><br><span class="line">#</span><br><span class="line"># Commands:</span><br><span class="line">#  p, pick = use commit</span><br><span class="line">#  r, reword = use commit, but edit the commit message</span><br><span class="line">#  e, edit = use commit, but stop for amending</span><br><span class="line">#  s, squash = use commit, but meld into previous commit</span><br><span class="line">#  f, fixup = like &quot;squash&quot;, but discard this commit&apos;s log message</span><br><span class="line">#  x, exec = run command (the rest of the line) using shell</span><br><span class="line">#</span><br><span class="line"># These lines can be re-ordered; they are executed from top to bottom.</span><br><span class="line">#</span><br><span class="line"># If you remove a line here THAT COMMIT WILL BE LOST.</span><br><span class="line">#</span><br><span class="line"># However, if you remove everything, the rebase will be aborted.</span><br><span class="line">#</span><br><span class="line"># Note that empty commits are commented out</span><br></pre></td></tr></table></figure><p>éœ€è¦é‡ç‚¹æ³¨æ„çš„æ˜¯ç›¸å¯¹äºæ­£å¸¸ä½¿ç”¨çš„ <code>log</code> å‘½ä»¤ï¼Œè¿™äº›æäº¤æ˜¾ç¤ºçš„é¡ºåºæ˜¯ç›¸åçš„ã€‚ è¿è¡Œä¸€æ¬¡ <code>log</code> å‘½ä»¤ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ä¸œè¥¿ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=format:&quot;%h %s&quot; HEAD~3..HEAD</span><br><span class="line">a5f4a0d added cat-file</span><br><span class="line">310154e updated README formatting and added blame</span><br><span class="line">f7f3f6d changed my name a bit</span><br></pre></td></tr></table></figure><p>æ³¨æ„å…¶ä¸­çš„ååºæ˜¾ç¤ºã€‚ äº¤äº’å¼å˜åŸºç»™ä½ ä¸€ä¸ªå®ƒå°†ä¼šè¿è¡Œçš„è„šæœ¬ã€‚ å®ƒå°†ä¼šä»ä½ åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„æäº¤ï¼ˆ<code>HEAD~3</code>ï¼‰å¼€å§‹ï¼Œä»ä¸Šåˆ°ä¸‹çš„ä¾æ¬¡é‡æ¼”æ¯ä¸€ä¸ªæäº¤å¼•å…¥çš„ä¿®æ”¹ã€‚ å®ƒå°†æœ€æ—§çš„è€Œä¸æ˜¯æœ€æ–°çš„åˆ—åœ¨ä¸Šé¢ï¼Œå› ä¸ºé‚£ä¼šæ˜¯ç¬¬ä¸€ä¸ªå°†è¦é‡æ¼”çš„ã€‚</p><p>ä½ éœ€è¦ä¿®æ”¹è„šæœ¬æ¥è®©å®ƒåœç•™åœ¨ä½ æƒ³ä¿®æ”¹çš„å˜æ›´ä¸Šã€‚ è¦è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä½ åªè¦å°†ä½ æƒ³ä¿®æ”¹çš„æ¯ä¸€æ¬¡æäº¤å‰é¢çš„ â€˜pickâ€™ æ”¹ä¸º â€˜editâ€™ã€‚ ä¾‹å¦‚ï¼Œåªæƒ³ä¿®æ”¹ç¬¬ä¸‰æ¬¡æäº¤ä¿¡æ¯ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·ä¿®æ”¹æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">edit f7f3f6d changed my name a bit</span><br><span class="line">pick 310154e updated README formatting and added blame</span><br><span class="line">pick a5f4a0d added cat-file</span><br></pre></td></tr></table></figure><p>å½“ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨æ—¶ï¼ŒGit å°†ä½ å¸¦å›åˆ°åˆ—è¡¨ä¸­çš„æœ€åä¸€æ¬¡æäº¤ï¼ŒæŠŠä½ é€å›å‘½ä»¤è¡Œå¹¶æç¤ºä»¥ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase -i HEAD~3</span><br><span class="line">Stopped at f7f3f6d... changed my name a bit</span><br><span class="line">You can amend the commit now, with</span><br><span class="line"></span><br><span class="line">       git commit --amend</span><br><span class="line"></span><br><span class="line">Once youâ€™re satisfied with your changes, run</span><br><span class="line"></span><br><span class="line">       git rebase --continue</span><br></pre></td></tr></table></figure><p>è¿™äº›æŒ‡ä»¤å‡†ç¡®åœ°å‘Šè¯‰ä½ è¯¥åšä»€ä¹ˆã€‚ è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit --amend</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æäº¤ä¿¡æ¯ï¼Œç„¶åé€€å‡ºç¼–è¾‘å™¨ã€‚ ç„¶åï¼Œè¿è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase --continue</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å°†ä¼šè‡ªåŠ¨åœ°åº”ç”¨å¦å¤–ä¸¤ä¸ªæäº¤ï¼Œç„¶åå°±å®Œæˆäº†ã€‚ å¦‚æœéœ€è¦å°†ä¸æ­¢ä¸€å¤„çš„ pick æ”¹ä¸º editï¼Œéœ€è¦åœ¨æ¯ä¸€ä¸ªä¿®æ”¹ä¸º edit çš„æäº¤ä¸Šé‡å¤è¿™äº›æ­¥éª¤ã€‚ æ¯ä¸€æ¬¡ï¼ŒGit å°†ä¼šåœæ­¢ï¼Œè®©ä½ ä¿®æ­£æäº¤ï¼Œç„¶åç»§ç»­ç›´åˆ°å®Œæˆã€‚</p><h4 id="é‡æ–°æ’åºæäº¤"><a href="#é‡æ–°æ’åºæäº¤" class="headerlink" title="é‡æ–°æ’åºæäº¤"></a>é‡æ–°æ’åºæäº¤</h4><p>ä¹Ÿå¯ä»¥ä½¿ç”¨äº¤äº’å¼å˜åŸºæ¥é‡æ–°æ’åºæˆ–å®Œå…¨ç§»é™¤æäº¤ã€‚ å¦‚æœæƒ³è¦ç§»é™¤ â€œadded cat-fileâ€ æäº¤ç„¶åä¿®æ”¹å¦å¤–ä¸¤ä¸ªæäº¤å¼•å…¥çš„é¡ºåºï¼Œå¯ä»¥å°†å˜åŸºè„šæœ¬ä»è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pick f7f3f6d changed my name a bit</span><br><span class="line">pick 310154e updated README formatting and added blame</span><br><span class="line">pick a5f4a0d added cat-file</span><br></pre></td></tr></table></figure><p>æ”¹ä¸ºè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pick 310154e updated README formatting and added blame</span><br><span class="line">pick f7f3f6d changed my name a bit</span><br></pre></td></tr></table></figure><p>å½“ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨æ—¶ï¼ŒGit å°†ä½ çš„åˆ†æ”¯å¸¦å›è¿™äº›æäº¤çš„çˆ¶æäº¤ï¼Œåº”ç”¨ <code>310154e</code> ç„¶ååº”ç”¨ <code>f7f3f6d</code>ï¼Œæœ€ååœæ­¢ã€‚ äº‹å®ä¿®æ”¹äº†é‚£äº›æäº¤çš„é¡ºåºå¹¶å®Œå…¨åœ°ç§»é™¤äº† â€œadded cat-fileâ€ æäº¤ã€‚</p><h4 id="å‹ç¼©æäº¤"><a href="#å‹ç¼©æäº¤" class="headerlink" title="å‹ç¼©æäº¤"></a>å‹ç¼©æäº¤</h4><p>é€šè¿‡äº¤äº’å¼å˜åŸºå·¥å…·ï¼Œä¹Ÿå¯ä»¥å°†ä¸€è¿ä¸²æäº¤å‹ç¼©æˆä¸€ä¸ªå•ç‹¬çš„æäº¤ã€‚ åœ¨å˜åŸºä¿¡æ¯ä¸­è„šæœ¬ç»™å‡ºäº†æœ‰ç”¨çš„æŒ‡ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"># Commands:</span><br><span class="line">#  p, pick = use commit</span><br><span class="line">#  r, reword = use commit, but edit the commit message</span><br><span class="line">#  e, edit = use commit, but stop for amending</span><br><span class="line">#  s, squash = use commit, but meld into previous commit</span><br><span class="line">#  f, fixup = like &quot;squash&quot;, but discard this commit&apos;s log message</span><br><span class="line">#  x, exec = run command (the rest of the line) using shell</span><br><span class="line">#</span><br><span class="line"># These lines can be re-ordered; they are executed from top to bottom.</span><br><span class="line">#</span><br><span class="line"># If you remove a line here THAT COMMIT WILL BE LOST.</span><br><span class="line">#</span><br><span class="line"># However, if you remove everything, the rebase will be aborted.</span><br><span class="line">#</span><br><span class="line"># Note that empty commits are commented out</span><br></pre></td></tr></table></figure><p>å¦‚æœï¼ŒæŒ‡å®š â€œsquashâ€ è€Œä¸æ˜¯ â€œpickâ€ æˆ– â€œeditâ€ï¼ŒGit å°†åº”ç”¨ä¸¤è€…çš„ä¿®æ”¹å¹¶åˆå¹¶æäº¤ä¿¡æ¯åœ¨ä¸€èµ·ã€‚ æ‰€ä»¥ï¼Œå¦‚æœæƒ³è¦è¿™ä¸‰æ¬¡æäº¤å˜ä¸ºä¸€ä¸ªæäº¤ï¼Œå¯ä»¥è¿™æ ·ä¿®æ”¹è„šæœ¬ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pick f7f3f6d changed my name a bit</span><br><span class="line">squash 310154e updated README formatting and added blame</span><br><span class="line">squash a5f4a0d added cat-file</span><br></pre></td></tr></table></figure><p>å½“ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨æ—¶ï¼ŒGit åº”ç”¨æ‰€æœ‰çš„ä¸‰æ¬¡ä¿®æ”¹ç„¶åå°†ä½ æ”¾åˆ°ç¼–è¾‘å™¨ä¸­æ¥åˆå¹¶ä¸‰æ¬¡æäº¤ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># This is a combination of 3 commits.</span><br><span class="line"># The first commit&apos;s message is:</span><br><span class="line">changed my name a bit</span><br><span class="line"></span><br><span class="line"># This is the 2nd commit message:</span><br><span class="line"></span><br><span class="line">updated README formatting and added blame</span><br><span class="line"></span><br><span class="line"># This is the 3rd commit message:</span><br><span class="line"></span><br><span class="line">added cat-file</span><br></pre></td></tr></table></figure><p>å½“ä½ ä¿å­˜ä¹‹åï¼Œä½ å°±æ‹¥æœ‰äº†ä¸€ä¸ªåŒ…å«å‰ä¸‰æ¬¡æäº¤çš„å…¨éƒ¨å˜æ›´çš„æäº¤ã€‚</p><h4 id="æ‹†åˆ†æäº¤"><a href="#æ‹†åˆ†æäº¤" class="headerlink" title="æ‹†åˆ†æäº¤"></a>æ‹†åˆ†æäº¤</h4><p>æ‹†åˆ†ä¸€ä¸ªæäº¤ä¼šæ’¤æ¶ˆè¿™ä¸ªæäº¤ï¼Œç„¶åå¤šæ¬¡åœ°éƒ¨åˆ†åœ°æš‚å­˜ä¸æäº¤ç›´åˆ°å®Œæˆä½ æ‰€éœ€æ¬¡æ•°çš„æäº¤ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æƒ³è¦æ‹†åˆ†ä¸‰æ¬¡æäº¤çš„ä¸­é—´é‚£æ¬¡æäº¤ã€‚ æƒ³è¦å°†å®ƒæ‹†åˆ†ä¸ºä¸¤æ¬¡æäº¤ï¼šç¬¬ä¸€ä¸ª â€œupdated README formattingâ€ï¼Œç¬¬äºŒä¸ª â€œadded blameâ€ æ¥ä»£æ›¿åŸæ¥çš„ â€œupdated README formatting and added blameâ€ã€‚ å¯ä»¥é€šè¿‡ä¿®æ”¹ <code>rebase -i</code> çš„è„šæœ¬æ¥åšåˆ°è¿™ç‚¹ï¼Œå°†è¦æ‹†åˆ†çš„æäº¤çš„æŒ‡ä»¤ä¿®æ”¹ä¸º â€œeditâ€ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pick f7f3f6d changed my name a bit</span><br><span class="line">edit 310154e updated README formatting and added blame</span><br><span class="line">pick a5f4a0d added cat-file</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå½“è„šæœ¬å°†ä½ è¿›å…¥åˆ°å‘½ä»¤è¡Œæ—¶ï¼Œé‡ç½®é‚£ä¸ªæäº¤ï¼Œæ‹¿åˆ°è¢«é‡ç½®çš„ä¿®æ”¹ï¼Œä»ä¸­åˆ›å»ºå‡ æ¬¡æäº¤ã€‚ å½“ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨æ—¶ï¼ŒGit å¸¦ä½ åˆ°åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªæäº¤çš„çˆ¶æäº¤ï¼Œåº”ç”¨ç¬¬ä¸€ä¸ªæäº¤ï¼ˆ<code>f7f3f6d</code>ï¼‰ï¼Œåº”ç”¨ç¬¬äºŒä¸ªæäº¤ï¼ˆ<code>310154e</code>ï¼‰ï¼Œç„¶åè®©ä½ è¿›å…¥å‘½ä»¤è¡Œã€‚ é‚£é‡Œï¼Œå¯ä»¥é€šè¿‡ <code>git reset HEAD^</code> åšä¸€æ¬¡é’ˆå¯¹é‚£ä¸ªæäº¤çš„æ··åˆé‡ç½®ï¼Œå®é™…ä¸Šå°†ä¼šæ’¤æ¶ˆé‚£æ¬¡æäº¤å¹¶å°†ä¿®æ”¹çš„æ–‡ä»¶æœªæš‚å­˜ã€‚ ç°åœ¨å¯ä»¥æš‚å­˜å¹¶æäº¤æ–‡ä»¶ç›´åˆ°æœ‰å‡ ä¸ªæäº¤ï¼Œç„¶åå½“å®Œæˆæ—¶è¿è¡Œ <code>git rebase --continue</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git reset HEAD^</span><br><span class="line">$ git add README</span><br><span class="line">$ git commit -m &apos;updated README formatting&apos;</span><br><span class="line">$ git add lib/simplegit.rb</span><br><span class="line">$ git commit -m &apos;added blame&apos;</span><br><span class="line">$ git rebase --continue</span><br></pre></td></tr></table></figure><p>Git åœ¨è„šæœ¬ä¸­åº”ç”¨æœ€åä¸€æ¬¡æäº¤ï¼ˆ<code>a5f4a0d</code>ï¼‰ï¼Œå†å²è®°å½•çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git log -4 --pretty=format:&quot;%h %s&quot;</span><br><span class="line">1c002dd added cat-file</span><br><span class="line">9b29157 added blame</span><br><span class="line">35cfb2b updated README formatting</span><br><span class="line">f3cc40e changed my name a bit</span><br></pre></td></tr></table></figure><p>å†æ¬¡å¼ºè°ƒï¼Œè¿™äº›æ”¹åŠ¨äº†æ‰€æœ‰åœ¨åˆ—è¡¨ä¸­çš„æäº¤çš„ SHA-1 æ ¡éªŒå’Œï¼Œæ‰€ä»¥è¦ç¡®ä¿åˆ—è¡¨ä¸­çš„æäº¤è¿˜æ²¡æœ‰æ¨é€åˆ°å…±äº«ä»“åº“ä¸­ã€‚</p><h4 id="æ ¸æ­¦å™¨çº§é€‰é¡¹ï¼šfilter-branch"><a href="#æ ¸æ­¦å™¨çº§é€‰é¡¹ï¼šfilter-branch" class="headerlink" title="æ ¸æ­¦å™¨çº§é€‰é¡¹ï¼šfilter-branch"></a>æ ¸æ­¦å™¨çº§é€‰é¡¹ï¼šfilter-branch</h4><p>æœ‰å¦ä¸€ä¸ªå†å²æ”¹å†™çš„é€‰é¡¹ï¼Œå¦‚æœæƒ³è¦é€šè¿‡è„šæœ¬çš„æ–¹å¼æ”¹å†™å¤§é‡æäº¤çš„è¯å¯ä»¥ä½¿ç”¨å®ƒâ€”â€”ä¾‹å¦‚ï¼Œå…¨å±€ä¿®æ”¹ä½ çš„é‚®ç®±åœ°å€æˆ–ä»æ¯ä¸€ä¸ªæäº¤ä¸­ç§»é™¤ä¸€ä¸ªæ–‡ä»¶ã€‚ è¿™ä¸ªå‘½ä»¤æ˜¯ <code>filter-branch</code>ï¼Œå®ƒå¯ä»¥æ”¹å†™å†å²ä¸­å¤§é‡çš„æäº¤ï¼Œé™¤éä½ çš„é¡¹ç›®è¿˜æ²¡æœ‰å…¬å¼€å¹¶ä¸”å…¶ä»–äººæ²¡æœ‰åŸºäºè¦æ”¹å†™çš„å·¥ä½œçš„æäº¤åšçš„å·¥ä½œï¼Œä½ ä¸åº”å½“ä½¿ç”¨å®ƒã€‚ ç„¶è€Œï¼Œå®ƒå¯ä»¥å¾ˆæœ‰ç”¨ã€‚ ä½ å°†ä¼šå­¦ä¹ åˆ°å‡ ä¸ªå¸¸ç”¨çš„ç”¨é€”ï¼Œè¿™æ ·å°±å¾—åˆ°äº†å®ƒé€‚åˆä½¿ç”¨åœ°æ–¹çš„æƒ³æ³•ã€‚</p><p><strong>ä»æ¯ä¸€ä¸ªæäº¤ç§»é™¤ä¸€ä¸ªæ–‡ä»¶</strong><br>è¿™ç»å¸¸å‘ç”Ÿã€‚ æœ‰äººç²—å¿ƒåœ°é€šè¿‡ <code>git add .</code> æäº¤äº†ä¸€ä¸ªå·¨å¤§çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½ æƒ³è¦ä»æ‰€æœ‰åœ°æ–¹åˆ é™¤å®ƒã€‚ å¯èƒ½å¶ç„¶åœ°æäº¤äº†ä¸€ä¸ªåŒ…æ‹¬ä¸€ä¸ªå¯†ç çš„æ–‡ä»¶ï¼Œç„¶è€Œä½ æƒ³è¦å¼€æºé¡¹ç›®ã€‚ <code>filter-branch</code> æ˜¯ä¸€ä¸ªå¯èƒ½ä¼šç”¨æ¥æ“¦æ´—æ•´ä¸ªæäº¤å†å²çš„å·¥å…·ã€‚ ä¸ºäº†ä»æ•´ä¸ªæäº¤å†å²ä¸­ç§»é™¤ä¸€ä¸ªå«åš passwords.txt çš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>--tree-filter</code> é€‰é¡¹ç»™ <code>filter-branch</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git filter-branch --tree-filter &apos;rm -f passwords.txt&apos; HEAD</span><br><span class="line">Rewrite 6b9b3cf04e7c5686a9cb838c3f36a8cb6a0fc2bd (21/21)</span><br><span class="line">Ref &apos;refs/heads/master&apos; was rewritten</span><br></pre></td></tr></table></figure><p><code>--tree-filter</code> é€‰é¡¹åœ¨æ£€å‡ºé¡¹ç›®çš„æ¯ä¸€ä¸ªæäº¤åè¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ç„¶åé‡æ–°æäº¤ç»“æœã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œä½ ä»æ¯ä¸€ä¸ªå¿«ç…§ä¸­ç§»é™¤äº†ä¸€ä¸ªå«ä½œ passwords.txt çš„æ–‡ä»¶ï¼Œæ— è®ºå®ƒæ˜¯å¦å­˜åœ¨ã€‚ å¦‚æœæƒ³è¦ç§»é™¤æ‰€æœ‰å¶ç„¶æäº¤çš„ç¼–è¾‘å™¨å¤‡ä»½æ–‡ä»¶ï¼Œå¯ä»¥è¿è¡Œç±»ä¼¼ <code>git filter-branch --tree-filter &#39;rm -f *~&#39; HEAD</code> çš„å‘½ä»¤ã€‚</p><p>æœ€åå°†å¯ä»¥çœ‹åˆ° Git é‡å†™æ ‘ä¸æäº¤ç„¶åç§»åŠ¨åˆ†æ”¯æŒ‡é’ˆã€‚ é€šå¸¸ä¸€ä¸ªå¥½çš„æƒ³æ³•æ˜¯åœ¨ä¸€ä¸ªæµ‹è¯•åˆ†æ”¯ä¸­åšè¿™ä»¶äº‹ï¼Œç„¶åå½“ä½ å†³å®šæœ€ç»ˆç»“æœæ˜¯çœŸæ­£æƒ³è¦çš„ï¼Œå¯ä»¥ç¡¬é‡ç½® master åˆ†æ”¯ã€‚ ä¸ºäº†è®© <code>filter-branch</code> åœ¨æ‰€æœ‰åˆ†æ”¯ä¸Šè¿è¡Œï¼Œå¯ä»¥ç»™å‘½ä»¤ä¼ é€’ <code>--all</code> é€‰é¡¹ã€‚</p><p><strong>ä½¿ä¸€ä¸ªå­ç›®å½•åšä¸ºæ–°çš„æ ¹ç›®å½•</strong><br>å‡è®¾å·²ç»ä»å¦ä¸€ä¸ªæºä»£ç æ§åˆ¶ç³»ç»Ÿä¸­å¯¼å…¥ï¼Œå¹¶ä¸”æœ‰å‡ ä¸ªæ²¡æ„ä¹‰çš„å­ç›®å½•ï¼ˆtrunkã€tags ç­‰ç­‰ï¼‰ã€‚ å¦‚æœæƒ³è¦è®© trunk å­ç›®å½•ä½œä¸ºæ¯ä¸€ä¸ªæäº¤çš„æ–°çš„é¡¹ç›®æ ¹ç›®å½•ï¼Œ<code>filter-branch</code> ä¹Ÿå¯ä»¥å¸®åŠ©ä½ é‚£ä¹ˆåšï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git filter-branch --subdirectory-filter trunk HEAD</span><br><span class="line">Rewrite 856f0bf61e41a27326cdae8f09fe708d679f596f (12/12)</span><br><span class="line">Ref &apos;refs/heads/master&apos; was rewritten</span><br></pre></td></tr></table></figure><p>ç°åœ¨æ–°é¡¹ç›®æ ¹ç›®å½•æ˜¯ <code>trunk</code> å­ç›®å½•äº†ã€‚ Git ä¼šè‡ªåŠ¨ç§»é™¤æ‰€æœ‰ä¸å½±å“å­ç›®å½•çš„æäº¤ã€‚</p><p><strong>å…¨å±€ä¿®æ”¹é‚®ç®±åœ°å€</strong><br>å¦ä¸€ä¸ªå¸¸è§çš„æƒ…å½¢æ˜¯åœ¨ä½ å¼€å§‹å·¥ä½œæ—¶å¿˜è®°è¿è¡Œ <code>git config</code> æ¥è®¾ç½®ä½ çš„åå­—ä¸é‚®ç®±åœ°å€ï¼Œæˆ–è€…ä½ æƒ³è¦å¼€æºä¸€ä¸ªé¡¹ç›®å¹¶ä¸”ä¿®æ”¹æ‰€æœ‰ä½ çš„å·¥ä½œé‚®ç®±åœ°å€ä¸ºä½ çš„ä¸ªäººé‚®ç®±åœ°å€ã€‚ ä»»ä½•æƒ…å½¢ä¸‹ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ <code>filter-branch</code> æ¥ä¸€æ¬¡æ€§ä¿®æ”¹å¤šä¸ªæäº¤ä¸­çš„é‚®ç®±åœ°å€ã€‚ éœ€è¦å°å¿ƒçš„æ˜¯åªä¿®æ”¹ä½ è‡ªå·±çš„é‚®ç®±åœ°å€ï¼Œæ‰€ä»¥ä½ ä½¿ç”¨ <code>--commit-filter</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git filter-branch --commit-filter &apos;</span><br><span class="line">        if [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;schacon@localhost&quot; ];</span><br><span class="line">        then</span><br><span class="line">                GIT_AUTHOR_NAME=&quot;Scott Chacon&quot;;</span><br><span class="line">                GIT_AUTHOR_EMAIL=&quot;schacon@example.com&quot;;</span><br><span class="line">                git commit-tree &quot;$@&quot;;</span><br><span class="line">        else</span><br><span class="line">                git commit-tree &quot;$@&quot;;</span><br><span class="line">        fi&apos; HEAD</span><br></pre></td></tr></table></figure><p>è¿™ä¼šéå†å¹¶é‡å†™æ¯ä¸€ä¸ªæäº¤æ¥åŒ…å«ä½ çš„æ–°é‚®ç®±åœ°å€ã€‚ å› ä¸ºæäº¤åŒ…å«äº†å®ƒä»¬çˆ¶æäº¤çš„ SHA-1 æ ¡éªŒå’Œï¼Œè¿™ä¸ªå‘½ä»¤ä¼šä¿®æ”¹ä½ çš„å†å²ä¸­çš„æ¯ä¸€ä¸ªæäº¤çš„ SHA-1 æ ¡éªŒå’Œï¼Œè€Œä¸ä»…ä»…åªæ˜¯é‚£äº›åŒ¹é…é‚®ç®±åœ°å€çš„æäº¤ã€‚</p><h3 id="é‡ç½®æ­å¯†"><a href="#é‡ç½®æ­å¯†" class="headerlink" title="é‡ç½®æ­å¯†"></a>é‡ç½®æ­å¯†</h3><p>åœ¨ç»§ç»­äº†è§£æ›´ä¸“ä¸šçš„å·¥å…·å‰ï¼Œæˆ‘ä»¬å…ˆè®¨è®ºä¸€ä¸‹ <code>reset</code> ä¸ <code>checkout</code>ã€‚ åœ¨ä½ åˆæ¬¡é‡åˆ°çš„ Git å‘½ä»¤ä¸­ï¼Œè¿™ä¸¤ä¸ªæ˜¯æœ€è®©äººå›°æƒ‘çš„ã€‚ å®ƒä»¬èƒ½åšå¾ˆå¤šäº‹æƒ…ï¼Œæ‰€ä»¥çœ‹èµ·æ¥æˆ‘ä»¬å¾ˆéš¾çœŸæ­£åœ°ç†è§£å¹¶æ°å½“åœ°è¿ç”¨å®ƒä»¬ã€‚ é’ˆå¯¹è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å…ˆæ¥åšä¸€ä¸ªç®€å•çš„æ¯”å–»ã€‚</p><h4 id="ä¸‰æ£µæ ‘"><a href="#ä¸‰æ£µæ ‘" class="headerlink" title="ä¸‰æ£µæ ‘"></a>ä¸‰æ£µæ ‘</h4><p>ç†è§£ <code>reset</code> å’Œ <code>checkout</code> çš„æœ€ç®€æ–¹æ³•ï¼Œå°±æ˜¯ä»¥ Git çš„æ€ç»´æ¡†æ¶ï¼ˆå°†å…¶ä½œä¸ºå†…å®¹ç®¡ç†å™¨ï¼‰æ¥ç®¡ç†ä¸‰æ£µä¸åŒçš„æ ‘ã€‚ â€œæ ‘â€ åœ¨æˆ‘ä»¬è¿™é‡Œçš„å®é™…æ„æ€æ˜¯ â€œæ–‡ä»¶çš„é›†åˆâ€ï¼Œè€Œä¸æ˜¯æŒ‡ç‰¹å®šçš„æ•°æ®ç»“æ„ã€‚ ï¼ˆåœ¨æŸäº›æƒ…å†µä¸‹ç´¢å¼•çœ‹èµ·æ¥å¹¶ä¸åƒä¸€æ£µæ ‘ï¼Œä¸è¿‡æˆ‘ä»¬ç°åœ¨çš„ç›®çš„æ˜¯ç”¨ç®€å•çš„æ–¹å¼æ€è€ƒå®ƒã€‚ï¼‰</p><p>Git ä½œä¸ºä¸€ä¸ªç³»ç»Ÿï¼Œæ˜¯ä»¥å®ƒçš„ä¸€èˆ¬æ“ä½œæ¥ç®¡ç†å¹¶æ“çºµè¿™ä¸‰æ£µæ ‘çš„ï¼š</p><table><thead><tr><th>æ ‘</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>HEAD</td><td>ä¸Šä¸€æ¬¡æäº¤çš„å¿«ç…§ï¼Œä¸‹ä¸€æ¬¡æäº¤çš„çˆ¶ç»“ç‚¹</td></tr><tr><td>Index</td><td>é¢„æœŸçš„ä¸‹ä¸€æ¬¡æäº¤çš„å¿«ç…§</td></tr><tr><td>Working Directory</td><td>æ²™ç›’</td></tr></tbody></table><p><strong>HEAD</strong><br>HEAD æ˜¯å½“å‰åˆ†æ”¯å¼•ç”¨çš„æŒ‡é’ˆï¼Œå®ƒæ€»æ˜¯æŒ‡å‘è¯¥åˆ†æ”¯ä¸Šçš„æœ€åä¸€æ¬¡æäº¤ã€‚ è¿™è¡¨ç¤º HEAD å°†æ˜¯ä¸‹ä¸€æ¬¡æäº¤çš„çˆ¶ç»“ç‚¹ã€‚ é€šå¸¸ï¼Œç†è§£ HEAD çš„æœ€ç®€æ–¹å¼ï¼Œå°±æ˜¯å°†å®ƒçœ‹åš ä½ çš„ä¸Šä¸€æ¬¡æäº¤ çš„å¿«ç…§ã€‚</p><p>å…¶å®ï¼ŒæŸ¥çœ‹å¿«ç…§çš„æ ·å­å¾ˆå®¹æ˜“ã€‚ ä¸‹ä¾‹å°±æ˜¾ç¤ºäº† HEAD å¿«ç…§å®é™…çš„ç›®å½•åˆ—è¡¨ï¼Œä»¥åŠå…¶ä¸­æ¯ä¸ªæ–‡ä»¶çš„ SHA-1 æ ¡éªŒå’Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git cat-file -p HEAD</span><br><span class="line">tree cfda3bf379e4f8dba8717dee55aab78aef7f4daf</span><br><span class="line">author Scott Chacon  1301511835 -0700</span><br><span class="line">committer Scott Chacon  1301511835 -0700</span><br><span class="line"></span><br><span class="line">initial commit</span><br><span class="line"></span><br><span class="line">$ git ls-tree -r HEAD</span><br><span class="line">100644 blob a906cb2a4a904a152...   README</span><br><span class="line">100644 blob 8f94139338f9404f2...   Rakefile</span><br><span class="line">040000 tree 99f1a6d12cb4b6f19...   lib</span><br></pre></td></tr></table></figure><p><code>cat-file</code> ä¸ <code>ls-tree</code> æ˜¯åº•å±‚å‘½ä»¤ï¼Œå®ƒä»¬ä¸€èˆ¬ç”¨äºåº•å±‚å·¥ä½œï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­å¹¶ä¸ä½¿ç”¨ã€‚ä¸è¿‡å®ƒä»¬èƒ½å¸®åŠ©æˆ‘ä»¬äº†è§£åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p><p><strong>ç´¢å¼•</strong><br>ç´¢å¼•æ˜¯ä½ çš„ é¢„æœŸçš„ä¸‹ä¸€æ¬¡æäº¤ã€‚ æˆ‘ä»¬ä¹Ÿä¼šå°†è¿™ä¸ªæ¦‚å¿µå¼•ç”¨ä¸º Git çš„â€œæš‚å­˜åŒºåŸŸâ€ï¼Œè¿™å°±æ˜¯å½“ä½ è¿è¡Œ <code>git commit</code> æ—¶ Git çœ‹èµ·æ¥çš„æ ·å­ã€‚</p><p>Git å°†ä¸Šä¸€æ¬¡æ£€å‡ºåˆ°å·¥ä½œç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶å¡«å……åˆ°ç´¢å¼•åŒºï¼Œå®ƒä»¬çœ‹èµ·æ¥å°±åƒæœ€åˆè¢«æ£€å‡ºæ—¶çš„æ ·å­ã€‚ ä¹‹åä½ ä¼šå°†å…¶ä¸­ä¸€äº›æ–‡ä»¶æ›¿æ¢ä¸ºæ–°ç‰ˆæœ¬ï¼Œæ¥ç€é€šè¿‡ <code>git commit</code> å°†å®ƒä»¬è½¬æ¢ä¸ºæ ‘æ¥ç”¨ä½œæ–°çš„æäº¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git ls-files -s</span><br><span class="line">100644 a906cb2a4a904a152e80877d4088654daad0c859 0README</span><br><span class="line">100644 8f94139338f9404f26296befa88755fc2598c289 0Rakefile</span><br><span class="line">100644 47c6340d6459e05787f644c2447d2595f5d3a54b 0lib/simplegit.rb</span><br></pre></td></tr></table></figure><p>å†è¯´ä¸€æ¬¡ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œåˆç”¨åˆ°äº† <code>ls-files</code> è¿™ä¸ªå¹•åçš„å‘½ä»¤ï¼Œå®ƒä¼šæ˜¾ç¤ºå‡ºç´¢å¼•å½“å‰çš„æ ·å­ã€‚</p><p>ç¡®åˆ‡æ¥è¯´ï¼Œç´¢å¼•å¹¶éæŠ€æœ¯ä¸Šçš„æ ‘ç»“æ„ï¼Œå®ƒå…¶å®æ˜¯ä»¥æ‰å¹³çš„æ¸…å•å®ç°çš„ã€‚ä¸è¿‡å¯¹æˆ‘ä»¬è€Œè¨€ï¼ŒæŠŠå®ƒå½“åšæ ‘å°±å¤Ÿäº†ã€‚</p><p><strong>å·¥ä½œç›®å½•</strong><br>æœ€åï¼Œä½ å°±æœ‰äº†è‡ªå·±çš„å·¥ä½œç›®å½•ã€‚ å¦å¤–ä¸¤æ£µæ ‘ä»¥ä¸€ç§é«˜æ•ˆä½†å¹¶ä¸ç›´è§‚çš„æ–¹å¼ï¼Œå°†å®ƒä»¬çš„å†…å®¹å­˜å‚¨åœ¨ <code>.git</code> æ–‡ä»¶å¤¹ä¸­ã€‚ å·¥ä½œç›®å½•ä¼šå°†å®ƒä»¬è§£åŒ…ä¸ºå®é™…çš„æ–‡ä»¶ä»¥ä¾¿ç¼–è¾‘ã€‚ ä½ å¯ä»¥æŠŠå·¥ä½œç›®å½•å½“åš æ²™ç›’ã€‚åœ¨ä½ å°†ä¿®æ”¹æäº¤åˆ°æš‚å­˜åŒºå¹¶è®°å½•åˆ°å†å²ä¹‹å‰ï¼Œå¯ä»¥éšæ„æ›´æ”¹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ README</span><br><span class="line">â”œâ”€â”€ Rakefile</span><br><span class="line">â””â”€â”€ lib</span><br><span class="line">    â””â”€â”€ simplegit.rb</span><br><span class="line"></span><br><span class="line">1 directory, 3 files</span><br></pre></td></tr></table></figure><h4 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h4><p>Git ä¸»è¦çš„ç›®çš„æ˜¯é€šè¿‡æ“çºµè¿™ä¸‰æ£µæ ‘æ¥ä»¥æ›´åŠ è¿ç»­çš„çŠ¶æ€è®°å½•é¡¹ç›®çš„å¿«ç…§ã€‚</p><p><img src="git-chapter-7/img1.png" alt></p><p>è®©æˆ‘ä»¬æ¥å¯è§†åŒ–è¿™ä¸ªè¿‡ç¨‹ï¼šå‡è®¾æˆ‘ä»¬è¿›å…¥åˆ°ä¸€ä¸ªæ–°ç›®å½•ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæ–‡ä»¶ã€‚ æˆ‘ä»¬ç§°å…¶ä¸ºè¯¥æ–‡ä»¶çš„ v1 ç‰ˆæœ¬ï¼Œå°†å®ƒæ ‡è®°ä¸ºè“è‰²ã€‚ ç°åœ¨è¿è¡Œ <code>git init</code>ï¼Œè¿™ä¼šåˆ›å»ºä¸€ä¸ª Git ä»“åº“ï¼Œå…¶ä¸­çš„ HEAD å¼•ç”¨æŒ‡å‘æœªåˆ›å»ºçš„åˆ†æ”¯ï¼ˆ<code>master</code> è¿˜ä¸å­˜åœ¨ï¼‰ã€‚</p><p><img src="git-chapter-7/img2.png" alt></p><p>æ­¤æ—¶ï¼Œåªæœ‰å·¥ä½œç›®å½•æœ‰å†…å®¹ã€‚</p><p>ç°åœ¨æˆ‘ä»¬æƒ³è¦æäº¤è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥ç”¨ <code>git add</code> æ¥è·å–å·¥ä½œç›®å½•ä¸­çš„å†…å®¹ï¼Œå¹¶å°†å…¶å¤åˆ¶åˆ°ç´¢å¼•ä¸­ã€‚</p><p><img src="git-chapter-7/img3.png" alt></p><p>æ¥ç€è¿è¡Œ <code>git commit</code>ï¼Œå®ƒä¼šå–å¾—ç´¢å¼•ä¸­çš„å†…å®¹å¹¶å°†å®ƒä¿å­˜ä¸ºä¸€ä¸ªæ°¸ä¹…çš„å¿«ç…§ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæŒ‡å‘è¯¥å¿«ç…§çš„æäº¤å¯¹è±¡ï¼Œæœ€åæ›´æ–° <code>master</code> æ¥æŒ‡å‘æœ¬æ¬¡æäº¤ã€‚</p><p><img src="git-chapter-7/img4.png" alt></p><p>æ­¤æ—¶å¦‚æœæˆ‘ä»¬è¿è¡Œ <code>git status</code>ï¼Œä¼šå‘ç°æ²¡æœ‰ä»»ä½•æ”¹åŠ¨ï¼Œå› ä¸ºç°åœ¨ä¸‰æ£µæ ‘å®Œå…¨ç›¸åŒã€‚</p><p>ç°åœ¨æˆ‘ä»¬æƒ³è¦å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ç„¶åæäº¤å®ƒã€‚ æˆ‘ä»¬å°†ä¼šç»å†åŒæ ·çš„è¿‡ç¨‹ï¼›é¦–å…ˆåœ¨å·¥ä½œç›®å½•ä¸­ä¿®æ”¹æ–‡ä»¶ã€‚ æˆ‘ä»¬ç§°å…¶ä¸ºè¯¥æ–‡ä»¶çš„ v2 ç‰ˆæœ¬ï¼Œå¹¶å°†å®ƒæ ‡è®°ä¸ºçº¢è‰²ã€‚</p><p><img src="git-chapter-7/img5.png" alt></p><p>å¦‚æœç°åœ¨è¿è¡Œ <code>git status</code>ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æ–‡ä»¶æ˜¾ç¤ºåœ¨ â€œChanges not staged for commitâ€ ä¸‹é¢å¹¶è¢«æ ‡è®°ä¸ºçº¢è‰²ï¼Œå› ä¸ºè¯¥æ¡ç›®åœ¨ç´¢å¼•ä¸å·¥ä½œç›®å½•ä¹‹é—´å­˜åœ¨ä¸åŒã€‚ æ¥ç€æˆ‘ä»¬è¿è¡Œ <code>git add</code> æ¥å°†å®ƒæš‚å­˜åˆ°ç´¢å¼•ä¸­ã€‚</p><p><img src="git-chapter-7/img6.png" alt></p><p>æ­¤æ—¶ï¼Œç”±äºç´¢å¼•å’Œ HEAD ä¸åŒï¼Œè‹¥è¿è¡Œ <code>git status</code> çš„è¯å°±ä¼šçœ‹åˆ° â€œChanges to be committedâ€ ä¸‹çš„è¯¥æ–‡ä»¶å˜ä¸ºç»¿è‰² â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œç°åœ¨é¢„æœŸçš„ä¸‹ä¸€æ¬¡æäº¤ä¸ä¸Šä¸€æ¬¡æäº¤ä¸åŒã€‚ æœ€åï¼Œæˆ‘ä»¬è¿è¡Œ <code>git commit</code> æ¥å®Œæˆæäº¤ã€‚</p><p><img src="git-chapter-7/img7.png" alt></p><p>ç°åœ¨è¿è¡Œ <code>git status</code> ä¼šæ²¡æœ‰è¾“å‡ºï¼Œå› ä¸ºä¸‰æ£µæ ‘åˆå˜å¾—ç›¸åŒäº†ã€‚</p><p>åˆ‡æ¢åˆ†æ”¯æˆ–å…‹éš†çš„è¿‡ç¨‹ä¹Ÿç±»ä¼¼ã€‚ å½“æ£€å‡ºä¸€ä¸ªåˆ†æ”¯æ—¶ï¼Œå®ƒä¼šä¿®æ”¹ HEAD æŒ‡å‘æ–°çš„åˆ†æ”¯å¼•ç”¨ï¼Œå°† ç´¢å¼• å¡«å……ä¸ºè¯¥æ¬¡æäº¤çš„å¿«ç…§ï¼Œç„¶åå°† ç´¢å¼• çš„å†…å®¹å¤åˆ¶åˆ° å·¥ä½œç›®å½• ä¸­ã€‚</p><h4 id="é‡ç½®çš„ä½œç”¨"><a href="#é‡ç½®çš„ä½œç”¨" class="headerlink" title="é‡ç½®çš„ä½œç”¨"></a>é‡ç½®çš„ä½œç”¨</h4><p>åœ¨ä»¥ä¸‹æƒ…æ™¯ä¸­è§‚å¯Ÿ <code>reset</code> å‘½ä»¤ä¼šæ›´æœ‰æ„ä¹‰ã€‚</p><p>ä¸ºäº†æ¼”ç¤ºè¿™äº›ä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬å†æ¬¡ä¿®æ”¹äº† <code>file.txt</code> æ–‡ä»¶å¹¶ç¬¬ä¸‰æ¬¡æäº¤å®ƒã€‚ ç°åœ¨çš„å†å²çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="git-chapter-7/img8.png" alt></p><p>è®©æˆ‘ä»¬è·Ÿç€ <code>reset</code> çœ‹çœ‹å®ƒéƒ½åšäº†ä»€ä¹ˆã€‚ å®ƒä»¥ä¸€ç§ç®€å•å¯é¢„è§çš„æ–¹å¼ç›´æ¥æ“çºµè¿™ä¸‰æ£µæ ‘ã€‚ å®ƒåšäº†ä¸‰ä¸ªåŸºæœ¬æ“ä½œã€‚</p><p><strong>ç¬¬ 1 æ­¥ï¼šç§»åŠ¨ HEAD</strong><br><code>reset</code> åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯ç§»åŠ¨ HEAD çš„æŒ‡å‘ã€‚ è¿™ä¸æ”¹å˜ HEAD è‡ªèº«ä¸åŒï¼ˆ<code>checkout</code> æ‰€åšçš„ï¼‰ï¼›<code>reset</code> ç§»åŠ¨ HEAD æŒ‡å‘çš„åˆ†æ”¯ã€‚ è¿™æ„å‘³ç€å¦‚æœ HEAD è®¾ç½®ä¸º <code>master</code> åˆ†æ”¯ï¼ˆä¾‹å¦‚ï¼Œä½ æ­£åœ¨ <code>master</code> åˆ†æ”¯ä¸Šï¼‰ï¼Œè¿è¡Œ <code>git reset 9e5e6a4</code> å°†ä¼šä½¿ <code>master</code> æŒ‡å‘ <code>9e5e6a4</code>ã€‚</p><p><img src="git-chapter-7/img9.png" alt></p><p>æ— è®ºä½ è°ƒç”¨äº†ä½•ç§å½¢å¼çš„å¸¦æœ‰ä¸€ä¸ªæäº¤çš„ <code>reset</code>ï¼Œå®ƒé¦–å…ˆéƒ½ä¼šå°è¯•è¿™æ ·åšã€‚ ä½¿ç”¨ <code>reset --soft</code>ï¼Œå®ƒå°†ä»…ä»…åœåœ¨é‚£å„¿ã€‚</p><p>ç°åœ¨çœ‹ä¸€çœ¼ä¸Šå›¾ï¼Œç†è§£ä¸€ä¸‹å‘ç”Ÿçš„äº‹æƒ…ï¼šå®ƒæœ¬è´¨ä¸Šæ˜¯æ’¤é”€äº†ä¸Šä¸€æ¬¡ <code>git commit</code> å‘½ä»¤ã€‚ å½“ä½ åœ¨è¿è¡Œ <code>git commit</code> æ—¶ï¼ŒGit ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ï¼Œå¹¶ç§»åŠ¨ HEAD æ‰€æŒ‡å‘çš„åˆ†æ”¯æ¥ä½¿å…¶æŒ‡å‘è¯¥æäº¤ã€‚ å½“ä½ å°†å®ƒ <code>reset</code> å› <code>HEAD~</code>ï¼ˆHEAD çš„çˆ¶ç»“ç‚¹ï¼‰æ—¶ï¼Œå…¶å®å°±æ˜¯æŠŠè¯¥åˆ†æ”¯ç§»åŠ¨å›åŸæ¥çš„ä½ç½®ï¼Œè€Œä¸ä¼šæ”¹å˜ç´¢å¼•å’Œå·¥ä½œç›®å½•ã€‚ ç°åœ¨ä½ å¯ä»¥æ›´æ–°ç´¢å¼•å¹¶å†æ¬¡è¿è¡Œ <code>git commit</code> æ¥å®Œæˆ <code>git commit --amend</code> æ‰€è¦åšçš„äº‹æƒ…äº†ï¼ˆè§ ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤ï¼‰ã€‚</p><p><strong>ç¬¬ 2 æ­¥ï¼šæ›´æ–°ç´¢å¼•ï¼ˆâ€“mixedï¼‰</strong><br>æ³¨æ„ï¼Œå¦‚æœä½ ç°åœ¨è¿è¡Œ <code>git status</code> çš„è¯ï¼Œå°±ä¼šçœ‹åˆ°æ–°çš„ HEAD å’Œä»¥ç»¿è‰²æ ‡å‡ºçš„å®ƒå’Œç´¢å¼•ä¹‹é—´çš„åŒºåˆ«ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œ<code>reset</code> ä¼šç”¨ HEAD æŒ‡å‘çš„å½“å‰å¿«ç…§çš„å†…å®¹æ¥æ›´æ–°ç´¢å¼•ã€‚</p><p><img src="git-chapter-7/img10.png" alt></p><p>å¦‚æœæŒ‡å®š <code>--mixed</code> é€‰é¡¹ï¼Œ<code>reset</code> å°†ä¼šåœ¨è¿™æ—¶åœæ­¢ã€‚ è¿™ä¹Ÿæ˜¯é»˜è®¤è¡Œä¸ºï¼Œæ‰€ä»¥å¦‚æœæ²¡æœ‰æŒ‡å®šä»»ä½•é€‰é¡¹ï¼ˆåœ¨æœ¬ä¾‹ä¸­åªæ˜¯ <code>git reset HEAD~</code>ï¼‰ï¼Œè¿™å°±æ˜¯å‘½ä»¤å°†ä¼šåœæ­¢çš„åœ°æ–¹ã€‚</p><p>ç°åœ¨å†çœ‹ä¸€çœ¼ä¸Šå›¾ï¼Œç†è§£ä¸€ä¸‹å‘ç”Ÿçš„äº‹æƒ…ï¼šå®ƒä¾ç„¶ä¼šæ’¤é”€ä¸€ä¸Šæ¬¡ æäº¤ï¼Œä½†è¿˜ä¼š å–æ¶ˆæš‚å­˜ æ‰€æœ‰çš„ä¸œè¥¿ã€‚ äºæ˜¯ï¼Œæˆ‘ä»¬å›æ»šåˆ°äº†æ‰€æœ‰ <code>git add</code> å’Œ <code>git commit</code> çš„å‘½ä»¤æ‰§è¡Œä¹‹å‰ã€‚</p><p><strong>ç¬¬ 3 æ­¥ï¼šæ›´æ–°å·¥ä½œç›®å½•ï¼ˆâ€“hardï¼‰</strong><br><code>reset</code> è¦åšçš„çš„ç¬¬ä¸‰ä»¶äº‹æƒ…å°±æ˜¯è®©å·¥ä½œç›®å½•çœ‹èµ·æ¥åƒç´¢å¼•ã€‚ å¦‚æœä½¿ç”¨ <code>--hard</code> é€‰é¡¹ï¼Œå®ƒå°†ä¼šç»§ç»­è¿™ä¸€æ­¥ã€‚</p><p><img src="git-chapter-7/img11.png" alt></p><p>ç°åœ¨è®©æˆ‘ä»¬å›æƒ³ä¸€ä¸‹åˆšæ‰å‘ç”Ÿçš„äº‹æƒ…ã€‚ ä½ æ’¤é”€äº†æœ€åçš„æäº¤ <code>git add</code> å’Œ <code>git commit</code> å‘½ä»¤ä»¥åŠå·¥ä½œç›®å½•ä¸­çš„æ‰€æœ‰å·¥ä½œã€‚</p><p>å¿…é¡»æ³¨æ„ï¼Œ<code>--hard</code> æ ‡è®°æ˜¯ <code>reset</code> å‘½ä»¤å”¯ä¸€çš„å±é™©ç”¨æ³•ï¼Œå®ƒä¹Ÿæ˜¯ Git ä¼šçœŸæ­£åœ°é”€æ¯æ•°æ®çš„ä»…æœ‰çš„å‡ ä¸ªæ“ä½œä¹‹ä¸€ã€‚ å…¶ä»–ä»»ä½•å½¢å¼çš„ <code>reset</code> è°ƒç”¨éƒ½å¯ä»¥è½»æ¾æ’¤æ¶ˆï¼Œä½†æ˜¯ <code>--hard</code> é€‰é¡¹ä¸èƒ½ï¼Œå› ä¸ºå®ƒå¼ºåˆ¶è¦†ç›–äº†å·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶ã€‚ åœ¨è¿™ç§ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ Git æ•°æ®åº“ä¸­çš„ä¸€ä¸ªæäº¤å†…è¿˜ç•™æœ‰è¯¥æ–‡ä»¶çš„ v3 ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>reflog</code> æ¥æ‰¾å›å®ƒã€‚ä½†æ˜¯è‹¥è¯¥æ–‡ä»¶è¿˜æœªæäº¤ï¼ŒGit ä»ä¼šè¦†ç›–å®ƒä»è€Œå¯¼è‡´æ— æ³•æ¢å¤ã€‚</p><p><strong>å›é¡¾</strong><br><code>reset</code> å‘½ä»¤ä¼šä»¥ç‰¹å®šçš„é¡ºåºé‡å†™è¿™ä¸‰æ£µæ ‘ï¼Œåœ¨ä½ æŒ‡å®šä»¥ä¸‹é€‰é¡¹æ—¶åœæ­¢ï¼š</p><ol><li><p>ç§»åŠ¨ HEAD åˆ†æ”¯çš„æŒ‡å‘ ï¼ˆè‹¥æŒ‡å®šäº† <code>--soft</code>ï¼Œåˆ™åˆ°æ­¤åœæ­¢ï¼‰</p></li><li><p>ä½¿ç´¢å¼•çœ‹èµ·æ¥åƒ HEAD ï¼ˆè‹¥æœªæŒ‡å®š <code>--hard</code>ï¼Œåˆ™åˆ°æ­¤åœæ­¢ï¼‰</p></li><li><p>ä½¿å·¥ä½œç›®å½•çœ‹èµ·æ¥åƒç´¢å¼•</p></li></ol><h4 id="é€šè¿‡è·¯å¾„æ¥é‡ç½®"><a href="#é€šè¿‡è·¯å¾„æ¥é‡ç½®" class="headerlink" title="é€šè¿‡è·¯å¾„æ¥é‡ç½®"></a>é€šè¿‡è·¯å¾„æ¥é‡ç½®</h4><p>å‰é¢è®²è¿°äº† <code>reset</code> åŸºæœ¬å½¢å¼çš„è¡Œä¸ºï¼Œä¸è¿‡ä½ è¿˜å¯ä»¥ç»™å®ƒæä¾›ä¸€ä¸ªä½œç”¨è·¯å¾„ã€‚ è‹¥æŒ‡å®šäº†ä¸€ä¸ªè·¯å¾„ï¼Œ<code>reset</code> å°†ä¼šè·³è¿‡ç¬¬ 1 æ­¥ï¼Œå¹¶ä¸”å°†å®ƒçš„ä½œç”¨èŒƒå›´é™å®šä¸ºæŒ‡å®šçš„æ–‡ä»¶æˆ–æ–‡ä»¶é›†åˆã€‚ è¿™æ ·åšè‡ªç„¶æœ‰å®ƒçš„é“ç†ï¼Œå› ä¸º HEAD åªæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œä½ æ— æ³•è®©å®ƒåŒæ—¶æŒ‡å‘ä¸¤ä¸ªæäº¤ä¸­å„è‡ªçš„ä¸€éƒ¨åˆ†ã€‚ ä¸è¿‡ç´¢å¼•å’Œå·¥ä½œç›®å½• å¯ä»¥éƒ¨åˆ†æ›´æ–°ï¼Œæ‰€ä»¥é‡ç½®ä¼šç»§ç»­è¿›è¡Œç¬¬ 2ã€3 æ­¥ã€‚</p><p>ç°åœ¨ï¼Œå‡å¦‚æˆ‘ä»¬è¿è¡Œ <code>git reset file.txt</code> ï¼ˆè¿™å…¶å®æ˜¯ <code>git reset --mixed HEAD file.txt</code> çš„ç®€å†™å½¢å¼ï¼Œå› ä¸ºä½ æ—¢æ²¡æœ‰æŒ‡å®šä¸€ä¸ªæäº¤çš„ SHA-1 æˆ–åˆ†æ”¯ï¼Œä¹Ÿæ²¡æœ‰æŒ‡å®š <code>--soft</code> æˆ– <code>--hard</code>ï¼‰ï¼Œå®ƒä¼šï¼š</p><ol><li><p>ç§»åŠ¨ HEAD åˆ†æ”¯çš„æŒ‡å‘ ï¼ˆå·²è·³è¿‡ï¼‰</p></li><li><p>è®©ç´¢å¼•çœ‹èµ·æ¥åƒ HEAD ï¼ˆåˆ°æ­¤å¤„åœæ­¢ï¼‰</p></li></ol><p>æ‰€ä»¥å®ƒæœ¬è´¨ä¸Šåªæ˜¯å°† <code>file.txt</code> ä» HEAD å¤åˆ¶åˆ°ç´¢å¼•ä¸­ã€‚</p><p><img src="git-chapter-7/img12.png" alt></p><p>å®ƒè¿˜æœ‰ å–æ¶ˆæš‚å­˜æ–‡ä»¶ çš„å®é™…æ•ˆæœã€‚ å¦‚æœæˆ‘ä»¬æŸ¥çœ‹è¯¥å‘½ä»¤çš„ç¤ºæ„å›¾ï¼Œç„¶åå†æƒ³æƒ³ <code>git add</code> æ‰€åšçš„äº‹ï¼Œå°±ä¼šå‘ç°å®ƒä»¬æ­£å¥½ç›¸åã€‚</p><p><img src="git-chapter-7/img13.png" alt></p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <code>git status</code> å‘½ä»¤çš„è¾“å‡ºä¼šå»ºè®®è¿è¡Œæ­¤å‘½ä»¤æ¥å–æ¶ˆæš‚å­˜ä¸€ä¸ªæ–‡ä»¶ã€‚ ï¼ˆæŸ¥çœ‹ å–æ¶ˆæš‚å­˜çš„æ–‡ä»¶ æ¥äº†è§£æ›´å¤šã€‚ï¼‰</p><p>æˆ‘ä»¬å¯ä»¥ä¸è®© Git ä» HEAD æ‹‰å–æ•°æ®ï¼Œè€Œæ˜¯é€šè¿‡å…·ä½“æŒ‡å®šä¸€ä¸ªæäº¤æ¥æ‹‰å–è¯¥æ–‡ä»¶çš„å¯¹åº”ç‰ˆæœ¬ã€‚ æˆ‘ä»¬åªéœ€è¿è¡Œç±»ä¼¼äº <code>git reset eb43bf file.txt</code> çš„å‘½ä»¤å³å¯ã€‚</p><p><img src="git-chapter-7/img14.png" alt></p><p>å®ƒå…¶å®åšäº†åŒæ ·çš„äº‹æƒ…ï¼Œä¹Ÿå°±æ˜¯æŠŠå·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶æ¢å¤åˆ° v1 ç‰ˆæœ¬ï¼Œè¿è¡Œ <code>git add</code> æ·»åŠ å®ƒï¼Œç„¶åå†å°†å®ƒæ¢å¤åˆ° v3 ç‰ˆæœ¬ï¼ˆåªæ˜¯ä¸ç”¨çœŸçš„è¿‡ä¸€éè¿™äº›æ­¥éª¤ï¼‰ã€‚ å¦‚æœæˆ‘ä»¬ç°åœ¨è¿è¡Œ <code>git commit</code>ï¼Œå®ƒå°±ä¼šè®°å½•ä¸€æ¡â€œå°†è¯¥æ–‡ä»¶æ¢å¤åˆ° v1 ç‰ˆæœ¬â€çš„æ›´æ”¹ï¼Œå°½ç®¡æˆ‘ä»¬å¹¶æœªåœ¨å·¥ä½œç›®å½•ä¸­çœŸæ­£åœ°å†æ¬¡æ‹¥æœ‰å®ƒã€‚</p><p>è¿˜æœ‰ä¸€ç‚¹åŒ <code>git add</code> ä¸€æ ·ï¼Œå°±æ˜¯ <code>reset</code> å‘½ä»¤ä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ª <code>--patch</code> é€‰é¡¹æ¥ä¸€å—ä¸€å—åœ°å–æ¶ˆæš‚å­˜çš„å†…å®¹ã€‚ è¿™æ ·ä½ å°±å¯ä»¥æ ¹æ®é€‰æ‹©æ¥å–æ¶ˆæš‚å­˜æˆ–æ¢å¤å†…å®¹äº†ã€‚</p><h4 id="å‹ç¼©"><a href="#å‹ç¼©" class="headerlink" title="å‹ç¼©"></a>å‹ç¼©</h4><p>æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•åˆ©ç”¨è¿™ç§æ–°çš„åŠŸèƒ½æ¥åšä¸€äº›æœ‰è¶£çš„äº‹æƒ…â€”â€”å‹ç¼©æäº¤ã€‚</p><p>å‡è®¾ä½ çš„ä¸€ç³»åˆ—æäº¤ä¿¡æ¯ä¸­æœ‰ â€œoops.â€â€œWIPâ€ å’Œ â€œforgot this fileâ€ï¼Œ èªæ˜çš„ä½ å°±èƒ½ä½¿ç”¨ <code>reset</code> æ¥è½»æ¾å¿«é€Ÿåœ°å°†å®ƒä»¬å‹ç¼©æˆå•ä¸ªæäº¤ï¼Œä¹Ÿæ˜¾å‡ºä½ çš„èªæ˜ã€‚ ï¼ˆå‹ç¼©æäº¤ å±•ç¤ºäº†å¦ä¸€ç§æ–¹å¼ï¼Œä¸è¿‡åœ¨æœ¬ä¾‹ä¸­ç”¨ reset æ›´ç®€å•ã€‚ï¼‰</p><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œç¬¬ä¸€æ¬¡æäº¤ä¸­æœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œç¬¬äºŒæ¬¡æäº¤å¢åŠ äº†ä¸€ä¸ªæ–°çš„æ–‡ä»¶å¹¶ä¿®æ”¹äº†ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œç¬¬ä¸‰æ¬¡æäº¤å†æ¬¡ä¿®æ”¹äº†ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚ ç”±äºç¬¬äºŒæ¬¡æäº¤æ˜¯ä¸€ä¸ªæœªå®Œæˆçš„å·¥ä½œï¼Œå› æ­¤ä½ æƒ³è¦å‹ç¼©å®ƒã€‚</p><p><img src="git-chapter-7/img15.png" alt></p><p>é‚£ä¹ˆå¯ä»¥è¿è¡Œ <code>git reset --soft HEAD~2</code> æ¥å°† HEAD åˆ†æ”¯ç§»åŠ¨åˆ°ä¸€ä¸ªæ—§ä¸€ç‚¹çš„æäº¤ä¸Šï¼ˆå³ä½ æƒ³è¦ä¿ç•™çš„ç¬¬ä¸€ä¸ªæäº¤ï¼‰ï¼š</p><p><img src="git-chapter-7/img16.png" alt></p><p>ç„¶ååªéœ€å†æ¬¡è¿è¡Œ <code>git commit</code>ï¼š</p><p><img src="git-chapter-7/img17.png" alt></p><p>ç°åœ¨ä½ å¯ä»¥æŸ¥çœ‹å¯åˆ°è¾¾çš„å†å²ï¼Œå³å°†ä¼šæ¨é€çš„å†å²ï¼Œç°åœ¨çœ‹èµ·æ¥æœ‰ä¸ª v1 ç‰ˆ <code>file-a.txt</code> çš„æäº¤ï¼Œæ¥ç€ç¬¬äºŒä¸ªæäº¤å°† <code>file-a.txt</code> ä¿®æ”¹æˆäº† v3 ç‰ˆå¹¶å¢åŠ äº† <code>file-b.txt</code>ã€‚ åŒ…å« v2 ç‰ˆæœ¬çš„æ–‡ä»¶å·²ç»ä¸åœ¨å†å²ä¸­äº†ã€‚</p><h4 id="æ£€å‡º"><a href="#æ£€å‡º" class="headerlink" title="æ£€å‡º"></a>æ£€å‡º</h4><p>æœ€åï¼Œä½ å¤§æ¦‚è¿˜æƒ³çŸ¥é“ <code>checkout</code> å’Œ <code>reset</code> ä¹‹é—´çš„åŒºåˆ«ã€‚ å’Œ <code>reset</code> ä¸€æ ·ï¼Œ<code>checkout</code> ä¹Ÿæ“çºµä¸‰æ£µæ ‘ï¼Œä¸è¿‡å®ƒæœ‰ä¸€ç‚¹ä¸åŒï¼Œè¿™å–å†³äºä½ æ˜¯å¦ä¼ ç»™è¯¥å‘½ä»¤ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ã€‚</p><p><strong>ä¸å¸¦è·¯å¾„</strong><br>è¿è¡Œ <code>git checkout [branch]</code> ä¸è¿è¡Œ <code>git reset --hard [branch]</code> éå¸¸ç›¸ä¼¼ï¼Œå®ƒä¼šæ›´æ–°æ‰€æœ‰ä¸‰æ£µæ ‘ä½¿å…¶çœ‹èµ·æ¥åƒ <code>[branch]</code>ï¼Œä¸è¿‡æœ‰ä¸¤ç‚¹é‡è¦çš„åŒºåˆ«ã€‚</p><p>é¦–å…ˆä¸åŒäº <code>reset --hard</code>ï¼Œ<code>checkout</code> å¯¹å·¥ä½œç›®å½•æ˜¯å®‰å…¨çš„ï¼Œå®ƒä¼šé€šè¿‡æ£€æŸ¥æ¥ç¡®ä¿ä¸ä¼šå°†å·²æ›´æ”¹çš„æ–‡ä»¶å¼„ä¸¢ã€‚ å…¶å®å®ƒè¿˜æ›´èªæ˜ä¸€äº›ã€‚å®ƒä¼šåœ¨å·¥ä½œç›®å½•ä¸­å…ˆè¯•ç€ç®€å•åˆå¹¶ä¸€ä¸‹ï¼Œè¿™æ ·æ‰€æœ‰_è¿˜æœªä¿®æ”¹è¿‡çš„_æ–‡ä»¶éƒ½ä¼šè¢«æ›´æ–°ã€‚ è€Œ <code>reset --hard</code> åˆ™ä¼šä¸åšæ£€æŸ¥å°±å…¨é¢åœ°æ›¿æ¢æ‰€æœ‰ä¸œè¥¿ã€‚</p><p>ç¬¬äºŒä¸ªé‡è¦çš„åŒºåˆ«æ˜¯å¦‚ä½•æ›´æ–° HEADã€‚ <code>reset</code> ä¼šç§»åŠ¨ HEAD åˆ†æ”¯çš„æŒ‡å‘ï¼Œè€Œ <code>checkout</code> åªä¼šç§»åŠ¨ HEAD è‡ªèº«æ¥æŒ‡å‘å¦ä¸€ä¸ªåˆ†æ”¯ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ <code>master</code> å’Œ <code>develop</code> åˆ†æ”¯ï¼Œå®ƒä»¬åˆ†åˆ«æŒ‡å‘ä¸åŒçš„æäº¤ï¼›æˆ‘ä»¬ç°åœ¨åœ¨ <code>develop</code> ä¸Šï¼ˆæ‰€ä»¥ HEAD æŒ‡å‘å®ƒï¼‰ã€‚ å¦‚æœæˆ‘ä»¬è¿è¡Œ <code>git reset master</code>ï¼Œé‚£ä¹ˆ <code>develop</code> è‡ªèº«ç°åœ¨ä¼šå’Œ <code>master</code> æŒ‡å‘åŒä¸€ä¸ªæäº¤ã€‚ è€Œå¦‚æœæˆ‘ä»¬è¿è¡Œ <code>git checkout master</code> çš„è¯ï¼Œ<code>develop</code> ä¸ä¼šç§»åŠ¨ï¼ŒHEAD è‡ªèº«ä¼šç§»åŠ¨ã€‚ ç°åœ¨ HEAD å°†ä¼šæŒ‡å‘ <code>master</code>ã€‚</p><p>æ‰€ä»¥ï¼Œè™½ç„¶åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹æˆ‘ä»¬éƒ½ç§»åŠ¨ HEAD ä½¿å…¶æŒ‡å‘äº†æäº¤ Aï¼Œä½†_åšæ³•_æ˜¯éå¸¸ä¸åŒçš„ã€‚ <code>reset</code> ä¼šç§»åŠ¨ HEAD åˆ†æ”¯çš„æŒ‡å‘ï¼Œè€Œ <code>checkout</code> åˆ™ç§»åŠ¨ HEAD è‡ªèº«ã€‚</p><p><img src="git-chapter-7/img18.png" alt></p><p><strong>å¸¦è·¯å¾„</strong><br>è¿è¡Œ <code>checkout</code> çš„å¦ä¸€ç§æ–¹å¼å°±æ˜¯æŒ‡å®šä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œè¿™ä¼šåƒ <code>reset</code> ä¸€æ ·ä¸ä¼šç§»åŠ¨ HEADã€‚ å®ƒå°±åƒ <code>git reset [branch] file</code> é‚£æ ·ç”¨è¯¥æ¬¡æäº¤ä¸­çš„é‚£ä¸ªæ–‡ä»¶æ¥æ›´æ–°ç´¢å¼•ï¼Œä½†æ˜¯å®ƒä¹Ÿä¼šè¦†ç›–å·¥ä½œç›®å½•ä¸­å¯¹åº”çš„æ–‡ä»¶ã€‚ å®ƒå°±åƒæ˜¯ <code>git reset --hard [branch] file</code>ï¼ˆå¦‚æœ <code>reset</code> å…è®¸ä½ è¿™æ ·è¿è¡Œçš„è¯ï¼‰- è¿™æ ·å¯¹å·¥ä½œç›®å½•å¹¶ä¸å®‰å…¨ï¼Œå®ƒä¹Ÿä¸ä¼šç§»åŠ¨ HEADã€‚</p><p>æ­¤å¤–ï¼ŒåŒ <code>git reset</code> å’Œ <code>git add</code> ä¸€æ ·ï¼Œ<code>checkout</code> ä¹Ÿæ¥å—ä¸€ä¸ª <code>--patch</code> é€‰é¡¹ï¼Œå…è®¸ä½ æ ¹æ®é€‰æ‹©ä¸€å—ä¸€å—åœ°æ¢å¤æ–‡ä»¶å†…å®¹ã€‚</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>å¸Œæœ›ä½ ç°åœ¨ç†Ÿæ‚‰å¹¶ç†è§£äº† <code>reset</code> å‘½ä»¤ï¼Œä¸è¿‡å…³äºå®ƒå’Œ <code>checkout</code> ä¹‹é—´çš„åŒºåˆ«ï¼Œä½ å¯èƒ½è¿˜æ˜¯ä¼šæœ‰ç‚¹å›°æƒ‘ï¼Œæ¯•ç«Ÿä¸å¤ªå¯èƒ½è®°ä½ä¸åŒè°ƒç”¨çš„æ‰€æœ‰è§„åˆ™ã€‚</p><p>ä¸‹é¢çš„é€ŸæŸ¥è¡¨åˆ—å‡ºäº†å‘½ä»¤å¯¹æ ‘çš„å½±å“ã€‚ â€œHEADâ€ ä¸€åˆ—ä¸­çš„ â€œREFâ€ è¡¨ç¤ºè¯¥å‘½ä»¤ç§»åŠ¨äº† HEAD æŒ‡å‘çš„åˆ†æ”¯å¼•ç”¨ï¼Œè€Œ â€œHEADâ€ åˆ™è¡¨ç¤ºåªç§»åŠ¨äº† HEAD è‡ªèº«ã€‚ ç‰¹åˆ«æ³¨æ„ WD Safe? ä¸€åˆ—â€”â€”å¦‚æœå®ƒæ ‡è®°ä¸º NOï¼Œé‚£ä¹ˆè¿è¡Œè¯¥å‘½ä»¤ä¹‹å‰è¯·è€ƒè™‘ä¸€ä¸‹ã€‚</p><table><thead><tr><th></th><th>HEAD</th><th>Index</th><th>Workdir</th><th>WD Safe?</th></tr></thead><tbody><tr><td><strong>Commit Level</strong></td><td></td><td></td><td></td><td></td></tr><tr><td>reset â€“soft [commit]</td><td>REF</td><td>NO</td><td>NO</td><td>YES</td></tr><tr><td>reset  [commit]</td><td>REF</td><td>YES</td><td>NO</td><td>YES</td></tr><tr><td>reset â€“hard [commit]</td><td>REF</td><td>YES</td><td>YES</td><td><strong>NO</strong></td></tr><tr><td>checkout [commit]</td><td>HEAD</td><td>YES</td><td>YES</td><td>YES</td></tr><tr><td><strong>File  Level</strong></td><td></td><td></td><td></td><td></td></tr><tr><td>reset (commit) [file]</td><td>NO</td><td>YES</td><td>NO</td><td>YES</td></tr><tr><td>checkout (commit) [file]</td><td>NO</td><td>YES</td><td>YES</td><td><strong>NO</strong></td></tr></tbody></table><h3 id="é«˜çº§åˆå¹¶"><a href="#é«˜çº§åˆå¹¶" class="headerlink" title="é«˜çº§åˆå¹¶"></a>é«˜çº§åˆå¹¶</h3><p>åœ¨ Git ä¸­åˆå¹¶æ˜¯ç›¸å½“å®¹æ˜“çš„ã€‚ å› ä¸º Git ä½¿å¤šæ¬¡åˆå¹¶å¦ä¸€ä¸ªåˆ†æ”¯å˜å¾—å¾ˆå®¹æ˜“ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥æœ‰ä¸€ä¸ªå§‹ç»ˆä¿æŒæœ€æ–°çš„é•¿æœŸåˆ†æ”¯ï¼Œç»å¸¸è§£å†³å°çš„å†²çªï¼Œæ¯”åœ¨ä¸€ç³»åˆ—æäº¤åè§£å†³ä¸€ä¸ªå·¨å¤§çš„å†²çªè¦å¥½ã€‚</p><p>ç„¶è€Œï¼Œæœ‰æ—¶ä¹Ÿä¼šæœ‰æ£˜æ‰‹çš„å†²çªã€‚ ä¸åƒå…¶ä»–çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ŒGit å¹¶ä¸ä¼šå°è¯•è¿‡äºèªæ˜çš„åˆå¹¶å†²çªè§£å†³æ–¹æ¡ˆã€‚ Git çš„å“²å­¦æ˜¯èªæ˜åœ°å†³å®šæ— æ­§ä¹‰çš„åˆå¹¶æ–¹æ¡ˆï¼Œä½†æ˜¯å¦‚æœæœ‰å†²çªï¼Œå®ƒä¸ä¼šå°è¯•æ™ºèƒ½åœ°è‡ªåŠ¨è§£å†³å®ƒã€‚ å› æ­¤ï¼Œå¦‚æœå¾ˆä¹…ä¹‹åæ‰åˆå¹¶ä¸¤ä¸ªåˆ†å‰çš„åˆ†æ”¯ï¼Œä½ å¯èƒ½ä¼šæ’ä¸Šä¸€äº›é—®é¢˜ã€‚</p><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šä»”ç»†æŸ¥çœ‹é‚£äº›é—®é¢˜æ˜¯ä»€ä¹ˆä»¥åŠ Git ç»™äº†æˆ‘ä»¬ä»€ä¹ˆå·¥å…·æ¥å¸®åŠ©æˆ‘ä»¬å¤„ç†è¿™äº›æ›´éš¾åŠçš„æƒ…å½¢ã€‚æˆ‘ä»¬ä¹Ÿä¼šäº†è§£ä½ å¯ä»¥åšçš„ä¸åŒçš„ã€éæ ‡å‡†ç±»å‹çš„åˆå¹¶ï¼Œä¹Ÿä¼šçœ‹åˆ°å¦‚ä½•åé€€åˆ°åˆå¹¶ä¹‹å‰ã€‚</p><h4 id="é«˜çº§åˆå¹¶-1"><a href="#é«˜çº§åˆå¹¶-1" class="headerlink" title="é«˜çº§åˆå¹¶"></a>é«˜çº§åˆå¹¶</h4><p>æˆ‘ä»¬åœ¨ é‡åˆ°å†²çªæ—¶çš„åˆ†æ”¯åˆå¹¶ ä»‹ç»äº†è§£å†³åˆå¹¶å†²çªçš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œå¯¹äºæ›´å¤æ‚çš„å†²çªï¼ŒGit æä¾›äº†å‡ ä¸ªå·¥å…·æ¥å¸®åŠ©ä½ æŒ‡å‡ºå°†ä¼šå‘ç”Ÿä»€ä¹ˆä»¥åŠå¦‚ä½•æ›´å¥½åœ°å¤„ç†å†²çªã€‚</p><p>é¦–å…ˆï¼Œåœ¨åšä¸€æ¬¡å¯èƒ½æœ‰å†²çªçš„åˆå¹¶å‰å°½å¯èƒ½ä¿è¯å·¥ä½œç›®å½•æ˜¯å¹²å‡€çš„ã€‚ å¦‚æœä½ æœ‰æ­£åœ¨åšçš„å·¥ä½œï¼Œè¦ä¹ˆæäº¤åˆ°ä¸€ä¸ªä¸´æ—¶åˆ†æ”¯è¦ä¹ˆå‚¨è—å®ƒã€‚ è¿™ä½¿ä½ å¯ä»¥æ’¤æ¶ˆåœ¨è¿™é‡Œå°è¯•åšçš„ ä»»ä½•äº‹æƒ… ã€‚ å¦‚æœåœ¨ä½ å°è¯•ä¸€æ¬¡åˆå¹¶æ—¶å·¥ä½œç›®å½•ä¸­æœ‰æœªä¿å­˜çš„æ”¹åŠ¨ï¼Œä¸‹é¢çš„è¿™äº›æŠ€å·§å¯èƒ½ä¼šä½¿ä½ ä¸¢å¤±é‚£äº›å·¥ä½œã€‚</p><p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­æ¥äº†è§£ä¸€ä¸‹ã€‚ æˆ‘ä»¬æœ‰ä¸€ä¸ªè¶…çº§ç®€å•çš„æ‰“å° hello world çš„ Ruby æ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env ruby</span><br><span class="line"></span><br><span class="line">def hello</span><br><span class="line">  puts &apos;hello world&apos;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">hello()</span><br></pre></td></tr></table></figure><p>åœ¨æˆ‘ä»¬çš„ä»“åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>whitespace</code> çš„æ–°åˆ†æ”¯å¹¶å°†æ‰€æœ‰ Unix æ¢è¡Œç¬¦ä¿®æ”¹ä¸º DOS æ¢è¡Œç¬¦ï¼Œå®è´¨ä¸Šè™½ç„¶æ”¹å˜äº†æ–‡ä»¶çš„æ¯ä¸€è¡Œï¼Œä½†æ”¹å˜çš„éƒ½åªæ˜¯ç©ºç™½å­—ç¬¦ã€‚ ç„¶åæˆ‘ä»¬ä¿®æ”¹è¡Œ â€œhello worldâ€ ä¸º â€œhello mundoâ€ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b whitespace</span><br><span class="line">Switched to a new branch &apos;whitespace&apos;</span><br><span class="line"></span><br><span class="line">$ unix2dos hello.rb</span><br><span class="line">unix2dos: converting file hello.rb to DOS format ...</span><br><span class="line">$ git commit -am &apos;converted hello.rb to DOS&apos;</span><br><span class="line">[whitespace 3270f76] converted hello.rb to DOS</span><br><span class="line"> 1 file changed, 7 insertions(+), 7 deletions(-)</span><br><span class="line"></span><br><span class="line">$ vim hello.rb</span><br><span class="line">$ git diff -b</span><br><span class="line">diff --git a/hello.rb b/hello.rb</span><br><span class="line">index ac51efd..e85207e 100755</span><br><span class="line">--- a/hello.rb</span><br><span class="line">+++ b/hello.rb</span><br><span class="line">@@ -1,7 +1,7 @@</span><br><span class="line"> #! /usr/bin/env ruby</span><br><span class="line"></span><br><span class="line"> def hello</span><br><span class="line">-  puts &apos;hello world&apos;</span><br><span class="line">+  puts &apos;hello mundo&apos;^M</span><br><span class="line"> end</span><br><span class="line"></span><br><span class="line"> hello()</span><br><span class="line"></span><br><span class="line">$ git commit -am &apos;hello mundo change&apos;</span><br><span class="line">[whitespace 6d338d2] hello mundo change</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬åˆ‡æ¢å›æˆ‘ä»¬çš„ <code>master</code> åˆ†æ”¯å¹¶ä¸ºå‡½æ•°å¢åŠ ä¸€äº›æ³¨é‡Šã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">Switched to branch &apos;master&apos;</span><br><span class="line"></span><br><span class="line">$ vim hello.rb</span><br><span class="line">$ git diff</span><br><span class="line">diff --git a/hello.rb b/hello.rb</span><br><span class="line">index ac51efd..36c06c8 100755</span><br><span class="line">--- a/hello.rb</span><br><span class="line">+++ b/hello.rb</span><br><span class="line">@@ -1,5 +1,6 @@</span><br><span class="line"> #! /usr/bin/env ruby</span><br><span class="line"></span><br><span class="line">+# prints out a greeting</span><br><span class="line"> def hello</span><br><span class="line">   puts &apos;hello world&apos;</span><br><span class="line"> end</span><br><span class="line"></span><br><span class="line">$ git commit -am &apos;document the function&apos;</span><br><span class="line">[master bec6336] document the function</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å°è¯•åˆå¹¶å…¥æˆ‘ä»¬çš„ <code>whitespace</code> åˆ†æ”¯ï¼Œå› ä¸ºä¿®æ”¹äº†ç©ºç™½å­—ç¬¦ï¼Œæ‰€ä»¥åˆå¹¶ä¼šå‡ºç°å†²çªã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git merge whitespace</span><br><span class="line">Auto-merging hello.rb</span><br><span class="line">CONFLICT (content): Merge conflict in hello.rb</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure><h5 id="ä¸­æ–­ä¸€æ¬¡åˆå¹¶"><a href="#ä¸­æ–­ä¸€æ¬¡åˆå¹¶" class="headerlink" title="ä¸­æ–­ä¸€æ¬¡åˆå¹¶"></a>ä¸­æ–­ä¸€æ¬¡åˆå¹¶</h5><p>æˆ‘ä»¬ç°åœ¨æœ‰å‡ ä¸ªé€‰é¡¹ã€‚ é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä»‹ç»å¦‚ä½•æ‘†è„±è¿™ä¸ªæƒ…å†µã€‚ ä½ å¯èƒ½ä¸æƒ³å¤„ç†å†²çªè¿™ç§æƒ…å†µï¼Œå®Œå…¨å¯ä»¥é€šè¿‡ <code>git merge --abort</code> æ¥ç®€å•åœ°é€€å‡ºåˆå¹¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git status -sb</span><br><span class="line">## master</span><br><span class="line">UU hello.rb</span><br><span class="line"></span><br><span class="line">$ git merge --abort</span><br><span class="line"></span><br><span class="line">$ git status -sb</span><br><span class="line">## master</span><br></pre></td></tr></table></figure><p><code>git merge --abort</code> é€‰é¡¹ä¼šå°è¯•æ¢å¤åˆ°ä½ è¿è¡Œåˆå¹¶å‰çš„çŠ¶æ€ã€‚ ä½†å½“è¿è¡Œå‘½ä»¤å‰ï¼Œåœ¨å·¥ä½œç›®å½•ä¸­æœ‰æœªå‚¨è—ã€æœªæäº¤çš„ä¿®æ”¹æ—¶å®ƒä¸èƒ½å®Œç¾å¤„ç†ï¼Œé™¤æ­¤ä¹‹å¤–å®ƒéƒ½å·¥ä½œåœ°å¾ˆå¥½ã€‚</p><p>å¦‚æœå› ä¸ºæŸäº›åŸå› ä½ å‘ç°è‡ªå·±å¤„åœ¨ä¸€ä¸ªæ··ä¹±çš„çŠ¶æ€ä¸­ç„¶ååªæ˜¯æƒ³è¦é‡æ¥ä¸€æ¬¡ï¼Œä¹Ÿå¯ä»¥è¿è¡Œ <code>git reset --hard HEAD</code> å›åˆ°ä¹‹å‰çš„çŠ¶æ€æˆ–å…¶ä»–ä½ æƒ³è¦æ¢å¤çš„çŠ¶æ€ã€‚ è¯·ç‰¢è®°è¿™ä¼šå°†æ¸…é™¤å·¥ä½œç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œæ‰€ä»¥ç¡®ä¿ä½ ä¸éœ€è¦ä¿å­˜è¿™é‡Œçš„ä»»æ„æ”¹åŠ¨ã€‚</p><h5 id="å¿½ç•¥ç©ºç™½"><a href="#å¿½ç•¥ç©ºç™½" class="headerlink" title="å¿½ç•¥ç©ºç™½"></a>å¿½ç•¥ç©ºç™½</h5><p>åœ¨è¿™ä¸ªç‰¹å®šçš„ä¾‹å­ä¸­ï¼Œå†²çªä¸ç©ºç™½æœ‰å…³ã€‚ æˆ‘ä»¬çŸ¥é“è¿™ç‚¹æ˜¯å› ä¸ºè¿™ä¸ªä¾‹å­å¾ˆç®€å•ï¼Œä½†æ˜¯åœ¨å®é™…çš„ä¾‹å­ä¸­å‘ç°è¿™æ ·çš„å†²çªä¹Ÿå¾ˆå®¹æ˜“ï¼Œå› ä¸ºæ¯ä¸€è¡Œéƒ½è¢«ç§»é™¤è€Œåœ¨å¦ä¸€è¾¹æ¯ä¸€è¡Œåˆè¢«åŠ å›æ¥äº†ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒGit è®¤ä¸ºæ‰€æœ‰è¿™äº›è¡Œéƒ½æ”¹åŠ¨äº†ï¼Œæ‰€ä»¥å®ƒä¸ä¼šåˆå¹¶æ–‡ä»¶ã€‚</p><p>é»˜è®¤åˆå¹¶ç­–ç•¥å¯ä»¥å¸¦æœ‰å‚æ•°ï¼Œå…¶ä¸­çš„å‡ ä¸ªæ­£å¥½æ˜¯å…³äºå¿½ç•¥ç©ºç™½æ”¹åŠ¨çš„ã€‚ å¦‚æœä½ çœ‹åˆ°åœ¨ä¸€æ¬¡åˆå¹¶ä¸­æœ‰å¤§é‡çš„ç©ºç™½é—®é¢˜ï¼Œä½ å¯ä»¥ç®€å•åœ°ä¸­æ­¢å®ƒå¹¶é‡åšä¸€æ¬¡ï¼Œè¿™æ¬¡ä½¿ç”¨ <code>-Xignore-all-space</code> æˆ– <code>-Xignore-space-change</code> é€‰é¡¹ã€‚ ç¬¬ä¸€ä¸ªé€‰é¡¹å¿½ç•¥ä»»æ„ æ•°é‡ çš„å·²æœ‰ç©ºç™½çš„ä¿®æ”¹ï¼Œç¬¬äºŒä¸ªé€‰é¡¹å¿½ç•¥æ‰€æœ‰ç©ºç™½ä¿®æ”¹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git merge -Xignore-space-change whitespace</span><br><span class="line">Auto-merging hello.rb</span><br><span class="line">Merge made by the &apos;recursive&apos; strategy.</span><br><span class="line"> hello.rb | 2 +-</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>å› ä¸ºåœ¨æœ¬ä¾‹ä¸­ï¼Œå®é™…ä¸Šæ–‡ä»¶ä¿®æ”¹å¹¶æ²¡æœ‰å†²çªï¼Œä¸€æ—¦æˆ‘ä»¬å¿½ç•¥ç©ºç™½ä¿®æ”¹ï¼Œæ¯ä¸€è¡Œéƒ½èƒ½è¢«å¾ˆå¥½åœ°åˆå¹¶ã€‚</p><p>å¦‚æœä½ çš„å›¢é˜Ÿä¸­çš„æŸä¸ªäººå¯èƒ½ä¸å°å¿ƒé‡æ–°æ ¼å¼åŒ–ç©ºæ ¼ä¸ºåˆ¶è¡¨ç¬¦æˆ–è€…ç›¸åçš„æ“ä½œï¼Œè¿™ä¼šæ˜¯ä¸€ä¸ªæ•‘å‘½ç¨»è‰ã€‚</p><h5 id="æ‰‹åŠ¨æ–‡ä»¶å†åˆå¹¶"><a href="#æ‰‹åŠ¨æ–‡ä»¶å†åˆå¹¶" class="headerlink" title="æ‰‹åŠ¨æ–‡ä»¶å†åˆå¹¶"></a>æ‰‹åŠ¨æ–‡ä»¶å†åˆå¹¶</h5><p>è™½ç„¶ Git å¯¹ç©ºç™½çš„é¢„å¤„ç†åšå¾—å¾ˆå¥½ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–ç±»å‹çš„ä¿®æ”¹ï¼ŒGit ä¹Ÿè®¸æ— æ³•è‡ªåŠ¨å¤„ç†ï¼Œä½†æ˜¯è„šæœ¬å¯ä»¥å¤„ç†å®ƒä»¬ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾ Git æ— æ³•å¤„ç†ç©ºç™½ä¿®æ”¹å› æ­¤æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚</p><p>æˆ‘ä»¬çœŸæ­£æƒ³è¦åšçš„æ˜¯å¯¹å°†è¦åˆå¹¶å…¥çš„æ–‡ä»¶åœ¨çœŸæ­£åˆå¹¶å‰è¿è¡Œ <code>dos2unix</code> ç¨‹åºã€‚ æ‰€ä»¥å¦‚æœé‚£æ ·çš„è¯ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•åšï¼Ÿ</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¿›å…¥åˆ°äº†åˆå¹¶å†²çªçŠ¶æ€ã€‚ ç„¶åæˆ‘ä»¬æƒ³è¦æˆ‘çš„ç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œä»–ä»¬çš„ç‰ˆæœ¬çš„æ–‡ä»¶ï¼ˆä»æˆ‘ä»¬å°†è¦åˆå¹¶å…¥çš„åˆ†æ”¯ï¼‰å’Œå…±åŒçš„ç‰ˆæœ¬çš„æ–‡ä»¶ï¼ˆä»åˆ†æ”¯å‰å¼€æ—¶çš„ä½ç½®ï¼‰çš„æ‹·è´ã€‚ ç„¶åæˆ‘ä»¬æƒ³è¦ä¿®å¤ä»»ä½•ä¸€è¾¹çš„æ–‡ä»¶ï¼Œå¹¶ä¸”ä¸ºè¿™ä¸ªå•ç‹¬çš„æ–‡ä»¶é‡è¯•ä¸€æ¬¡åˆå¹¶ã€‚</p><p>è·å¾—è¿™ä¸‰ä¸ªæ–‡ä»¶ç‰ˆæœ¬å®é™…ä¸Šç›¸å½“å®¹æ˜“ã€‚ Git åœ¨ç´¢å¼•ä¸­å­˜å‚¨äº†æ‰€æœ‰è¿™äº›ç‰ˆæœ¬ï¼Œåœ¨ â€œstagesâ€ ä¸‹æ¯ä¸€ä¸ªéƒ½æœ‰ä¸€ä¸ªæ•°å­—ä¸å®ƒä»¬å…³è”ã€‚ Stage 1 æ˜¯å®ƒä»¬å…±åŒçš„ç¥–å…ˆç‰ˆæœ¬ï¼Œstage 2 æ˜¯ä½ çš„ç‰ˆæœ¬ï¼Œstage 3 æ¥è‡ªäº <code>MERGE_HEAD</code>ï¼Œå³ä½ å°†è¦åˆå¹¶å…¥çš„ç‰ˆæœ¬ï¼ˆâ€œtheirsâ€ï¼‰ã€‚</p><p>é€šè¿‡ git show å‘½ä»¤ä¸ä¸€ä¸ªç‰¹åˆ«çš„è¯­æ³•ï¼Œä½ å¯ä»¥å°†å†²çªæ–‡ä»¶çš„è¿™äº›ç‰ˆæœ¬é‡Šæ”¾å‡ºä¸€ä»½æ‹·è´ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git show :1:hello.rb &gt; hello.common.rb</span><br><span class="line">$ git show :2:hello.rb &gt; hello.ours.rb</span><br><span class="line">$ git show :3:hello.rb &gt; hello.theirs.rb</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³è¦æ›´ä¸“ä¸šä¸€ç‚¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>ls-files -u</code> åº•å±‚å‘½ä»¤æ¥å¾—åˆ°è¿™äº›æ–‡ä»¶çš„ Git blob å¯¹è±¡çš„å®é™… SHA-1 å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git ls-files -u</span><br><span class="line">100755 ac51efdc3df4f4fd328d1a02ad05331d8e2c9111 1hello.rb</span><br><span class="line">100755 36c06c8752c78d2aff89571132f3bf7841a7b5c3 2hello.rb</span><br><span class="line">100755 e85207e04dfdd5eb0a1e9febbc67fd837c44a1cd 3hello.rb</span><br></pre></td></tr></table></figure><p><code>:1:hello.rb</code> åªæ˜¯æŸ¥æ‰¾é‚£ä¸ª blob å¯¹è±¡ SHA-1 å€¼çš„ç®€å†™ã€‚</p><p>æ—¢ç„¶åœ¨æˆ‘ä»¬çš„å·¥ä½œç›®å½•ä¸­å·²ç»æœ‰è¿™æ‰€æœ‰ä¸‰ä¸ªé˜¶æ®µçš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹å·¥ä¿®å¤å®ƒä»¬æ¥ä¿®å¤ç©ºç™½é—®é¢˜ï¼Œç„¶åä½¿ç”¨é²œä¸ºäººçŸ¥çš„ <code>git merge-file</code> å‘½ä»¤æ¥é‡æ–°åˆå¹¶é‚£ä¸ªæ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ dos2unix hello.theirs.rb</span><br><span class="line">dos2unix: converting file hello.theirs.rb to Unix format ...</span><br><span class="line"></span><br><span class="line">$ git merge-file -p \</span><br><span class="line">    hello.ours.rb hello.common.rb hello.theirs.rb &gt; hello.rb</span><br><span class="line"></span><br><span class="line">$ git diff -b</span><br><span class="line">diff --cc hello.rb</span><br><span class="line">index 36c06c8,e85207e..0000000</span><br><span class="line">--- a/hello.rb</span><br><span class="line">+++ b/hello.rb</span><br><span class="line">@@@ -1,8 -1,7 +1,8 @@@</span><br><span class="line">  #! /usr/bin/env ruby</span><br><span class="line"></span><br><span class="line"> +# prints out a greeting</span><br><span class="line">  def hello</span><br><span class="line">-   puts &apos;hello world&apos;</span><br><span class="line">+   puts &apos;hello mundo&apos;</span><br><span class="line">  end</span><br><span class="line"></span><br><span class="line">  hello()</span><br></pre></td></tr></table></figure><p>åœ¨è¿™æ—¶æˆ‘ä»¬å·²ç»æ¼‚äº®åœ°åˆå¹¶äº†é‚£ä¸ªæ–‡ä»¶ã€‚ å®é™…ä¸Šï¼Œè¿™æ¯”ä½¿ç”¨ <code>ignore-space-change</code> é€‰é¡¹è¦æ›´å¥½ï¼Œå› ä¸ºåœ¨åˆå¹¶å‰çœŸæ­£åœ°ä¿®å¤äº†ç©ºç™½ä¿®æ”¹è€Œä¸æ˜¯ç®€å•åœ°å¿½ç•¥å®ƒä»¬ã€‚ åœ¨ä½¿ç”¨ <code>ignore-space-change</code> è¿›è¡Œåˆå¹¶æ“ä½œåï¼Œæˆ‘ä»¬æœ€ç»ˆå¾—åˆ°äº†æœ‰å‡ è¡Œæ˜¯ DOS è¡Œå°¾çš„æ–‡ä»¶ï¼Œä»è€Œä½¿æäº¤å†…å®¹æ··ä¹±äº†ã€‚</p><p>å¦‚æœä½ æƒ³è¦åœ¨æœ€ç»ˆæäº¤å‰çœ‹ä¸€ä¸‹æˆ‘ä»¬è¿™è¾¹ä¸å¦ä¸€è¾¹ä¹‹é—´å®é™…çš„ä¿®æ”¹ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>git diff</code> æ¥æ¯”è¾ƒå°†è¦æäº¤ä½œä¸ºåˆå¹¶ç»“æœçš„å·¥ä½œç›®å½•ä¸å…¶ä¸­ä»»æ„ä¸€ä¸ªé˜¶æ®µçš„æ–‡ä»¶å·®å¼‚ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹å®ƒä»¬ã€‚</p><p>è¦åœ¨åˆå¹¶å‰æ¯”è¾ƒç»“æœä¸åœ¨ä½ çš„åˆ†æ”¯ä¸Šçš„å†…å®¹ï¼Œæ¢ä¸€å¥è¯è¯´ï¼Œçœ‹çœ‹åˆå¹¶å¼•å…¥äº†ä»€ä¹ˆï¼Œå¯ä»¥è¿è¡Œ <code>git diff --ours</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git diff --ours</span><br><span class="line">* Unmerged path hello.rb</span><br><span class="line">diff --git a/hello.rb b/hello.rb</span><br><span class="line">index 36c06c8..44d0a25 100755</span><br><span class="line">--- a/hello.rb</span><br><span class="line">+++ b/hello.rb</span><br><span class="line">@@ -2,7 +2,7 @@</span><br><span class="line"></span><br><span class="line"> # prints out a greeting</span><br><span class="line"> def hello</span><br><span class="line">-  puts &apos;hello world&apos;</span><br><span class="line">+  puts &apos;hello mundo&apos;</span><br><span class="line"> end</span><br><span class="line"></span><br><span class="line"> hello()</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°çœ‹åˆ°åœ¨æˆ‘ä»¬çš„åˆ†æ”¯ä¸Šå‘ç”Ÿäº†ä»€ä¹ˆï¼Œåœ¨è¿™æ¬¡åˆå¹¶ä¸­æˆ‘ä»¬å®é™…å¼•å…¥åˆ°è¿™ä¸ªæ–‡ä»¶çš„æ”¹åŠ¨ï¼Œæ˜¯ä¿®æ”¹äº†å…¶ä¸­ä¸€è¡Œã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦æŸ¥çœ‹åˆå¹¶çš„ç»“æœä¸ä»–ä»¬é‚£è¾¹æœ‰ä»€ä¹ˆä¸åŒï¼Œå¯ä»¥è¿è¡Œ <code>git diff --theirs</code>ã€‚ åœ¨æœ¬ä¾‹åŠåç»­çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ <code>-b</code> æ¥å»é™¤ç©ºç™½ï¼Œå› ä¸ºæˆ‘ä»¬å°†å®ƒä¸ Git ä¸­çš„ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æ¸…ç†è¿‡çš„ <code>hello.theirs.rb</code> æ–‡ä»¶æ¯”è¾ƒã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git diff --theirs -b</span><br><span class="line">* Unmerged path hello.rb</span><br><span class="line">diff --git a/hello.rb b/hello.rb</span><br><span class="line">index e85207e..44d0a25 100755</span><br><span class="line">--- a/hello.rb</span><br><span class="line">+++ b/hello.rb</span><br><span class="line">@@ -1,5 +1,6 @@</span><br><span class="line"> #! /usr/bin/env ruby</span><br><span class="line"></span><br><span class="line">+# prints out a greeting</span><br><span class="line"> def hello</span><br><span class="line">   puts &apos;hello mundo&apos;</span><br><span class="line"> end</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆï¼Œä½ å¯ä»¥é€šè¿‡ <code>git diff --base</code> æ¥æŸ¥çœ‹æ–‡ä»¶åœ¨ä¸¤è¾¹æ˜¯å¦‚ä½•æ”¹åŠ¨çš„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ git diff --base -b</span><br><span class="line">* Unmerged path hello.rb</span><br><span class="line">diff --git a/hello.rb b/hello.rb</span><br><span class="line">index ac51efd..44d0a25 100755</span><br><span class="line">--- a/hello.rb</span><br><span class="line">+++ b/hello.rb</span><br><span class="line">@@ -1,7 +1,8 @@</span><br><span class="line"> #! /usr/bin/env ruby</span><br><span class="line"></span><br><span class="line">+# prints out a greeting</span><br><span class="line"> def hello</span><br><span class="line">-  puts &apos;hello world&apos;</span><br><span class="line">+  puts &apos;hello mundo&apos;</span><br><span class="line"> end</span><br><span class="line"></span><br><span class="line"> hello()</span><br></pre></td></tr></table></figure><p>åœ¨è¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>git clean</code> å‘½ä»¤æ¥æ¸…ç†æˆ‘ä»¬ä¸ºæ‰‹åŠ¨åˆå¹¶è€Œåˆ›å»ºä½†ä¸å†æœ‰ç”¨çš„é¢å¤–æ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git clean -f</span><br><span class="line">Removing hello.common.rb</span><br><span class="line">Removing hello.ours.rb</span><br><span class="line">Removing hello.theirs.rb</span><br></pre></td></tr></table></figure><h5 id="æ£€å‡ºå†²çª"><a href="#æ£€å‡ºå†²çª" class="headerlink" title="æ£€å‡ºå†²çª"></a>æ£€å‡ºå†²çª</h5><p>ä¹Ÿè®¸æœ‰æ—¶æˆ‘ä»¬å¹¶ä¸æ»¡æ„è¿™æ ·çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ–è®¸æœ‰æ—¶è¿˜è¦æ‰‹åŠ¨ç¼–è¾‘ä¸€è¾¹æˆ–è€…ä¸¤è¾¹çš„å†²çªï¼Œä½†è¿˜æ˜¯ä¾æ—§æ— æ³•æ­£å¸¸å·¥ä½œï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦æ›´å¤šçš„ä¸Šä¸‹æ–‡å…³è”æ¥è§£å†³è¿™äº›å†²çªã€‚</p><p>è®©æˆ‘ä»¬æ¥ç¨å¾®æ”¹åŠ¨ä¸‹ä¾‹å­ã€‚ å¯¹äºæœ¬ä¾‹ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªé•¿æœŸåˆ†æ”¯ï¼Œæ¯ä¸€ä¸ªåˆ†æ”¯éƒ½æœ‰å‡ ä¸ªæäº¤ï¼Œä½†æ˜¯åœ¨åˆå¹¶æ—¶å´åˆ›å»ºäº†ä¸€ä¸ªåˆç†çš„å†²çªã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git log --graph --oneline --decorate --all</span><br><span class="line">* f1270f7 (HEAD, master) update README</span><br><span class="line">* 9af9d3b add a README</span><br><span class="line">* 694971d update phrase to hola world</span><br><span class="line">| * e3eb223 (mundo) add more tests</span><br><span class="line">| * 7cff591 add testing script</span><br><span class="line">| * c3ffff1 changed text to hello mundo</span><br><span class="line">|/</span><br><span class="line">* b7dcc89 initial hello world code</span><br></pre></td></tr></table></figure><p>ç°åœ¨æœ‰åªåœ¨ <code>master</code> åˆ†æ”¯ä¸Šçš„ä¸‰æ¬¡å•ç‹¬æäº¤ï¼Œè¿˜æœ‰å…¶ä»–ä¸‰æ¬¡æäº¤åœ¨ <code>mundo</code> åˆ†æ”¯ä¸Šã€‚ å¦‚æœæˆ‘ä»¬å°è¯•å°† <code>mundo</code> åˆ†æ”¯åˆå¹¶å…¥ <code>master</code> åˆ†æ”¯ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªå†²çªã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git merge mundo</span><br><span class="line">Auto-merging hello.rb</span><br><span class="line">CONFLICT (content): Merge conflict in hello.rb</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æƒ³è¦çœ‹ä¸€ä¸‹åˆå¹¶å†²çªæ˜¯ä»€ä¹ˆã€‚ å¦‚æœæˆ‘ä»¬æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env ruby</span><br><span class="line"></span><br><span class="line">def hello</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">  puts &apos;hola world&apos;</span><br><span class="line">=======</span><br><span class="line">  puts &apos;hello mundo&apos;</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; mundo</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">hello()</span><br></pre></td></tr></table></figure><p>åˆå¹¶çš„ä¸¤è¾¹éƒ½å‘è¿™ä¸ªæ–‡ä»¶å¢åŠ äº†å†…å®¹ï¼Œä½†æ˜¯å¯¼è‡´å†²çªçš„åŸå› æ˜¯å…¶ä¸­ä¸€äº›æäº¤ä¿®æ”¹äº†æ–‡ä»¶çš„åŒä¸€ä¸ªåœ°æ–¹ã€‚</p><p>è®©æˆ‘ä»¬æ¢ç´¢ä¸€ä¸‹ç°åœ¨ä½ æ‰‹è¾¹å¯ç”¨æ¥æŸ¥æ˜è¿™ä¸ªå†²çªæ˜¯å¦‚ä½•äº§ç”Ÿçš„å·¥å…·ã€‚ åº”è¯¥å¦‚ä½•ä¿®å¤è¿™ä¸ªå†²çªçœ‹èµ·æ¥æˆ–è®¸å¹¶ä¸æ˜æ˜¾ã€‚ è¿™æ—¶ä½ éœ€è¦æ›´å¤šä¸Šä¸‹æ–‡ã€‚</p><p>ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å·¥å…·æ˜¯å¸¦ <code>--conflict</code> é€‰é¡¹çš„ <code>git checkout</code>ã€‚ è¿™ä¼šé‡æ–°æ£€å‡ºæ–‡ä»¶å¹¶æ›¿æ¢åˆå¹¶å†²çªæ ‡è®°ã€‚ å¦‚æœæƒ³è¦é‡ç½®æ ‡è®°å¹¶å°è¯•å†æ¬¡è§£å†³å®ƒä»¬çš„è¯è¿™ä¼šå¾ˆæœ‰ç”¨ã€‚</p><p>å¯ä»¥ä¼ é€’ç»™ <code>--conflict</code> å‚æ•° <code>diff3</code> æˆ– <code>merge</code>ï¼ˆé»˜è®¤é€‰é¡¹ï¼‰ã€‚ å¦‚æœä¼ ç»™å®ƒ <code>diff3</code>ï¼ŒGit ä¼šä½¿ç”¨ä¸€ä¸ªç•¥å¾®ä¸åŒç‰ˆæœ¬çš„å†²çªæ ‡è®°ï¼šä¸ä»…ä»…åªç»™ä½  â€œoursâ€ å’Œ â€œtheirsâ€ ç‰ˆæœ¬ï¼ŒåŒæ—¶ä¹Ÿä¼šæœ‰ â€œbaseâ€ ç‰ˆæœ¬åœ¨ä¸­é—´æ¥ç»™ä½ æ›´å¤šçš„ä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout --conflict=diff3 hello.rb</span><br></pre></td></tr></table></figure><p>ä¸€æ—¦æˆ‘ä»¬è¿è¡Œå®ƒï¼Œæ–‡ä»¶çœ‹èµ·æ¥ä¼šåƒä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env ruby</span><br><span class="line"></span><br><span class="line">def hello</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; ours</span><br><span class="line">  puts &apos;hola world&apos;</span><br><span class="line">||||||| base</span><br><span class="line">  puts &apos;hello world&apos;</span><br><span class="line">=======</span><br><span class="line">  puts &apos;hello mundo&apos;</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; theirs</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">hello()</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ å–œæ¬¢è¿™ç§æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® <code>merge.conflictstyle</code> é€‰é¡¹ä¸º <code>diff3</code> æ¥åšä¸ºä»¥ååˆå¹¶å†²çªçš„é»˜è®¤é€‰é¡¹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global merge.conflictstyle diff3</span><br></pre></td></tr></table></figure><p><code>git checkout</code> å‘½ä»¤ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>--ours</code> å’Œ <code>--theirs</code> é€‰é¡¹ï¼Œè¿™æ˜¯ä¸€ç§æ— éœ€åˆå¹¶çš„å¿«é€Ÿæ–¹å¼ï¼Œä½ å¯ä»¥é€‰æ‹©ç•™ä¸‹ä¸€è¾¹çš„ä¿®æ”¹è€Œä¸¢å¼ƒæ‰å¦ä¸€è¾¹ä¿®æ”¹ã€‚</p><p>å½“æœ‰äºŒè¿›åˆ¶æ–‡ä»¶å†²çªæ—¶è¿™å¯èƒ½ä¼šç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå¯ä»¥ç®€å•åœ°é€‰æ‹©ä¸€è¾¹ï¼Œæˆ–è€…å¯ä»¥åªåˆå¹¶å¦ä¸€ä¸ªåˆ†æ”¯çš„ç‰¹å®šæ–‡ä»¶â€”â€”å¯ä»¥åšä¸€æ¬¡åˆå¹¶ç„¶ååœ¨æäº¤å‰æ£€å‡ºä¸€è¾¹æˆ–å¦ä¸€è¾¹çš„ç‰¹å®šæ–‡ä»¶ã€‚</p><h5 id="åˆå¹¶æ—¥å¿—"><a href="#åˆå¹¶æ—¥å¿—" class="headerlink" title="åˆå¹¶æ—¥å¿—"></a>åˆå¹¶æ—¥å¿—</h5><p>å¦ä¸€ä¸ªè§£å†³åˆå¹¶å†²çªæœ‰ç”¨çš„å·¥å…·æ˜¯ <code>git log</code>ã€‚ è¿™å¯ä»¥å¸®åŠ©ä½ å¾—åˆ°é‚£äº›å¯¹å†²çªæœ‰å½±å“çš„ä¸Šä¸‹æ–‡ã€‚ å›é¡¾ä¸€ç‚¹å†å²æ¥è®°èµ·ä¸ºä»€ä¹ˆä¸¤æ¡çº¿ä¸Šçš„å¼€å‘ä¼šè§¦ç¢°åŒä¸€ç‰‡ä»£ç æœ‰æ—¶ä¼šå¾ˆæœ‰ç”¨ã€‚</p><p>ä¸ºäº†å¾—åˆ°æ­¤æ¬¡åˆå¹¶ä¸­åŒ…å«çš„æ¯ä¸€ä¸ªåˆ†æ”¯çš„æ‰€æœ‰ç‹¬ç«‹æäº¤çš„åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¹‹å‰åœ¨ ä¸‰ç‚¹ å­¦ä¹ çš„â€œä¸‰ç‚¹â€è¯­æ³•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline --left-right HEAD...MERGE_HEAD</span><br><span class="line">&lt; f1270f7 update README</span><br><span class="line">&lt; 9af9d3b add a README</span><br><span class="line">&lt; 694971d update phrase to hola world</span><br><span class="line">&gt; e3eb223 add more tests</span><br><span class="line">&gt; 7cff591 add testing script</span><br><span class="line">&gt; c3ffff1 changed text to hello mundo</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ¼‚äº®çš„åˆ—è¡¨åŒ…å« 6 ä¸ªæäº¤å’Œæ¯ä¸€ä¸ªæäº¤æ‰€åœ¨çš„ä¸åŒå¼€å‘è·¯å¾„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´åŠ ç‰¹å®šçš„ä¸Šä¸‹æ–‡æ¥è¿›ä¸€æ­¥ç®€åŒ–è¿™ä¸ªåˆ—è¡¨ã€‚ å¦‚æœæˆ‘ä»¬æ·»åŠ  <code>--merge</code> é€‰é¡¹åˆ° <code>git log</code> ä¸­ï¼Œå®ƒä¼šåªæ˜¾ç¤ºä»»ä½•ä¸€è¾¹æ¥è§¦äº†åˆå¹¶å†²çªæ–‡ä»¶çš„æäº¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline --left-right --merge</span><br><span class="line">&lt; 694971d update phrase to hola world</span><br><span class="line">&gt; c3ffff1 changed text to hello mundo</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è¿è¡Œå‘½ä»¤æ—¶ç”¨ <code>-p</code> é€‰é¡¹ä»£æ›¿ï¼Œä½ ä¼šå¾—åˆ°æ‰€æœ‰å†²çªæ–‡ä»¶çš„åŒºåˆ«ã€‚ å¿«é€Ÿè·å¾—ä½ éœ€è¦å¸®åŠ©ç†è§£ä¸ºä»€ä¹ˆå‘ç”Ÿå†²çªçš„ä¸Šä¸‹æ–‡ï¼Œä»¥åŠå¦‚ä½•èªæ˜åœ°è§£å†³å®ƒï¼Œè¿™ä¼š éå¸¸ æœ‰ç”¨ã€‚</p><h5 id="ç»„åˆå¼å·®å¼‚æ ¼å¼"><a href="#ç»„åˆå¼å·®å¼‚æ ¼å¼" class="headerlink" title="ç»„åˆå¼å·®å¼‚æ ¼å¼"></a>ç»„åˆå¼å·®å¼‚æ ¼å¼</h5><p>å› ä¸º Git æš‚å­˜åˆå¹¶æˆåŠŸçš„ç»“æœï¼Œå½“ä½ åœ¨åˆå¹¶å†²çªçŠ¶æ€ä¸‹è¿è¡Œ <code>git diff</code> æ—¶ï¼Œåªä¼šå¾—åˆ°ç°åœ¨è¿˜åœ¨å†²çªçŠ¶æ€çš„åŒºåˆ«ã€‚ å½“éœ€è¦æŸ¥çœ‹ä½ è¿˜éœ€è¦è§£å†³å“ªäº›å†²çªæ—¶è¿™å¾ˆæœ‰ç”¨ã€‚</p><p>åœ¨åˆå¹¶å†²çªåç›´æ¥è¿è¡Œçš„ <code>git diff</code> ä¼šç»™ä½ ä¸€ä¸ªç›¸å½“ç‹¬ç‰¹çš„è¾“å‡ºæ ¼å¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br><span class="line">diff --cc hello.rb</span><br><span class="line">index 0399cd5,59727f0..0000000</span><br><span class="line">--- a/hello.rb</span><br><span class="line">+++ b/hello.rb</span><br><span class="line">@@@ -1,7 -1,7 +1,11 @@@</span><br><span class="line">  #! /usr/bin/env ruby</span><br><span class="line"></span><br><span class="line">  def hello</span><br><span class="line">++&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line"> +  puts &apos;hola world&apos;</span><br><span class="line">++=======</span><br><span class="line">+   puts &apos;hello mundo&apos;</span><br><span class="line">++&gt;&gt;&gt;&gt;&gt;&gt;&gt; mundo</span><br><span class="line">  end</span><br><span class="line"></span><br><span class="line">  hello()</span><br></pre></td></tr></table></figure><p>è¿™ç§å«ä½œâ€œç»„åˆå¼å·®å¼‚â€çš„æ ¼å¼ä¼šåœ¨æ¯ä¸€è¡Œç»™ä½ ä¸¤åˆ—æ•°æ®ã€‚ ç¬¬ä¸€åˆ—ä¸ºä½ æ˜¾ç¤º â€œoursâ€ åˆ†æ”¯ä¸å·¥ä½œç›®å½•çš„æ–‡ä»¶åŒºåˆ«ï¼ˆæ·»åŠ æˆ–åˆ é™¤ï¼‰ï¼Œç¬¬äºŒåˆ—æ˜¾ç¤º â€œtheirsâ€ åˆ†æ”¯ä¸å·¥ä½œç›®å½•çš„æ‹·è´åŒºåˆ«ã€‚</p><p>æ‰€ä»¥åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å¯ä»¥çœ‹åˆ° <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code> ä¸ <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code> è¡Œåœ¨å·¥ä½œæ‹·è´ä¸­ä½†æ˜¯å¹¶ä¸åœ¨åˆå¹¶çš„ä»»æ„ä¸€è¾¹ä¸­ã€‚ è¿™å¾ˆæœ‰æ„ä¹‰ï¼Œåˆå¹¶å·¥å…·å› ä¸ºæˆ‘ä»¬çš„ä¸Šä¸‹æ–‡è¢«å›°ä½äº†ï¼Œå®ƒæœŸæœ›æˆ‘ä»¬å»ç§»é™¤å®ƒä»¬ã€‚</p><p>å¦‚æœæˆ‘ä»¬è§£å†³å†²çªå†æ¬¡è¿è¡Œ <code>git diff</code>ï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°åŒæ ·çš„äº‹æƒ…ï¼Œä½†æ˜¯å®ƒæœ‰ä¸€ç‚¹å¸®åŠ©ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ vim hello.rb</span><br><span class="line">$ git diff</span><br><span class="line">diff --cc hello.rb</span><br><span class="line">index 0399cd5,59727f0..0000000</span><br><span class="line">--- a/hello.rb</span><br><span class="line">+++ b/hello.rb</span><br><span class="line">@@@ -1,7 -1,7 +1,7 @@@</span><br><span class="line">  #! /usr/bin/env ruby</span><br><span class="line"></span><br><span class="line">  def hello</span><br><span class="line">-   puts &apos;hola world&apos;</span><br><span class="line"> -  puts &apos;hello mundo&apos;</span><br><span class="line">++  puts &apos;hola mundo&apos;</span><br><span class="line">  end</span><br><span class="line"></span><br><span class="line">  hello()</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¾ç¤ºå‡º â€œhola worldâ€ åœ¨æˆ‘ä»¬è¿™è¾¹ä½†ä¸åœ¨å·¥ä½œæ‹·è´ä¸­ï¼Œé‚£ä¸ª â€œhello mundoâ€ åœ¨ä»–ä»¬é‚£è¾¹ä½†ä¸åœ¨å·¥ä½œæ‹·è´ä¸­ï¼Œæœ€ç»ˆ â€œhola mundoâ€ ä¸åœ¨ä»»ä½•ä¸€è¾¹ä½†æ˜¯ç°åœ¨åœ¨å·¥ä½œæ‹·è´ä¸­ã€‚ åœ¨æäº¤è§£å†³æ–¹æ¡ˆå‰è¿™å¯¹å®¡æ ¸å¾ˆæœ‰ç”¨ã€‚</p><p>ä¹Ÿå¯ä»¥åœ¨åˆå¹¶åé€šè¿‡ <code>git log</code> æ¥è·å–ç›¸åŒä¿¡æ¯ï¼Œå¹¶æŸ¥çœ‹å†²çªæ˜¯å¦‚ä½•è§£å†³çš„ã€‚ å¦‚æœä½ å¯¹ä¸€ä¸ªåˆå¹¶æäº¤è¿è¡Œ <code>git show</code> å‘½ä»¤ Git å°†ä¼šè¾“å‡ºè¿™ç§æ ¼å¼ï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥åœ¨ <code>git log -p</code>ï¼ˆé»˜è®¤æƒ…å†µä¸‹è¯¥å‘½ä»¤åªä¼šå±•ç¤ºè¿˜æ²¡æœ‰åˆå¹¶çš„è¡¥ä¸ï¼‰å‘½ä»¤ä¹‹ååŠ ä¸Š <code>--cc</code> é€‰é¡¹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ git log --cc -p -1</span><br><span class="line">commit 14f41939956d80b9e17bb8721354c33f8d5b5a79</span><br><span class="line">Merge: f1270f7 e3eb223</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Fri Sep 19 18:14:49 2014 +0200</span><br><span class="line"></span><br><span class="line">    Merge branch &apos;mundo&apos;</span><br><span class="line"></span><br><span class="line">    Conflicts:</span><br><span class="line">        hello.rb</span><br><span class="line"></span><br><span class="line">diff --cc hello.rb</span><br><span class="line">index 0399cd5,59727f0..e1d0799</span><br><span class="line">--- a/hello.rb</span><br><span class="line">+++ b/hello.rb</span><br><span class="line">@@@ -1,7 -1,7 +1,7 @@@</span><br><span class="line">  #! /usr/bin/env ruby</span><br><span class="line"></span><br><span class="line">  def hello</span><br><span class="line">-   puts &apos;hola world&apos;</span><br><span class="line"> -  puts &apos;hello mundo&apos;</span><br><span class="line">++  puts &apos;hola mundo&apos;</span><br><span class="line">  end</span><br><span class="line"></span><br><span class="line">  hello()</span><br></pre></td></tr></table></figure><h4 id="æ’¤æ¶ˆåˆå¹¶"><a href="#æ’¤æ¶ˆåˆå¹¶" class="headerlink" title="æ’¤æ¶ˆåˆå¹¶"></a>æ’¤æ¶ˆåˆå¹¶</h4><p>è™½ç„¶ä½ å·²ç»çŸ¥é“å¦‚ä½•åˆ›å»ºä¸€ä¸ªåˆå¹¶æäº¤ï¼Œä½†æœ‰æ—¶å‡ºé”™æ˜¯åœ¨æ‰€éš¾å…çš„ã€‚ ä½¿ç”¨ Git æœ€æ£’çš„ä¸€ä»¶äº‹æƒ…æ˜¯çŠ¯é”™æ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºæœ‰å¯èƒ½ï¼ˆå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½å¾ˆå®¹æ˜“ï¼‰ä¿®å¤å®ƒä»¬ã€‚</p><p>åˆå¹¶æäº¤å¹¶æ— ä¸åŒã€‚ å‡è®¾ç°åœ¨åœ¨ä¸€ä¸ªç‰¹æ€§åˆ†æ”¯ä¸Šå·¥ä½œï¼Œä¸å°å¿ƒå°†å…¶åˆå¹¶åˆ° <code>master</code> ä¸­ï¼Œç°åœ¨æäº¤å†å²çœ‹èµ·æ¥æ˜¯è¿™æ ·ï¼š</p><p><img src="git-chapter-8/img1.png" alt></p><p>æœ‰ä¸¤ç§æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™å–å†³äºä½ æƒ³è¦çš„ç»“æœæ˜¯ä»€ä¹ˆã€‚</p><h5 id="ä¿®å¤å¼•ç”¨"><a href="#ä¿®å¤å¼•ç”¨" class="headerlink" title="ä¿®å¤å¼•ç”¨"></a>ä¿®å¤å¼•ç”¨</h5><p>å¦‚æœè¿™ä¸ªä¸æƒ³è¦çš„åˆå¹¶æäº¤åªå­˜åœ¨äºä½ çš„æœ¬åœ°ä»“åº“ä¸­ï¼Œæœ€ç®€å•ä¸”æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ç§»åŠ¨åˆ†æ”¯åˆ°ä½ æƒ³è¦å®ƒæŒ‡å‘çš„åœ°æ–¹ã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¦‚æœä½ åœ¨é”™è¯¯çš„ <code>git merge</code> åè¿è¡Œ <code>git reset --hard HEAD~</code>ï¼Œè¿™ä¼šé‡ç½®åˆ†æ”¯æŒ‡å‘æ‰€ä»¥å®ƒä»¬çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="git-chapter-8/img2.png" alt></p><p>æˆ‘ä»¬ä¹‹å‰åœ¨ é‡ç½®æ­å¯† å·²ç»ä»‹ç»äº† <code>reset</code>ï¼Œæ‰€ä»¥ç°åœ¨æŒ‡å‡ºè¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆå¹¶ä¸æ˜¯å¾ˆå›°éš¾ã€‚ è®©æˆ‘ä»¬å¿«é€Ÿå¤ä¹ ä¸‹ï¼š<code>reset --hard</code> é€šå¸¸ä¼šç»å†ä¸‰æ­¥ï¼š</p><ol><li><p>ç§»åŠ¨ HEAD æŒ‡å‘çš„åˆ†æ”¯ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦ç§»åŠ¨ <code>master</code> åˆ°åˆå¹¶æäº¤ï¼ˆ<code>C6</code>ï¼‰ä¹‹å‰æ‰€åœ¨çš„ä½ç½®ã€‚</p></li><li><p>ä½¿ç´¢å¼•çœ‹èµ·æ¥åƒ HEADã€‚</p></li><li><p>ä½¿å·¥ä½œç›®å½•çœ‹èµ·æ¥åƒç´¢å¼•ã€‚</p></li></ol><p>è¿™ä¸ªæ–¹æ³•çš„ç¼ºç‚¹æ˜¯å®ƒä¼šé‡å†™å†å²ï¼Œåœ¨ä¸€ä¸ªå…±äº«çš„ä»“åº“ä¸­è¿™ä¼šé€ æˆé—®é¢˜çš„ã€‚ æŸ¥é˜… å˜åŸºçš„é£é™© æ¥äº†è§£æ›´å¤šå¯èƒ½å‘ç”Ÿçš„äº‹æƒ…ï¼›ç”¨ç®€å•çš„è¯è¯´å°±æ˜¯å¦‚æœå…¶ä»–äººå·²ç»æœ‰ä½ å°†è¦é‡å†™çš„æäº¤ï¼Œä½ åº”å½“é¿å…ä½¿ç”¨ <code>reset</code>ã€‚ å¦‚æœæœ‰ä»»ä½•å…¶ä»–æäº¤åœ¨åˆå¹¶ä¹‹ååˆ›å»ºäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•ä¹Ÿä¼šæ— æ•ˆï¼›ç§»åŠ¨å¼•ç”¨å®é™…ä¸Šä¼šä¸¢å¤±é‚£äº›æ”¹åŠ¨ã€‚</p><h5 id="è¿˜åŸæäº¤"><a href="#è¿˜åŸæäº¤" class="headerlink" title="è¿˜åŸæäº¤"></a>è¿˜åŸæäº¤</h5><p>å¦‚æœç§»åŠ¨åˆ†æ”¯æŒ‡é’ˆå¹¶ä¸é€‚åˆä½ ï¼ŒGit ç»™ä½ ä¸€ä¸ªç”Ÿæˆä¸€ä¸ªæ–°æäº¤çš„é€‰é¡¹ï¼Œæäº¤å°†ä¼šæ’¤æ¶ˆä¸€ä¸ªå·²å­˜åœ¨æäº¤çš„æ‰€æœ‰ä¿®æ”¹ã€‚ Git ç§°è¿™ä¸ªæ“ä½œä¸ºâ€œè¿˜åŸâ€ï¼Œåœ¨è¿™ä¸ªç‰¹å®šçš„åœºæ™¯ä¸‹ï¼Œä½ å¯ä»¥åƒè¿™æ ·è°ƒç”¨å®ƒï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git revert -m 1 HEAD</span><br><span class="line">[master b1d8379] Revert &quot;Merge branch &apos;topic&apos;&quot;</span><br></pre></td></tr></table></figure><p><code>-m 1</code> æ ‡è®°æŒ‡å‡º â€œmainlineâ€ éœ€è¦è¢«ä¿ç•™ä¸‹æ¥çš„çˆ¶ç»“ç‚¹ã€‚ å½“ä½ å¼•å…¥ä¸€ä¸ªåˆå¹¶åˆ° <code>HEADï¼ˆgit merge topicï¼‰</code>ï¼Œæ–°æäº¤æœ‰ä¸¤ä¸ªçˆ¶ç»“ç‚¹ï¼šç¬¬ä¸€ä¸ªæ˜¯ <code>HEAD</code>ï¼ˆ<code>C6</code>ï¼‰ï¼Œç¬¬äºŒä¸ªæ˜¯å°†è¦åˆå¹¶å…¥åˆ†æ”¯çš„æœ€æ–°æäº¤ï¼ˆ<code>C4</code>ï¼‰ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦æ’¤æ¶ˆæ‰€æœ‰ç”±çˆ¶ç»“ç‚¹ #2ï¼ˆ<code>C4</code>ï¼‰åˆå¹¶å¼•å…¥çš„ä¿®æ”¹ï¼ŒåŒæ—¶ä¿ç•™ä»çˆ¶ç»“ç‚¹ #1ï¼ˆ<code>C4</code>ï¼‰å¼€å§‹çš„æ‰€æœ‰å†…å®¹ã€‚</p><p>æœ‰è¿˜åŸæäº¤çš„å†å²çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="git-chapter-8/img3.png" alt></p><p>æ–°çš„æäº¤ <code>^M</code> ä¸ <code>C6</code> æœ‰å®Œå…¨ä¸€æ ·çš„å†…å®¹ï¼Œæ‰€ä»¥ä»è¿™å„¿å¼€å§‹å°±åƒåˆå¹¶ä»æœªå‘ç”Ÿè¿‡ï¼Œé™¤äº†â€œç°åœ¨è¿˜æ²¡åˆå¹¶â€çš„æäº¤ä¾ç„¶åœ¨ <code>HEAD</code> çš„å†å²ä¸­ã€‚ å¦‚æœä½ å°è¯•å†æ¬¡åˆå¹¶ <code>topic</code> åˆ° <code>master</code> Git ä¼šæ„Ÿåˆ°å›°æƒ‘ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git merge topic</span><br><span class="line">Already up-to-date.</span><br></pre></td></tr></table></figure><p><code>topic</code> ä¸­å¹¶æ²¡æœ‰ä¸œè¥¿ä¸èƒ½ä» <code>master</code> ä¸­è¿½è¸ªåˆ°è¾¾ã€‚ æ›´ç³Ÿçš„æ˜¯ï¼Œå¦‚æœä½ åœ¨ <code>topic</code> ä¸­å¢åŠ å·¥ä½œç„¶åå†æ¬¡åˆå¹¶ï¼ŒGit åªä¼šå¼•å…¥è¢«è¿˜åŸçš„åˆå¹¶ ä¹‹å çš„ä¿®æ”¹ã€‚</p><p><img src="git-chapter-8/img4.png" alt></p><p>è§£å†³è¿™ä¸ªæœ€å¥½çš„æ–¹å¼æ˜¯æ’¤æ¶ˆè¿˜åŸåŸå§‹çš„åˆå¹¶ï¼Œå› ä¸ºç°åœ¨ä½ æƒ³è¦å¼•å…¥è¢«è¿˜åŸå‡ºå»çš„ä¿®æ”¹ï¼Œç„¶å åˆ›å»ºä¸€ä¸ªæ–°çš„åˆå¹¶æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git revert ^M</span><br><span class="line">[master 09f0126] Revert &quot;Revert &quot;Merge branch &apos;topic&apos;&quot;&quot;</span><br><span class="line">$ git merge topic</span><br></pre></td></tr></table></figure><p><img src="git-chapter-8/img5.png" alt></p><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œ<code>M</code> ä¸ <code>^M</code> æŠµæ¶ˆäº†ã€‚ <code>^^M</code> äº‹å®ä¸Šåˆå¹¶å…¥äº† <code>C3</code> ä¸ <code>C4</code> çš„ä¿®æ”¹ï¼Œ<code>C8</code> åˆå¹¶äº† <code>C7</code> çš„ä¿®æ”¹ï¼Œæ‰€ä»¥ç°åœ¨ <code>topic</code> å·²ç»å®Œå…¨è¢«åˆå¹¶äº†ã€‚</p><h4 id="å…¶ä»–ç±»å‹çš„åˆå¹¶"><a href="#å…¶ä»–ç±»å‹çš„åˆå¹¶" class="headerlink" title="å…¶ä»–ç±»å‹çš„åˆå¹¶"></a>å…¶ä»–ç±»å‹çš„åˆå¹¶</h4><p>åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬ä»‹ç»çš„éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªå«ä½œ â€œrecursiveâ€ çš„åˆå¹¶ç­–ç•¥æ¥æ­£å¸¸å¤„ç†çš„ä¸¤ä¸ªåˆ†æ”¯çš„æ­£å¸¸åˆå¹¶ã€‚ ç„¶è€Œè¿˜æœ‰å…¶ä»–æ–¹å¼æ¥åˆå¹¶ä¸¤ä¸ªåˆ†æ”¯åˆ°ä¸€èµ·ã€‚ è®©æˆ‘ä»¬æ¥å¿«é€Ÿä»‹ç»å…¶ä¸­çš„å‡ ä¸ªã€‚</p><h5 id="æˆ‘ä»¬çš„æˆ–ä»–ä»¬çš„åå¥½"><a href="#æˆ‘ä»¬çš„æˆ–ä»–ä»¬çš„åå¥½" class="headerlink" title="æˆ‘ä»¬çš„æˆ–ä»–ä»¬çš„åå¥½"></a>æˆ‘ä»¬çš„æˆ–ä»–ä»¬çš„åå¥½</h5><p>é¦–å…ˆï¼Œæœ‰å¦ä¸€ç§æˆ‘ä»¬å¯ä»¥é€šè¿‡ â€œrecursiveâ€ åˆå¹¶æ¨¡å¼åšçš„æœ‰ç”¨å·¥ä½œã€‚ æˆ‘ä»¬ä¹‹å‰å·²ç»çœ‹åˆ°ä¼ é€’ç»™ <code>-X</code> çš„ <code>ignore-all-space</code> ä¸ <code>ignore-space-change</code> é€‰é¡¹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥å‘Šè¯‰ Git å½“å®ƒçœ‹è§ä¸€ä¸ªå†²çªæ—¶ç›´æ¥é€‰æ‹©ä¸€è¾¹ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ Git çœ‹åˆ°ä¸¤ä¸ªåˆ†æ”¯åˆå¹¶ä¸­çš„å†²çªæ—¶ï¼Œå®ƒä¼šå°†åˆå¹¶å†²çªæ ‡è®°æ·»åŠ åˆ°ä½ çš„ä»£ç ä¸­å¹¶æ ‡è®°æ–‡ä»¶ä¸ºå†²çªçŠ¶æ€æ¥è®©ä½ è§£å†³ã€‚ å¦‚æœä½ å¸Œæœ› Git ç®€å•åœ°é€‰æ‹©ç‰¹å®šçš„ä¸€è¾¹å¹¶å¿½ç•¥å¦å¤–ä¸€è¾¹è€Œä¸æ˜¯è®©ä½ æ‰‹åŠ¨åˆå¹¶å†²çªï¼Œä½ å¯ä»¥ä¼ é€’ç»™ <code>merge</code> å‘½ä»¤ä¸€ä¸ª <code>-Xours</code> æˆ– <code>-Xtheirs</code> å‚æ•°ã€‚</p><p>å¦‚æœ Git çœ‹åˆ°è¿™ä¸ªï¼Œå®ƒå¹¶ä¸ä¼šå¢åŠ å†²çªæ ‡è®°ã€‚ ä»»ä½•å¯ä»¥åˆå¹¶çš„åŒºåˆ«ï¼Œå®ƒä¼šç›´æ¥åˆå¹¶ã€‚ ä»»ä½•æœ‰å†²çªçš„åŒºåˆ«ï¼Œå®ƒä¼šç®€å•åœ°é€‰æ‹©ä½ å…¨å±€æŒ‡å®šçš„ä¸€è¾¹ï¼ŒåŒ…æ‹¬äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><p>å¦‚æœæˆ‘ä»¬å›åˆ°ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨çš„ â€œhello worldâ€ ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åˆå¹¶å…¥æˆ‘ä»¬çš„åˆ†æ”¯æ—¶å¼•å‘äº†å†²çªã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git merge mundo</span><br><span class="line">Auto-merging hello.rb</span><br><span class="line">CONFLICT (content): Merge conflict in hello.rb</span><br><span class="line">Resolved &apos;hello.rb&apos; using previous resolution.</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure><p>ç„¶è€Œå¦‚æœæˆ‘ä»¬è¿è¡Œæ—¶å¢åŠ  <code>-Xours</code> æˆ– <code>-Xtheirs</code> å‚æ•°å°±ä¸ä¼šæœ‰å†²çªã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git merge -Xours mundo</span><br><span class="line">Auto-merging hello.rb</span><br><span class="line">Merge made by the &apos;recursive&apos; strategy.</span><br><span class="line"> hello.rb | 2 +-</span><br><span class="line"> test.sh  | 2 ++</span><br><span class="line"> 2 files changed, 3 insertions(+), 1 deletion(-)</span><br><span class="line"> create mode 100644 test.sh</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šä¾‹ä¸­ï¼Œå®ƒå¹¶ä¸ä¼šä¸º â€œhello mundoâ€ ä¸ â€œhola worldâ€ æ ‡è®°åˆå¹¶å†²çªï¼Œå®ƒåªä¼šç®€å•åœ°é€‰å– â€œhola worldâ€ã€‚ ç„¶è€Œï¼Œåœ¨é‚£ä¸ªåˆ†æ”¯ä¸Šæ‰€æœ‰å…¶ä»–éå†²çªçš„æ”¹åŠ¨éƒ½å¯ä»¥è¢«æˆåŠŸåœ°åˆå¹¶å…¥ã€‚</p><p>è¿™ä¸ªé€‰é¡¹ä¹Ÿå¯ä»¥ä¼ é€’ç»™æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ <code>git merge-file</code> å‘½ä»¤ï¼Œé€šè¿‡è¿è¡Œç±»ä¼¼ <code>git merge-file --ours</code> çš„å‘½ä»¤æ¥åˆå¹¶å•ä¸ªæ–‡ä»¶ã€‚</p><p>å¦‚æœæƒ³è¦åšç±»ä¼¼çš„äº‹æƒ…ä½†æ˜¯ç”šè‡³å¹¶ä¸æƒ³è®© Git å°è¯•åˆå¹¶å¦å¤–ä¸€è¾¹çš„ä¿®æ”¹ï¼Œæœ‰ä¸€ä¸ªæ›´ä¸¥æ ¼çš„é€‰é¡¹ï¼Œå®ƒæ˜¯ â€œoursâ€ åˆå¹¶ ç­–ç•¥ã€‚ è¿™ä¸ â€œoursâ€ recursive åˆå¹¶ é€‰é¡¹ ä¸åŒã€‚</p><p>è¿™æœ¬è´¨ä¸Šä¼šåšä¸€æ¬¡å‡çš„åˆå¹¶ã€‚ å®ƒä¼šè®°å½•ä¸€ä¸ªä»¥ä¸¤è¾¹åˆ†æ”¯ä½œä¸ºçˆ¶ç»“ç‚¹çš„æ–°åˆå¹¶æäº¤ï¼Œä½†æ˜¯å®ƒç”šè‡³æ ¹æœ¬ä¸å…³æ³¨ä½ æ­£åˆå¹¶å…¥çš„åˆ†æ”¯ã€‚ å®ƒåªä¼šç®€å•åœ°æŠŠå½“å‰åˆ†æ”¯çš„ä»£ç å½“ä½œåˆå¹¶ç»“æœè®°å½•ä¸‹æ¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git merge -s ours mundo</span><br><span class="line">Merge made by the &apos;ours&apos; strategy.</span><br><span class="line">$ git diff HEAD HEAD~</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥çœ‹åˆ°åˆå¹¶åä¸åˆå¹¶å‰æˆ‘ä»¬çš„åˆ†æ”¯å¹¶æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚</p><p>å½“å†æ¬¡åˆå¹¶æ—¶ä»æœ¬è´¨ä¸Šæ¬ºéª— Git è®¤ä¸ºé‚£ä¸ªåˆ†æ”¯å·²ç»åˆå¹¶è¿‡ç»å¸¸æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªåˆ†å‰çš„ <code>release</code> åˆ†æ”¯å¹¶ä¸”åœ¨ä¸Šé¢åšäº†ä¸€äº›ä½ æƒ³è¦åœ¨æœªæ¥æŸä¸ªæ—¶å€™åˆå¹¶å› <code>master</code> çš„å·¥ä½œã€‚ ä¸æ­¤åŒæ—¶ <code>master</code> åˆ†æ”¯ä¸Šçš„æŸäº› <code>bugfix</code> éœ€è¦å‘åç§»æ¤å› <code>release</code> åˆ†æ”¯ã€‚ ä½ å¯ä»¥åˆå¹¶ <code>bugfix</code> åˆ†æ”¯è¿›å…¥ <code>release</code> åˆ†æ”¯åŒæ—¶ä¹Ÿ <code>merge -s ours</code> åˆå¹¶è¿›å…¥ä½ çš„ <code>master</code> åˆ†æ”¯ï¼ˆå³ä½¿é‚£ä¸ªä¿®å¤å·²ç»åœ¨é‚£å„¿äº†ï¼‰è¿™æ ·å½“ä½ ä¹‹åå†æ¬¡åˆå¹¶ <code>release</code> åˆ†æ”¯æ—¶ï¼Œå°±ä¸ä¼šæœ‰æ¥è‡ª <code>bugfix</code> çš„å†²çªã€‚</p><h5 id="å­æ ‘åˆå¹¶"><a href="#å­æ ‘åˆå¹¶" class="headerlink" title="å­æ ‘åˆå¹¶"></a>å­æ ‘åˆå¹¶</h5><p>å­æ ‘åˆå¹¶çš„æ€æƒ³æ˜¯ä½ æœ‰ä¸¤ä¸ªé¡¹ç›®ï¼Œå¹¶ä¸”å…¶ä¸­ä¸€ä¸ªæ˜ å°„åˆ°å¦ä¸€ä¸ªé¡¹ç›®çš„ä¸€ä¸ªå­ç›®å½•ï¼Œæˆ–è€…åè¿‡æ¥ä¹Ÿè¡Œã€‚ å½“ä½ æ‰§è¡Œä¸€ä¸ªå­æ ‘åˆå¹¶æ—¶ï¼ŒGit é€šå¸¸å¯ä»¥è‡ªåŠ¨è®¡ç®—å‡ºå…¶ä¸­ä¸€ä¸ªæ˜¯å¦å¤–ä¸€ä¸ªçš„å­æ ‘ä»è€Œå®ç°æ­£ç¡®çš„åˆå¹¶ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­å¦‚ä½•å°†ä¸€ä¸ªé¡¹ç›®åŠ å…¥åˆ°ä¸€ä¸ªå·²å­˜åœ¨çš„é¡¹ç›®ä¸­ï¼Œç„¶åå°†ç¬¬äºŒä¸ªé¡¹ç›®çš„ä»£ç åˆå¹¶åˆ°ç¬¬ä¸€ä¸ªé¡¹ç›®çš„å­ç›®å½•ä¸­ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å°† Rack åº”ç”¨æ·»åŠ åˆ°ä½ çš„é¡¹ç›®é‡Œã€‚ æˆ‘ä»¬æŠŠ Rack é¡¹ç›®ä½œä¸ºä¸€ä¸ªè¿œç¨‹çš„å¼•ç”¨æ·»åŠ åˆ°æˆ‘ä»¬çš„é¡¹ç›®é‡Œï¼Œç„¶åæ£€å‡ºåˆ°å®ƒè‡ªå·±çš„åˆ†æ”¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add rack_remote https://github.com/rack/rack</span><br><span class="line">$ git fetch rack_remote</span><br><span class="line">warning: no common commits</span><br><span class="line">remote: Counting objects: 3184, done.</span><br><span class="line">remote: Compressing objects: 100% (1465/1465), done.</span><br><span class="line">remote: Total 3184 (delta 1952), reused 2770 (delta 1675)</span><br><span class="line">Receiving objects: 100% (3184/3184), 677.42 KiB | 4 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (1952/1952), done.</span><br><span class="line">From https://github.com/rack/rack</span><br><span class="line"> * [new branch]      build      -&gt; rack_remote/build</span><br><span class="line"> * [new branch]      master     -&gt; rack_remote/master</span><br><span class="line"> * [new branch]      rack-0.4   -&gt; rack_remote/rack-0.4</span><br><span class="line"> * [new branch]      rack-0.9   -&gt; rack_remote/rack-0.9</span><br><span class="line">$ git checkout -b rack_branch rack_remote/master</span><br><span class="line">Branch rack_branch set up to track remote branch refs/remotes/rack_remote/master.</span><br><span class="line">Switched to a new branch &quot;rack_branch&quot;</span><br></pre></td></tr></table></figure><p>ç°åœ¨åœ¨æˆ‘ä»¬çš„ <code>rack_branch</code> åˆ†æ”¯é‡Œå°±æœ‰ Rack é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œè€Œæˆ‘ä»¬çš„é¡¹ç›®åˆ™åœ¨ <code>master</code> åˆ†æ”¯é‡Œã€‚ å¦‚æœä½ ä»ä¸€ä¸ªåˆ†æ”¯åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒä»¬çš„é¡¹ç›®æ ¹ç›®å½•æ˜¯ä¸åŒçš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ls</span><br><span class="line">AUTHORS         KNOWN-ISSUES   Rakefile      contrib         lib</span><br><span class="line">COPYING         README         bin           example         test</span><br><span class="line">$ git checkout master</span><br><span class="line">Switched to branch &quot;master&quot;</span><br><span class="line">$ ls</span><br><span class="line">README</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥‡æ€ªçš„æ¦‚å¿µã€‚ å¹¶ä¸æ˜¯ä»“åº“ä¸­çš„æ‰€æœ‰åˆ†æ”¯éƒ½æ˜¯å¿…é¡»å±äºåŒä¸€ä¸ªé¡¹ç›®çš„åˆ†æ”¯. è¿™å¹¶ä¸å¸¸è§ï¼Œå› ä¸ºæ²¡å•¥ç”¨ï¼Œä½†æ˜¯å´æ˜¯åœ¨ä¸åŒåˆ†æ”¯é‡ŒåŒ…å«ä¸¤æ¡å®Œå…¨ä¸åŒæäº¤å†å²çš„æœ€ç®€å•çš„æ–¹æ³•ã€‚</p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å°† Rack é¡¹ç›®æ‹‰åˆ° <code>master</code> é¡¹ç›®ä¸­ä½œä¸ºä¸€ä¸ªå­ç›®å½•ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨ Git ä¸­æ‰§è¡Œ <code>git read-tree</code> æ¥å®ç°ã€‚ ä½ å¯ä»¥åœ¨ Git å†…éƒ¨åŸç† ä¸­æŸ¥çœ‹æ›´å¤š <code>read-tree</code> çš„ç›¸å…³ä¿¡æ¯ï¼Œç°åœ¨ä½ åªéœ€è¦çŸ¥é“å®ƒä¼šè¯»å–ä¸€ä¸ªåˆ†æ”¯çš„æ ¹ç›®å½•æ ‘åˆ°å½“å‰çš„æš‚å­˜åŒºå’Œå·¥ä½œç›®å½•é‡Œã€‚ å…ˆåˆ‡å›ä½ çš„ <code>master</code> åˆ†æ”¯ï¼Œå°† <code>rack_back</code> åˆ†æ”¯æ‹‰å–åˆ°æˆ‘ä»¬é¡¹ç›®çš„ <code>master</code> åˆ†æ”¯ä¸­çš„ <code>rack</code> å­ç›®å½•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git read-tree --prefix=rack/ -u rack_branch</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬æäº¤æ—¶ï¼Œé‚£ä¸ªå­ç›®å½•ä¸­æ‹¥æœ‰æ‰€æœ‰ Rack é¡¹ç›®çš„æ–‡ä»¶ â€”â€” å°±åƒæˆ‘ä»¬ç›´æ¥ä»å‹ç¼©åŒ…é‡Œå¤åˆ¶å‡ºæ¥çš„ä¸€æ ·ã€‚ æœ‰è¶£çš„æ˜¯ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°å°†ä¸€ä¸ªåˆ†æ”¯çš„å˜æ›´åˆå¹¶åˆ°å¦ä¸€ä¸ªåˆ†æ”¯é‡Œã€‚ æ‰€ä»¥ï¼Œå½“ Rack é¡¹ç›®æœ‰æ›´æ–°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯æ¥æ‹‰å–ä¸Šæ¸¸çš„å˜æ›´ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout rack_branch</span><br><span class="line">$ git pull</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›å˜æ›´åˆå¹¶å›æˆ‘ä»¬çš„ <code>master</code> åˆ†æ”¯ã€‚ ä½¿ç”¨ <code>--squash</code> é€‰é¡¹å’Œä½¿ç”¨ <code>-Xsubtree</code> é€‰é¡¹ï¼ˆå®ƒé‡‡ç”¨é€’å½’åˆå¹¶ç­–ç•¥ï¼‰ï¼Œéƒ½å¯ä»¥ç”¨æ¥å¯ä»¥æ‹‰å–å˜æ›´å¹¶ä¸”é¢„å¡«å……æäº¤ä¿¡æ¯ã€‚ ï¼ˆé€’å½’ç­–ç•¥åœ¨è¿™é‡Œæ˜¯é»˜è®¤çš„ï¼Œæåˆ°å®ƒæ˜¯ä¸ºäº†è®©è¯»è€…æœ‰ä¸ªæ¸…æ™°çš„æ¦‚å¿µã€‚ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge --squash -s recursive -Xsubtree=rack rack_branch</span><br><span class="line">Squash commit -- not updating HEAD</span><br><span class="line">Automatic merge went well; stopped before committing as requested</span><br></pre></td></tr></table></figure><p>Rack é¡¹ç›®ä¸­æ‰€æœ‰çš„æ”¹åŠ¨éƒ½è¢«åˆå¹¶äº†ï¼Œç­‰å¾…è¢«æäº¤åˆ°æœ¬åœ°ã€‚ ä½ ä¹Ÿå¯ä»¥ç”¨ç›¸åçš„æ–¹æ³•â€”â€”åœ¨ <code>master</code> åˆ†æ”¯ä¸Šçš„ <code>rack</code> å­ç›®å½•ä¸­åšæ”¹åŠ¨ç„¶åå°†å®ƒä»¬åˆå¹¶å…¥ä½ çš„ <code>rack_branch</code> åˆ†æ”¯ä¸­ï¼Œä¹‹åä½ å¯èƒ½å°†å…¶æäº¤ç»™é¡¹ç›®ç»´æŠ¤ç€æˆ–è€…å°†å®ƒä»¬æ¨é€åˆ°ä¸Šæ¸¸ã€‚</p><p>è¿™ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§ç±»ä¼¼å­æ¨¡å—å·¥ä½œæµçš„å·¥ä½œæ–¹å¼ï¼Œä½†æ˜¯å®ƒå¹¶ä¸éœ€è¦ç”¨åˆ°å­æ¨¡å—ï¼ˆæœ‰å…³å­æ¨¡å—çš„å†…å®¹æˆ‘ä»¬ä¼šåœ¨ å­æ¨¡å— ä¸­ä»‹ç»ï¼‰ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨è‡ªå·±çš„ä»“åº“ä¸­ä¿æŒä¸€äº›å’Œå…¶ä»–é¡¹ç›®ç›¸å…³çš„åˆ†æ”¯ï¼Œå¶å°”ä½¿ç”¨å­æ ‘åˆå¹¶å°†å®ƒä»¬åˆå¹¶åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ã€‚ æŸäº›æ—¶å€™è¿™ç§æ–¹å¼å¾ˆæœ‰ç”¨ï¼Œä¾‹å¦‚å½“æ‰€æœ‰çš„ä»£ç éƒ½æäº¤åˆ°ä¸€ä¸ªåœ°æ–¹çš„æ—¶å€™ã€‚ ç„¶è€Œï¼Œå®ƒåŒæ—¶ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œå®ƒæ›´åŠ å¤æ‚ä¸”æ›´å®¹æ˜“è®©äººçŠ¯é”™ï¼Œä¾‹å¦‚é‡å¤åˆå¹¶æ”¹åŠ¨æˆ–è€…ä¸å°å¿ƒå°†åˆ†æ”¯æäº¤åˆ°ä¸€ä¸ªæ— å…³çš„ä»“åº“ä¸Šå»ã€‚</p><p>å¦å¤–ä¸€ä¸ªæœ‰ç‚¹å¥‡æ€ªçš„åœ°æ–¹æ˜¯ï¼Œå½“ä½ æƒ³æŸ¥çœ‹ <code>rack</code> å­ç›®å½•å’Œ <code>rack_branch</code> åˆ†æ”¯çš„å·®å¼‚â€”â€”æ¥ç¡®å®šä½ æ˜¯å¦éœ€è¦åˆå¹¶å®ƒä»¬â€”â€”ä½ ä¸èƒ½ä½¿ç”¨æ™®é€šçš„ <code>diff</code> å‘½ä»¤ã€‚ å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œä½ å¿…é¡»ä½¿ç”¨ <code>git diff-tree</code> æ¥å’Œä½ çš„ç›®æ ‡åˆ†æ”¯åšæ¯”è¾ƒï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff-tree -p rack_branch</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œå°†ä½ çš„ <code>rack</code> å­ç›®å’Œæœ€è¿‘ä¸€æ¬¡ä»æœåŠ¡å™¨ä¸ŠæŠ“å–çš„ <code>master</code> åˆ†æ”¯è¿›è¡Œæ¯”è¾ƒï¼Œä½ å¯ä»¥è¿è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff-tree -p rack_remote/master</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-Git-è°ƒè¯•"><a href="#ä½¿ç”¨-Git-è°ƒè¯•" class="headerlink" title="ä½¿ç”¨ Git è°ƒè¯•"></a>ä½¿ç”¨ Git è°ƒè¯•</h3><p>Git ä¹Ÿæä¾›äº†ä¸¤ä¸ªå·¥å…·æ¥è¾…åŠ©ä½ è°ƒè¯•é¡¹ç›®ä¸­çš„é—®é¢˜ã€‚ ç”±äº Git è¢«è®¾è®¡æˆé€‚ç”¨äºå‡ ä¹æ‰€æœ‰ç±»å‹çš„é¡¹ç›®ï¼Œè¿™äº›å·¥å…·æ˜¯æ¯”è¾ƒé€šç”¨çš„ï¼Œä½†å®ƒä»¬å¯ä»¥åœ¨å‡ºç°é—®é¢˜çš„æ—¶å€™å¸®åŠ©ä½ æ‰¾åˆ° bug æˆ–è€…é”™è¯¯ã€‚</p><h4 id="æ–‡ä»¶æ ‡æ³¨"><a href="#æ–‡ä»¶æ ‡æ³¨" class="headerlink" title="æ–‡ä»¶æ ‡æ³¨"></a>æ–‡ä»¶æ ‡æ³¨</h4><p>å¦‚æœä½ åœ¨è¿½è¸ªä»£ç ä¸­çš„ä¸€ä¸ª bugï¼Œå¹¶ä¸”æƒ³çŸ¥é“æ˜¯ä»€ä¹ˆæ—¶å€™ä»¥åŠä¸ºä½•ä¼šå¼•å…¥ï¼Œæ–‡ä»¶æ ‡æ³¨é€šå¸¸æ˜¯æœ€å¥½ç”¨çš„å·¥å…·ã€‚ å®ƒå±•ç¤ºäº†æ–‡ä»¶ä¸­æ¯ä¸€è¡Œæœ€åä¸€æ¬¡ä¿®æ”¹çš„æäº¤ã€‚ æ‰€ä»¥ï¼Œå¦‚æœä½ åœ¨ä»£ç ä¸­çœ‹åˆ°ä¸€ä¸ªæœ‰é—®é¢˜çš„æ–¹æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>git blame</code> æ ‡æ³¨è¿™ä¸ªæ–‡ä»¶ï¼ŒæŸ¥çœ‹è¿™ä¸ªæ–¹æ³•æ¯ä¸€è¡Œçš„æœ€åä¿®æ”¹æ—¶é—´ä»¥åŠæ˜¯è¢«è°ä¿®æ”¹çš„ã€‚ è¿™ä¸ªä¾‹å­ä½¿ç”¨ <code>-L</code> é€‰é¡¹æ¥é™åˆ¶è¾“å‡ºèŒƒå›´åœ¨ç¬¬12è‡³22è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git blame -L 12,22 simplegit.rb</span><br><span class="line">^4832fe2 (Scott Chacon  2008-03-15 10:31:28 -0700 12)  def show(tree = &apos;master&apos;)</span><br><span class="line">^4832fe2 (Scott Chacon  2008-03-15 10:31:28 -0700 13)   command(&quot;git show #&#123;tree&#125;&quot;)</span><br><span class="line">^4832fe2 (Scott Chacon  2008-03-15 10:31:28 -0700 14)  end</span><br><span class="line">^4832fe2 (Scott Chacon  2008-03-15 10:31:28 -0700 15)</span><br><span class="line">9f6560e4 (Scott Chacon  2008-03-17 21:52:20 -0700 16)  def log(tree = &apos;master&apos;)</span><br><span class="line">79eaf55d (Scott Chacon  2008-04-06 10:15:08 -0700 17)   command(&quot;git log #&#123;tree&#125;&quot;)</span><br><span class="line">9f6560e4 (Scott Chacon  2008-03-17 21:52:20 -0700 18)  end</span><br><span class="line">9f6560e4 (Scott Chacon  2008-03-17 21:52:20 -0700 19)</span><br><span class="line">42cf2861 (Magnus Chacon 2008-04-13 10:45:01 -0700 20)  def blame(path)</span><br><span class="line">42cf2861 (Magnus Chacon 2008-04-13 10:45:01 -0700 21)   command(&quot;git blame #&#123;path&#125;&quot;)</span><br><span class="line">42cf2861 (Magnus Chacon 2008-04-13 10:45:01 -0700 22)  end</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œç¬¬ä¸€ä¸ªå­—æ®µæ˜¯æœ€åä¸€æ¬¡ä¿®æ”¹è¯¥è¡Œçš„æäº¤çš„éƒ¨åˆ† SHA-1 å€¼ã€‚ æ¥ä¸‹æ¥ä¸¤ä¸ªå­—æ®µçš„å€¼æ˜¯ä»æäº¤ä¸­æå–å‡ºæ¥çš„â€”â€”ä½œè€…çš„åå­—ä»¥åŠæäº¤çš„æ—¶é—´â€”â€”æ‰€ä»¥ä½ å°±å¯ä»¥å¾ˆè½»æ˜“åœ°æ‰¾åˆ°æ˜¯è°åœ¨ä»€ä¹ˆæ—¶å€™ä¿®æ”¹äº†é‚£ä¸€è¡Œã€‚ æ¥ä¸‹æ¥å°±æ˜¯è¡Œå·å’Œæ–‡ä»¶å†…å®¹ã€‚ æ³¨æ„ä¸€ä¸‹ <code>^4832fe2</code> è¿™ä¸ªæäº¤çš„é‚£äº›è¡Œï¼Œè¿™äº›æŒ‡çš„æ˜¯è¿™ä¸ªæ–‡ä»¶ç¬¬ä¸€æ¬¡æäº¤çš„é‚£äº›è¡Œã€‚ è¿™ä¸ªæäº¤æ˜¯è¿™ä¸ªæ–‡ä»¶ç¬¬ä¸€æ¬¡åŠ å…¥åˆ°è¿™ä¸ªé¡¹ç›®æ—¶çš„æäº¤ï¼Œå¹¶ä¸”è¿™äº›è¡Œä»æœªè¢«ä¿®æ”¹è¿‡ã€‚ è¿™ä¼šå¸¦æ¥å°å°çš„å›°æƒ‘ï¼Œå› ä¸ºä½ å·²ç»è‡³å°‘çœ‹åˆ°ä¸‰ç§ Git ä½¿ç”¨ <code>^</code> æ¥ä¿®é¥°ä¸€ä¸ªæäº¤çš„ SHA-1 å€¼çš„ä¸åŒå«ä¹‰ï¼Œä½†è¿™é‡Œç¡®å®å°±æ˜¯è¿™ä¸ªæ„æ€ã€‚</p><p>å¦ä¸€ä»¶æ¯”è¾ƒé…·çš„äº‹æƒ…æ˜¯ Git ä¸ä¼šæ˜¾å¼åœ°è®°å½•æ–‡ä»¶çš„é‡å‘½åã€‚ å®ƒä¼šè®°å½•å¿«ç…§ï¼Œç„¶ååœ¨äº‹åå°è¯•è®¡ç®—å‡ºé‡å‘½åçš„åŠ¨ä½œã€‚ è¿™å…¶ä¸­æœ‰ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„ç‰¹æ€§å°±æ˜¯ä½ å¯ä»¥è®© Git æ‰¾å‡ºæ‰€æœ‰çš„ä»£ç ç§»åŠ¨ã€‚ å¦‚æœä½ åœ¨ <code>git blame</code> åé¢åŠ ä¸Šä¸€ä¸ª <code>-C</code>ï¼ŒGit ä¼šåˆ†æä½ æ­£åœ¨æ ‡æ³¨çš„æ–‡ä»¶ï¼Œå¹¶ä¸”å°è¯•æ‰¾å‡ºæ–‡ä»¶ä¸­ä»åˆ«çš„åœ°æ–¹å¤åˆ¶è¿‡æ¥çš„ä»£ç ç‰‡æ®µçš„åŸå§‹å‡ºå¤„ã€‚ æ¯”å¦‚ï¼Œä½ å°† <code>GITServerHandler.m</code> è¿™ä¸ªæ–‡ä»¶æ‹†åˆ†ä¸ºæ•°ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­ä¸€ä¸ªæ–‡ä»¶æ˜¯ <code>GITPackUpload.m</code>ã€‚ å¯¹ <code>GITPackUpload.m</code> æ‰§è¡Œå¸¦ <code>-C</code> å‚æ•°çš„ <code>blame</code> å‘½ä»¤ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°ä»£ç å—çš„åŸå§‹å‡ºå¤„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git blame -C -L 141,153 GITPackUpload.m</span><br><span class="line">f344f58d GITServerHandler.m (Scott 2009-01-04 141)</span><br><span class="line">f344f58d GITServerHandler.m (Scott 2009-01-04 142) - (void) gatherObjectShasFromC</span><br><span class="line">f344f58d GITServerHandler.m (Scott 2009-01-04 143) &#123;</span><br><span class="line">70befddd GITServerHandler.m (Scott 2009-03-22 144)         //NSLog(@&quot;GATHER COMMI</span><br><span class="line">ad11ac80 GITPackUpload.m    (Scott 2009-03-24 145)</span><br><span class="line">ad11ac80 GITPackUpload.m    (Scott 2009-03-24 146)         NSString *parentSha;</span><br><span class="line">ad11ac80 GITPackUpload.m    (Scott 2009-03-24 147)         GITCommit *commit = [g</span><br><span class="line">ad11ac80 GITPackUpload.m    (Scott 2009-03-24 148)</span><br><span class="line">ad11ac80 GITPackUpload.m    (Scott 2009-03-24 149)         //NSLog(@&quot;GATHER COMMI</span><br><span class="line">ad11ac80 GITPackUpload.m    (Scott 2009-03-24 150)</span><br><span class="line">56ef2caf GITServerHandler.m (Scott 2009-01-05 151)         if(commit) &#123;</span><br><span class="line">56ef2caf GITServerHandler.m (Scott 2009-01-05 152)                 [refDict setOb</span><br><span class="line">56ef2caf GITServerHandler.m (Scott 2009-01-05 153)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªåŠŸèƒ½å¾ˆæœ‰ç”¨ã€‚ é€šå¸¸æ¥è¯´ï¼Œä½ ä¼šè®¤ä¸ºå¤åˆ¶ä»£ç è¿‡æ¥çš„é‚£ä¸ªæäº¤æ˜¯æœ€åŸå§‹çš„æäº¤ï¼Œå› ä¸ºé‚£æ˜¯ä½ ç¬¬ä¸€æ¬¡åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ä¿®æ”¹äº†è¿™å‡ è¡Œã€‚ ä½† Git ä¼šå‘Šè¯‰ä½ ï¼Œä½ ç¬¬ä¸€æ¬¡å†™è¿™å‡ è¡Œä»£ç çš„é‚£ä¸ªæäº¤æ‰æ˜¯åŸå§‹æäº¤ï¼Œå³ä½¿è¿™æ˜¯åœ¨å¦å¤–ä¸€ä¸ªæ–‡ä»¶é‡Œå†™çš„ã€‚</p><h4 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h4><p>å½“ä½ çŸ¥é“é—®é¢˜æ˜¯åœ¨å“ªé‡Œå¼•å…¥çš„æƒ…å†µä¸‹æ–‡ä»¶æ ‡æ³¨å¯ä»¥å¸®åŠ©ä½ æŸ¥æ‰¾é—®é¢˜ã€‚ å¦‚æœä½ ä¸çŸ¥é“å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œå¹¶ä¸”è‡ªä»ä¸Šæ¬¡å¯ä»¥æ­£å¸¸è¿è¡Œåˆ°ç°åœ¨å·²ç»æœ‰æ•°åä¸ªæˆ–è€…ä¸Šç™¾ä¸ªæäº¤ï¼Œè¿™ä¸ªæ—¶å€™ä½ å¯ä»¥ä½¿ç”¨ <code>git bisect</code> æ¥å¸®åŠ©æŸ¥æ‰¾ã€‚ <code>bisect</code> å‘½ä»¤ä¼šå¯¹ä½ çš„æäº¤å†å²è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾æ¥å¸®åŠ©ä½ å°½å¿«æ‰¾åˆ°æ˜¯å“ªä¸€ä¸ªæäº¤å¼•å…¥äº†é—®é¢˜ã€‚</p><p>å‡è®¾ä½ åˆšåˆšåœ¨çº¿ä¸Šç¯å¢ƒéƒ¨ç½²äº†ä½ çš„ä»£ç ï¼Œæ¥ç€æ”¶åˆ°ä¸€äº› bug åé¦ˆï¼Œä½†è¿™äº› bug åœ¨ä½ ä¹‹å‰çš„å¼€å‘ç¯å¢ƒé‡Œæ²¡æœ‰å‡ºç°è¿‡ï¼Œè¿™è®©ä½ ç™¾æ€ä¸å¾—å…¶è§£ã€‚ ä½ é‡æ–°æŸ¥çœ‹äº†ä½ çš„ä»£ç ï¼Œå‘ç°è¿™ä¸ªé—®é¢˜æ˜¯å¯ä»¥è¢«é‡ç°çš„ï¼Œä½†æ˜¯ä½ ä¸çŸ¥é“å“ªé‡Œå‡ºäº†é—®é¢˜ã€‚ ä½ å¯ä»¥ç”¨äºŒåˆ†æ³•æ¥æ‰¾åˆ°è¿™ä¸ªé—®é¢˜ã€‚ é¦–å…ˆæ‰§è¡Œ <code>git bisect start</code> æ¥å¯åŠ¨ï¼Œæ¥ç€æ‰§è¡Œ <code>git bisect bad</code> æ¥å‘Šè¯‰ç³»ç»Ÿå½“å‰ä½ æ‰€åœ¨çš„æäº¤æ˜¯æœ‰é—®é¢˜çš„ã€‚ ç„¶åä½ å¿…é¡»å‘Šè¯‰ bisect å·²çŸ¥çš„æœ€åä¸€æ¬¡æ­£å¸¸çŠ¶æ€æ˜¯å“ªæ¬¡æäº¤ï¼Œä½¿ç”¨ <code>git bisect good [good_commit]</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git bisect start</span><br><span class="line">$ git bisect bad</span><br><span class="line">$ git bisect good v1.0</span><br><span class="line">Bisecting: 6 revisions left to test after this</span><br><span class="line">[ecb6e1bc347ccecc5f9350d878ce677feb13d3b2] error handling on repo</span><br></pre></td></tr></table></figure><p>Git å‘ç°åœ¨ä½ æ ‡è®°ä¸ºæ­£å¸¸çš„æäº¤ï¼ˆv1.0ï¼‰å’Œå½“å‰çš„é”™è¯¯ç‰ˆæœ¬ä¹‹é—´æœ‰å¤§çº¦12æ¬¡æäº¤ï¼Œäºæ˜¯ Git æ£€å‡ºä¸­é—´çš„é‚£ä¸ªæäº¤ã€‚ ç°åœ¨ä½ å¯ä»¥æ‰§è¡Œæµ‹è¯•ï¼Œçœ‹çœ‹åœ¨è¿™ä¸ªæäº¤ä¸‹é—®é¢˜æ˜¯ä¸æ˜¯è¿˜æ˜¯å­˜åœ¨ã€‚ å¦‚æœè¿˜å­˜åœ¨ï¼Œè¯´æ˜é—®é¢˜æ˜¯åœ¨è¿™ä¸ªæäº¤ä¹‹å‰å¼•å…¥çš„ï¼›å¦‚æœé—®é¢˜ä¸å­˜åœ¨ï¼Œè¯´æ˜é—®é¢˜æ˜¯åœ¨è¿™ä¸ªæäº¤ä¹‹åå¼•å…¥çš„ã€‚ å‡è®¾æµ‹è¯•ç»“æœæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½ å¯ä»¥é€šè¿‡ <code>git bisect good</code> æ¥å‘Šè¯‰ Gitï¼Œç„¶åç»§ç»­å¯»æ‰¾ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git bisect good</span><br><span class="line">Bisecting: 3 revisions left to test after this</span><br><span class="line">[b047b02ea83310a70fd603dc8cd7a6cd13d15c04] secure this thing</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ åœ¨å¦ä¸€ä¸ªæäº¤ä¸Šäº†ï¼Œè¿™ä¸ªæäº¤æ˜¯åˆšåˆšé‚£ä¸ªæµ‹è¯•é€šè¿‡çš„æäº¤å’Œæœ‰é—®é¢˜çš„æäº¤çš„ä¸­ç‚¹ã€‚ ä½ å†ä¸€æ¬¡æ‰§è¡Œæµ‹è¯•ï¼Œå‘ç°è¿™ä¸ªæäº¤ä¸‹æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› æ­¤ä½ å¯ä»¥é€šè¿‡ <code>git bisect bad</code> å‘Šè¯‰ Gitï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git bisect bad</span><br><span class="line">Bisecting: 1 revisions left to test after this</span><br><span class="line">[f71ce38690acf49c1f3c9bea38e09d82a5ce6014] drop exceptions table</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæäº¤æ˜¯æ­£å¸¸çš„ï¼Œç°åœ¨ Git æ‹¥æœ‰çš„ä¿¡æ¯å·²ç»å¯ä»¥ç¡®å®šå¼•å…¥é—®é¢˜çš„ä½ç½®åœ¨å“ªé‡Œã€‚ å®ƒä¼šå‘Šè¯‰ä½ ç¬¬ä¸€ä¸ªé”™è¯¯æäº¤çš„ SHA-1 å€¼å¹¶æ˜¾ç¤ºä¸€äº›æäº¤è¯´æ˜ï¼Œä»¥åŠå“ªäº›æ–‡ä»¶åœ¨é‚£æ¬¡æäº¤é‡Œä¿®æ”¹è¿‡ï¼Œè¿™æ ·ä½ å¯ä»¥æ‰¾å‡ºå¼•å…¥ bug çš„æ ¹æºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git bisect good</span><br><span class="line">b047b02ea83310a70fd603dc8cd7a6cd13d15c04 is first bad commit</span><br><span class="line">commit b047b02ea83310a70fd603dc8cd7a6cd13d15c04</span><br><span class="line">Author: PJ Hyett &lt;pjhyett@example.com&gt;</span><br><span class="line">Date:   Tue Jan 27 14:48:32 2009 -0800</span><br><span class="line"></span><br><span class="line">    secure this thing</span><br><span class="line"></span><br><span class="line">:040000 040000 40ee3e7821b895e52c1695092db9bdc4c61d1730</span><br><span class="line">f24d3c6ebcfc639b1a3814550e62d60b8e68a8e4 M  config</span><br></pre></td></tr></table></figure><p>å½“ä½ å®Œæˆè¿™äº›æ“ä½œä¹‹åï¼Œä½ åº”è¯¥æ‰§è¡Œ <code>git bisect reset</code> é‡ç½®ä½ çš„ HEAD æŒ‡é’ˆåˆ°æœ€å¼€å§‹çš„ä½ç½®ï¼Œå¦åˆ™ä½ ä¼šåœç•™åœ¨ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„çŠ¶æ€ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git bisect reset</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªå¯ä»¥å¸®åŠ©ä½ åœ¨å‡ åˆ†é’Ÿå†…ä»æ•°ç™¾ä¸ªæäº¤ä¸­æ‰¾åˆ° bug çš„å¼ºå¤§å·¥å…·ã€‚ äº‹å®ä¸Šï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªè„šæœ¬åœ¨é¡¹ç›®æ˜¯æ­£å¸¸çš„æƒ…å†µä¸‹è¿”å› 0ï¼Œåœ¨ä¸æ­£å¸¸çš„æƒ…å†µä¸‹è¿”å›é 0ï¼Œä½ å¯ä»¥ä½¿ <code>git bisect</code> è‡ªåŠ¨åŒ–è¿™äº›æ“ä½œã€‚ é¦–å…ˆï¼Œä½ è®¾å®šå¥½é¡¹ç›®æ­£å¸¸ä»¥åŠä¸æ­£å¸¸æ‰€åœ¨æäº¤çš„äºŒåˆ†æŸ¥æ‰¾èŒƒå›´ã€‚ ä½ å¯ä»¥é€šè¿‡ <code>bisect start</code> å‘½ä»¤çš„å‚æ•°æ¥è®¾å®šè¿™ä¸¤ä¸ªæäº¤ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é¡¹ç›®ä¸æ­£å¸¸çš„æäº¤ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é¡¹ç›®æ­£å¸¸çš„æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git bisect start HEAD v1.0</span><br><span class="line">$ git bisect run test-error.sh</span><br></pre></td></tr></table></figure><p>Git ä¼šè‡ªåŠ¨åœ¨æ¯ä¸ªè¢«æ£€å‡ºçš„æäº¤é‡Œæ‰§è¡Œ <code>test-error.sh</code> ç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªé¡¹ç›®ä¸æ­£å¸¸çš„æäº¤ã€‚ ä½ ä¹Ÿå¯ä»¥æ‰§è¡Œ <code>make</code> æˆ–è€… <code>make tests</code> æˆ–è€…å…¶ä»–ä¸œè¥¿æ¥è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p><h3 id="å­æ¨¡å—"><a href="#å­æ¨¡å—" class="headerlink" title="å­æ¨¡å—"></a>å­æ¨¡å—</h3><p>æœ‰ç§æƒ…å†µæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ï¼šæŸä¸ªå·¥ä½œä¸­çš„é¡¹ç›®éœ€è¦åŒ…å«å¹¶ä½¿ç”¨å¦ä¸€ä¸ªé¡¹ç›®ã€‚ ä¹Ÿè®¸æ˜¯ç¬¬ä¸‰æ–¹åº“ï¼Œæˆ–è€…ä½ ç‹¬ç«‹å¼€å‘çš„ï¼Œç”¨äºå¤šä¸ªçˆ¶é¡¹ç›®çš„åº“ã€‚ ç°åœ¨é—®é¢˜æ¥äº†ï¼šä½ æƒ³è¦æŠŠå®ƒä»¬å½“åšä¸¤ä¸ªç‹¬ç«‹çš„é¡¹ç›®ï¼ŒåŒæ—¶åˆæƒ³åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨å¦ä¸€ä¸ªã€‚</p><p>æˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­ã€‚ å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç½‘ç«™ç„¶ååˆ›å»ºäº† Atom è®¢é˜…ã€‚ ä½ å†³å®šä½¿ç”¨ä¸€ä¸ªåº“ï¼Œè€Œä¸æ˜¯å†™è‡ªå·±çš„ Atom ç”Ÿæˆä»£ç ã€‚ ä½ å¯èƒ½ä¸å¾—ä¸é€šè¿‡ CPAN å®‰è£…æˆ– Ruby gem æ¥åŒ…å«å…±äº«åº“ä¸­çš„ä»£ç ï¼Œæˆ–è€…å°†æºä»£ç ç›´æ¥æ‹·è´åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ã€‚ å¦‚æœå°†è¿™ä¸ªåº“åŒ…å«è¿›æ¥ï¼Œé‚£ä¹ˆæ— è®ºç”¨ä½•ç§æ–¹å¼éƒ½å¾ˆéš¾å®šåˆ¶å®ƒï¼Œéƒ¨ç½²åˆ™æ›´åŠ å›°éš¾ï¼Œå› ä¸ºä½ å¿…é¡»ç¡®ä¿æ¯ä¸€ä¸ªå®¢æˆ·ç«¯éƒ½åŒ…å«è¯¥åº“ã€‚ å¦‚æœå°†ä»£ç å¤åˆ¶åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼Œé‚£ä¹ˆä½ åšçš„ä»»ä½•è‡ªå®šä¹‰ä¿®æ”¹éƒ½ä¼šä½¿åˆå¹¶ä¸Šæ¸¸çš„æ”¹åŠ¨å˜å¾—å›°éš¾ã€‚</p><p>Git é€šè¿‡å­æ¨¡å—æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ å­æ¨¡å—å…è®¸ä½ å°†ä¸€ä¸ª Git ä»“åº“ä½œä¸ºå¦ä¸€ä¸ª Git ä»“åº“çš„å­ç›®å½•ã€‚ å®ƒèƒ½è®©ä½ å°†å¦ä¸€ä¸ªä»“åº“å…‹éš†åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼ŒåŒæ—¶è¿˜ä¿æŒæäº¤çš„ç‹¬ç«‹ã€‚</p><h4 id="å¼€å§‹ä½¿ç”¨å­æ¨¡å—"><a href="#å¼€å§‹ä½¿ç”¨å­æ¨¡å—" class="headerlink" title="å¼€å§‹ä½¿ç”¨å­æ¨¡å—"></a>å¼€å§‹ä½¿ç”¨å­æ¨¡å—</h4><p>æˆ‘ä»¬å°†è¦æ¼”ç¤ºå¦‚ä½•åœ¨ä¸€ä¸ªè¢«åˆ†æˆä¸€ä¸ªä¸»é¡¹ç›®ä¸å‡ ä¸ªå­é¡¹ç›®çš„é¡¹ç›®ä¸Šå¼€å‘ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆå°†ä¸€ä¸ªå·²å­˜åœ¨çš„ Git ä»“åº“æ·»åŠ ä¸ºæ­£åœ¨å·¥ä½œçš„ä»“åº“çš„å­æ¨¡å—ã€‚ ä½ å¯ä»¥é€šè¿‡åœ¨ <code>git submodule add</code> å‘½ä»¤åé¢åŠ ä¸Šæƒ³è¦è·Ÿè¸ªçš„é¡¹ç›® URL æ¥æ·»åŠ æ–°çš„å­æ¨¡å—ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šæ·»åŠ ä¸€ä¸ªåä¸º â€œDbConnectorâ€ çš„åº“ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule add https://github.com/chaconinc/DbConnector</span><br><span class="line">Cloning into &apos;DbConnector&apos;...</span><br><span class="line">remote: Counting objects: 11, done.</span><br><span class="line">remote: Compressing objects: 100% (10/10), done.</span><br><span class="line">remote: Total 11 (delta 0), reused 11 (delta 0)</span><br><span class="line">Unpacking objects: 100% (11/11), done.</span><br><span class="line">Checking connectivity... done.</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå­æ¨¡å—ä¼šå°†å­é¡¹ç›®æ”¾åˆ°ä¸€ä¸ªä¸ä»“åº“åŒåçš„ç›®å½•ä¸­ï¼Œæœ¬ä¾‹ä¸­æ˜¯ â€œDbConnectorâ€ã€‚ å¦‚æœä½ æƒ³è¦æ”¾åˆ°å…¶ä»–åœ°æ–¹ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨å‘½ä»¤ç»“å°¾æ·»åŠ ä¸€ä¸ªä¸åŒçš„è·¯å¾„ã€‚</p><p>å¦‚æœè¿™æ—¶è¿è¡Œ <code>git status</code>ï¼Œä½ ä¼šæ³¨æ„åˆ°å‡ ä»¶äº‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with &apos;origin/master&apos;.</span><br><span class="line"></span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">new file:   .gitmodules</span><br><span class="line">new file:   DbConnector</span><br></pre></td></tr></table></figure><p>é¦–å…ˆåº”å½“æ³¨æ„åˆ°æ–°çš„ <code>.gitmodules</code> æ–‡ä»¶ã€‚ è¯¥é…ç½®æ–‡ä»¶ä¿å­˜äº†é¡¹ç›® URL ä¸å·²ç»æ‹‰å–çš„æœ¬åœ°ç›®å½•ä¹‹é—´çš„æ˜ å°„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cat .gitmodules</span><br><span class="line">[submodule &quot;DbConnector&quot;]</span><br><span class="line">path = DbConnector</span><br><span class="line">url = https://github.com/chaconinc/DbConnector</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰å¤šä¸ªå­æ¨¡å—ï¼Œè¯¥æ–‡ä»¶ä¸­å°±ä¼šæœ‰å¤šæ¡è®°å½•ã€‚ è¦é‡ç‚¹æ³¨æ„çš„æ˜¯ï¼Œè¯¥æ–‡ä»¶ä¹Ÿåƒ <code>.gitignore</code> æ–‡ä»¶ä¸€æ ·å—åˆ°ï¼ˆé€šè¿‡ï¼‰ç‰ˆæœ¬æ§åˆ¶ã€‚ å®ƒä¼šå’Œè¯¥é¡¹ç›®çš„å…¶ä»–éƒ¨åˆ†ä¸€åŒè¢«æ‹‰å–æ¨é€ã€‚ è¿™å°±æ˜¯å…‹éš†è¯¥é¡¹ç›®çš„äººçŸ¥é“å»å“ªè·å¾—å­æ¨¡å—çš„åŸå› ã€‚</p><p>åœ¨ <code>git status</code> è¾“å‡ºä¸­åˆ—å‡ºçš„å¦ä¸€ä¸ªæ˜¯é¡¹ç›®æ–‡ä»¶å¤¹è®°å½•ã€‚ å¦‚æœä½ è¿è¡Œ <code>git diff</code>ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git diff --cached DbConnector</span><br><span class="line">diff --git a/DbConnector b/DbConnector</span><br><span class="line">new file mode 160000</span><br><span class="line">index 0000000..c3f01dc</span><br><span class="line">--- /dev/null</span><br><span class="line">+++ b/DbConnector</span><br><span class="line">@@ -0,0 +1 @@</span><br><span class="line">+Subproject commit c3f01dc8862123d317dd46284b05b6892c7b29bc</span><br></pre></td></tr></table></figure><p>è™½ç„¶ <code>DbConnector</code> æ˜¯å·¥ä½œç›®å½•ä¸­çš„ä¸€ä¸ªå­ç›®å½•ï¼Œä½† Git è¿˜æ˜¯ä¼šå°†å®ƒè§†ä½œä¸€ä¸ªå­æ¨¡å—ã€‚å½“ä½ ä¸åœ¨é‚£ä¸ªç›®å½•ä¸­æ—¶ï¼ŒGit å¹¶ä¸ä¼šè·Ÿè¸ªå®ƒçš„å†…å®¹ï¼Œ è€Œæ˜¯å°†å®ƒçœ‹ä½œè¯¥ä»“åº“ä¸­çš„ä¸€ä¸ªç‰¹æ®Šæäº¤ã€‚</p><p>å¦‚æœä½ æƒ³çœ‹åˆ°æ›´æ¼‚äº®çš„å·®å¼‚è¾“å‡ºï¼Œå¯ä»¥ç»™ <code>git diff</code> ä¼ é€’ <code>--submodule</code> é€‰é¡¹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git diff --cached --submodule</span><br><span class="line">diff --git a/.gitmodules b/.gitmodules</span><br><span class="line">new file mode 100644</span><br><span class="line">index 0000000..71fc376</span><br><span class="line">--- /dev/null</span><br><span class="line">+++ b/.gitmodules</span><br><span class="line">@@ -0,0 +1,3 @@</span><br><span class="line">+[submodule &quot;DbConnector&quot;]</span><br><span class="line">+       path = DbConnector</span><br><span class="line">+       url = https://github.com/chaconinc/DbConnector</span><br><span class="line">Submodule DbConnector 0000000...c3f01dc (new submodule)</span><br></pre></td></tr></table></figure><p>å½“ä½ æäº¤æ—¶ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -am &apos;added DbConnector module&apos;</span><br><span class="line">[master fb9093c] added DbConnector module</span><br><span class="line"> 2 files changed, 4 insertions(+)</span><br><span class="line"> create mode 100644 .gitmodules</span><br><span class="line"> create mode 160000 DbConnector</span><br></pre></td></tr></table></figure><p>æ³¨æ„ DbConnector è®°å½•çš„ <code>160000</code> æ¨¡å¼ã€‚ è¿™æ˜¯ Git ä¸­çš„ä¸€ç§ç‰¹æ®Šæ¨¡å¼ï¼Œå®ƒæœ¬è´¨ä¸Šæ„å‘³ç€ä½ æ˜¯å°†ä¸€æ¬¡æäº¤è®°ä½œä¸€é¡¹ç›®å½•è®°å½•çš„ï¼Œè€Œéå°†å®ƒè®°å½•æˆä¸€ä¸ªå­ç›®å½•æˆ–è€…ä¸€ä¸ªæ–‡ä»¶ã€‚</p><h4 id="å…‹éš†å«æœ‰å­æ¨¡å—çš„é¡¹ç›®"><a href="#å…‹éš†å«æœ‰å­æ¨¡å—çš„é¡¹ç›®" class="headerlink" title="å…‹éš†å«æœ‰å­æ¨¡å—çš„é¡¹ç›®"></a>å…‹éš†å«æœ‰å­æ¨¡å—çš„é¡¹ç›®</h4><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä¼šå…‹éš†ä¸€ä¸ªå«æœ‰å­æ¨¡å—çš„é¡¹ç›®ã€‚ å½“ä½ åœ¨å…‹éš†è¿™æ ·çš„é¡¹ç›®æ—¶ï¼Œé»˜è®¤ä¼šåŒ…å«è¯¥å­æ¨¡å—ç›®å½•ï¼Œä½†å…¶ä¸­è¿˜æ²¡æœ‰ä»»ä½•æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/chaconinc/MainProject</span><br><span class="line">Cloning into &apos;MainProject&apos;...</span><br><span class="line">remote: Counting objects: 14, done.</span><br><span class="line">remote: Compressing objects: 100% (13/13), done.</span><br><span class="line">remote: Total 14 (delta 1), reused 13 (delta 0)</span><br><span class="line">Unpacking objects: 100% (14/14), done.</span><br><span class="line">Checking connectivity... done.</span><br><span class="line">$ cd MainProject</span><br><span class="line">$ ls -la</span><br><span class="line">total 16</span><br><span class="line">drwxr-xr-x   9 schacon  staff  306 Sep 17 15:21 .</span><br><span class="line">drwxr-xr-x   7 schacon  staff  238 Sep 17 15:21 ..</span><br><span class="line">drwxr-xr-x  13 schacon  staff  442 Sep 17 15:21 .git</span><br><span class="line">-rw-r--r--   1 schacon  staff   92 Sep 17 15:21 .gitmodules</span><br><span class="line">drwxr-xr-x   2 schacon  staff   68 Sep 17 15:21 DbConnector</span><br><span class="line">-rw-r--r--   1 schacon  staff  756 Sep 17 15:21 Makefile</span><br><span class="line">drwxr-xr-x   3 schacon  staff  102 Sep 17 15:21 includes</span><br><span class="line">drwxr-xr-x   4 schacon  staff  136 Sep 17 15:21 scripts</span><br><span class="line">drwxr-xr-x   4 schacon  staff  136 Sep 17 15:21 src</span><br><span class="line">$ cd DbConnector/</span><br><span class="line">$ ls</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>å…¶ä¸­æœ‰ <code>DbConnector</code> ç›®å½•ï¼Œä¸è¿‡æ˜¯ç©ºçš„ã€‚ ä½ å¿…é¡»è¿è¡Œä¸¤ä¸ªå‘½ä»¤ï¼š<code>git submodule init</code> ç”¨æ¥åˆå§‹åŒ–æœ¬åœ°é…ç½®æ–‡ä»¶ï¼Œè€Œ <code>git submodule update</code> åˆ™ä»è¯¥é¡¹ç›®ä¸­æŠ“å–æ‰€æœ‰æ•°æ®å¹¶æ£€å‡ºçˆ¶é¡¹ç›®ä¸­åˆ—å‡ºçš„åˆé€‚çš„æäº¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule init</span><br><span class="line">Submodule &apos;DbConnector&apos; (https://github.com/chaconinc/DbConnector) registered for path &apos;DbConnector&apos;</span><br><span class="line">$ git submodule update</span><br><span class="line">Cloning into &apos;DbConnector&apos;...</span><br><span class="line">remote: Counting objects: 11, done.</span><br><span class="line">remote: Compressing objects: 100% (10/10), done.</span><br><span class="line">remote: Total 11 (delta 0), reused 11 (delta 0)</span><br><span class="line">Unpacking objects: 100% (11/11), done.</span><br><span class="line">Checking connectivity... done.</span><br><span class="line">Submodule path &apos;DbConnector&apos;: checked out &apos;c3f01dc8862123d317dd46284b05b6892c7b29bc&apos;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ <code>DbConnector</code> å­ç›®å½•æ˜¯å¤„åœ¨å’Œä¹‹å‰æäº¤æ—¶ç›¸åŒçš„çŠ¶æ€äº†ã€‚</p><p>ä¸è¿‡è¿˜æœ‰æ›´ç®€å•ä¸€ç‚¹çš„æ–¹å¼ã€‚ å¦‚æœç»™ <code>git clone</code> å‘½ä»¤ä¼ é€’ <code>--recursive</code> é€‰é¡¹ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨åˆå§‹åŒ–å¹¶æ›´æ–°ä»“åº“ä¸­çš„æ¯ä¸€ä¸ªå­æ¨¡å—ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git clone --recursive https://github.com/chaconinc/MainProject</span><br><span class="line">Cloning into &apos;MainProject&apos;...</span><br><span class="line">remote: Counting objects: 14, done.</span><br><span class="line">remote: Compressing objects: 100% (13/13), done.</span><br><span class="line">remote: Total 14 (delta 1), reused 13 (delta 0)</span><br><span class="line">Unpacking objects: 100% (14/14), done.</span><br><span class="line">Checking connectivity... done.</span><br><span class="line">Submodule &apos;DbConnector&apos; (https://github.com/chaconinc/DbConnector) registered for path &apos;DbConnector&apos;</span><br><span class="line">Cloning into &apos;DbConnector&apos;...</span><br><span class="line">remote: Counting objects: 11, done.</span><br><span class="line">remote: Compressing objects: 100% (10/10), done.</span><br><span class="line">remote: Total 11 (delta 0), reused 11 (delta 0)</span><br><span class="line">Unpacking objects: 100% (11/11), done.</span><br><span class="line">Checking connectivity... done.</span><br><span class="line">Submodule path &apos;DbConnector&apos;: checked out &apos;c3f01dc8862123d317dd46284b05b6892c7b29bc&apos;</span><br></pre></td></tr></table></figure><h4 id="åœ¨åŒ…å«å­æ¨¡å—çš„é¡¹ç›®ä¸Šå·¥ä½œ"><a href="#åœ¨åŒ…å«å­æ¨¡å—çš„é¡¹ç›®ä¸Šå·¥ä½œ" class="headerlink" title="åœ¨åŒ…å«å­æ¨¡å—çš„é¡¹ç›®ä¸Šå·¥ä½œ"></a>åœ¨åŒ…å«å­æ¨¡å—çš„é¡¹ç›®ä¸Šå·¥ä½œ</h4><p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä»½åŒ…å«å­æ¨¡å—çš„é¡¹ç›®å‰¯æœ¬ï¼Œæˆ‘ä»¬å°†ä¼šåŒæ—¶åœ¨ä¸»é¡¹ç›®å’Œå­æ¨¡å—é¡¹ç›®ä¸Šä¸é˜Ÿå‘˜åä½œã€‚</p><h5 id="æ‹‰å–ä¸Šæ¸¸ä¿®æ”¹"><a href="#æ‹‰å–ä¸Šæ¸¸ä¿®æ”¹" class="headerlink" title="æ‹‰å–ä¸Šæ¸¸ä¿®æ”¹"></a>æ‹‰å–ä¸Šæ¸¸ä¿®æ”¹</h5><p>åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å­æ¨¡å—çš„æœ€ç®€æ¨¡å‹ï¼Œå°±æ˜¯åªä½¿ç”¨å­é¡¹ç›®å¹¶ä¸æ—¶åœ°è·å–æ›´æ–°ï¼Œè€Œå¹¶ä¸åœ¨ä½ çš„æ£€å‡ºä¸­è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚</p><p>å¦‚æœæƒ³è¦åœ¨å­æ¨¡å—ä¸­æŸ¥çœ‹æ–°å·¥ä½œï¼Œå¯ä»¥è¿›å…¥åˆ°ç›®å½•ä¸­è¿è¡Œ <code>git fetch</code> ä¸ <code>git merge</code>ï¼Œåˆå¹¶ä¸Šæ¸¸åˆ†æ”¯æ¥æ›´æ–°æœ¬åœ°ä»£ç ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch</span><br><span class="line">From https://github.com/chaconinc/DbConnector</span><br><span class="line">   c3f01dc..d0354fc  master     -&gt; origin/master</span><br><span class="line">$ git merge origin/master</span><br><span class="line">Updating c3f01dc..d0354fc</span><br><span class="line">Fast-forward</span><br><span class="line"> scripts/connect.sh | 1 +</span><br><span class="line"> src/db.c           | 1 +</span><br><span class="line"> 2 files changed, 2 insertions(+)</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ ç°åœ¨è¿”å›åˆ°ä¸»é¡¹ç›®å¹¶è¿è¡Œ <code>git diff --submodule</code>ï¼Œå°±ä¼šçœ‹åˆ°å­æ¨¡å—è¢«æ›´æ–°çš„åŒæ—¶è·å¾—äº†ä¸€ä¸ªåŒ…å«æ–°æ·»åŠ æäº¤çš„åˆ—è¡¨ã€‚ å¦‚æœä½ ä¸æƒ³æ¯æ¬¡è¿è¡Œ <code>git diff</code> æ—¶éƒ½è¾“å…¥ <code>--submodle</code>ï¼Œé‚£ä¹ˆå¯ä»¥å°† <code>diff.submodule</code> è®¾ç½®ä¸º â€œlogâ€ æ¥å°†å…¶ä½œä¸ºé»˜è®¤è¡Œä¸ºã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global diff.submodule log</span><br><span class="line">$ git diff</span><br><span class="line">Submodule DbConnector c3f01dc..d0354fc:</span><br><span class="line">  &gt; more efficient db routine</span><br><span class="line">  &gt; better connection routine</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨æ­¤æ—¶æäº¤ï¼Œé‚£ä¹ˆä½ ä¼šå°†å­æ¨¡å—é”å®šä¸ºå…¶ä»–äººæ›´æ–°æ—¶çš„æ–°ä»£ç ã€‚</p><p>å¦‚æœä½ ä¸æƒ³åœ¨å­ç›®å½•ä¸­æ‰‹åŠ¨æŠ“å–ä¸åˆå¹¶ï¼Œé‚£ä¹ˆè¿˜æœ‰ç§æ›´å®¹æ˜“çš„æ–¹å¼ã€‚ è¿è¡Œ <code>git submodule update --remote</code>ï¼ŒGit å°†ä¼šè¿›å…¥å­æ¨¡å—ç„¶åæŠ“å–å¹¶æ›´æ–°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule update --remote DbConnector</span><br><span class="line">remote: Counting objects: 4, done.</span><br><span class="line">remote: Compressing objects: 100% (2/2), done.</span><br><span class="line">remote: Total 4 (delta 2), reused 4 (delta 2)</span><br><span class="line">Unpacking objects: 100% (4/4), done.</span><br><span class="line">From https://github.com/chaconinc/DbConnector</span><br><span class="line">   3f19983..d0354fc  master     -&gt; origin/master</span><br><span class="line">Submodule path &apos;DbConnector&apos;: checked out &apos;d0354fc054692d3906c85c3af05ddce39a1c0644&apos;</span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤é»˜è®¤ä¼šå‡å®šä½ æƒ³è¦æ›´æ–°å¹¶æ£€å‡ºå­æ¨¡å—ä»“åº“çš„ <code>master</code> åˆ†æ”¯ã€‚ ä¸è¿‡ä½ ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºæƒ³è¦çš„å…¶ä»–åˆ†æ”¯ã€‚ ä¾‹å¦‚ï¼Œä½ æƒ³è¦ DbConnector å­æ¨¡å—è·Ÿè¸ªä»“åº“çš„ â€œstableâ€ åˆ†æ”¯ï¼Œé‚£ä¹ˆæ—¢å¯ä»¥åœ¨ <code>.gitmodules</code> æ–‡ä»¶ä¸­è®¾ç½®ï¼ˆè¿™æ ·å…¶ä»–äººä¹Ÿå¯ä»¥è·Ÿè¸ªå®ƒï¼‰ï¼Œä¹Ÿå¯ä»¥åªåœ¨æœ¬åœ°çš„ <code>.git/config</code> æ–‡ä»¶ä¸­è®¾ç½®ã€‚ è®©æˆ‘ä»¬åœ¨ <code>.gitmodules</code> æ–‡ä»¶ä¸­è®¾ç½®å®ƒï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git config -f .gitmodules submodule.DbConnector.branch stable</span><br><span class="line"></span><br><span class="line">$ git submodule update --remote</span><br><span class="line">remote: Counting objects: 4, done.</span><br><span class="line">remote: Compressing objects: 100% (2/2), done.</span><br><span class="line">remote: Total 4 (delta 2), reused 4 (delta 2)</span><br><span class="line">Unpacking objects: 100% (4/4), done.</span><br><span class="line">From https://github.com/chaconinc/DbConnector</span><br><span class="line">   27cf5d3..c87d55d  stable -&gt; origin/stable</span><br><span class="line">Submodule path &apos;DbConnector&apos;: checked out &apos;c87d55d4c6d4b05ee34fbc8cb6f7bf4585ae6687&apos;</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸ç”¨ <code>-f .gitmodules</code> é€‰é¡¹ï¼Œé‚£ä¹ˆå®ƒåªä¼šä¸ºä½ åšä¿®æ”¹ã€‚ä½†æ˜¯åœ¨ä»“åº“ä¸­ä¿ç•™è·Ÿè¸ªä¿¡æ¯æ›´æœ‰æ„ä¹‰ä¸€äº›ï¼Œå› ä¸ºå…¶ä»–äººä¹Ÿå¯ä»¥å¾—åˆ°åŒæ ·çš„æ•ˆæœã€‚</p><p>è¿™æ—¶æˆ‘ä»¬è¿è¡Œ <code>git status</code>ï¼ŒGit ä¼šæ˜¾ç¤ºå­æ¨¡å—ä¸­æœ‰â€œæ–°æäº¤â€ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with &apos;origin/master&apos;.</span><br><span class="line"></span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">  modified:   .gitmodules</span><br><span class="line">  modified:   DbConnector (new commits)</span><br><span class="line"></span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è®¾ç½®äº†é…ç½®é€‰é¡¹ <code>status.submodulesummary</code>ï¼ŒGit ä¹Ÿä¼šæ˜¾ç¤ºä½ çš„å­æ¨¡å—çš„æ›´æ”¹æ‘˜è¦ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ git config status.submodulesummary 1</span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with &apos;origin/master&apos;.</span><br><span class="line"></span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">modified:   .gitmodules</span><br><span class="line">modified:   DbConnector (new commits)</span><br><span class="line"></span><br><span class="line">Submodules changed but not updated:</span><br><span class="line"></span><br><span class="line">* DbConnector c3f01dc...c87d55d (4):</span><br><span class="line">  &gt; catch non-null terminated lines</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å¦‚æœè¿è¡Œ <code>git diff</code>ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¿®æ”¹äº† <code>.gitmodules</code> æ–‡ä»¶ï¼ŒåŒæ—¶è¿˜æœ‰å‡ ä¸ªå·²æ‹‰å–çš„æäº¤éœ€è¦æäº¤åˆ°æˆ‘ä»¬è‡ªå·±çš„å­æ¨¡å—é¡¹ç›®ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br><span class="line">diff --git a/.gitmodules b/.gitmodules</span><br><span class="line">index 6fc0b3d..fd1cc29 100644</span><br><span class="line">--- a/.gitmodules</span><br><span class="line">+++ b/.gitmodules</span><br><span class="line">@@ -1,3 +1,4 @@</span><br><span class="line"> [submodule &quot;DbConnector&quot;]</span><br><span class="line">        path = DbConnector</span><br><span class="line">        url = https://github.com/chaconinc/DbConnector</span><br><span class="line">+       branch = stable</span><br><span class="line"> Submodule DbConnector c3f01dc..c87d55d:</span><br><span class="line">  &gt; catch non-null terminated lines</span><br><span class="line">  &gt; more robust error handling</span><br><span class="line">  &gt; more efficient db routine</span><br><span class="line">  &gt; better connection routine</span><br></pre></td></tr></table></figure><p>è¿™éå¸¸æœ‰è¶£ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ç›´æ¥çœ‹åˆ°å°†è¦æäº¤åˆ°å­æ¨¡å—ä¸­çš„æäº¤æ—¥å¿—ã€‚ æäº¤ä¹‹åï¼Œä½ ä¹Ÿå¯ä»¥è¿è¡Œ <code>git log -p</code> æŸ¥çœ‹è¿™ä¸ªä¿¡æ¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ git log -p --submodule</span><br><span class="line">commit 0a24cfc121a8a3c118e0105ae4ae4c00281cf7ae</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Wed Sep 17 16:37:02 2014 +0200</span><br><span class="line"></span><br><span class="line">    updating DbConnector for bug fixes</span><br><span class="line"></span><br><span class="line">diff --git a/.gitmodules b/.gitmodules</span><br><span class="line">index 6fc0b3d..fd1cc29 100644</span><br><span class="line">--- a/.gitmodules</span><br><span class="line">+++ b/.gitmodules</span><br><span class="line">@@ -1,3 +1,4 @@</span><br><span class="line"> [submodule &quot;DbConnector&quot;]</span><br><span class="line">        path = DbConnector</span><br><span class="line">        url = https://github.com/chaconinc/DbConnector</span><br><span class="line">+       branch = stable</span><br><span class="line">Submodule DbConnector c3f01dc..c87d55d:</span><br><span class="line">  &gt; catch non-null terminated lines</span><br><span class="line">  &gt; more robust error handling</span><br><span class="line">  &gt; more efficient db routine</span><br><span class="line">  &gt; better connection routine</span><br></pre></td></tr></table></figure><p>å½“è¿è¡Œ <code>git submodule update --remote</code> æ—¶ï¼ŒGit é»˜è®¤ä¼šå°è¯•æ›´æ–°æ‰€æœ‰å­æ¨¡å—ï¼Œæ‰€ä»¥å¦‚æœæœ‰å¾ˆå¤šå­æ¨¡å—çš„è¯ï¼Œä½ å¯ä»¥ä¼ é€’æƒ³è¦æ›´æ–°çš„å­æ¨¡å—çš„åå­—ã€‚</p><h5 id="åœ¨å­æ¨¡å—ä¸Šå·¥ä½œ"><a href="#åœ¨å­æ¨¡å—ä¸Šå·¥ä½œ" class="headerlink" title="åœ¨å­æ¨¡å—ä¸Šå·¥ä½œ"></a>åœ¨å­æ¨¡å—ä¸Šå·¥ä½œ</h5><p>ä½ å¾ˆæœ‰å¯èƒ½æ­£åœ¨ä½¿ç”¨å­æ¨¡å—ï¼Œå› ä¸ºä½ ç¡®å®æƒ³åœ¨å­æ¨¡å—ä¸­ç¼–å†™ä»£ç çš„åŒæ—¶ï¼Œè¿˜æƒ³åœ¨ä¸»é¡¹ç›®ä¸Šç¼–å†™ä»£ç ï¼ˆæˆ–è€…è·¨å­æ¨¡å—å·¥ä½œï¼‰ã€‚ å¦åˆ™ä½ å¤§æ¦‚åªèƒ½ç”¨ç®€å•çš„ä¾èµ–ç®¡ç†ç³»ç»Ÿï¼ˆå¦‚ Maven æˆ– Rubygemsï¼‰æ¥æ›¿ä»£äº†ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•åœ¨å­æ¨¡å—ä¸ä¸»é¡¹ç›®ä¸­åŒæ—¶åšä¿®æ”¹ï¼Œä»¥åŠå¦‚ä½•åŒæ—¶æäº¤ä¸å‘å¸ƒé‚£äº›ä¿®æ”¹ã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå½“æˆ‘ä»¬è¿è¡Œ <code>git submodule update</code> ä»å­æ¨¡å—ä»“åº“ä¸­æŠ“å–ä¿®æ”¹æ—¶ï¼ŒGit å°†ä¼šè·å¾—è¿™äº›æ”¹åŠ¨å¹¶æ›´æ–°å­ç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œä½†æ˜¯ä¼šå°†å­ä»“åº“ç•™åœ¨ä¸€ä¸ªç§°ä½œâ€œæ¸¸ç¦»çš„ HEADâ€çš„çŠ¶æ€ã€‚ è¿™æ„å‘³ç€æ²¡æœ‰æœ¬åœ°å·¥ä½œåˆ†æ”¯ï¼ˆä¾‹å¦‚ â€œmasterâ€ ï¼‰è·Ÿè¸ªæ”¹åŠ¨ã€‚ æ‰€ä»¥ä½ åšçš„ä»»ä½•æ”¹åŠ¨éƒ½ä¸ä¼šè¢«è·Ÿè¸ªã€‚</p><p>ä¸ºäº†å°†å­æ¨¡å—è®¾ç½®å¾—æ›´å®¹æ˜“è¿›å…¥å¹¶ä¿®æ”¹ï¼Œä½ éœ€è¦åšä¸¤ä»¶äº‹ã€‚ é¦–å…ˆï¼Œè¿›å…¥æ¯ä¸ªå­æ¨¡å—å¹¶æ£€å‡ºå…¶ç›¸åº”çš„å·¥ä½œåˆ†æ”¯ã€‚ æ¥ç€ï¼Œè‹¥ä½ åšäº†æ›´æ”¹å°±éœ€è¦å‘Šè¯‰ Git å®ƒè¯¥åšä»€ä¹ˆï¼Œç„¶åè¿è¡Œ <code>git submodule update --remote</code> æ¥ä»ä¸Šæ¸¸æ‹‰å–æ–°å·¥ä½œã€‚ ä½ å¯ä»¥é€‰æ‹©å°†å®ƒä»¬åˆå¹¶åˆ°ä½ çš„æœ¬åœ°å·¥ä½œä¸­ï¼Œä¹Ÿå¯ä»¥å°è¯•å°†ä½ çš„å·¥ä½œå˜åŸºåˆ°æ–°çš„æ›´æ”¹ä¸Šã€‚</p><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬è¿›å…¥å­æ¨¡å—ç›®å½•ç„¶åæ£€å‡ºä¸€ä¸ªåˆ†æ”¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout stable</span><br><span class="line">Switched to branch &apos;stable&apos;</span><br></pre></td></tr></table></figure><p>ç„¶åå°è¯•ç”¨ â€œmergeâ€ é€‰é¡¹ã€‚ ä¸ºäº†æ‰‹åŠ¨æŒ‡å®šå®ƒï¼Œæˆ‘ä»¬åªéœ€ç»™ <code>update</code> æ·»åŠ  <code>--merge</code> é€‰é¡¹å³å¯ã€‚ è¿™æ—¶æˆ‘ä»¬å°†ä¼šçœ‹åˆ°æœåŠ¡å™¨ä¸Šçš„è¿™ä¸ªå­æ¨¡å—æœ‰ä¸€ä¸ªæ”¹åŠ¨å¹¶ä¸”å®ƒè¢«åˆå¹¶äº†è¿›æ¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule update --remote --merge</span><br><span class="line">remote: Counting objects: 4, done.</span><br><span class="line">remote: Compressing objects: 100% (2/2), done.</span><br><span class="line">remote: Total 4 (delta 2), reused 4 (delta 2)</span><br><span class="line">Unpacking objects: 100% (4/4), done.</span><br><span class="line">From https://github.com/chaconinc/DbConnector</span><br><span class="line">   c87d55d..92c7337  stable     -&gt; origin/stable</span><br><span class="line">Updating c87d55d..92c7337</span><br><span class="line">Fast-forward</span><br><span class="line"> src/main.c | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">Submodule path &apos;DbConnector&apos;: merged in &apos;92c7337b30ef9e0893e758dac2459d07362ab5ea&apos;</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬è¿›å…¥ DbConnector ç›®å½•ï¼Œå¯ä»¥å‘ç°æ–°çš„æ”¹åŠ¨å·²ç»åˆå¹¶å…¥æœ¬åœ° <code>stable</code> åˆ†æ”¯ã€‚ ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬å¯¹åº“åšä¸€äº›æœ¬åœ°çš„æ”¹åŠ¨è€ŒåŒæ—¶å…¶ä»–äººæ¨é€å¦å¤–ä¸€ä¸ªä¿®æ”¹åˆ°ä¸Šæ¸¸æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cd DbConnector/</span><br><span class="line">$ vim src/db.c</span><br><span class="line">$ git commit -am &apos;unicode support&apos;</span><br><span class="line">[stable f906e16] unicode support</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬ç°åœ¨æ›´æ–°å­æ¨¡å—ï¼Œå°±ä¼šçœ‹åˆ°å½“æˆ‘ä»¬åœ¨æœ¬åœ°åšäº†æ›´æ”¹æ—¶ä¸Šæ¸¸ä¹Ÿæœ‰ä¸€ä¸ªæ”¹åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒå¹¶å…¥æœ¬åœ°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule update --remote --rebase</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: unicode support</span><br><span class="line">Submodule path &apos;DbConnector&apos;: rebased into &apos;5d60ef9bbebf5a0c1c1050f242ceeb54ad58da94&apos;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ å¿˜è®° <code>--rebase</code> æˆ– <code>--merge</code>ï¼ŒGit ä¼šå°†å­æ¨¡å—æ›´æ–°ä¸ºæœåŠ¡å™¨ä¸Šçš„çŠ¶æ€ã€‚å¹¶ä¸”ä¼šå°†é¡¹ç›®é‡ç½®ä¸ºä¸€ä¸ªæ¸¸ç¦»çš„ HEAD çŠ¶æ€ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule update --remote</span><br><span class="line">Submodule path &apos;DbConnector&apos;: checked out &apos;5d60ef9bbebf5a0c1c1050f242ceeb54ad58da94&apos;</span><br></pre></td></tr></table></figure><p>å³ä¾¿è¿™çœŸçš„å‘ç”Ÿäº†ä¹Ÿä¸è¦ç´§ï¼Œä½ åªéœ€å›åˆ°ç›®å½•ä¸­å†æ¬¡æ£€å‡ºä½ çš„åˆ†æ”¯ï¼ˆå³è¿˜åŒ…å«ç€ä½ çš„å·¥ä½œçš„åˆ†æ”¯ï¼‰ç„¶åæ‰‹åŠ¨åœ°åˆå¹¶æˆ–å˜åŸº <code>origin/stable</code>ï¼ˆæˆ–ä»»ä½•ä¸€ä¸ªä½ æƒ³è¦çš„è¿œç¨‹åˆ†æ”¯ï¼‰å°±è¡Œäº†ã€‚</p><p>å¦‚æœä½ æ²¡æœ‰æäº¤å­æ¨¡å—çš„æ”¹åŠ¨ï¼Œé‚£ä¹ˆè¿è¡Œä¸€ä¸ªå­æ¨¡å—æ›´æ–°ä¹Ÿä¸ä¼šå‡ºç°é—®é¢˜ï¼Œæ­¤æ—¶ Git ä¼šåªæŠ“å–æ›´æ”¹è€Œå¹¶ä¸ä¼šè¦†ç›–å­æ¨¡å—ç›®å½•ä¸­æœªä¿å­˜çš„å·¥ä½œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule update --remote</span><br><span class="line">remote: Counting objects: 4, done.</span><br><span class="line">remote: Compressing objects: 100% (3/3), done.</span><br><span class="line">remote: Total 4 (delta 0), reused 4 (delta 0)</span><br><span class="line">Unpacking objects: 100% (4/4), done.</span><br><span class="line">From https://github.com/chaconinc/DbConnector</span><br><span class="line">   5d60ef9..c75e92a  stable     -&gt; origin/stable</span><br><span class="line">error: Your local changes to the following files would be overwritten by checkout:</span><br><span class="line">scripts/setup.sh</span><br><span class="line">Please, commit your changes or stash them before you can switch branches.</span><br><span class="line">Aborting</span><br><span class="line">Unable to checkout &apos;c75e92a2b3855c9e5b66f915308390d9db204aca&apos; in submodule path &apos;DbConnector&apos;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ åšäº†ä¸€äº›ä¸ä¸Šæ¸¸æ”¹åŠ¨å†²çªçš„æ”¹åŠ¨ï¼Œå½“è¿è¡Œæ›´æ–°æ—¶ Git ä¼šè®©ä½ çŸ¥é“ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule update --remote --merge</span><br><span class="line">Auto-merging scripts/setup.sh</span><br><span class="line">CONFLICT (content): Merge conflict in scripts/setup.sh</span><br><span class="line">Recorded preimage for &apos;scripts/setup.sh&apos;</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br><span class="line">Unable to merge &apos;c75e92a2b3855c9e5b66f915308390d9db204aca&apos; in submodule path &apos;DbConnector&apos;</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥è¿›å…¥å­æ¨¡å—ç›®å½•ä¸­ç„¶åå°±åƒå¹³æ—¶é‚£æ ·ä¿®å¤å†²çªã€‚</p><h5 id="å‘å¸ƒå­æ¨¡å—æ”¹åŠ¨"><a href="#å‘å¸ƒå­æ¨¡å—æ”¹åŠ¨" class="headerlink" title="å‘å¸ƒå­æ¨¡å—æ”¹åŠ¨"></a>å‘å¸ƒå­æ¨¡å—æ”¹åŠ¨</h5><p>ç°åœ¨æˆ‘ä»¬çš„å­æ¨¡å—ç›®å½•ä¸­æœ‰ä¸€äº›æ”¹åŠ¨ã€‚ å…¶ä¸­æœ‰ä¸€äº›æ˜¯æˆ‘ä»¬é€šè¿‡æ›´æ–°ä»ä¸Šæ¸¸å¼•å…¥çš„ï¼Œè€Œå¦ä¸€äº›æ˜¯æœ¬åœ°ç”Ÿæˆçš„ï¼Œç”±äºæˆ‘ä»¬è¿˜æ²¡æœ‰æ¨é€å®ƒä»¬ï¼Œæ‰€ä»¥å¯¹ä»»ä½•å…¶ä»–äººéƒ½ä¸å¯ç”¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br><span class="line">Submodule DbConnector c87d55d..82d2ad3:</span><br><span class="line">  &gt; Merge from origin/stable</span><br><span class="line">  &gt; updated setup script</span><br><span class="line">  &gt; unicode support</span><br><span class="line">  &gt; remove unnecessary method</span><br><span class="line">  &gt; add new option for conn pooling</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬åœ¨ä¸»é¡¹ç›®ä¸­æäº¤å¹¶æ¨é€ä½†å¹¶ä¸æ¨é€å­æ¨¡å—ä¸Šçš„æ”¹åŠ¨ï¼Œå…¶ä»–å°è¯•æ£€å‡ºæˆ‘ä»¬ä¿®æ”¹çš„äººä¼šé‡åˆ°éº»çƒ¦ï¼Œå› ä¸ºä»–ä»¬æ— æ³•å¾—åˆ°ä¾èµ–çš„å­æ¨¡å—æ”¹åŠ¨ã€‚ é‚£äº›æ”¹åŠ¨åªå­˜åœ¨äºæˆ‘ä»¬æœ¬åœ°çš„æ‹·è´ä¸­ã€‚</p><p>ä¸ºäº†ç¡®ä¿è¿™ä¸ä¼šå‘ç”Ÿï¼Œä½ å¯ä»¥è®© Git åœ¨æ¨é€åˆ°ä¸»é¡¹ç›®å‰æ£€æŸ¥æ‰€æœ‰å­æ¨¡å—æ˜¯å¦å·²æ¨é€ã€‚ <code>git push</code> å‘½ä»¤æ¥å—å¯ä»¥è®¾ç½®ä¸º â€œcheckâ€ æˆ– â€œon-demandâ€ çš„ <code>--recurse-submodules</code> å‚æ•°ã€‚ å¦‚æœä»»ä½•æäº¤çš„å­æ¨¡å—æ”¹åŠ¨æ²¡æœ‰æ¨é€é‚£ä¹ˆ â€œcheckâ€ é€‰é¡¹ä¼šç›´æ¥ä½¿ <code>push</code> æ“ä½œå¤±è´¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git push --recurse-submodules=check</span><br><span class="line">The following submodule paths contain changes that can</span><br><span class="line">not be found on any remote:</span><br><span class="line">  DbConnector</span><br><span class="line"></span><br><span class="line">Please try</span><br><span class="line"></span><br><span class="line">git push --recurse-submodules=on-demand</span><br><span class="line"></span><br><span class="line">or cd to the path and use</span><br><span class="line"></span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line">to push them to a remote.</span><br></pre></td></tr></table></figure><p>å¦‚ä½ æ‰€è§ï¼Œå®ƒä¹Ÿç»™æˆ‘ä»¬äº†ä¸€äº›æœ‰ç”¨çš„å»ºè®®ï¼ŒæŒ‡å¯¼æ¥ä¸‹æ¥è¯¥å¦‚ä½•åšã€‚ æœ€ç®€å•çš„é€‰é¡¹æ˜¯è¿›å…¥æ¯ä¸€ä¸ªå­æ¨¡å—ä¸­ç„¶åæ‰‹åŠ¨æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œç¡®ä¿å®ƒä»¬èƒ½è¢«å¤–éƒ¨è®¿é—®åˆ°ï¼Œä¹‹åå†æ¬¡å°è¯•è¿™æ¬¡æ¨é€ã€‚</p><p>å¦ä¸€ä¸ªé€‰é¡¹æ˜¯ä½¿ç”¨ â€œon-demandâ€ å€¼ï¼Œå®ƒä¼šå°è¯•ä¸ºä½ è¿™æ ·åšã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ git push --recurse-submodules=on-demand</span><br><span class="line">Pushing submodule &apos;DbConnector&apos;</span><br><span class="line">Counting objects: 9, done.</span><br><span class="line">Delta compression using up to 8 threads.</span><br><span class="line">Compressing objects: 100% (8/8), done.</span><br><span class="line">Writing objects: 100% (9/9), 917 bytes | 0 bytes/s, done.</span><br><span class="line">Total 9 (delta 3), reused 0 (delta 0)</span><br><span class="line">To https://github.com/chaconinc/DbConnector</span><br><span class="line">   c75e92a..82d2ad3  stable -&gt; stable</span><br><span class="line">Counting objects: 2, done.</span><br><span class="line">Delta compression using up to 8 threads.</span><br><span class="line">Compressing objects: 100% (2/2), done.</span><br><span class="line">Writing objects: 100% (2/2), 266 bytes | 0 bytes/s, done.</span><br><span class="line">Total 2 (delta 1), reused 0 (delta 0)</span><br><span class="line">To https://github.com/chaconinc/MainProject</span><br><span class="line">   3d6d338..9a377d1  master -&gt; master</span><br></pre></td></tr></table></figure><p>å¦‚ä½ æ‰€è§ï¼ŒGit è¿›å…¥åˆ° DbConnector æ¨¡å—ä¸­ç„¶ååœ¨æ¨é€ä¸»é¡¹ç›®å‰æ¨é€äº†å®ƒã€‚ å¦‚æœé‚£ä¸ªå­æ¨¡å—å› ä¸ºæŸäº›åŸå› æ¨é€å¤±è´¥ï¼Œä¸»é¡¹ç›®ä¹Ÿä¼šæ¨é€å¤±è´¥ã€‚</p><h5 id="åˆå¹¶å­æ¨¡å—æ”¹åŠ¨"><a href="#åˆå¹¶å­æ¨¡å—æ”¹åŠ¨" class="headerlink" title="åˆå¹¶å­æ¨¡å—æ”¹åŠ¨"></a>åˆå¹¶å­æ¨¡å—æ”¹åŠ¨</h5><p>å¦‚æœä½ å…¶ä»–äººåŒæ—¶æ”¹åŠ¨äº†ä¸€ä¸ªå­æ¨¡å—å¼•ç”¨ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå­æ¨¡å—çš„å†å²å·²ç»åˆ†å‰å¹¶ä¸”åœ¨çˆ¶é¡¹ç›®ä¸­åˆ†åˆ«æäº¤åˆ°äº†åˆ†å‰çš„åˆ†æ”¯ä¸Šï¼Œé‚£ä¹ˆä½ éœ€è¦åšä¸€äº›å·¥ä½œæ¥ä¿®å¤å®ƒã€‚</p><p>å¦‚æœä¸€ä¸ªæäº¤æ˜¯å¦ä¸€ä¸ªçš„ç›´æ¥ç¥–å…ˆï¼ˆä¸€ä¸ªå¿«è¿›å¼åˆå¹¶ï¼‰ï¼Œé‚£ä¹ˆ Git ä¼šç®€å•åœ°é€‰æ‹©ä¹‹åçš„æäº¤æ¥åˆå¹¶ï¼Œè¿™æ ·æ²¡ä»€ä¹ˆé—®é¢˜ã€‚</p><p>ä¸è¿‡ï¼ŒGit ç”šè‡³ä¸ä¼šå°è¯•å»è¿›è¡Œä¸€æ¬¡ç®€å•çš„åˆå¹¶ã€‚ å¦‚æœå­æ¨¡å—æäº¤å·²ç»åˆ†å‰ä¸”éœ€è¦åˆå¹¶ï¼Œé‚£ä½ ä¼šå¾—åˆ°ç±»ä¼¼ä¸‹é¢çš„ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git pull</span><br><span class="line">remote: Counting objects: 2, done.</span><br><span class="line">remote: Compressing objects: 100% (1/1), done.</span><br><span class="line">remote: Total 2 (delta 1), reused 2 (delta 1)</span><br><span class="line">Unpacking objects: 100% (2/2), done.</span><br><span class="line">From https://github.com/chaconinc/MainProject</span><br><span class="line">   9a377d1..eb974f8  master     -&gt; origin/master</span><br><span class="line">Fetching submodule DbConnector</span><br><span class="line">warning: Failed to merge submodule DbConnector (merge following commits not found)</span><br><span class="line">Auto-merging DbConnector</span><br><span class="line">CONFLICT (submodule): Merge conflict in DbConnector</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æœ¬è´¨ä¸Š Git åœ¨è¿™é‡ŒæŒ‡å‡ºäº†å­æ¨¡å—å†å²ä¸­çš„ä¸¤ä¸ªåˆ†æ”¯è®°å½•ç‚¹å·²ç»åˆ†å‰å¹¶ä¸”éœ€è¦åˆå¹¶ã€‚ å®ƒå°†å…¶è§£é‡Šä¸º â€œmerge following commits not foundâ€ ï¼ˆæœªæ‰¾åˆ°æ¥ä¸‹æ¥éœ€è¦åˆå¹¶çš„æäº¤ï¼‰ï¼Œè™½ç„¶è¿™æœ‰ç‚¹ä»¤äººå›°æƒ‘ï¼Œä¸è¿‡ä¹‹åæˆ‘ä»¬ä¼šè§£é‡Šä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ éœ€è¦å¼„æ¸…æ¥šå­æ¨¡å—åº”è¯¥å¤„äºå“ªç§çŠ¶æ€ã€‚ å¥‡æ€ªçš„æ˜¯ï¼ŒGit å¹¶ä¸ä¼šç»™ä½ å¤šå°‘èƒ½å¸®ä½ æ‘†è„±å›°å¢ƒçš„ä¿¡æ¯ï¼Œç”šè‡³è¿ä¸¤è¾¹æäº¤å†å²ä¸­çš„ SHA-1 å€¼éƒ½æ²¡æœ‰ã€‚ å¹¸è¿çš„æ˜¯ï¼Œè¿™å¾ˆå®¹æ˜“è§£å†³ã€‚ å¦‚æœä½ è¿è¡Œ <code>git diff</code>ï¼Œå°±ä¼šå¾—åˆ°è¯•å›¾åˆå¹¶çš„ä¸¤ä¸ªåˆ†æ”¯ä¸­è®°å½•çš„æäº¤çš„ SHA-1 å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br><span class="line">diff --cc DbConnector</span><br><span class="line">index eb41d76,c771610..0000000</span><br><span class="line">--- a/DbConnector</span><br><span class="line">+++ b/DbConnector</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œ<code>eb41d76</code> æ˜¯æˆ‘ä»¬çš„å­æ¨¡å—ä¸­å¤§å®¶å…±æœ‰çš„æäº¤ï¼Œè€Œ <code>c771610</code> æ˜¯ä¸Šæ¸¸æ‹¥æœ‰çš„æäº¤ã€‚ å¦‚æœæˆ‘ä»¬è¿›å…¥å­æ¨¡å—ç›®å½•ä¸­ï¼Œå®ƒåº”è¯¥å·²ç»åœ¨ <code>eb41d76</code> ä¸Šäº†ï¼Œå› ä¸ºåˆå¹¶æ²¡æœ‰åŠ¨è¿‡å®ƒã€‚ å¦‚æœä¸æ˜¯çš„è¯ï¼Œæ— è®ºä»€ä¹ˆåŸå› ï¼Œä½ éƒ½å¯ä»¥ç®€å•åœ°åˆ›å»ºå¹¶æ£€å‡ºä¸€ä¸ªæŒ‡å‘å®ƒçš„åˆ†æ”¯ã€‚</p><p>æ¥è‡ªå¦ä¸€è¾¹çš„æäº¤çš„ SHA-1 å€¼æ¯”è¾ƒé‡è¦ã€‚ å®ƒæ˜¯éœ€è¦ä½ æ¥åˆå¹¶è§£å†³çš„ã€‚ ä½ å¯ä»¥å°è¯•ç›´æ¥é€šè¿‡ SHA-1 åˆå¹¶ï¼Œä¹Ÿå¯ä»¥ä¸ºå®ƒåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ç„¶åå°è¯•åˆå¹¶ã€‚ æˆ‘ä»¬å»ºè®®åè€…ï¼Œå“ªæ€•åªæ˜¯ä¸ºäº†ä¸€ä¸ªæ›´æ¼‚äº®çš„åˆå¹¶æäº¤ä¿¡æ¯ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°†ä¼šè¿›å…¥å­æ¨¡å—ç›®å½•ï¼ŒåŸºäº <code>git diff</code> çš„ç¬¬äºŒä¸ª SHA åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ç„¶åæ‰‹åŠ¨åˆå¹¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ cd DbConnector</span><br><span class="line"></span><br><span class="line">$ git rev-parse HEAD</span><br><span class="line">eb41d764bccf88be77aced643c13a7fa86714135</span><br><span class="line"></span><br><span class="line">$ git branch try-merge c771610</span><br><span class="line">(DbConnector) $ git merge try-merge</span><br><span class="line">Auto-merging src/main.c</span><br><span class="line">CONFLICT (content): Merge conflict in src/main.c</span><br><span class="line">Recorded preimage for &apos;src/main.c&apos;</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨è¿™å„¿å¾—åˆ°äº†ä¸€ä¸ªçœŸæ­£çš„åˆå¹¶å†²çªï¼Œæ‰€ä»¥å¦‚æœæƒ³è¦è§£å†³å¹¶æäº¤å®ƒï¼Œé‚£ä¹ˆåªéœ€ç®€å•åœ°é€šè¿‡ç»“æœæ¥æ›´æ–°ä¸»é¡¹ç›®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ vim src/main.c (1)</span><br><span class="line">$ git add src/main.c</span><br><span class="line">$ git commit -am &apos;merged our changes&apos;</span><br><span class="line">Recorded resolution for &apos;src/main.c&apos;.</span><br><span class="line">[master 9fd905e] merged our changes</span><br><span class="line"></span><br><span class="line">$ cd .. (2)</span><br><span class="line">$ git diff (3)</span><br><span class="line">diff --cc DbConnector</span><br><span class="line">index eb41d76,c771610..0000000</span><br><span class="line">--- a/DbConnector</span><br><span class="line">+++ b/DbConnector</span><br><span class="line">@@@ -1,1 -1,1 +1,1 @@@</span><br><span class="line">- Subproject commit eb41d764bccf88be77aced643c13a7fa86714135</span><br><span class="line"> -Subproject commit c77161012afbbe1f58b5053316ead08f4b7e6d1d</span><br><span class="line">++Subproject commit 9fd905e5d7f45a0d4cbc43d1ee550f16a30e825a</span><br><span class="line">$ git add DbConnector (4)</span><br><span class="line"></span><br><span class="line">$ git commit -m &quot;Merge Tom&apos;s Changes&quot; (5)</span><br><span class="line">[master 10d2c60] Merge Tom&apos;s Changes</span><br></pre></td></tr></table></figure><ol><li><p>é¦–å…ˆè§£å†³å†²çª</p></li><li><p>ç„¶åè¿”å›åˆ°ä¸»é¡¹ç›®ç›®å½•ä¸­</p></li><li><p>å†æ¬¡æ£€æŸ¥ SHA-1 å€¼</p></li><li><p>è§£å†³å†²çªçš„å­æ¨¡å—è®°å½•</p></li><li><p>æäº¤æˆ‘ä»¬çš„åˆå¹¶</p></li></ol><p>è¿™å¯èƒ½ä¼šè®©ä½ æœ‰ç‚¹å„¿å›°æƒ‘ï¼Œä½†å®ƒç¡®å®ä¸éš¾ã€‚</p><p>æœ‰è¶£çš„æ˜¯ï¼ŒGit è¿˜èƒ½å¤„ç†å¦ä¸€ç§æƒ…å†µã€‚ å¦‚æœå­æ¨¡å—ç›®å½•ä¸­å­˜åœ¨ç€è¿™æ ·ä¸€ä¸ªåˆå¹¶æäº¤ï¼Œå®ƒçš„å†å²ä¸­åŒ…å«äº†çš„ä¸¤è¾¹çš„æäº¤ï¼Œé‚£ä¹ˆ Git ä¼šå»ºè®®ä½ å°†å®ƒä½œä¸ºä¸€ä¸ªå¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚ å®ƒçœ‹åˆ°æœ‰äººåœ¨å­æ¨¡å—é¡¹ç›®çš„æŸä¸€ç‚¹ä¸Šåˆå¹¶äº†åŒ…å«è¿™ä¸¤æ¬¡æäº¤çš„åˆ†æ”¯ï¼Œæ‰€ä»¥ä½ å¯èƒ½æƒ³è¦é‚£ä¸ªã€‚</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå‰é¢çš„é”™è¯¯ä¿¡æ¯æ˜¯ â€œmerge following commits not foundâ€ï¼Œå› ä¸ºå®ƒä¸èƒ½ è¿™æ · åšã€‚ å®ƒè®©äººå›°æƒ‘æ˜¯å› ä¸ºè°èƒ½æƒ³åˆ°å®ƒä¼šå°è¯•è¿™æ ·åšï¼Ÿ</p><p>å¦‚æœå®ƒæ‰¾åˆ°äº†ä¸€ä¸ªå¯ä»¥æ¥å—çš„åˆå¹¶æäº¤ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git merge origin/master</span><br><span class="line">warning: Failed to merge submodule DbConnector (not fast-forward)</span><br><span class="line">Found a possible merge resolution for the submodule:</span><br><span class="line"> 9fd905e5d7f45a0d4cbc43d1ee550f16a30e825a: &gt; merged our changes</span><br><span class="line">If this is correct simply add it to the index for example</span><br><span class="line">by using:</span><br><span class="line"></span><br><span class="line">  git update-index --cacheinfo 160000 9fd905e5d7f45a0d4cbc43d1ee550f16a30e825a &quot;DbConnector&quot;</span><br><span class="line"></span><br><span class="line">which will accept this suggestion.</span><br><span class="line">Auto-merging DbConnector</span><br><span class="line">CONFLICT (submodule): Merge conflict in DbConnector</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure><p>å®ƒä¼šå»ºè®®ä½ æ›´æ–°ç´¢å¼•ï¼Œå°±åƒä½ è¿è¡Œäº† <code>git add</code> é‚£æ ·ï¼Œè¿™æ ·ä¼šæ¸…é™¤å†²çªç„¶åæäº¤ã€‚ä¸è¿‡ä½ å¯èƒ½ä¸åº”è¯¥è¿™æ ·åšã€‚ä½ å¯ä»¥è½»æ¾åœ°è¿›å…¥å­æ¨¡å—ç›®å½•ï¼ŒæŸ¥çœ‹å·®å¼‚æ˜¯ä»€ä¹ˆï¼Œå¿«è¿›åˆ°è¿™æ¬¡æäº¤ï¼Œæ°å½“åœ°æµ‹è¯•ï¼Œç„¶åæäº¤å®ƒã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cd DbConnector/</span><br><span class="line">$ git merge 9fd905e</span><br><span class="line">Updating eb41d76..9fd905e</span><br><span class="line">Fast-forward</span><br><span class="line"></span><br><span class="line">$ cd ..</span><br><span class="line">$ git add DbConnector</span><br><span class="line">$ git commit -am &apos;Fast forwarded to a common submodule child&apos;</span><br></pre></td></tr></table></figure><p>è¿™äº›å‘½ä»¤å®Œæˆäº†åŒä¸€ä»¶äº‹ï¼Œä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼ä½ è‡³å°‘å¯ä»¥éªŒè¯å·¥ä½œæ˜¯å¦æœ‰æ•ˆï¼Œä»¥åŠå½“ä½ åœ¨å®Œæˆæ—¶å¯ä»¥ç¡®ä¿å­æ¨¡å—ç›®å½•ä¸­æœ‰ä½ çš„ä»£ç ã€‚</p><h4 id="å­æ¨¡å—æŠ€å·§"><a href="#å­æ¨¡å—æŠ€å·§" class="headerlink" title="å­æ¨¡å—æŠ€å·§"></a>å­æ¨¡å—æŠ€å·§</h4><p>ä½ å¯ä»¥åšå‡ ä»¶äº‹æƒ…æ¥è®©ç”¨å­æ¨¡å—å·¥ä½œè½»æ¾ä¸€ç‚¹å„¿ã€‚</p><h5 id="å­æ¨¡å—éå†"><a href="#å­æ¨¡å—éå†" class="headerlink" title="å­æ¨¡å—éå†"></a>å­æ¨¡å—éå†</h5><p>æœ‰ä¸€ä¸ª <code>foreach</code> å­æ¨¡å—å‘½ä»¤ï¼Œå®ƒèƒ½åœ¨æ¯ä¸€ä¸ªå­æ¨¡å—ä¸­è¿è¡Œä»»æ„å‘½ä»¤ã€‚ å¦‚æœé¡¹ç›®ä¸­åŒ…å«äº†å¤§é‡å­æ¨¡å—ï¼Œè¿™ä¼šéå¸¸æœ‰ç”¨ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦å¼€å§‹å¼€å‘ä¸€é¡¹æ–°åŠŸèƒ½æˆ–è€…ä¿®å¤ä¸€äº›é”™è¯¯ï¼Œå¹¶ä¸”éœ€è¦åœ¨å‡ ä¸ªå­æ¨¡å—å†…å·¥ä½œã€‚ æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°ä¿å­˜æ‰€æœ‰å­æ¨¡å—çš„å·¥ä½œè¿›åº¦ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule foreach &apos;git stash&apos;</span><br><span class="line">Entering &apos;CryptoLibrary&apos;</span><br><span class="line">No local changes to save</span><br><span class="line">Entering &apos;DbConnector&apos;</span><br><span class="line">Saved working directory and index state WIP on stable: 82d2ad3 Merge from origin/stable</span><br><span class="line">HEAD is now at 82d2ad3 Merge from origin/stable</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œå¹¶å°†æ‰€æœ‰å­æ¨¡å—éƒ½åˆ‡æ¢è¿‡å»ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule foreach &apos;git checkout -b featureA&apos;</span><br><span class="line">Entering &apos;CryptoLibrary&apos;</span><br><span class="line">Switched to a new branch &apos;featureA&apos;</span><br><span class="line">Entering &apos;DbConnector&apos;</span><br><span class="line">Switched to a new branch &apos;featureA&apos;</span><br></pre></td></tr></table></figure><p>ä½ åº”è¯¥æ˜ç™½ã€‚ èƒ½å¤Ÿç”Ÿæˆä¸€ä¸ªä¸»é¡¹ç›®ä¸æ‰€æœ‰å­é¡¹ç›®çš„æ”¹åŠ¨çš„ç»Ÿä¸€å·®å¼‚æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">$ git diff; git submodule foreach &apos;git diff&apos;</span><br><span class="line">Submodule DbConnector contains modified content</span><br><span class="line">diff --git a/src/main.c b/src/main.c</span><br><span class="line">index 210f1ae..1f0acdc 100644</span><br><span class="line">--- a/src/main.c</span><br><span class="line">+++ b/src/main.c</span><br><span class="line">@@ -245,6 +245,8 @@ static int handle_alias(int *argcp, const char ***argv)</span><br><span class="line"></span><br><span class="line">      commit_pager_choice();</span><br><span class="line"></span><br><span class="line">+     url = url_decode(url_orig);</span><br><span class="line">+</span><br><span class="line">      /* build alias_argv */</span><br><span class="line">      alias_argv = xmalloc(sizeof(*alias_argv) * (argc + 1));</span><br><span class="line">      alias_argv[0] = alias_string + 1;</span><br><span class="line">Entering &apos;DbConnector&apos;</span><br><span class="line">diff --git a/src/db.c b/src/db.c</span><br><span class="line">index 1aaefb6..5297645 100644</span><br><span class="line">--- a/src/db.c</span><br><span class="line">+++ b/src/db.c</span><br><span class="line">@@ -93,6 +93,11 @@ char *url_decode_mem(const char *url, int len)</span><br><span class="line">        return url_decode_internal(&amp;url, len, NULL, &amp;out, 0);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">+char *url_decode(const char *url)</span><br><span class="line">+&#123;</span><br><span class="line">+       return url_decode_mem(url, strlen(url));</span><br><span class="line">+&#125;</span><br><span class="line">+</span><br><span class="line"> char *url_decode_parameter_name(const char **query)</span><br><span class="line"> &#123;</span><br><span class="line">        struct strbuf out = STRBUF_INIT;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°å­æ¨¡å—ä¸­å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°å¹¶åœ¨ä¸»é¡¹ç›®ä¸­è°ƒç”¨äº†å®ƒã€‚ è¿™æ˜æ˜¾æ˜¯ä¸ªç®€åŒ–äº†çš„ä¾‹å­ï¼Œä½†æ˜¯å¸Œæœ›å®ƒèƒ½è®©ä½ æ˜ç™½è¿™ç§æ–¹æ³•çš„ç”¨å¤„ã€‚</p><h5 id="æœ‰ç”¨çš„åˆ«å"><a href="#æœ‰ç”¨çš„åˆ«å" class="headerlink" title="æœ‰ç”¨çš„åˆ«å"></a>æœ‰ç”¨çš„åˆ«å</h5><p>ä½ å¯èƒ½æƒ³ä¸ºå…¶ä¸­ä¸€äº›å‘½ä»¤è®¾ç½®åˆ«åï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½ä¼šéå¸¸é•¿è€Œä½ åˆä¸èƒ½è®¾ç½®é€‰é¡¹ä½œä¸ºå®ƒä»¬çš„é»˜è®¤é€‰é¡¹ã€‚ æˆ‘ä»¬åœ¨ Git åˆ«å ä»‹ç»äº†è®¾ç½® Git åˆ«åï¼Œä½†æ˜¯å¦‚æœä½ è®¡åˆ’åœ¨ Git ä¸­å¤§é‡ä½¿ç”¨å­æ¨¡å—çš„è¯ï¼Œè¿™é‡Œæœ‰ä¸€äº›ä¾‹å­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git config alias.sdiff &apos;!&apos;&quot;git diff &amp;&amp; git submodule foreach &apos;git diff&apos;&quot;</span><br><span class="line">$ git config alias.spush &apos;push --recurse-submodules=on-demand&apos;</span><br><span class="line">$ git config alias.supdate &apos;submodule update --remote --merge&apos;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å½“ä½ æƒ³è¦æ›´æ–°å­æ¨¡å—æ—¶å¯ä»¥ç®€å•åœ°è¿è¡Œ <code>git supdate</code>ï¼Œæˆ– <code>git spush</code> æ£€æŸ¥å­æ¨¡å—ä¾èµ–åæ¨é€ã€‚</p><h4 id="å­æ¨¡å—çš„é—®é¢˜"><a href="#å­æ¨¡å—çš„é—®é¢˜" class="headerlink" title="å­æ¨¡å—çš„é—®é¢˜"></a>å­æ¨¡å—çš„é—®é¢˜</h4><p>ç„¶è€Œä½¿ç”¨å­æ¨¡å—è¿˜æ˜¯æœ‰ä¸€äº›å°é—®é¢˜ã€‚</p><p>ä¾‹å¦‚åœ¨æœ‰å­æ¨¡å—çš„é¡¹ç›®ä¸­åˆ‡æ¢åˆ†æ”¯å¯èƒ½ä¼šé€ æˆéº»çƒ¦ã€‚ å¦‚æœä½ åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œåœ¨å…¶ä¸­æ·»åŠ ä¸€ä¸ªå­æ¨¡å—ï¼Œä¹‹ååˆ‡æ¢åˆ°æ²¡æœ‰è¯¥å­æ¨¡å—çš„åˆ†æ”¯ä¸Šæ—¶ï¼Œä½ ä»ç„¶ä¼šæœ‰ä¸€ä¸ªè¿˜æœªè·Ÿè¸ªçš„å­æ¨¡å—ç›®å½•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b add-crypto</span><br><span class="line">Switched to a new branch &apos;add-crypto&apos;</span><br><span class="line"></span><br><span class="line">$ git submodule add https://github.com/chaconinc/CryptoLibrary</span><br><span class="line">Cloning into &apos;CryptoLibrary&apos;...</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$ git commit -am &apos;adding crypto library&apos;</span><br><span class="line">[add-crypto 4445836] adding crypto library</span><br><span class="line"> 2 files changed, 4 insertions(+)</span><br><span class="line"> create mode 160000 CryptoLibrary</span><br><span class="line"></span><br><span class="line">$ git checkout master</span><br><span class="line">warning: unable to rmdir CryptoLibrary: Directory not empty</span><br><span class="line">Switched to branch &apos;master&apos;</span><br><span class="line">Your branch is up-to-date with &apos;origin/master&apos;.</span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with &apos;origin/master&apos;.</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</span><br><span class="line"></span><br><span class="line">CryptoLibrary/</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use &quot;git add&quot; to track)</span><br></pre></td></tr></table></figure><p>ç§»é™¤é‚£ä¸ªç›®å½•å¹¶ä¸å›°éš¾ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªç›®å½•åœ¨é‚£å„¿ä¼šè®©äººæœ‰ä¸€ç‚¹å›°æƒ‘ã€‚ å¦‚æœä½ ç§»é™¤å®ƒç„¶ååˆ‡æ¢å›æœ‰é‚£ä¸ªå­æ¨¡å—çš„åˆ†æ”¯ï¼Œéœ€è¦è¿è¡Œ <code>submodule update --init</code> æ¥é‡æ–°å»ºç«‹å’Œå¡«å……ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git clean -fdx</span><br><span class="line">Removing CryptoLibrary/</span><br><span class="line"></span><br><span class="line">$ git checkout add-crypto</span><br><span class="line">Switched to branch &apos;add-crypto&apos;</span><br><span class="line"></span><br><span class="line">$ ls CryptoLibrary/</span><br><span class="line"></span><br><span class="line">$ git submodule update --init</span><br><span class="line">Submodule path &apos;CryptoLibrary&apos;: checked out &apos;b8dda6aa182ea4464f3f3264b11e0268545172af&apos;</span><br><span class="line"></span><br><span class="line">$ ls CryptoLibrary/</span><br><span class="line">Makefileincludesscriptssrc</span><br></pre></td></tr></table></figure><p>å†è¯´ä¸€éï¼Œè¿™çœŸçš„ä¸éš¾ï¼Œåªæ˜¯ä¼šè®©äººæœ‰ç‚¹å„¿å›°æƒ‘ã€‚</p><p>å¦ä¸€ä¸ªä¸»è¦çš„å‘Šè¯«æ˜¯è®¸å¤šäººé‡åˆ°äº†å°†å­ç›®å½•è½¬æ¢ä¸ºå­æ¨¡å—çš„é—®é¢˜ã€‚ å¦‚æœä½ åœ¨é¡¹ç›®ä¸­å·²ç»è·Ÿè¸ªäº†ä¸€äº›æ–‡ä»¶ï¼Œç„¶åæƒ³è¦å°†å®ƒä»¬ç§»åŠ¨åˆ°ä¸€ä¸ªå­æ¨¡å—ä¸­ï¼Œé‚£ä¹ˆè¯·åŠ¡å¿…å°å¿ƒï¼Œå¦åˆ™ Git ä¼šå¯¹ä½ å‘è„¾æ°”ã€‚ å‡è®¾é¡¹ç›®å†…æœ‰ä¸€äº›æ–‡ä»¶åœ¨å­ç›®å½•ä¸­ï¼Œä½ æƒ³è¦å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªå­æ¨¡å—ã€‚ å¦‚æœåˆ é™¤å­ç›®å½•ç„¶åè¿è¡Œ <code>submodule add</code>ï¼ŒGit ä¼šæœä½ å¤§å–Šï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ rm -Rf CryptoLibrary/</span><br><span class="line">$ git submodule add https://github.com/chaconinc/CryptoLibrary</span><br><span class="line">&apos;CryptoLibrary&apos; already exists in the index</span><br></pre></td></tr></table></figure><p>ä½ å¿…é¡»è¦å…ˆå–æ¶ˆæš‚å­˜ <code>CryptoLibrary</code> ç›®å½•ã€‚ ç„¶åæ‰å¯ä»¥æ·»åŠ å­æ¨¡å—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git rm -r CryptoLibrary</span><br><span class="line">$ git submodule add https://github.com/chaconinc/CryptoLibrary</span><br><span class="line">Cloning into &apos;CryptoLibrary&apos;...</span><br><span class="line">remote: Counting objects: 11, done.</span><br><span class="line">remote: Compressing objects: 100% (10/10), done.</span><br><span class="line">remote: Total 11 (delta 0), reused 11 (delta 0)</span><br><span class="line">Unpacking objects: 100% (11/11), done.</span><br><span class="line">Checking connectivity... done.</span><br></pre></td></tr></table></figure><p>ç°åœ¨å‡è®¾ä½ åœ¨ä¸€ä¸ªåˆ†æ”¯ä¸‹åšäº†è¿™æ ·çš„å·¥ä½œã€‚ å¦‚æœå°è¯•åˆ‡æ¢å›çš„åˆ†æ”¯ä¸­é‚£äº›æ–‡ä»¶è¿˜åœ¨å­ç›®å½•è€Œéå­æ¨¡å—ä¸­æ—¶â€”â€”ä½ ä¼šå¾—åˆ°è¿™ä¸ªé”™è¯¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">error: The following untracked working tree files would be overwritten by checkout:</span><br><span class="line">  CryptoLibrary/Makefile</span><br><span class="line">  CryptoLibrary/includes/crypto.h</span><br><span class="line">  ...</span><br><span class="line">Please move or remove them before you can switch branches.</span><br><span class="line">Aborting</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥é€šè¿‡ <code>checkout -f</code> æ¥å¼ºåˆ¶åˆ‡æ¢ï¼Œä½†æ˜¯è¦å°å¿ƒï¼Œå¦‚æœå…¶ä¸­è¿˜æœ‰æœªä¿å­˜çš„ä¿®æ”¹ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šæŠŠå®ƒä»¬è¦†ç›–æ‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -f master</span><br><span class="line">warning: unable to rmdir CryptoLibrary: Directory not empty</span><br><span class="line">Switched to branch &apos;master&apos;</span><br></pre></td></tr></table></figure><p>å½“ä½ åˆ‡æ¢å›æ¥ä¹‹åï¼Œå› ä¸ºæŸäº›åŸå› ä½ å¾—åˆ°äº†ä¸€ä¸ªç©ºçš„ <code>CryptoLibrary</code> ç›®å½•ï¼Œå¹¶ä¸” <code>git submodule update</code> ä¹Ÿæ— æ³•ä¿®å¤å®ƒã€‚ ä½ éœ€è¦è¿›å…¥åˆ°å­æ¨¡å—ç›®å½•ä¸­è¿è¡Œ <code>git checkout .</code> æ¥æ‰¾å›æ‰€æœ‰çš„æ–‡ä»¶ã€‚ ä½ ä¹Ÿå¯ä»¥é€šè¿‡ <code>submodule foreach</code> è„šæœ¬æ¥ä¸ºå¤šä¸ªå­æ¨¡å—è¿è¡Œå®ƒã€‚</p><p>è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œè¿‘æ¥å­æ¨¡å—ä¼šå°†å®ƒä»¬çš„æ‰€æœ‰ Git æ•°æ®ä¿å­˜åœ¨é¡¶çº§é¡¹ç›®çš„ <code>.git</code> ç›®å½•ä¸­ï¼Œæ‰€ä»¥ä¸åƒæ—§ç‰ˆæœ¬çš„ Gitï¼Œæ‘§æ¯ä¸€ä¸ªå­æ¨¡å—ç›®å½•å¹¶ä¸ä¼šä¸¢å¤±ä»»ä½•æäº¤æˆ–åˆ†æ”¯ã€‚</p><p>æ‹¥æœ‰äº†è¿™äº›å·¥å…·ï¼Œä½¿ç”¨å­æ¨¡å—ä¼šæˆä¸ºå¯ä»¥åœ¨å‡ ä¸ªç›¸å…³ä½†å´åˆ†ç¦»çš„é¡¹ç›®ä¸ŠåŒæ—¶å¼€å‘çš„ç›¸å½“ç®€å•æœ‰æ•ˆçš„æ–¹æ³•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitï¼šåˆ†å¸ƒå¼</title>
      <link href="/2018/06/09/Git%EF%BC%9A%E5%88%86%E5%B8%83%E5%BC%8F/"/>
      <url>/2018/06/09/Git%EF%BC%9A%E5%88%86%E5%B8%83%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>ä½ ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ªè¿œç¨‹ Git ç‰ˆæœ¬åº“ï¼Œèƒ½ä¸ºæ‰€æœ‰å¼€å‘è€…å…±äº«ä»£ç æä¾›æœåŠ¡ï¼Œåœ¨ä¸€ä¸ªæœ¬åœ°å·¥ä½œæµç¨‹ä¸‹ï¼Œä½ ä¹Ÿå·²ç»ç†Ÿæ‚‰äº†åŸºæœ¬ Git å‘½ä»¤ã€‚ä½ ç°åœ¨å¯ä»¥å­¦ä¹ å¦‚ä½•åˆ©ç”¨ Git æä¾›çš„ä¸€äº›åˆ†å¸ƒå¼å·¥ä½œæµç¨‹äº†ã€‚</p><p>è¿™ä¸€ç« ä¸­ï¼Œä½ å°†ä¼šå­¦ä¹ å¦‚ä½•ä½œä¸ºè´¡çŒ®è€…æˆ–æ•´åˆè€…ï¼Œåœ¨ä¸€ä¸ªåˆ†å¸ƒå¼åä½œçš„ç¯å¢ƒä¸­ä½¿ç”¨ Gitã€‚ ä½ ä¼šå­¦ä¹ ä¸ºä¸€ä¸ªé¡¹ç›®æˆåŠŸåœ°è´¡çŒ®ä»£ç ï¼Œå¹¶æ¥è§¦ä¸€äº›æœ€ä½³å®è·µæ–¹å¼ï¼Œè®©ä½ å’Œé¡¹ç›®çš„ç»´æŠ¤è€…èƒ½è½»æ¾åœ°å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚å¦å¤–ï¼Œä½ ä¹Ÿä¼šå­¦åˆ°å¦‚ä½•ç®¡ç†æœ‰å¾ˆå¤šå¼€å‘è€…æäº¤è´¡çŒ®çš„é¡¹ç›®ã€‚</p><a id="more"></a><h3 id="åˆ†å¸ƒå¼å·¥ä½œæµç¨‹"><a href="#åˆ†å¸ƒå¼å·¥ä½œæµç¨‹" class="headerlink" title="åˆ†å¸ƒå¼å·¥ä½œæµç¨‹"></a>åˆ†å¸ƒå¼å·¥ä½œæµç¨‹</h3><p>åŒä¼ ç»Ÿçš„é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆCVCSï¼‰ä¸åŒï¼ŒGit çš„åˆ†å¸ƒå¼ç‰¹æ€§ä½¿å¾—å¼€å‘è€…é—´çš„åä½œå˜å¾—æ›´åŠ çµæ´»å¤šæ ·ã€‚ åœ¨é›†ä¸­å¼ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªå¼€å‘è€…å°±åƒæ˜¯è¿æ¥åœ¨é›†çº¿å™¨ä¸Šçš„èŠ‚ç‚¹ï¼Œå½¼æ­¤çš„å·¥ä½œæ–¹å¼å¤§ä½“ç›¸åƒã€‚ è€Œåœ¨ Git ä¸­ï¼Œæ¯ä¸ªå¼€å‘è€…åŒæ—¶æ‰®æ¼”ç€èŠ‚ç‚¹å’Œé›†çº¿å™¨çš„è§’è‰²â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªå¼€å‘è€…æ—¢å¯ä»¥å°†è‡ªå·±çš„ä»£ç è´¡çŒ®åˆ°å…¶ä»–çš„ä»“åº“ä¸­ï¼ŒåŒæ—¶ä¹Ÿèƒ½ç»´æŠ¤è‡ªå·±çš„å…¬å¼€ä»“åº“ï¼Œè®©å…¶ä»–äººå¯ä»¥åœ¨å…¶åŸºç¡€ä¸Šå·¥ä½œå¹¶è´¡çŒ®ä»£ç ã€‚ ç”±æ­¤ï¼ŒGit çš„åˆ†å¸ƒå¼åä½œå¯ä»¥ä¸ºä½ çš„é¡¹ç›®å’Œå›¢é˜Ÿè¡ç”Ÿå‡ºç§ç§ä¸åŒçš„å·¥ä½œæµç¨‹ï¼Œæ¥ä¸‹æ¥çš„ç« èŠ‚ä¼šä»‹ç»å‡ ç§åˆ©ç”¨äº† Git çš„è¿™ç§çµæ´»æ€§çš„å¸¸è§åº”ç”¨æ–¹å¼ã€‚ æˆ‘ä»¬å°†è®¨è®ºæ¯ç§æ–¹å¼çš„ä¼˜ç‚¹ä»¥åŠå¯èƒ½çš„ç¼ºç‚¹ï¼›ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨å…¶ä¸­çš„æŸä¸€ç§ï¼Œæˆ–è€…å°†å®ƒä»¬çš„ç‰¹æ€§æ··åˆæ­é…ä½¿ç”¨ã€‚</p><h4 id="é›†ä¸­å¼å·¥ä½œæµ"><a href="#é›†ä¸­å¼å·¥ä½œæµ" class="headerlink" title="é›†ä¸­å¼å·¥ä½œæµ"></a>é›†ä¸­å¼å·¥ä½œæµ</h4><p>é›†ä¸­å¼ç³»ç»Ÿä¸­é€šå¸¸ä½¿ç”¨çš„æ˜¯å•ç‚¹åä½œæ¨¡å‹â€”â€”é›†ä¸­å¼å·¥ä½œæµã€‚ ä¸€ä¸ªä¸­å¿ƒé›†çº¿å™¨ï¼Œæˆ–è€…è¯´ä»“åº“ï¼Œå¯ä»¥æ¥å—ä»£ç ï¼Œæ‰€æœ‰äººå°†è‡ªå·±çš„å·¥ä½œä¸ä¹‹åŒæ­¥ã€‚ è‹¥å¹²ä¸ªå¼€å‘è€…åˆ™ä½œä¸ºèŠ‚ç‚¹â€”â€”ä¹Ÿå°±æ˜¯ä¸­å¿ƒä»“åº“çš„æ¶ˆè´¹è€…â€”â€”å¹¶ä¸”ä¸å…¶è¿›è¡ŒåŒæ­¥ã€‚</p><p><img src="git-chapter-1/img1.png" alt></p><p>è¿™æ„å‘³ç€å¦‚æœä¸¤ä¸ªå¼€å‘è€…ä»ä¸­å¿ƒä»“åº“å…‹éš†ä»£ç ä¸‹æ¥ï¼ŒåŒæ—¶ä½œäº†ä¸€äº›ä¿®æ”¹ï¼Œé‚£ä¹ˆåªæœ‰ç¬¬ä¸€ä¸ªå¼€å‘è€…å¯ä»¥é¡ºåˆ©åœ°æŠŠæ•°æ®æ¨é€å›å…±äº«æœåŠ¡å™¨ã€‚ ç¬¬äºŒä¸ªå¼€å‘è€…åœ¨æ¨é€ä¿®æ”¹ä¹‹å‰ï¼Œå¿…é¡»å…ˆå°†ç¬¬ä¸€ä¸ªäººçš„å·¥ä½œåˆå¹¶è¿›æ¥ï¼Œè¿™æ ·æ‰ä¸ä¼šè¦†ç›–ç¬¬ä¸€ä¸ªäººçš„ä¿®æ”¹ã€‚ è¿™å’Œ Subversion ï¼ˆæˆ–ä»»ä½• CVCSï¼‰ä¸­çš„æ¦‚å¿µä¸€æ ·ï¼Œè€Œä¸”è¿™ä¸ªæ¨¡å¼ä¹Ÿå¯ä»¥å¾ˆå¥½åœ°è¿ç”¨åˆ° Git ä¸­ã€‚</p><p>å¦‚æœåœ¨å…¬å¸æˆ–è€…å›¢é˜Ÿä¸­ï¼Œä½ å·²ç»ä¹ æƒ¯äº†ä½¿ç”¨è¿™ç§é›†ä¸­å¼å·¥ä½œæµç¨‹ï¼Œå®Œå…¨å¯ä»¥ç»§ç»­é‡‡ç”¨è¿™ç§ç®€å•çš„æ¨¡å¼ã€‚ åªéœ€è¦æ­å»ºå¥½ä¸€ä¸ªä¸­å¿ƒä»“åº“ï¼Œå¹¶ç»™å¼€å‘å›¢é˜Ÿä¸­çš„æ¯ä¸ªäººæ¨é€æ•°æ®çš„æƒé™ï¼Œå°±å¯ä»¥å¼€å±•å·¥ä½œäº†ã€‚Git ä¸ä¼šè®©ç”¨æˆ·è¦†ç›–å½¼æ­¤çš„ä¿®æ”¹ã€‚ ä¾‹å¦‚ John å’Œ Jessica åŒæ—¶å¼€å§‹å·¥ä½œã€‚ John å®Œæˆäº†ä»–çš„ä¿®æ”¹å¹¶æ¨é€åˆ°æœåŠ¡å™¨ã€‚ æ¥ç€ Jessica å°è¯•æäº¤å¥¹è‡ªå·±çš„ä¿®æ”¹ï¼Œå´é­åˆ°æœåŠ¡å™¨æ‹’ç»ã€‚ å¥¹è¢«å‘ŠçŸ¥å¥¹çš„ä¿®æ”¹æ­£é€šè¿‡éå¿«è¿›å¼ï¼ˆnon-fast-forwardï¼‰çš„æ–¹å¼æ¨é€ï¼Œåªæœ‰å°†æ•°æ®æŠ“å–ä¸‹æ¥å¹¶ä¸”åˆå¹¶åæ–¹èƒ½æ¨é€ã€‚ è¿™ç§æ¨¡å¼çš„å·¥ä½œæµç¨‹çš„ä½¿ç”¨éå¸¸å¹¿æ³›ï¼Œå› ä¸ºå¤§å¤šæ•°äººå¯¹å…¶å¾ˆç†Ÿæ‚‰ä¹Ÿå¾ˆä¹ æƒ¯ã€‚</p><p>å½“ç„¶è¿™å¹¶ä¸å±€é™äºå°å›¢é˜Ÿã€‚ åˆ©ç”¨ Git çš„åˆ†æ”¯æ¨¡å‹ï¼Œé€šè¿‡åŒæ—¶åœ¨å¤šä¸ªåˆ†æ”¯ä¸Šå·¥ä½œçš„æ–¹å¼ï¼Œå³ä½¿æ˜¯ä¸Šç™¾äººçš„å¼€å‘å›¢é˜Ÿä¹Ÿå¯ä»¥å¾ˆå¥½åœ°åœ¨å•ä¸ªé¡¹ç›®ä¸Šåä½œã€‚</p><h4 id="é›†æˆç®¡ç†è€…å·¥ä½œæµ"><a href="#é›†æˆç®¡ç†è€…å·¥ä½œæµ" class="headerlink" title="é›†æˆç®¡ç†è€…å·¥ä½œæµ"></a>é›†æˆç®¡ç†è€…å·¥ä½œæµ</h4><p>Git å…è®¸å¤šä¸ªè¿œç¨‹ä»“åº“å­˜åœ¨ï¼Œä½¿å¾—è¿™æ ·ä¸€ç§å·¥ä½œæµæˆä¸ºå¯èƒ½ï¼šæ¯ä¸ªå¼€å‘è€…æ‹¥æœ‰è‡ªå·±ä»“åº“çš„å†™æƒé™å’Œå…¶ä»–æ‰€æœ‰äººä»“åº“çš„è¯»æƒé™ã€‚ è¿™ç§æƒ…å½¢ä¸‹é€šå¸¸ä¼šæœ‰ä¸ªä»£è¡¨â€œå®˜æ–¹â€é¡¹ç›®çš„æƒå¨çš„ä»“åº“ã€‚ è¦ä¸ºè¿™ä¸ªé¡¹ç›®åšè´¡çŒ®ï¼Œä½ éœ€è¦ä»è¯¥é¡¹ç›®å…‹éš†å‡ºä¸€ä¸ªè‡ªå·±çš„å…¬å¼€ä»“åº“ï¼Œç„¶åå°†è‡ªå·±çš„ä¿®æ”¹æ¨é€ä¸Šå»ã€‚ æ¥ç€ä½ å¯ä»¥è¯·æ±‚å®˜æ–¹ä»“åº“çš„ç»´æŠ¤è€…æ‹‰å–æ›´æ–°åˆå¹¶åˆ°ä¸»é¡¹ç›®ã€‚ ç»´æŠ¤è€…å¯ä»¥å°†ä½ çš„ä»“åº“ä½œä¸ºè¿œç¨‹ä»“åº“æ·»åŠ è¿›æ¥ï¼Œåœ¨æœ¬åœ°æµ‹è¯•ä½ çš„å˜æ›´ï¼Œå°†å…¶åˆå¹¶å…¥ä»–ä»¬çš„åˆ†æ”¯å¹¶æ¨é€å›å®˜æ–¹ä»“åº“ã€‚ è¿™ä¸€æµç¨‹çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><ol><li><p>é¡¹ç›®ç»´æŠ¤è€…æ¨é€åˆ°ä¸»ä»“åº“ã€‚</p></li><li><p>è´¡çŒ®è€…å…‹éš†æ­¤ä»“åº“ï¼Œåšå‡ºä¿®æ”¹ã€‚</p></li><li><p>è´¡çŒ®è€…å°†æ•°æ®æ¨é€åˆ°è‡ªå·±çš„å…¬å¼€ä»“åº“ã€‚</p></li><li><p>è´¡çŒ®è€…ç»™ç»´æŠ¤è€…å‘é€é‚®ä»¶ï¼Œè¯·æ±‚æ‹‰å–è‡ªå·±çš„æ›´æ–°ã€‚</p></li><li><p>ç»´æŠ¤è€…åœ¨è‡ªå·±æœ¬åœ°çš„ä»“åº“ä¸­ï¼Œå°†è´¡çŒ®è€…çš„ä»“åº“åŠ ä¸ºè¿œç¨‹ä»“åº“å¹¶åˆå¹¶ä¿®æ”¹ã€‚</p></li><li><p>ç»´æŠ¤è€…å°†åˆå¹¶åçš„ä¿®æ”¹æ¨é€åˆ°ä¸»ä»“åº“ã€‚</p></li></ol><p><img src="git-chapter-1/img2.png" alt></p><p>è¿™æ˜¯ GitHub å’Œ GitLab ç­‰é›†çº¿å™¨å¼ï¼ˆhub-basedï¼‰å·¥å…·æœ€å¸¸ç”¨çš„å·¥ä½œæµç¨‹ã€‚äººä»¬å¯ä»¥å®¹æ˜“åœ°å°†æŸä¸ªé¡¹ç›®æ´¾ç”Ÿæˆä¸ºè‡ªå·±çš„å…¬å¼€ä»“åº“ï¼Œå‘è¿™ä¸ªä»“åº“æ¨é€è‡ªå·±çš„ä¿®æ”¹ï¼Œå¹¶ä¸ºæ¯ä¸ªäººæ‰€è§ã€‚ è¿™ä¹ˆåšæœ€ä¸»è¦çš„ä¼˜ç‚¹ä¹‹ä¸€æ˜¯ä½ å¯ä»¥æŒç»­åœ°å·¥ä½œï¼Œè€Œä¸»ä»“åº“çš„ç»´æŠ¤è€…å¯ä»¥éšæ—¶æ‹‰å–ä½ çš„ä¿®æ”¹ã€‚ è´¡çŒ®è€…ä¸å¿…ç­‰å¾…ç»´æŠ¤è€…å¤„ç†å®Œæäº¤çš„æ›´æ–°â€”â€”æ¯ä¸€æ–¹éƒ½å¯ä»¥æŒ‰ç…§è‡ªå·±çš„èŠ‚å¥å·¥ä½œã€‚</p><h4 id="å¸ä»¤å®˜ä¸å‰¯å®˜å·¥ä½œæµ"><a href="#å¸ä»¤å®˜ä¸å‰¯å®˜å·¥ä½œæµ" class="headerlink" title="å¸ä»¤å®˜ä¸å‰¯å®˜å·¥ä½œæµ"></a>å¸ä»¤å®˜ä¸å‰¯å®˜å·¥ä½œæµ</h4><p>è¿™å…¶å®æ˜¯å¤šä»“åº“å·¥ä½œæµç¨‹çš„å˜ç§ã€‚ ä¸€èˆ¬æ‹¥æœ‰æ•°ç™¾ä½åä½œå¼€å‘è€…çš„è¶…å¤§å‹é¡¹ç›®æ‰ä¼šç”¨åˆ°è¿™æ ·çš„å·¥ä½œæ–¹å¼ï¼Œä¾‹å¦‚è‘—åçš„ Linux å†…æ ¸é¡¹ç›®ã€‚ è¢«ç§°ä¸ºå‰¯å®˜ï¼ˆlieutenantï¼‰çš„å„ä¸ªé›†æˆç®¡ç†è€…åˆ†åˆ«è´Ÿè´£é›†æˆé¡¹ç›®ä¸­çš„ç‰¹å®šéƒ¨åˆ†ã€‚ æ‰€æœ‰è¿™äº›å‰¯å®˜å¤´ä¸Šè¿˜æœ‰ä¸€ä½ç§°ä¸ºå¸ä»¤å®˜ï¼ˆdictatorï¼‰çš„æ€»é›†æˆç®¡ç†è€…è´Ÿè´£ç»Ÿç­¹ã€‚ å¸ä»¤å®˜ç»´æŠ¤çš„ä»“åº“ä½œä¸ºå‚è€ƒä»“åº“ï¼Œä¸ºæ‰€æœ‰åä½œè€…æä¾›ä»–ä»¬éœ€è¦æ‹‰å–çš„é¡¹ç›®ä»£ç ã€‚ æ•´ä¸ªæµç¨‹çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><ol><li><p>æ™®é€šå¼€å‘è€…åœ¨è‡ªå·±çš„ç‰¹æ€§åˆ†æ”¯ä¸Šå·¥ä½œï¼Œå¹¶æ ¹æ® <code>master</code> åˆ†æ”¯è¿›è¡Œå˜åŸºã€‚ è¿™é‡Œæ˜¯å¸ä»¤å®˜çš„ <code>master</code> åˆ†æ”¯ã€‚</p></li><li><p>å‰¯å®˜å°†æ™®é€šå¼€å‘è€…çš„ç‰¹æ€§åˆ†æ”¯åˆå¹¶åˆ°è‡ªå·±çš„ <code>master</code> åˆ†æ”¯ä¸­ã€‚</p></li><li><p>å¸ä»¤å®˜å°†æ‰€æœ‰å‰¯å®˜çš„ <code>master</code> åˆ†æ”¯å¹¶å…¥è‡ªå·±çš„ <code>master</code> åˆ†æ”¯ä¸­ã€‚</p></li><li><p>å¸ä»¤å®˜å°†é›†æˆåçš„ <code>master</code> åˆ†æ”¯æ¨é€åˆ°å‚è€ƒä»“åº“ä¸­ï¼Œä»¥ä¾¿æ‰€æœ‰å…¶ä»–å¼€å‘è€…ä»¥æ­¤ä¸ºåŸºç¡€è¿›è¡Œå˜åŸºã€‚</p></li></ol><p><img src="git-chapter-1/img3.png" alt></p><p>è¿™ç§å·¥ä½œæµç¨‹å¹¶ä¸å¸¸ç”¨ï¼Œåªæœ‰å½“é¡¹ç›®æä¸ºåºæ‚ï¼Œæˆ–è€…éœ€è¦å¤šçº§åˆ«ç®¡ç†æ—¶ï¼Œæ‰ä¼šä½“ç°å‡ºä¼˜åŠ¿ã€‚ åˆ©ç”¨è¿™ç§æ–¹å¼ï¼Œé¡¹ç›®æ€»è´Ÿè´£äººï¼ˆå³å¸ä»¤å®˜ï¼‰å¯ä»¥æŠŠå¤§é‡åˆ†æ•£çš„é›†æˆå·¥ä½œå§”æ‰˜ç»™ä¸åŒçš„å°ç»„è´Ÿè´£äººåˆ†åˆ«å¤„ç†ï¼Œç„¶ååœ¨ä¸åŒæ—¶åˆ»å°†å¤§å—çš„ä»£ç å­é›†ç»Ÿç­¹èµ·æ¥ï¼Œç”¨äºä¹‹åçš„æ•´åˆã€‚</p><h4 id="å·¥ä½œæµç¨‹æ€»ç»“"><a href="#å·¥ä½œæµç¨‹æ€»ç»“" class="headerlink" title="å·¥ä½œæµç¨‹æ€»ç»“"></a>å·¥ä½œæµç¨‹æ€»ç»“</h4><p>ä¸Šé¢ä»‹ç»äº†åœ¨ Git ç­‰åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç»å¸¸ä½¿ç”¨çš„å·¥ä½œæµç¨‹ï¼Œä½†æ˜¯åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œä½ ä¼šé‡åˆ°è®¸å¤šå¯èƒ½é€‚åˆä½ çš„ç‰¹å®šå·¥ä½œæµç¨‹çš„å˜ç§ã€‚ ç°åœ¨ä½ åº”è¯¥å·²ç»æ¸…æ¥šå“ªç§å·¥ä½œæµç¨‹ç»„åˆå¯èƒ½æ¯”è¾ƒé€‚åˆä½ äº†ï¼Œæˆ‘ä»¬ä¼šç»™å‡ºä¸€äº›å¦‚ä½•æ‰®æ¼”ä¸åŒå·¥ä½œæµç¨‹ä¸­ä¸»è¦è§’è‰²çš„æ›´å…·ä½“çš„ä¾‹å­ã€‚ ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†ä¼šå­¦ä¹ ä¸ºé¡¹ç›®åšè´¡çŒ®çš„ä¸€äº›å¸¸ç”¨æ¨¡å¼ã€‚</p><h3 id="å‘ä¸€ä¸ªé¡¹ç›®è´¡çŒ®"><a href="#å‘ä¸€ä¸ªé¡¹ç›®è´¡çŒ®" class="headerlink" title="å‘ä¸€ä¸ªé¡¹ç›®è´¡çŒ®"></a>å‘ä¸€ä¸ªé¡¹ç›®è´¡çŒ®</h3><p>æè¿°å¦‚ä½•å‘ä¸€ä¸ªé¡¹ç›®è´¡çŒ®çš„ä¸»è¦å›°éš¾åœ¨äºå®Œæˆè´¡çŒ®æœ‰å¾ˆå¤šä¸åŒçš„æ–¹å¼ã€‚ å› ä¸º Git éå¸¸çµæ´»ï¼Œäººä»¬å¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼æ¥ä¸€èµ·å·¥ä½œï¼Œæ‰€ä»¥æè¿°åº”è¯¥å¦‚ä½•è´¡çŒ®å¹¶ä¸æ˜¯éå¸¸å‡†ç¡®â€”â€”æ¯ä¸€ä¸ªé¡¹ç›®éƒ½æœ‰ä¸€ç‚¹å„¿ä¸åŒã€‚ å½±å“å› ç´ åŒ…æ‹¬æ´»è·ƒè´¡çŒ®è€…çš„æ•°é‡ã€é€‰æ‹©çš„å·¥ä½œæµç¨‹ã€æäº¤æƒé™ä¸å¯èƒ½åŒ…å«çš„å¤–éƒ¨è´¡çŒ®æ–¹æ³•ã€‚</p><p>ç¬¬ä¸€ä¸ªå½±å“å› ç´ æ˜¯æ´»è·ƒè´¡çŒ®è€…çš„æ•°é‡â€”â€”ç§¯æåœ°å‘è¿™ä¸ªé¡¹ç›®è´¡çŒ®ä»£ç çš„ç”¨æˆ·æ•°é‡ä»¥åŠä»–ä»¬çš„è´¡çŒ®é¢‘ç‡ã€‚ åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œä½ å¯èƒ½ä¼šæœ‰ä¸¤ä¸‰ä¸ªå¼€å‘è€…ä¸€å¤©æäº¤å‡ æ¬¡ï¼Œå¯¹äºä¸æ´»è·ƒçš„é¡¹ç›®å¯èƒ½æ›´å°‘ã€‚ å¯¹äºå¤§ä¸€äº›çš„å…¬å¸æˆ–é¡¹ç›®ï¼Œå¼€å‘è€…çš„æ•°é‡å¯èƒ½ä¼šæ˜¯ä¸Šåƒï¼Œæ¯å¤©éƒ½æœ‰æˆç™¾ä¸Šåƒæ¬¡æäº¤ã€‚ è¿™å¾ˆé‡è¦ï¼Œå› ä¸ºéšç€å¼€å‘è€…è¶Šæ¥è¶Šå¤šï¼Œåœ¨ç¡®ä¿ä½ çš„ä»£ç èƒ½å¹²å‡€åœ°åº”ç”¨æˆ–è½»æ¾åœ°åˆå¹¶æ—¶ä¼šé‡åˆ°æ›´å¤šé—®é¢˜ã€‚ æäº¤çš„æ”¹åŠ¨å¯èƒ½è¡¨ç°ä¸ºè¿‡æ—¶çš„ï¼Œä¹Ÿå¯èƒ½åœ¨ä½ æ­£åœ¨åšæ”¹åŠ¨æˆ–è€…ç­‰å¾…æ”¹åŠ¨è¢«æ‰¹å‡†åº”ç”¨æ—¶è¢«åˆå¹¶å…¥çš„å·¥ä½œä¸¥é‡æŸåã€‚ å¦‚ä½•ä¿è¯ä»£ç å§‹ç»ˆæ˜¯æœ€æ–°çš„ï¼Œå¹¶ä¸”æäº¤å§‹ç»ˆæ˜¯æœ‰æ•ˆçš„ï¼Ÿ</p><p>ä¸‹ä¸€ä¸ªå½±å“å› ç´ æ˜¯é¡¹ç›®ä½¿ç”¨çš„å·¥ä½œæµç¨‹ã€‚ å®ƒæ˜¯ä¸­å¿ƒåŒ–çš„å—ï¼Œå³æ¯ä¸€ä¸ªå¼€å‘è€…éƒ½å¯¹ä¸»çº¿ä»£ç æœ‰ç›¸åŒçš„å†™å…¥æƒé™ï¼Ÿ é¡¹ç›®æ˜¯å¦æœ‰ä¸€ä¸ªæ£€æŸ¥æ‰€æœ‰è¡¥ä¸çš„ç»´æŠ¤è€…æˆ–æ•´åˆè€…ï¼Ÿ æ˜¯å¦æ‰€æœ‰çš„è¡¥ä¸æ˜¯åŒè¡Œè¯„å®¡åæ‰¹å‡†çš„ï¼Ÿ ä½ æ˜¯å¦å‚ä¸äº†é‚£ä¸ªè¿‡ç¨‹ï¼Ÿ æ˜¯å¦å­˜åœ¨å‰¯å®˜ç³»ç»Ÿï¼Œä½ å¿…é¡»å…ˆå°†ä½ çš„å·¥ä½œæäº¤åˆ°ä¸Šé¢ï¼Ÿ</p><p>ä¸‹ä¸€ä¸ªé—®é¢˜æ˜¯æäº¤æƒé™ã€‚ æ˜¯å¦æœ‰é¡¹ç›®çš„å†™æƒé™ä¼šä½¿å‘é¡¹ç›®è´¡çŒ®æ‰€éœ€çš„æµç¨‹æœ‰æå¤§çš„ä¸åŒã€‚ å¦‚æœæ²¡æœ‰å†™æƒé™ï¼Œé¡¹ç›®ä¼šé€‰æ‹©ä½•ç§æ–¹å¼æ¥å—è´¡çŒ®çš„å·¥ä½œï¼Ÿ æ˜¯å¦ç”šè‡³æœ‰ä¸€ä¸ªå¦‚ä½•è´¡çŒ®çš„è§„èŒƒï¼Ÿ ä½ ä¸€æ¬¡è´¡çŒ®å¤šå°‘å·¥ä½œï¼Ÿ ä½ å¤šä¹…è´¡çŒ®ä¸€æ¬¡ï¼Ÿ</p><p>æ‰€æœ‰è¿™äº›é—®é¢˜éƒ½ä¼šå½±å“å®é™…å¦‚ä½•å‘ä¸€ä¸ªé¡¹ç›®è´¡çŒ®ï¼Œä»¥åŠå¯¹ä½ æ¥è¯´å“ªäº›å·¥ä½œæµç¨‹æ›´é€‚åˆæˆ–è€…å¯ç”¨ã€‚ æˆ‘ä»¬å°†ä¼šç”±æµ…å…¥æ·±ï¼Œé€šè¿‡ä¸€ç³»åˆ—ç”¨ä¾‹æ¥è®²è¿°å…¶ä¸­çš„æ¯ä¸€ä¸ªæ–¹é¢ï¼›ä»è¿™äº›ä¾‹å­åº”è¯¥èƒ½å¤Ÿå»ºç«‹å®é™…ä¸­ä½ éœ€è¦çš„ç‰¹å®šå·¥ä½œæµç¨‹ã€‚</p><h4 id="æäº¤å‡†åˆ™"><a href="#æäº¤å‡†åˆ™" class="headerlink" title="æäº¤å‡†åˆ™"></a>æäº¤å‡†åˆ™</h4><p>åœ¨æˆ‘ä»¬å¼€å§‹æŸ¥çœ‹ç‰¹å®šçš„ç”¨ä¾‹å‰ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå…³äºæäº¤ä¿¡æ¯çš„å¿«é€Ÿè¯´æ˜ã€‚ æœ‰ä¸€ä¸ªå¥½çš„åˆ›å»ºæäº¤çš„å‡†åˆ™å¹¶ä¸”åšæŒä½¿ç”¨ä¼šè®©ä¸ Git å·¥ä½œå’Œä¸å…¶ä»–äººåä½œæ›´å®¹æ˜“ã€‚ Git é¡¹ç›®æä¾›äº†ä¸€ä¸ªæ–‡æ¡£ï¼Œå…¶ä¸­åˆ—ä¸¾äº†å…³äºåˆ›å»ºæäº¤åˆ°æäº¤è¡¥ä¸çš„è‹¥å¹²å¥½çš„æç¤ºâ€”â€”å¯ä»¥åœ¨ Git æºä»£ç ä¸­çš„ <code>Documentation/SubmittingPatches</code> æ–‡ä»¶ä¸­é˜…è¯»å®ƒã€‚</p><p>é¦–å…ˆï¼Œä½ ä¸ä¼šæƒ³è¦æŠŠç©ºç™½é”™è¯¯ï¼ˆæ ¹æ® git help diff çš„æè¿°ï¼Œç»“åˆä¸‹é¢ç»™å‡ºçš„å›¾ç‰‡ï¼Œç©ºç™½é”™è¯¯æ˜¯æŒ‡è¡Œå°¾çš„ç©ºæ ¼ã€Tab åˆ¶è¡¨ç¬¦ï¼Œå’Œè¡Œé¦–ç©ºæ ¼åè·Ÿ Tab åˆ¶è¡¨ç¬¦çš„è¡Œä¸ºï¼‰æäº¤ä¸Šå»ã€‚ Git æä¾›äº†ä¸€ä¸ªç®€å•çš„æ–¹å¼æ¥æ£€æŸ¥è¿™ç‚¹â€”â€”åœ¨æäº¤å‰ï¼Œè¿è¡Œ <code>git diff --check</code>ï¼Œå®ƒå°†ä¼šæ‰¾åˆ°å¯èƒ½çš„ç©ºç™½é”™è¯¯å¹¶å°†å®ƒä»¬ä¸ºä½ åˆ—å‡ºæ¥ã€‚</p><p><img src="git-chapter-2/img1.png" alt></p><p>å¦‚æœåœ¨æäº¤å‰è¿è¡Œé‚£ä¸ªå‘½ä»¤ï¼Œå¯ä»¥çŸ¥é“æäº¤ä¸­æ˜¯å¦åŒ…å«å¯èƒ½ä¼šä½¿å…¶ä»–å¼€å‘è€…æ¼æ€’çš„ç©ºç™½é—®é¢˜ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå°è¯•è®©æ¯ä¸€ä¸ªæäº¤æˆä¸ºä¸€ä¸ªé€»è¾‘ä¸Šçš„ç‹¬ç«‹å˜æ›´é›†ã€‚ å¦‚æœå¯ä»¥ï¼Œå°è¯•è®©æ”¹åŠ¨å¯ä»¥ç†è§£â€”â€”ä¸è¦åœ¨æ•´ä¸ªå‘¨æœ«ç¼–ç è§£å†³äº”ä¸ªé—®é¢˜ï¼Œç„¶ååœ¨å‘¨ä¸€æ—¶å°†å®ƒä»¬æäº¤ä¸ºä¸€ä¸ªå·¨å¤§çš„æäº¤ã€‚ å³ä½¿åœ¨å‘¨æœ«æœŸé—´ä½ æ— æ³•æäº¤ï¼Œåœ¨å‘¨ä¸€æ—¶ä½¿ç”¨æš‚å­˜åŒºåŸŸå°†ä½ çš„å·¥ä½œæœ€å°‘æ‹†åˆ†ä¸ºæ¯ä¸ªé—®é¢˜ä¸€ä¸ªæäº¤ï¼Œå¹¶ä¸”ä¸ºæ¯ä¸€ä¸ªæäº¤é™„å¸¦ä¸€ä¸ªæœ‰ç”¨çš„ä¿¡æ¯ã€‚ å¦‚æœå…¶ä¸­ä¸€äº›æ”¹åŠ¨ä¿®æ”¹äº†åŒä¸€ä¸ªæ–‡ä»¶ï¼Œå°è¯•ä½¿ç”¨ <code>git add --patch</code> æ¥éƒ¨åˆ†æš‚å­˜æ–‡ä»¶ï¼ˆåœ¨ äº¤äº’å¼æš‚å­˜ ä¸­æœ‰è¯¦ç»†ä»‹ç»ï¼‰ã€‚ ä¸ç®¡ä½ åšä¸€ä¸ªæˆ–äº”ä¸ªæäº¤ï¼Œåªè¦æ‰€æœ‰çš„æ”¹åŠ¨æ˜¯åœ¨åŒä¸€æ—¶åˆ»æ·»åŠ çš„ï¼Œé¡¹ç›®åˆ†æ”¯æœ«ç«¯çš„å¿«ç…§å°±æ˜¯ç‹¬ç«‹çš„ï¼Œä½¿åŒäº‹å¼€å‘è€…å¿…é¡»å®¡æŸ¥ä½ çš„æ”¹åŠ¨æ—¶å°½é‡è®©äº‹æƒ…å®¹æ˜“äº›ã€‚ å½“ä½ ä¹‹åéœ€è¦æ—¶è¿™ä¸ªæ–¹æ³•ä¹Ÿä¼šä½¿æ‹‰å‡ºæˆ–è¿˜åŸä¸€ä¸ªå˜æ›´é›†æ›´å®¹æ˜“äº›ã€‚ é‡å†™å†å² æè¿°äº†é‡å†™å†å²ä¸äº¤äº’å¼æš‚å­˜æ–‡ä»¶çš„è‹¥å¹²æœ‰ç”¨çš„ Git æŠ€å·§â€”â€”åœ¨å°†å·¥ä½œå‘é€ç»™å…¶ä»–äººå‰ä½¿ç”¨è¿™äº›å·¥å…·æ¥å¸®åŠ©ç”Ÿæˆä¸€ä¸ªå¹²å‡€åˆæ˜“æ‡‚çš„å†å²ã€‚</p><p>æœ€åä¸€ä»¶è¦ç‰¢è®°çš„äº‹æ˜¯æäº¤ä¿¡æ¯ã€‚ æœ‰ä¸€ä¸ªåˆ›å»ºä¼˜è´¨æäº¤ä¿¡æ¯çš„ä¹ æƒ¯ä¼šä½¿ Git çš„ä½¿ç”¨ä¸åä½œå®¹æ˜“çš„å¤šã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¿¡æ¯åº”å½“ä»¥å°‘äº 50 ä¸ªå­—ç¬¦ï¼ˆ25ä¸ªæ±‰å­—ï¼‰çš„å•è¡Œå¼€å§‹ä¸”ç®€è¦åœ°æè¿°å˜æ›´ï¼Œæ¥ç€æ˜¯ä¸€ä¸ªç©ºç™½è¡Œï¼Œå†æ¥ç€æ˜¯ä¸€ä¸ªæ›´è¯¦ç»†çš„è§£é‡Šã€‚ Git é¡¹ç›®è¦æ±‚ä¸€ä¸ªæ›´è¯¦ç»†çš„è§£é‡Šï¼ŒåŒ…æ‹¬åšæ”¹åŠ¨çš„åŠ¨æœºå’Œå®ƒçš„å®ç°ä¸ä¹‹å‰è¡Œä¸ºçš„å¯¹æ¯”â€”â€”è¿™æ˜¯ä¸€ä¸ªå€¼å¾—éµå¾ªçš„å¥½è§„åˆ™ã€‚ åœ¨è¿™äº›ä¿¡æ¯ä¸­ä½¿ç”¨ç°åœ¨æ—¶æ€ç¥ˆä½¿è¯­æ°”ä¹Ÿæ˜¯ä¸€ä¸ªå¥½æƒ³æ³•ã€‚ æ¢å¥è¯è¯´ï¼Œä½¿ç”¨å‘½ä»¤ã€‚ ä½¿ç”¨ â€œAdd tests forâ€ è€Œä¸æ˜¯ â€œI added tests forâ€ æˆ– â€œAdding tests forâ€ã€‚ è¿™é‡Œæ˜¯ä¸€ä»½æœ€åˆç”± Tim Pope å†™çš„æ¨¡æ¿ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ä¿®æ”¹çš„æ‘˜è¦ï¼ˆ50 ä¸ªå­—ç¬¦æˆ–æ›´å°‘ï¼‰</span><br><span class="line"></span><br><span class="line">å¦‚æœå¿…è¦çš„è¯ï¼ŒåŠ å…¥æ›´è¯¦ç»†çš„è§£é‡Šæ–‡å­—ã€‚åœ¨</span><br><span class="line">å¤§æ¦‚ 72 ä¸ªå­—ç¬¦çš„æ—¶å€™æ¢è¡Œã€‚åœ¨æŸäº›æƒ…å½¢ä¸‹ï¼Œ</span><br><span class="line">ç¬¬ä¸€è¡Œè¢«å½“ä½œä¸€å°ç”µå­é‚®ä»¶çš„æ ‡é¢˜ï¼Œå‰©ä¸‹çš„</span><br><span class="line">æ–‡æœ¬ä½œä¸ºæ­£æ–‡ã€‚åˆ†éš”æ‘˜è¦ä¸æ­£æ–‡çš„ç©ºè¡Œæ˜¯</span><br><span class="line">å¿…é¡»çš„ï¼ˆé™¤éä½ å®Œå…¨çœç•¥æ­£æ–‡ï¼‰ï¼›å¦‚æœä½ å°†</span><br><span class="line">ä¸¤è€…æ··åœ¨ä¸€èµ·ï¼Œé‚£ä¹ˆç±»ä¼¼å˜åŸºç­‰å·¥å…·æ— æ³•</span><br><span class="line">æ­£å¸¸å·¥ä½œã€‚</span><br><span class="line"></span><br><span class="line">ç©ºè¡Œæ¥ç€æ›´è¿›ä¸€æ­¥çš„æ®µè½ã€‚</span><br><span class="line"></span><br><span class="line">  - å¥å·ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</span><br><span class="line"></span><br><span class="line">  - é¡¹ç›®ç¬¦å·å¯ä»¥ä½¿ç”¨å…¸å‹çš„è¿å­—ç¬¦æˆ–æ˜Ÿå·</span><br><span class="line">    å‰é¢ä¸€ä¸ªç©ºæ ¼ï¼Œä¹‹é—´ç”¨ç©ºè¡Œéš”å¼€ï¼Œ</span><br><span class="line">    ä½†æ˜¯å¯ä»¥ä¾æ®ä¸åŒçš„æƒ¯ä¾‹æœ‰æ‰€ä¸åŒã€‚</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æ‰€æœ‰çš„æäº¤ä¿¡æ¯çœ‹èµ·æ¥éƒ½åƒè¿™æ ·ï¼Œå¯¹ä½ ä¸è·Ÿä½ å·¥ä½œåœ¨ä¸€èµ·çš„å…¶ä»–å¼€å‘è€…æ¥è¯´äº‹æƒ…ä¼šå˜å¾—éå¸¸å®¹æ˜“ã€‚ Git é¡¹ç›®æœ‰ä¸€ä¸ªè‰¯å¥½æ ¼å¼åŒ–çš„æäº¤ä¿¡æ¯â€”â€”å°è¯•åœ¨é‚£å„¿è¿è¡Œ <code>git log --no-merges</code> æ¥çœ‹çœ‹æ¼‚äº®çš„æ ¼å¼åŒ–çš„é¡¹ç›®æäº¤å†å²åƒä»€ä¹ˆæ ·ã€‚</p><p>åœ¨æ¥ä¸‹æ¥çš„ä¾‹å­ä¸­ï¼Œä»¥åŠè´¯ç©¿æœ¬ä¹¦å¤§éƒ¨åˆ†ï¼Œå‡ºäºç®€æ´æ€§çš„åŸå› æœ¬ä¹¦ä¸ä¼šæœ‰åƒè¿™æ ·æ¼‚äº®æ ¼å¼çš„ä¿¡æ¯ï¼›ç›¸åï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>-m</code> é€‰é¡¹çš„ <code>git commit</code>ã€‚ ç…§æˆ‘ä»¬è¯´çš„åšï¼Œè€Œä¸æ˜¯ç…§æˆ‘ä»¬åšçš„åšã€‚</p><h4 id="ç§æœ‰å°å‹å›¢é˜Ÿ"><a href="#ç§æœ‰å°å‹å›¢é˜Ÿ" class="headerlink" title="ç§æœ‰å°å‹å›¢é˜Ÿ"></a>ç§æœ‰å°å‹å›¢é˜Ÿ</h4><p>ä½ å¯èƒ½ä¼šé‡åˆ°çš„æœ€ç®€å•çš„é…ç½®æ˜¯æœ‰ä¸€ä¸¤ä¸ªå…¶ä»–å¼€å‘è€…çš„ç§æœ‰é¡¹ç›®ã€‚ â€œç§æœ‰â€ åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼Œæ„å‘³ç€é—­æºâ€”â€”ä¸å¯ä»¥ä»å¤–é¢çš„ä¸–ç•Œä¸­è®¿é—®åˆ°ã€‚ ä½ å’Œå…¶ä»–çš„å¼€å‘è€…éƒ½æœ‰ä»“åº“çš„æ¨é€æƒé™ã€‚</p><p>åœ¨è¿™ä¸ªç¯å¢ƒä¸‹ï¼Œå¯ä»¥é‡‡ç”¨ä¸€ä¸ªç±»ä¼¼ä½¿ç”¨ Subversion æˆ–å…¶ä»–é›†ä¸­å¼çš„ç³»ç»Ÿæ—¶ä¼šä½¿ç”¨çš„å·¥ä½œæµç¨‹ã€‚ ä¾ç„¶å¯ä»¥å¾—åˆ°åƒç¦»çº¿æäº¤ã€éå¸¸å®¹æ˜“åœ°æ–°å»ºåˆ†æ”¯ä¸åˆå¹¶åˆ†æ”¯ç­‰é«˜çº§åŠŸèƒ½ï¼Œä½†æ˜¯å·¥ä½œæµç¨‹å¯ä»¥æ˜¯å¾ˆç®€å•çš„ï¼›ä¸»è¦çš„åŒºåˆ«æ˜¯åˆå¹¶å‘ç”Ÿåœ¨å®¢æˆ·ç«¯è¿™è¾¹è€Œä¸æ˜¯åœ¨æäº¤æ—¶å‘ç”Ÿåœ¨æœåŠ¡å™¨é‚£è¾¹ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹å½“ä¸¤ä¸ªå¼€å‘è€…åœ¨ä¸€ä¸ªå…±äº«ä»“åº“ä¸­ä¸€èµ·å·¥ä½œæ—¶ä¼šæ˜¯ä»€ä¹ˆæ ·å­ã€‚ ç¬¬ä¸€ä¸ªå¼€å‘è€…ï¼ŒJohnï¼Œå…‹éš†äº†ä»“åº“ï¼Œåšäº†æ”¹åŠ¨ï¼Œç„¶åæœ¬åœ°æäº¤ã€‚ ï¼ˆä¸ºäº†ç¼©çŸ­è¿™äº›ä¾‹å­é•¿åº¦ï¼Œåè®®ä¿¡æ¯å·²è¢«æ›¿æ¢ä¸º <code>...</code>ã€‚ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># John&apos;s Machine</span><br><span class="line">$ git clone john@githost:simplegit.git</span><br><span class="line">Initialized empty Git repository in /home/john/simplegit/.git/</span><br><span class="line">...</span><br><span class="line">$ cd simplegit/</span><br><span class="line">$ vim lib/simplegit.rb</span><br><span class="line">$ git commit -am &apos;removed invalid default value&apos;</span><br><span class="line">[master 738ee87] removed invalid default value</span><br><span class="line"> 1 files changed, 1 insertions(+), 1 deletions(-)</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªå¼€å‘è€…ï¼ŒJessicaï¼Œåšäº†åŒæ ·çš„äº‹æƒ…â€”â€”å…‹éš†ä»“åº“å¹¶æäº¤äº†ä¸€ä¸ªæ”¹åŠ¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># Jessica&apos;s Machine</span><br><span class="line">$ git clone jessica@githost:simplegit.git</span><br><span class="line">Initialized empty Git repository in /home/jessica/simplegit/.git/</span><br><span class="line">...</span><br><span class="line">$ cd simplegit/</span><br><span class="line">$ vim TODO</span><br><span class="line">$ git commit -am &apos;add reset task&apos;</span><br><span class="line">[master fbff5bc] add reset task</span><br><span class="line"> 1 files changed, 1 insertions(+), 0 deletions(-)</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼ŒJessica æŠŠå¥¹çš„å·¥ä½œæ¨é€åˆ°æœåŠ¡å™¨ä¸Šï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Jessica&apos;s Machine</span><br><span class="line">$ git push origin master</span><br><span class="line">...</span><br><span class="line">To jessica@githost:simplegit.git</span><br><span class="line">   1edee6b..fbff5bc  master -&gt; master</span><br></pre></td></tr></table></figure><p>John ä¹Ÿå°è¯•æ¨é€ä»–çš„æ”¹åŠ¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># John&apos;s Machine</span><br><span class="line">$ git push origin master</span><br><span class="line">To john@githost:simplegit.git</span><br><span class="line"> ! [rejected]        master -&gt; master (non-fast forward)</span><br><span class="line">error: failed to push some refs to &apos;john@githost:simplegit.git&apos;</span><br></pre></td></tr></table></figure><p>ä¸å…è®¸ John æ¨é€æ˜¯å› ä¸ºåœ¨åŒä¸€æ—¶é—´ Jessica å·²ç»æ¨é€äº†ã€‚ å¦‚æœä¹‹å‰ä¹ æƒ¯äºç”¨ Subversion é‚£ä¹ˆç†è§£è¿™ç‚¹ç‰¹åˆ«é‡è¦ï¼Œå› ä¸ºä½ ä¼šæ³¨æ„åˆ°ä¸¤ä¸ªå¼€å‘è€…å¹¶æ²¡æœ‰ç¼–è¾‘åŒä¸€ä¸ªæ–‡ä»¶ã€‚ å°½ç®¡ Subversion ä¼šå¯¹ç¼–è¾‘çš„ä¸åŒæ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šè‡ªåŠ¨è¿›è¡Œä¸€æ¬¡åˆå¹¶ï¼Œä½† Git è¦æ±‚ä½ åœ¨æœ¬åœ°åˆå¹¶æäº¤ã€‚ John å¿…é¡»æŠ“å– Jessica çš„æ”¹åŠ¨å¹¶åˆå¹¶å®ƒä»¬ï¼Œæ‰èƒ½è¢«å…è®¸æ¨é€ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch origin</span><br><span class="line">...</span><br><span class="line">From john@githost:simplegit</span><br><span class="line"> + 049d078...fbff5bc master     -&gt; origin/master</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªæ—¶å€™ï¼ŒJohn çš„æœ¬åœ°ä»“åº“çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="git-chapter-2/img2.png" alt></p><p>John æœ‰ä¸€ä¸ªå¼•ç”¨æŒ‡å‘ Jessica æ¨é€ä¸Šå»çš„æ”¹åŠ¨ï¼Œä½†æ˜¯ä»–å¿…é¡»å°†å®ƒä»¬åˆå¹¶å…¥è‡ªå·±çš„å·¥ä½œä¸­ä¹‹åæ‰èƒ½è¢«å…è®¸æ¨é€ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git merge origin/master</span><br><span class="line">Merge made by recursive.</span><br><span class="line"> TODO |    1 +</span><br><span class="line"> 1 files changed, 1 insertions(+), 0 deletions(-)</span><br></pre></td></tr></table></figure><p>åˆå¹¶è¿›è¡Œåœ°å¾ˆé¡ºåˆ©â€”â€” John çš„æäº¤å†å²ç°åœ¨çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="git-chapter-2/img3.png" alt></p><p>ç°åœ¨ï¼ŒJohn å¯ä»¥æµ‹è¯•ä»£ç ï¼Œç¡®ä¿å®ƒä¾ç„¶æ­£å¸¸å·¥ä½œï¼Œç„¶åä»–å¯ä»¥æŠŠåˆå¹¶çš„æ–°å·¥ä½œæ¨é€åˆ°æœåŠ¡å™¨ä¸Šï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin master</span><br><span class="line">...</span><br><span class="line">To john@githost:simplegit.git</span><br><span class="line">   fbff5bc..72bbc59  master -&gt; master</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆï¼ŒJohn çš„æäº¤å†å²çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="git-chapter-2/img4.png" alt></p><p>åœ¨æ­¤æœŸé—´ï¼ŒJessica åœ¨ä¸€ä¸ªç‰¹æ€§åˆ†æ”¯ä¸Šå·¥ä½œã€‚ å¥¹åˆ›å»ºäº†ä¸€ä¸ªç§°ä½œ issue54 çš„ç‰¹æ€§åˆ†æ”¯å¹¶ä¸”åœ¨é‚£ä¸ªåˆ†æ”¯ä¸Šåšäº†ä¸‰æ¬¡æäº¤ã€‚ å¥¹è¿˜æ²¡æœ‰æŠ“å– John çš„æ”¹åŠ¨ï¼Œæ‰€ä»¥å¥¹çš„æäº¤å†å²çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="git-chapter-2/img5.png" alt></p><p>Jessica æƒ³è¦ä¸ John åŒæ­¥ï¼Œæ‰€ä»¥å¥¹è¿›è¡Œäº†æŠ“å–æ“ä½œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Jessica&apos;s Machine</span><br><span class="line">$ git fetch origin</span><br><span class="line">...</span><br><span class="line">From jessica@githost:simplegit</span><br><span class="line">   fbff5bc..72bbc59  master     -&gt; origin/master</span><br></pre></td></tr></table></figure><p>é‚£ä¼šåŒæ—¶æ‹‰å– John æ¨é€çš„å·¥ä½œã€‚ Jessica çš„å†å²ç°åœ¨çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="git-chapter-2/img6.png" alt></p><p>Jessica è®¤ä¸ºå¥¹çš„ç‰¹æ€§åˆ†æ”¯å·²ç»å‡†å¤‡å¥½äº†ï¼Œä½†æ˜¯å¥¹æƒ³è¦çŸ¥é“å¿…é¡»åˆå¹¶ä»€ä¹ˆè¿›å…¥å¥¹çš„å·¥ä½œæ‰èƒ½æ¨é€ã€‚ å¥¹è¿è¡Œ <code>git log</code> æ¥æ‰¾å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git log --no-merges issue54..origin/master</span><br><span class="line">commit 738ee872852dfaa9d6634e0dea7a324040193016</span><br><span class="line">Author: John Smith &lt;jsmith@example.com&gt;</span><br><span class="line">Date:   Fri May 29 16:01:27 2009 -0700</span><br><span class="line"></span><br><span class="line">   removed invalid default value</span><br></pre></td></tr></table></figure><p><code>issue54..origin/master</code> è¯­æ³•æ˜¯ä¸€ä¸ªæ—¥å¿—è¿‡æ»¤å™¨ï¼Œè¦æ±‚ Git åªæ˜¾ç¤ºæ‰€æœ‰åœ¨åé¢åˆ†æ”¯ï¼ˆåœ¨æœ¬ä¾‹ä¸­æ˜¯ <code>origin/master</code>ï¼‰ä½†ä¸åœ¨å‰é¢åˆ†æ”¯ï¼ˆåœ¨æœ¬ä¾‹ä¸­æ˜¯ <code>issue54</code>ï¼‰çš„æäº¤çš„åˆ—è¡¨ã€‚ æˆ‘ä»¬å°†ä¼šåœ¨ æäº¤åŒºé—´ ä¸­è¯¦ç»†ä»‹ç»è¿™ä¸ªè¯­æ³•ã€‚</p><p>ç›®å‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»è¾“å‡ºä¸­çœ‹åˆ°æœ‰ä¸€ä¸ª John ç”Ÿæˆçš„ä½†æ˜¯ Jessica è¿˜æ²¡æœ‰åˆå¹¶å…¥çš„æäº¤ã€‚ å¦‚æœå¥¹åˆå¹¶ <code>origin/master</code>ï¼Œä¹Ÿå°±æ˜¯è¯´å°†ä¼šä¿®æ”¹å¥¹çš„æœ¬åœ°å·¥ä½œçš„é‚£ä¸ªå•ä¸ªæäº¤ã€‚</p><p>ç°åœ¨ï¼ŒJessica å¯ä»¥åˆå¹¶å¥¹çš„ç‰¹æ€§å·¥ä½œåˆ°å¥¹çš„ <code>master</code> åˆ†æ”¯ï¼Œåˆå¹¶ John çš„å·¥ä½œï¼ˆ<code>origin/master</code>ï¼‰è¿›å…¥å¥¹çš„ <code>master</code> åˆ†æ”¯ï¼Œç„¶åå†æ¬¡æ¨é€å›æœåŠ¡å™¨ã€‚ é¦–å…ˆï¼Œä¸ºäº†æ•´åˆæ‰€æœ‰è¿™äº›å·¥ä½œå¥¹åˆ‡æ¢å›å¥¹çš„ <code>master</code> åˆ†æ”¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">Switched to branch &apos;master&apos;</span><br><span class="line">Your branch is behind &apos;origin/master&apos; by 2 commits, and can be fast-forwarded.</span><br></pre></td></tr></table></figure><p>å¥¹æ—¢å¯ä»¥å…ˆåˆå¹¶ <code>origin/master</code> ä¹Ÿå¯ä»¥å…ˆåˆå¹¶ <code>issue54</code> â€”â€”å®ƒä»¬éƒ½æ˜¯ä¸Šæ¸¸ï¼Œæ‰€ä»¥é¡ºåºå¹¶æ²¡æœ‰å…³ç³»ã€‚ ä¸è®ºå¥¹é€‰æ‹©çš„é¡ºåºæ˜¯ä»€ä¹ˆæœ€ç»ˆçš„ç»“æœå¿«ç…§æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼›åªæ˜¯å†å²ä¼šæœ‰ä¸€ç‚¹è½»å¾®çš„åŒºåˆ«ã€‚ å¥¹é€‰æ‹©å…ˆåˆå¹¶å…¥ <code>issue54</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git merge issue54</span><br><span class="line">Updating fbff5bc..4af4298</span><br><span class="line">Fast forward</span><br><span class="line"> README           |    1 +</span><br><span class="line"> lib/simplegit.rb |    6 +++++-</span><br><span class="line"> 2 files changed, 6 insertions(+), 1 deletions(-)</span><br></pre></td></tr></table></figure><p>æ²¡æœ‰å‘ç”Ÿé—®é¢˜ï¼›å¦‚ä½ æ‰€è§å®ƒæ˜¯ä¸€æ¬¡ç®€å•çš„å¿«è¿›ã€‚ ç°åœ¨ Jessica åˆå¹¶å…¥ John çš„å·¥ä½œï¼ˆ<code>origin/master</code>ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git merge origin/master</span><br><span class="line">Auto-merging lib/simplegit.rb</span><br><span class="line">Merge made by recursive.</span><br><span class="line"> lib/simplegit.rb |    2 +-</span><br><span class="line"> 1 files changed, 1 insertions(+), 1 deletions(-)</span><br></pre></td></tr></table></figure><p>æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½å¹²å‡€åœ°åˆå¹¶äº†ï¼ŒJessica çš„å†å²çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="git-chapter-2/img7.png" alt></p><p>ç°åœ¨ <code>origin/master</code> æ˜¯å¯ä»¥ä» Jessica çš„ <code>master</code> åˆ†æ”¯åˆ°è¾¾çš„ï¼Œæ‰€ä»¥å¥¹åº”è¯¥å¯ä»¥æˆåŠŸåœ°æ¨é€ï¼ˆå‡è®¾åŒä¸€æ—¶é—´ John å¹¶æ²¡æœ‰å†æ¬¡æ¨é€ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin master</span><br><span class="line">...</span><br><span class="line">To jessica@githost:simplegit.git</span><br><span class="line">   72bbc59..8059c15  master -&gt; master</span><br></pre></td></tr></table></figure><p>æ¯ä¸€ä¸ªå¼€å‘è€…éƒ½æäº¤äº†å‡ æ¬¡å¹¶æˆåŠŸåœ°åˆå¹¶äº†å…¶ä»–äººçš„å·¥ä½œã€‚</p><p><img src="git-chapter-2/img8.png" alt></p><p>è¿™æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„å·¥ä½œæµç¨‹ã€‚ ä½ é€šå¸¸åœ¨ä¸€ä¸ªç‰¹æ€§åˆ†æ”¯å·¥ä½œä¸€ä¼šå„¿ï¼Œå½“å®ƒå‡†å¤‡å¥½æ•´åˆæ—¶åˆå¹¶å›ä½ çš„ <code>master</code> åˆ†æ”¯ã€‚ å½“æƒ³è¦å…±äº«å·¥ä½œæ—¶ï¼Œå°†å…¶åˆå¹¶å›ä½ è‡ªå·±çš„ <code>master</code> åˆ†æ”¯ï¼Œå¦‚æœæœ‰æ”¹åŠ¨çš„è¯ç„¶åæŠ“å–å¹¶åˆå¹¶ <code>origin/master</code>ï¼Œæœ€ç»ˆæ¨é€åˆ°æœåŠ¡å™¨ä¸Šçš„ <code>master</code> åˆ†æ”¯ã€‚ é€šå¸¸é¡ºåºåƒè¿™æ ·ï¼š</p><p><img src="git-chapter-2/img9.png" alt></p><h4 id="ç§æœ‰ç®¡ç†å›¢é˜Ÿ"><a href="#ç§æœ‰ç®¡ç†å›¢é˜Ÿ" class="headerlink" title="ç§æœ‰ç®¡ç†å›¢é˜Ÿ"></a>ç§æœ‰ç®¡ç†å›¢é˜Ÿ</h4><p>åœ¨æ¥ä¸‹æ¥çš„æƒ…å½¢ä¸­ï¼Œä½ ä¼šçœ‹åˆ°å¤§å‹ç§æœ‰å›¢é˜Ÿä¸­è´¡çŒ®è€…çš„è§’è‰²ã€‚ åœ¨ä½ å°†å­¦ä¹ åˆ°çš„è¿™ç§å·¥ä½œç¯å¢ƒä¸­ï¼Œå°ç»„åŸºäºç‰¹æ€§è¿›è¡Œåä½œï¼Œè¿™äº›å›¢é˜Ÿçš„è´¡çŒ®å°†ä¼šç”±å…¶ä»–äººæ•´åˆã€‚</p><p>è®©æˆ‘ä»¬å‡è®¾ John ä¸ Jessica åœ¨ä¸€ä¸ªç‰¹æ€§ä¸Šå·¥ä½œï¼ŒåŒæ—¶ Jessica ä¸ Josie åœ¨ç¬¬äºŒä¸ªç‰¹æ€§ä¸Šå·¥ä½œã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œå…¬å¸ä½¿ç”¨äº†ä¸€ç§æ•´åˆ-ç®¡ç†è€…å·¥ä½œæµç¨‹ï¼Œç‹¬ç«‹å°ç»„çš„å·¥ä½œåªèƒ½è¢«ç‰¹å®šçš„å·¥ç¨‹å¸ˆæ•´åˆï¼Œä¸»ä»“åº“çš„ <code>master</code> åˆ†æ”¯åªèƒ½è¢«é‚£äº›å·¥ç¨‹å¸ˆæ›´æ–°ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„å·¥ä½œéƒ½æ˜¯åœ¨åŸºäºå›¢é˜Ÿçš„åˆ†æ”¯ä¸Šå®Œæˆçš„å¹¶ä¸”ç¨åä¼šè¢«æ•´åˆè€…æ‹‰åˆ°ä¸€èµ·ã€‚</p><p>å› ä¸º Jessica åœ¨ä¸¤ä¸ªç‰¹æ€§ä¸Šå·¥ä½œï¼Œå¹¶ä¸”å¹³è¡Œåœ°ä¸ä¸¤ä¸ªä¸åŒçš„å¼€å‘è€…åä½œï¼Œè®©æˆ‘ä»¬è·Ÿéšå¥¹çš„å·¥ä½œæµç¨‹ã€‚ å‡è®¾å¥¹å·²ç»å…‹éš†äº†ä»“åº“ï¼Œé¦–å…ˆå†³å®šåœ¨ <code>featureA</code> ä¸Šå·¥ä½œã€‚ å¥¹ä¸ºé‚£ä¸ªç‰¹æ€§åˆ›å»ºäº†ä¸€ä¸ªæ–°åˆ†æ”¯ç„¶ååœ¨é‚£åšäº†ä¸€äº›å·¥ä½œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Jessica&apos;s Machine</span><br><span class="line">$ git checkout -b featureA</span><br><span class="line">Switched to a new branch &apos;featureA&apos;</span><br><span class="line">$ vim lib/simplegit.rb</span><br><span class="line">$ git commit -am &apos;add limit to log function&apos;</span><br><span class="line">[featureA 3300904] add limit to log function</span><br><span class="line"> 1 files changed, 1 insertions(+), 1 deletions(-)</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªæ—¶å€™ï¼Œå¥¹éœ€è¦å°†å·¥ä½œå…±äº«ç»™ Johnï¼Œæ‰€ä»¥å¥¹æ¨é€äº† <code>featureA</code> åˆ†æ”¯çš„æäº¤åˆ°æœåŠ¡å™¨ä¸Šã€‚ Jessica æ²¡æœ‰ <code>master</code> åˆ†æ”¯çš„æ¨é€æƒé™â€”â€”åªæœ‰æ•´åˆè€…æœ‰â€”â€”æ‰€ä»¥ä¸ºäº†ä¸ John åä½œå¿…é¡»æ¨é€å¦ä¸€ä¸ªåˆ†æ”¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin featureA</span><br><span class="line">...</span><br><span class="line">To jessica@githost:simplegit.git</span><br><span class="line"> * [new branch]      featureA -&gt; featureA</span><br></pre></td></tr></table></figure><p>Jessica å‘ John å‘é‚®ä»¶å‘Šè¯‰ä»–å·²ç»æ¨é€äº†ä¸€äº›å·¥ä½œåˆ° <code>featureA</code> åˆ†æ”¯ç°åœ¨å¯ä»¥çœ‹ä¸€çœ‹ã€‚ å½“å¥¹ç­‰å¾… John çš„åé¦ˆæ—¶ï¼ŒJessica å†³å®šä¸ Josie å¼€å§‹åœ¨ <code>featureB</code> ä¸Šå·¥ä½œã€‚ ä¸ºäº†å¼€å§‹å·¥ä½œï¼Œå¥¹åŸºäºæœåŠ¡å™¨çš„ <code>master</code> åˆ†æ”¯å¼€å§‹äº†ä¸€ä¸ªæ–°åˆ†æ”¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Jessica&apos;s Machine</span><br><span class="line">$ git fetch origin</span><br><span class="line">$ git checkout -b featureB origin/master</span><br><span class="line">Switched to a new branch &apos;featureB&apos;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼ŒJessica åœ¨ <code>featureB</code> åˆ†æ”¯ä¸Šåˆ›å»ºäº†å‡ æ¬¡æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ vim lib/simplegit.rb</span><br><span class="line">$ git commit -am &apos;made the ls-tree function recursive&apos;</span><br><span class="line">[featureB e5b0fdc] made the ls-tree function recursive</span><br><span class="line"> 1 files changed, 1 insertions(+), 1 deletions(-)</span><br><span class="line">$ vim lib/simplegit.rb</span><br><span class="line">$ git commit -am &apos;add ls-files&apos;</span><br><span class="line">[featureB 8512791] add ls-files</span><br><span class="line"> 1 files changed, 5 insertions(+), 0 deletions(-)</span><br></pre></td></tr></table></figure><p>Jessica çš„ä»“åº“çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="git-chapter-2/img10.png" alt></p><p>å¥¹å‡†å¤‡å¥½æ¨é€å·¥ä½œäº†ï¼Œä½†æ˜¯ä¸€å°æ¥è‡ª Josie çš„é‚®ä»¶å‘ŠçŸ¥ä¸€äº›åˆå§‹å·¥ä½œå·²ç»è¢«æ¨é€åˆ°æœåŠ¡å™¨ä¸Šçš„ <code>featureBee</code> ä¸Šäº†ã€‚ Jessica åœ¨èƒ½æ¨é€åˆ°æœåŠ¡å™¨å‰é¦–å…ˆéœ€è¦å°†é‚£äº›æ”¹åŠ¨ä¸å¥¹è‡ªå·±çš„åˆå¹¶ã€‚ ç„¶åå¥¹å¯ä»¥é€šè¿‡ <code>git fetch</code> æŠ“å– Josie çš„æ”¹åŠ¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch origin</span><br><span class="line">...</span><br><span class="line">From jessica@githost:simplegit</span><br><span class="line"> * [new branch]      featureBee -&gt; origin/featureBee</span><br></pre></td></tr></table></figure><p>Jessica ç°åœ¨å¯ä»¥é€šè¿‡ <code>git merge</code> å°†å…¶åˆå¹¶åˆ°å¥¹åšçš„å·¥ä½œä¸­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git merge origin/featureBee</span><br><span class="line">Auto-merging lib/simplegit.rb</span><br><span class="line">Merge made by recursive.</span><br><span class="line"> lib/simplegit.rb |    4 ++++</span><br><span class="line"> 1 files changed, 4 insertions(+), 0 deletions(-)</span><br></pre></td></tr></table></figure><p>æœ‰ç‚¹å„¿é—®é¢˜â€”â€”å¥¹éœ€è¦å°†åœ¨ <code>featureB</code> åˆ†æ”¯ä¸Šåˆå¹¶çš„å·¥ä½œæ¨é€åˆ°æœåŠ¡å™¨ä¸Šçš„ <code>featureBee</code> åˆ†æ”¯ã€‚ å¥¹å¯ä»¥é€šè¿‡æŒ‡å®šæœ¬åœ°åˆ†æ”¯åŠ ä¸Šå†’å·ï¼ˆ<code>:</code>ï¼‰åŠ ä¸Šè¿œç¨‹åˆ†æ”¯ç»™ <code>git push</code> å‘½ä»¤æ¥è¿™æ ·åšï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin featureB:featureBee</span><br><span class="line">...</span><br><span class="line">To jessica@githost:simplegit.git</span><br><span class="line">   fba9af8..cd685d1  featureB -&gt; featureBee</span><br></pre></td></tr></table></figure><p>è¿™ç§°ä½œä¸€ä¸ª å¼•ç”¨è§„æ ¼ã€‚ æŸ¥çœ‹ å¼•ç”¨è§„æ ¼ äº†è§£å…³äº Git å¼•ç”¨è§„æ ¼ä¸é€šè¿‡å®ƒä»¬å¯ä»¥åšçš„ä¸åŒçš„äº‹æƒ…çš„è¯¦ç»†è®¨è®ºã€‚ ä¹Ÿè¦æ³¨æ„ <code>-u</code> æ ‡è®°ï¼›è¿™æ˜¯ <code>--set-upstream</code> çš„ç®€å†™ï¼Œè¯¥æ ‡è®°ä¼šä¸ºä¹‹åè½»æ¾åœ°æ¨é€ä¸æ‹‰å–é…ç½®åˆ†æ”¯ã€‚</p><p>ç´§æ¥ç€ï¼ŒJohn å‘é‚®ä»¶ç»™ Jessica è¯´ä»–å·²ç»æ¨é€äº†ä¸€äº›æ”¹åŠ¨åˆ° <code>featureA</code> åˆ†æ”¯å¹¶è¦æ±‚å¥¹å»éªŒè¯å®ƒä»¬ã€‚ å¥¹è¿è¡Œä¸€ä¸ª <code>git fetch</code> æ¥æ‹‰å–ä¸‹é‚£äº›æ”¹åŠ¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch origin</span><br><span class="line">...</span><br><span class="line">From jessica@githost:simplegit</span><br><span class="line">   3300904..aad881d  featureA   -&gt; origin/featureA</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œé€šè¿‡ <code>git log</code> å¥¹å¯ä»¥çœ‹åˆ°å“ªäº›å‘ç”Ÿäº†æ”¹å˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git log featureA..origin/featureA</span><br><span class="line">commit aad881d154acdaeb2b6b18ea0e827ed8a6d671e6</span><br><span class="line">Author: John Smith &lt;jsmith@example.com&gt;</span><br><span class="line">Date:   Fri May 29 19:57:33 2009 -0700</span><br><span class="line"></span><br><span class="line">    changed log output to 30 from 25</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆï¼Œå¥¹åˆå¹¶ John çš„å·¥ä½œåˆ°å¥¹è‡ªå·±çš„ <code>featureA</code> åˆ†æ”¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout featureA</span><br><span class="line">Switched to branch &apos;featureA&apos;</span><br><span class="line">$ git merge origin/featureA</span><br><span class="line">Updating 3300904..aad881d</span><br><span class="line">Fast forward</span><br><span class="line"> lib/simplegit.rb |   10 +++++++++-</span><br><span class="line">1 files changed, 9 insertions(+), 1 deletions(-)</span><br></pre></td></tr></table></figure><p>Jessica æƒ³è¦è½»å¾®è°ƒæ•´ä¸€äº›ä¸œè¥¿ï¼Œæ‰€ä»¥å¥¹å†æ¬¡æäº¤ç„¶åå°†å…¶æ¨é€å›æœåŠ¡å™¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -am &apos;small tweak&apos;</span><br><span class="line">[featureA 774b3ed] small tweak</span><br><span class="line"> 1 files changed, 1 insertions(+), 1 deletions(-)</span><br><span class="line">$ git push</span><br><span class="line">...</span><br><span class="line">To jessica@githost:simplegit.git</span><br><span class="line">   3300904..774b3ed  featureA -&gt; featureA</span><br></pre></td></tr></table></figure><p>Jessica çš„æäº¤å†å²ç°åœ¨çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="git-chapter-2/img11.png" alt></p><p>Jessicaã€Josie ä¸ John é€šçŸ¥æ•´åˆè€…åœ¨æœåŠ¡å™¨ä¸Šçš„ <code>featureA</code> ä¸ <code>featureBee</code> åˆ†æ”¯å‡†å¤‡å¥½æ•´åˆåˆ°ä¸»çº¿ä¸­äº†ã€‚ åœ¨æ•´åˆè€…åˆå¹¶è¿™äº›åˆ†æ”¯åˆ°ä¸»çº¿åï¼Œä¸€æ¬¡æŠ“å–ä¼šæ‹¿ä¸‹æ¥ä¸€ä¸ªæ–°çš„åˆå¹¶æäº¤ï¼Œä½¿å†å²çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="git-chapter-2/img12.png" alt></p><p>è®¸å¤šå›¢é˜Ÿåˆ‡æ¢åˆ° Git æ˜¯å› ä¸ºè¿™ä¸€å…è®¸å¤šä¸ªå›¢é˜Ÿå¹¶è¡Œå·¥ä½œã€å¹¶åœ¨ä¹‹ååˆå¹¶ä¸åŒå·¥ä½œçš„èƒ½åŠ›ã€‚ å›¢é˜Ÿä¸­æ›´å°ä¸€äº›çš„å­å°ç»„å¯ä»¥é€šè¿‡è¿œç¨‹åˆ†æ”¯åä½œè€Œä¸å¿…å½±å“æˆ–å¦¨ç¢æ•´ä¸ªå›¢é˜Ÿçš„èƒ½åŠ›æ˜¯ Git çš„ä¸€ä¸ªå·¨å¤§ä¼˜åŠ¿ã€‚ åœ¨è¿™å„¿çœ‹åˆ°çš„å·¥ä½œæµç¨‹é¡ºåºç±»ä¼¼è¿™æ ·ï¼š</p><p><img src="git-chapter-2/img13.png" alt></p><h4 id="æ´¾ç”Ÿçš„å…¬å¼€é¡¹ç›®"><a href="#æ´¾ç”Ÿçš„å…¬å¼€é¡¹ç›®" class="headerlink" title="æ´¾ç”Ÿçš„å…¬å¼€é¡¹ç›®"></a>æ´¾ç”Ÿçš„å…¬å¼€é¡¹ç›®</h4><p>å‘å…¬å¼€é¡¹ç›®åšè´¡çŒ®æœ‰ä¸€ç‚¹å„¿ä¸åŒã€‚ å› ä¸ºæ²¡æœ‰æƒé™ç›´æ¥æ›´æ–°é¡¹ç›®çš„åˆ†æ”¯ï¼Œä½ å¿…é¡»ç”¨å…¶ä»–åŠæ³•å°†å·¥ä½œç»™ç»´æŠ¤è€…ã€‚ ç¬¬ä¸€ä¸ªä¾‹å­æè¿°åœ¨æ”¯æŒç®€å•æ´¾ç”Ÿçš„ Git æ‰˜ç®¡ä¸Šä½¿ç”¨æ´¾ç”Ÿæ¥åšè´¡çŒ®ã€‚ è®¸å¤šæ‰˜ç®¡ç«™ç‚¹æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼ˆåŒ…æ‹¬ GitHubã€BitBucketã€Google Codeã€repo.or.cz ç­‰ç­‰ï¼‰ï¼Œè®¸å¤šé¡¹ç›®ç»´æŠ¤è€…æœŸæœ›è¿™ç§é£æ ¼çš„è´¡çŒ®ã€‚ ä¸‹ä¸€èŠ‚ä¼šè®¨è®ºåå¥½é€šè¿‡é‚®ä»¶æ¥å—è´¡çŒ®è¡¥ä¸çš„é¡¹ç›®ã€‚</p><p>é¦–å…ˆï¼Œä½ å¯èƒ½æƒ³è¦å…‹éš†ä¸»ä»“åº“ï¼Œä¸ºè®¡åˆ’è´¡çŒ®çš„è¡¥ä¸æˆ–è¡¥ä¸åºåˆ—åˆ›å»ºä¸€ä¸ªç‰¹æ€§åˆ†æ”¯ï¼Œç„¶ååœ¨é‚£å„¿åšå·¥ä½œã€‚ é¡ºåºçœ‹èµ·æ¥åŸºæœ¬åƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git clone (url)</span><br><span class="line">$ cd project</span><br><span class="line">$ git checkout -b featureA</span><br><span class="line"># (work)</span><br><span class="line">$ git commit</span><br><span class="line"># (work)</span><br><span class="line">$ git commit</span><br></pre></td></tr></table></figure><p>å½“ä½ çš„åˆ†æ”¯å·¥ä½œå®Œæˆåå‡†å¤‡å°†å…¶è´¡çŒ®å›ç»´æŠ¤è€…ï¼Œå»åŸå§‹é¡¹ç›®ä¸­ç„¶åç‚¹å‡» â€œForkâ€ æŒ‰é’®ï¼Œåˆ›å»ºä¸€ä»½è‡ªå·±çš„å¯å†™çš„é¡¹ç›®æ´¾ç”Ÿä»“åº“ã€‚ ç„¶åéœ€è¦æ·»åŠ è¿™ä¸ªæ–°ä»“åº“ URL ä¸ºç¬¬äºŒä¸ªè¿œç¨‹ä»“åº“ï¼Œåœ¨æœ¬ä¾‹ä¸­ç§°ä½œ <code>myfork</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add myfork (url)</span><br></pre></td></tr></table></figure><p>ç„¶åéœ€è¦æ¨é€å·¥ä½œåˆ°ä¸Šé¢ã€‚ ç›¸å¯¹äºåˆå¹¶åˆ°ä¸»åˆ†æ”¯å†æ¨é€ä¸Šå»ï¼Œæ¨é€ä½ æ­£åœ¨å·¥ä½œçš„ç‰¹æ€§åˆ†æ”¯åˆ°ä»“åº“ä¸Šæ›´ç®€å•ã€‚ åŸå› æ˜¯å·¥ä½œå¦‚æœä¸è¢«æ¥å—æˆ–è€…æ˜¯è¢«æ‹£é€‰çš„ï¼Œå°±ä¸å¿…å›é€€ä½ çš„ <code>master</code> åˆ†æ”¯ã€‚ å¦‚æœç»´æŠ¤è€…åˆå¹¶ã€å˜åŸºæˆ–æ‹£é€‰ä½ çš„å·¥ä½œï¼Œä¸ç®¡æ€æ ·ä½ æœ€ç»ˆä¼šé€šè¿‡æ‹‰å–ä»–ä»¬çš„ä»“åº“æ‰¾å›æ¥ä½ çš„å·¥ä½œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u myfork featureA</span><br></pre></td></tr></table></figure><p>å½“å·¥ä½œå·²ç»è¢«æ¨é€åˆ°ä½ çš„æ´¾ç”Ÿåï¼Œä½ éœ€è¦é€šçŸ¥ç»´æŠ¤è€…ã€‚ è¿™é€šå¸¸è¢«ç§°ä½œä¸€ä¸ªæ‹‰å–è¯·æ±‚ï¼ˆpull requestï¼‰ï¼Œä½ æ—¢å¯ä»¥é€šè¿‡ç½‘ç«™ç”Ÿæˆå®ƒâ€”â€” GitHub æœ‰å®ƒè‡ªå·±çš„ Pull Request æœºåˆ¶ï¼Œæˆ‘ä»¬å°†ä¼šåœ¨ GitHub ä»‹ç»â€”â€”ä¹Ÿå¯ä»¥è¿è¡Œ <code>git request-pull</code> å‘½ä»¤ç„¶åæ‰‹åŠ¨åœ°å°†è¾“å‡ºå‘é€ç”µå­é‚®ä»¶ç»™é¡¹ç›®çš„ç»´æŠ¤è€…ã€‚</p><p><code>request-pull</code> å‘½ä»¤æ¥å—ç‰¹æ€§åˆ†æ”¯æ‹‰å…¥çš„åŸºç¡€åˆ†æ”¯ï¼Œä»¥åŠå®ƒä»¬æ‹‰å…¥çš„ Git ä»“åº“ URLï¼Œè¾“å‡ºè¯·æ±‚æ‹‰å…¥çš„æ‰€æœ‰ä¿®æ”¹çš„æ€»ç»“ã€‚ ä¾‹å¦‚ï¼ŒJessica æƒ³è¦å‘é€ç»™ John ä¸€ä¸ªæ‹‰å–è¯·æ±‚ï¼Œå¥¹å·²ç»åœ¨åˆšåˆšæ¨é€çš„åˆ†æ”¯ä¸Šåšäº†ä¸¤æ¬¡æäº¤ã€‚å¥¹å¯ä»¥è¿è¡Œè¿™ä¸ªï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git request-pull origin/master myfork</span><br><span class="line">The following changes since commit 1edee6b1d61823a2de3b09c160d7080b8d1b3a40:</span><br><span class="line">  John Smith (1):</span><br><span class="line">        added a new function</span><br><span class="line"></span><br><span class="line">are available in the git repository at:</span><br><span class="line"></span><br><span class="line">  git://githost/simplegit.git featureA</span><br><span class="line"></span><br><span class="line">Jessica Smith (2):</span><br><span class="line">      add limit to log function</span><br><span class="line">      change log output to 30 from 25</span><br><span class="line"></span><br><span class="line"> lib/simplegit.rb |   10 +++++++++-</span><br><span class="line"> 1 files changed, 9 insertions(+), 1 deletions(-)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè¾“å‡ºå¯ä»¥è¢«å‘é€ç»™ç»´æŠ¤è€…â€”â€”å®ƒå‘Šè¯‰ä»–ä»¬å·¥ä½œæ˜¯ä»å“ªä¸ªåˆ†æ”¯å¼€å§‹ã€å½’çº³çš„æäº¤ä¸ä»å“ªé‡Œæ‹‰å…¥è¿™äº›å·¥ä½œã€‚</p><p>åœ¨ä¸€ä¸ªä½ ä¸æ˜¯ç»´æŠ¤è€…çš„é¡¹ç›®ä¸Šï¼Œé€šå¸¸æœ‰ä¸€ä¸ªæ€»æ˜¯è·Ÿè¸ª <code>origin/master</code> çš„ <code>master</code> åˆ†æ”¯ä¼šå¾ˆæ–¹ä¾¿ï¼Œåœ¨ç‰¹æ€§åˆ†æ”¯ä¸Šåšå·¥ä½œæ˜¯å› ä¸ºå¦‚æœå®ƒä»¬è¢«æ‹’ç»æ—¶ä½ å¯ä»¥è½»æ¾åœ°ä¸¢å¼ƒã€‚ å¦‚æœåŒä¸€æ—¶é—´ä¸»ä»“åº“ç§»åŠ¨äº†ç„¶åä½ çš„æäº¤ä¸å†èƒ½å¹²å‡€åœ°åº”ç”¨ï¼Œé‚£ä¹ˆä½¿å·¥ä½œä¸»é¢˜ç‹¬ç«‹äºç‰¹æ€§åˆ†æ”¯ä¹Ÿä¼šä½¿ä½ å˜åŸºï¼ˆrebaseï¼‰å·¥ä½œæ—¶æ›´å®¹æ˜“ã€‚ ä¾‹å¦‚ï¼Œä½ æƒ³è¦æä¾›ç¬¬äºŒä¸ªç‰¹æ€§å·¥ä½œåˆ°é¡¹ç›®ï¼Œä¸è¦ç»§ç»­åœ¨åˆšåˆšæ¨é€çš„ç‰¹æ€§åˆ†æ”¯ä¸Šå·¥ä½œâ€”â€”ä»ä¸»ä»“åº“çš„ <code>master</code> åˆ†æ”¯é‡æ–°å¼€å§‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b featureB origin/master</span><br><span class="line"># (work)</span><br><span class="line">$ git commit</span><br><span class="line">$ git push myfork featureB</span><br><span class="line"># (email maintainer)</span><br><span class="line">$ git fetch origin</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæ¯ä¸€ä¸ªç‰¹æ€§éƒ½ä¿å­˜åœ¨ä¸€ä¸ªè´®è—åº“ä¸­â€”â€”ç±»ä¼¼äºè¡¥ä¸é˜Ÿåˆ—â€”â€”å¯ä»¥é‡å†™ã€å˜åŸºä¸ä¿®æ”¹è€Œä¸ä¼šè®©ç‰¹æ€§äº’ç›¸å¹²æ¶‰æˆ–äº’ç›¸ä¾èµ–ï¼Œåƒè¿™æ ·ï¼š</p><p><img src="git-chapter-2/img14.png" alt></p><p>å‡è®¾é¡¹ç›®ç»´æŠ¤è€…å·²ç»æ‹‰å–äº†ä¸€ä¸²å…¶ä»–è¡¥ä¸ï¼Œç„¶åå°è¯•æ‹‰å–ä½ çš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ï¼Œä½†æ˜¯æ²¡æœ‰å¹²å‡€åœ°åˆå¹¶ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å°è¯•å˜åŸºé‚£ä¸ªåˆ†æ”¯åˆ° <code>origin/master</code> çš„é¡¶éƒ¨ï¼Œä¸ºç»´æŠ¤è€…è§£å†³å†²çªï¼Œç„¶åé‡æ–°æäº¤ä½ çš„æ”¹åŠ¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout featureA</span><br><span class="line">$ git rebase origin/master</span><br><span class="line">$ git push -f myfork featureA</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¼šé‡å†™ä½ çš„å†å²ï¼Œç°åœ¨çœ‹èµ·æ¥åƒæ˜¯ featureA å·¥ä½œä¹‹åçš„æäº¤å†å²</p><p><img src="git-chapter-2/img15.png" alt></p><p>å› ä¸ºä½ å°†åˆ†æ”¯å˜åŸºäº†ï¼Œæ‰€ä»¥å¿…é¡»ä¸ºæ¨é€å‘½ä»¤æŒ‡å®š <code>-f</code> é€‰é¡¹ï¼Œè¿™æ ·æ‰èƒ½å°†æœåŠ¡å™¨ä¸Šæœ‰ä¸€ä¸ªä¸æ˜¯å®ƒçš„åä»£çš„æäº¤çš„ <code>featureA</code> åˆ†æ”¯æ›¿æ¢æ‰ã€‚ ä¸€ä¸ªæ›¿ä»£çš„é€‰é¡¹æ˜¯æ¨é€è¿™ä¸ªæ–°å·¥ä½œåˆ°æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ªä¸åŒåˆ†æ”¯ï¼ˆå¯èƒ½ç§°ä½œ <code>featureAv2</code>ï¼‰ã€‚</p><p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªæ›´æœ‰å¯èƒ½çš„æƒ…å†µï¼šç»´æŠ¤è€…çœ‹åˆ°äº†ä½ çš„ç¬¬äºŒä¸ªåˆ†æ”¯ä¸Šçš„å·¥ä½œå¹¶ä¸”å¾ˆå–œæ¬¢å…¶ä¸­çš„æ¦‚å¿µï¼Œä½†æ˜¯æƒ³è¦ä½ ä¿®æ”¹ä¸€ä¸‹å®ç°çš„ç»†èŠ‚ã€‚ ä½ ä¹Ÿå¯ä»¥åˆ©ç”¨è¿™æ¬¡æœºä¼šå°†å·¥ä½œåŸºäºé¡¹ç›®ç°åœ¨çš„ <code>master</code> åˆ†æ”¯ã€‚ ä½ ä»ç°åœ¨çš„ <code>origin/master</code> åˆ†æ”¯å¼€å§‹ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œåœ¨é‚£å„¿å‹ç¼© <code>featureB</code> çš„æ”¹åŠ¨ï¼Œè§£å†³ä»»ä½•å†²çªï¼Œæ”¹å˜å®ç°ï¼Œç„¶åæ¨é€å®ƒä¸ºä¸€ä¸ªæ–°åˆ†æ”¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b featureBv2 origin/master</span><br><span class="line">$ git merge --squash featureB</span><br><span class="line"># (change implementation)</span><br><span class="line">$ git commit</span><br><span class="line">$ git push myfork featureBv2</span><br></pre></td></tr></table></figure><p><code>--squash</code> é€‰é¡¹æ¥å—è¢«åˆå¹¶çš„åˆ†æ”¯ä¸Šçš„æ‰€æœ‰å·¥ä½œï¼Œå¹¶å°†å…¶å‹ç¼©è‡³ä¸€ä¸ªå˜æ›´é›†ï¼Œä½¿ä»“åº“å˜æˆä¸€ä¸ªçœŸæ­£çš„åˆå¹¶å‘ç”Ÿçš„çŠ¶æ€ï¼Œè€Œä¸ä¼šçœŸçš„ç”Ÿæˆä¸€ä¸ªåˆå¹¶æäº¤ã€‚ è¿™æ„å‘³ç€ä½ çš„æœªæ¥çš„æäº¤å°†ä¼šåªæœ‰ä¸€ä¸ªçˆ¶æäº¤ï¼Œå¹¶å…è®¸ä½ å¼•å…¥å¦ä¸€ä¸ªåˆ†æ”¯çš„æ‰€æœ‰æ”¹åŠ¨ï¼Œç„¶ååœ¨è®°å½•ä¸€ä¸ªæ–°æäº¤å‰åšæ›´å¤šçš„æ”¹åŠ¨ã€‚ åŒæ · <code>--no-commit</code> é€‰é¡¹åœ¨é»˜è®¤åˆå¹¶è¿‡ç¨‹ä¸­å¯ä»¥ç”¨æ¥å»¶è¿Ÿç”Ÿæˆåˆå¹¶æäº¤ã€‚</p><p>ç°åœ¨ä½ å¯ä»¥ç»™ç»´æŠ¤è€…å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œè¡¨ç¤ºä½ å·²ç»åšäº†è¦æ±‚çš„ä¿®æ”¹ç„¶åä»–ä»¬å¯ä»¥åœ¨ä½ çš„ <code>featureBv2</code> åˆ†æ”¯ä¸Šæ‰¾åˆ°é‚£äº›æ”¹åŠ¨ã€‚</p><p><img src="git-chapter-2/img16.png" alt></p><h4 id="é€šè¿‡é‚®ä»¶çš„å…¬å¼€é¡¹ç›®"><a href="#é€šè¿‡é‚®ä»¶çš„å…¬å¼€é¡¹ç›®" class="headerlink" title="é€šè¿‡é‚®ä»¶çš„å…¬å¼€é¡¹ç›®"></a>é€šè¿‡é‚®ä»¶çš„å…¬å¼€é¡¹ç›®</h4><p>è®¸å¤šé¡¹ç›®å»ºç«‹äº†æ¥å—è¡¥ä¸çš„æµç¨‹â€”â€”éœ€è¦æ£€æŸ¥æ¯ä¸€ä¸ªé¡¹ç›®çš„ç‰¹å®šè§„åˆ™ï¼Œå› ä¸ºå®ƒä»¬ä¹‹é—´æœ‰åŒºåˆ«ã€‚ å› ä¸ºæœ‰å‡ ä¸ªå†å²æ‚ ä¹…çš„ã€å¤§å‹çš„é¡¹ç›®ä¼šé€šè¿‡ä¸€ä¸ªå¼€å‘è€…çš„é‚®ä»¶åˆ—è¡¨æ¥å—è¡¥ä¸ï¼Œç°åœ¨æˆ‘ä»¬å°†ä¼šé€šè¿‡ä¸€ä¸ªä¾‹å­æ¥æ¼”ç¤ºã€‚</p><p>å·¥ä½œæµç¨‹ä¸ä¹‹å‰çš„ç”¨ä¾‹æ˜¯ç±»ä¼¼çš„â€”â€”ä½ ä¸ºå·¥ä½œçš„æ¯ä¸€ä¸ªè¡¥ä¸åºåˆ—åˆ›å»ºç‰¹æ€§åˆ†æ”¯ã€‚ åŒºåˆ«æ˜¯å¦‚ä½•æäº¤å®ƒä»¬åˆ°é¡¹ç›®ä¸­ã€‚ ç”Ÿæˆæ¯ä¸€ä¸ªæäº¤åºåˆ—çš„ç”µå­é‚®ä»¶ç‰ˆæœ¬ç„¶åé‚®å¯„å®ƒä»¬åˆ°å¼€å‘è€…é‚®ä»¶åˆ—è¡¨ï¼Œè€Œä¸æ˜¯æ´¾ç”Ÿé¡¹ç›®ç„¶åæ¨é€åˆ°ä½ è‡ªå·±çš„å¯å†™ç‰ˆæœ¬ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b topicA</span><br><span class="line"># (work)</span><br><span class="line">$ git commit</span><br><span class="line"># (work)</span><br><span class="line">$ git commit</span><br></pre></td></tr></table></figure><p>ç°åœ¨æœ‰ä¸¤ä¸ªæäº¤è¦å‘é€åˆ°é‚®ä»¶åˆ—è¡¨ã€‚ ä½¿ç”¨ <code>git format-patch</code> æ¥ç”Ÿæˆå¯ä»¥é‚®å¯„åˆ°åˆ—è¡¨çš„ mbox æ ¼å¼çš„æ–‡ä»¶â€”â€”å®ƒå°†æ¯ä¸€ä¸ªæäº¤è½¬æ¢ä¸ºä¸€å°ç”µå­é‚®ä»¶ï¼Œæäº¤ä¿¡æ¯çš„ç¬¬ä¸€è¡Œä½œä¸ºä¸»é¢˜ï¼Œå‰©ä½™ä¿¡æ¯ä¸æäº¤å¼•å…¥çš„è¡¥ä¸ä½œä¸ºæ­£æ–‡ã€‚ å®ƒæœ‰ä¸€ä¸ªå¥½å¤„æ˜¯ä½¿ç”¨ <code>format-patch</code> ç”Ÿæˆçš„ä¸€å°ç”µå­é‚®ä»¶åº”ç”¨çš„æäº¤æ­£ç¡®åœ°ä¿ç•™äº†æ‰€æœ‰çš„æäº¤ä¿¡æ¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git format-patch -M origin/master</span><br><span class="line">0001-add-limit-to-log-function.patch</span><br><span class="line">0002-changed-log-output-to-30-from-25.patch</span><br></pre></td></tr></table></figure><p><code>format-patch</code> å‘½ä»¤æ‰“å°å‡ºå®ƒåˆ›å»ºçš„è¡¥ä¸æ–‡ä»¶åå­—ã€‚ <code>-M</code> å¼€å…³å‘Šè¯‰ Git æŸ¥æ‰¾é‡å‘½åã€‚ æ–‡ä»¶æœ€åçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ cat 0001-add-limit-to-log-function.patch</span><br><span class="line">From 330090432754092d704da8e76ca5c05c198e71a8 Mon Sep 17 00:00:00 2001</span><br><span class="line">From: Jessica Smith &lt;jessica@example.com&gt;</span><br><span class="line">Date: Sun, 6 Apr 2008 10:17:23 -0700</span><br><span class="line">Subject: [PATCH 1/2] add limit to log function</span><br><span class="line"></span><br><span class="line">Limit log functionality to the first 20</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"> lib/simplegit.rb |    2 +-</span><br><span class="line"> 1 files changed, 1 insertions(+), 1 deletions(-)</span><br><span class="line"></span><br><span class="line">diff --git a/lib/simplegit.rb b/lib/simplegit.rb</span><br><span class="line">index 76f47bc..f9815f1 100644</span><br><span class="line">--- a/lib/simplegit.rb</span><br><span class="line">+++ b/lib/simplegit.rb</span><br><span class="line">@@ -14,7 +14,7 @@ class SimpleGit</span><br><span class="line">   end</span><br><span class="line"></span><br><span class="line">   def log(treeish = &apos;master&apos;)</span><br><span class="line">-    command(&quot;git log #&#123;treeish&#125;&quot;)</span><br><span class="line">+    command(&quot;git log -n 20 #&#123;treeish&#125;&quot;)</span><br><span class="line">   end</span><br><span class="line"></span><br><span class="line">   def ls_tree(treeish = &apos;master&apos;)</span><br><span class="line">--</span><br><span class="line">2.1.0</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç¼–è¾‘è¿™äº›è¡¥ä¸æ–‡ä»¶ä¸ºé‚®ä»¶åˆ—è¡¨æ·»åŠ æ›´å¤šä¸æƒ³è¦åœ¨æäº¤ä¿¡æ¯ä¸­æ˜¾ç¤ºå‡ºæ¥çš„ä¿¡æ¯ã€‚ å¦‚æœåœ¨ <code>---</code> è¡Œä¸è¡¥ä¸å¼€å¤´ï¼ˆ<code>diff --git</code> è¡Œï¼‰ä¹‹é—´æ·»åŠ æ–‡æœ¬ï¼Œé‚£ä¹ˆå¼€å‘è€…å°±å¯ä»¥é˜…è¯»å®ƒï¼›ä½†æ˜¯åº”ç”¨è¡¥ä¸æ—¶ä¼šæ’é™¤å®ƒã€‚</p><p>ä¸ºäº†å°†å…¶é‚®å¯„åˆ°é‚®ä»¶åˆ—è¡¨ï¼Œä½ æ—¢å¯ä»¥å°†æ–‡ä»¶ç²˜è´´è¿›ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œç¨‹åºå‘é€å®ƒã€‚ ç²˜è´´æ–‡æœ¬ç»å¸¸ä¼šå‘ç”Ÿæ ¼å¼åŒ–é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯é‚£äº›ä¸ä¼šåˆé€‚åœ°ä¿ç•™æ¢è¡Œç¬¦ä¸å…¶ä»–ç©ºç™½çš„ â€œæ›´èªæ˜çš„â€ å®¢æˆ·ç«¯ã€‚ å¹¸è¿çš„æ˜¯ï¼ŒGit æä¾›äº†ä¸€ä¸ªå·¥å…·å¸®åŠ©ä½ é€šè¿‡ IMAP å‘é€æ­£ç¡®æ ¼å¼åŒ–çš„è¡¥ä¸ï¼Œè¿™å¯èƒ½å¯¹ä½ æ›´å®¹æ˜“äº›ã€‚ æˆ‘ä»¬å°†ä¼šæ¼”ç¤ºå¦‚ä½•é€šè¿‡ Gmail å‘é€ä¸€ä¸ªè¡¥ä¸ï¼Œå®ƒæ­£å¥½æ˜¯æˆ‘ä»¬æ‰€çŸ¥æœ€å¥½çš„é‚®ä»¶ä»£ç†ï¼›å¯ä»¥åœ¨ä¹‹å‰æåˆ°çš„ Git æºä»£ç ä¸­çš„ <code>Documentation/SubmittingPatches</code> æ–‡ä»¶çš„æœ€ä¸‹é¢äº†è§£ä¸€ç³»åˆ—é‚®ä»¶ç¨‹åºçš„è¯¦ç»†æŒ‡ä»¤ã€‚</p><p>é¦–å…ˆï¼Œéœ€è¦åœ¨ <code>~/.gitconfig</code> æ–‡ä»¶ä¸­è®¾ç½® imap åŒºå—ã€‚ å¯ä»¥é€šè¿‡ä¸€ç³»åˆ—çš„ <code>git config</code> å‘½ä»¤æ¥åˆ†åˆ«è®¾ç½®æ¯ä¸€ä¸ªå€¼ï¼Œæˆ–è€…æ‰‹åŠ¨æ·»åŠ å®ƒä»¬ï¼Œä¸ç®¡æ€æ ·æœ€åé…ç½®æ–‡ä»¶åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[imap]</span><br><span class="line">  folder = &quot;[Gmail]/Drafts&quot;</span><br><span class="line">  host = imaps://imap.gmail.com</span><br><span class="line">  user = user@gmail.com</span><br><span class="line">  pass = p4ssw0rd</span><br><span class="line">  port = 993</span><br><span class="line">  sslverify = false</span><br></pre></td></tr></table></figure><p>å¦‚æœ IMAP æœåŠ¡å™¨ä¸ä½¿ç”¨ SSLï¼Œæœ€åä¸¤è¡Œå¯èƒ½æ²¡æœ‰å¿…è¦ï¼Œhost çš„å€¼ä¼šæ˜¯ <code>imap://</code> è€Œä¸æ˜¯ <code>imaps://</code>ã€‚ å½“é‚£äº›è®¾ç½®å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ <code>git imap-send</code> å°†è¡¥ä¸åºåˆ—æ”¾åœ¨ç‰¹å®š IMAP æœåŠ¡å™¨çš„ Drafts æ–‡ä»¶å¤¹ä¸­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cat *.patch |git imap-send</span><br><span class="line">Resolving imap.gmail.com... ok</span><br><span class="line">Connecting to [74.125.142.109]:993... ok</span><br><span class="line">Logging in...</span><br><span class="line">sending 2 messages</span><br><span class="line">100% (2/2) done</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªæ—¶å€™ï¼Œä½ åº”è¯¥èƒ½å¤Ÿåˆ° Drafts æ–‡ä»¶å¤¹ä¸­ï¼Œä¿®æ”¹æ”¶ä»¶äººå­—æ®µä¸ºæƒ³è¦å‘é€è¡¥ä¸çš„é‚®ä»¶åˆ—è¡¨ï¼Œå¯èƒ½éœ€è¦æŠ„é€ç»™ç»´æŠ¤è€…æˆ–è´Ÿè´£é‚£ä¸ªéƒ¨åˆ†çš„äººï¼Œç„¶åå‘é€ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ª SMTP æœåŠ¡å™¨å‘é€è¡¥ä¸ã€‚ åŒä¹‹å‰ä¸€æ ·ï¼Œä½ å¯ä»¥é€šè¿‡ä¸€ç³»åˆ—çš„ <code>git config</code> å‘½ä»¤æ¥åˆ†åˆ«è®¾ç½®é€‰é¡¹ï¼Œæˆ–è€…ä½ å¯ä»¥æ‰‹åŠ¨åœ°å°†å®ƒä»¬æ·»åŠ åˆ°ä½ çš„ <code>~/.gitconfig</code> æ–‡ä»¶çš„ <code>sendmail</code> åŒºå—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[sendemail]</span><br><span class="line">  smtpencryption = tls</span><br><span class="line">  smtpserver = smtp.gmail.com</span><br><span class="line">  smtpuser = user@gmail.com</span><br><span class="line">  smtpserverport = 587</span><br></pre></td></tr></table></figure><p>å½“è¿™å®Œæˆåï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>git send-email</code> å‘é€ä½ çš„è¡¥ä¸ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git send-email *.patch</span><br><span class="line">0001-added-limit-to-log-function.patch</span><br><span class="line">0002-changed-log-output-to-30-from-25.patch</span><br><span class="line">Who should the emails appear to be from? [Jessica Smith &lt;jessica@example.com&gt;]</span><br><span class="line">Emails will be sent from: Jessica Smith &lt;jessica@example.com&gt;</span><br><span class="line">Who should the emails be sent to? jessica@example.com</span><br><span class="line">Message-ID to be used as In-Reply-To for the first email? y</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå¯¹äºæ­£åœ¨å‘é€çš„æ¯ä¸€ä¸ªè¡¥ä¸ï¼ŒGit ä¼šåå‡ºè¿™æ ·çš„ä¸€ä¸²æ—¥å¿—ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(mbox) Adding cc: Jessica Smith &lt;jessica@example.com&gt; from</span><br><span class="line">  \line &apos;From: Jessica Smith &lt;jessica@example.com&gt;&apos;</span><br><span class="line">OK. Log says:</span><br><span class="line">Sendmail: /usr/sbin/sendmail -i jessica@example.com</span><br><span class="line">From: Jessica Smith &lt;jessica@example.com&gt;</span><br><span class="line">To: jessica@example.com</span><br><span class="line">Subject: [PATCH 1/2] added limit to log function</span><br><span class="line">Date: Sat, 30 May 2009 13:29:15 -0700</span><br><span class="line">Message-Id: &lt;1243715356-61726-1-git-send-email-jessica@example.com&gt;</span><br><span class="line">X-Mailer: git-send-email 1.6.2.rc1.20.g8c5b.dirty</span><br><span class="line">In-Reply-To: &lt;y&gt;</span><br><span class="line">References: &lt;y&gt;</span><br><span class="line"></span><br><span class="line">Result: OK</span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>è¿™ä¸ªéƒ¨åˆ†ä»‹ç»äº†å¤„ç†å¯èƒ½ä¼šé‡åˆ°çš„å‡ ä¸ªè¿¥ç„¶ä¸åŒç±»å‹çš„ Git é¡¹ç›®çš„ä¸€äº›å¸¸è§çš„å·¥ä½œæµç¨‹ï¼Œä»‹ç»äº†å¸®åŠ©ç®¡ç†è¿™ä¸ªè¿‡ç¨‹çš„ä¸€äº›æ–°å·¥å…·ã€‚ æ¥ä¸‹æ¥ï¼Œä½ ä¼šäº†è§£åˆ°å¦‚ä½•åœ¨è´¡çŒ®çš„å¦ä¸€é¢å·¥ä½œï¼šç»´æŠ¤ä¸€ä¸ª Git é¡¹ç›®ã€‚ ä½ å°†ä¼šå­¦ä¹ å¦‚ä½•æˆä¸ºä¸€ä¸ªä»æ…ˆçš„ç‹¬è£è€…æˆ–æ•´åˆç®¡ç†è€…ã€‚</p><h3 id="ç»´æŠ¤é¡¹ç›®"><a href="#ç»´æŠ¤é¡¹ç›®" class="headerlink" title="ç»´æŠ¤é¡¹ç›®"></a>ç»´æŠ¤é¡¹ç›®</h3><p>é™¤äº†å¦‚ä½•æœ‰æ•ˆåœ°å‚ä¸ä¸€ä¸ªé¡¹ç›®çš„è´¡çŒ®ä¹‹å¤–ï¼Œä½ å¯èƒ½ä¹Ÿéœ€è¦äº†è§£å¦‚ä½•ç»´æŠ¤é¡¹ç›®ã€‚ è¿™åŒ…å«æ¥å—å¹¶åº”ç”¨åˆ«äººä½¿ç”¨ <code>format-patch</code> ç”Ÿæˆå¹¶é€šè¿‡ç”µå­é‚®ä»¶å‘é€è¿‡æ¥çš„è¡¥ä¸ï¼Œæˆ–å¯¹é¡¹ç›®æ·»åŠ çš„è¿œç¨‹ç‰ˆæœ¬åº“åˆ†æ”¯ä¸­çš„æ›´æ”¹è¿›è¡Œæ•´åˆã€‚ ä½†æ— è®ºæ˜¯ç®¡ç†ç‰ˆæœ¬åº“ï¼Œè¿˜æ˜¯å¸®å¿™éªŒè¯ã€å®¡æ ¸æ”¶åˆ°çš„è¡¥ä¸ï¼Œéƒ½éœ€è¦åŒå…¶ä»–è´¡çŒ®è€…çº¦å®šæŸç§é•¿æœŸå¯æŒç»­çš„å·¥ä½œæ–¹å¼ã€‚</p><h4 id="åœ¨ç‰¹æ€§åˆ†æ”¯ä¸­å·¥ä½œ"><a href="#åœ¨ç‰¹æ€§åˆ†æ”¯ä¸­å·¥ä½œ" class="headerlink" title="åœ¨ç‰¹æ€§åˆ†æ”¯ä¸­å·¥ä½œ"></a>åœ¨ç‰¹æ€§åˆ†æ”¯ä¸­å·¥ä½œ</h4><p>å¦‚æœä½ æƒ³å‘é¡¹ç›®ä¸­æ•´åˆä¸€äº›æ–°ä¸œè¥¿ï¼Œæœ€å¥½å°†è¿™äº›å°è¯•å±€é™åœ¨ç‰¹æ€§åˆ†æ”¯â€”â€”ä¸€ç§é€šå¸¸ç”¨æ¥å°è¯•æ–°ä¸œè¥¿çš„ä¸´æ—¶åˆ†æ”¯ä¸­ã€‚ è¿™æ ·ä¾¿äºå•ç‹¬è°ƒæ•´è¡¥ä¸ï¼Œå¦‚æœé‡åˆ°æ— æ³•æ­£å¸¸å·¥ä½œçš„æƒ…å†µï¼Œå¯ä»¥å…ˆä¸ç”¨ç®¡ï¼Œç­‰åˆ°æœ‰æ—¶é—´çš„æ—¶å€™å†æ¥å¤„ç†ã€‚ å¦‚æœä½ åŸºäºä½ æ‰€å°è¯•è¿›è¡Œå·¥ä½œçš„ç‰¹æ€§ä¸ºåˆ†æ”¯åˆ›å»ºä¸€ä¸ªç®€å•çš„åå­—ï¼Œæ¯”å¦‚ <code>ruby_client</code> æˆ–è€…å…·æœ‰ç±»ä¼¼æè¿°æ€§çš„å…¶ä»–åå­—ï¼Œè¿™æ ·å³ä½¿ä½ å¿…é¡»æš‚æ—¶æŠ›å¼ƒå®ƒï¼Œä»¥åå›æ¥æ—¶ä¹Ÿä¸ä¼šå¿˜è®°ã€‚ é¡¹ç›®çš„ç»´æŠ¤è€…ä¸€èˆ¬è¿˜ä¼šä¸ºè¿™äº›åˆ†æ”¯é™„å¸¦å‘½åç©ºé—´ï¼Œæ¯”å¦‚ <code>sc/ruby_client</code>ï¼ˆå…¶ä¸­ sc æ˜¯è´¡çŒ®è¯¥é¡¹å·¥ä½œçš„äººåç§°çš„ç®€å†™ï¼‰ã€‚ ä½ åº”è¯¥è®°å¾—ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼åŸºäº master åˆ†æ”¯å»ºç«‹ç‰¹æ€§åˆ†æ”¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch sc/ruby_client master</span><br></pre></td></tr></table></figure><p>æˆ–è€…å¦‚æœä½ åŒæ—¶æƒ³ç«‹åˆ»åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ä¸Šçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>checkout -b</code> é€‰é¡¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b sc/ruby_client master</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½å°†åˆ«äººè´¡çŒ®çš„å·¥ä½œåŠ å…¥åˆ°è¿™ä¸ªç‰¹æ€§åˆ†æ”¯ï¼Œå¹¶è€ƒè™‘æ˜¯å¦å°†å…¶åˆå¹¶åˆ°é•¿æœŸåˆ†æ”¯ä¸­å»äº†ã€‚</p><h4 id="åº”ç”¨æ¥è‡ªé‚®ä»¶çš„è¡¥ä¸"><a href="#åº”ç”¨æ¥è‡ªé‚®ä»¶çš„è¡¥ä¸" class="headerlink" title="åº”ç”¨æ¥è‡ªé‚®ä»¶çš„è¡¥ä¸"></a>åº”ç”¨æ¥è‡ªé‚®ä»¶çš„è¡¥ä¸</h4><p>å¦‚æœä½ é€šè¿‡ç”µå­é‚®ä»¶æ”¶åˆ°äº†ä¸€ä¸ªéœ€è¦æ•´åˆè¿›å…¥é¡¹ç›®çš„è¡¥ä¸ï¼Œä½ éœ€è¦å°†å…¶åº”ç”¨åˆ°ç‰¹æ€§åˆ†æ”¯ä¸­è¿›è¡Œè¯„ä¼°ã€‚ æœ‰ä¸¤ç§åº”ç”¨è¯¥ç§è¡¥ä¸çš„æ–¹æ³•ï¼šä½¿ç”¨ <code>git apply</code>ï¼Œæˆ–è€…ä½¿ç”¨ <code>git am</code>ã€‚</p><p><strong>ä½¿ç”¨ apply å‘½ä»¤åº”ç”¨è¡¥ä¸</strong><br>å¦‚æœä½ æ”¶åˆ°äº†ä¸€ä¸ªä½¿ç”¨ <code>git diff</code> æˆ– <code>Unix diff</code> å‘½ä»¤ï¼ˆä¸æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå…·ä½“è§ä¸‹ä¸€èŠ‚ï¼‰åˆ›å»ºçš„è¡¥ä¸ï¼Œå¯ä»¥ä½¿ç”¨ <code>git apply</code> å‘½ä»¤æ¥åº”ç”¨ã€‚ å‡è®¾ä½ å°†è¡¥ä¸ä¿å­˜åœ¨äº† <code>/tmp/patch-ruby-client.patch</code> ä¸­ï¼Œå¯ä»¥è¿™æ ·åº”ç”¨è¡¥ä¸ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git apply /tmp/patch-ruby-client.patch</span><br></pre></td></tr></table></figure><p>è¿™ä¼šä¿®æ”¹å·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶ã€‚ å®ƒä¸è¿è¡Œ <code>patch -p1</code> å‘½ä»¤æ¥åº”ç”¨è¡¥ä¸å‡ ä¹æ˜¯ç­‰æ•ˆçš„ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼æ›´åŠ ä¸¥æ ¼ï¼Œç›¸å¯¹äº <code>patch</code> æ¥è¯´ï¼Œå®ƒèƒ½å¤Ÿæ¥å—çš„æ¨¡ç³ŠåŒ¹é…æ›´å°‘ã€‚ å®ƒä¹Ÿèƒ½å¤Ÿå¤„ç† <code>git diff</code> æ ¼å¼æ–‡ä»¶æ‰€æè¿°çš„æ–‡ä»¶æ·»åŠ ã€åˆ é™¤å’Œé‡å‘½åæ“ä½œï¼Œè€Œ <code>patch</code> åˆ™ä¸ä¼šã€‚ æœ€åï¼Œ<code>git apply</code> å‘½ä»¤é‡‡ç”¨äº†ä¸€ç§â€œå…¨éƒ¨åº”ç”¨ï¼Œå¦åˆ™å°±å…¨éƒ¨æ’¤é”€ï¼ˆapply all or abort allï¼‰â€çš„æ¨¡å‹ï¼Œå³è¡¥ä¸åªæœ‰å…¨éƒ¨å†…å®¹éƒ½è¢«åº”ç”¨å’Œå®Œå…¨ä¸è¢«åº”ç”¨ä¸¤ä¸ªçŠ¶æ€ï¼Œè€Œ <code>patch</code> å¯èƒ½ä¼šå¯¼è‡´è¡¥ä¸æ–‡ä»¶è¢«éƒ¨åˆ†åº”ç”¨ï¼Œæœ€åä½¿ä½ çš„å·¥ä½œç›®å½•ä¿æŒåœ¨ä¸€ä¸ªæ¯”è¾ƒå¥‡æ€ªçš„çŠ¶æ€ã€‚ æ€»ä½“æ¥çœ‹ï¼Œ<code>git apply</code> å‘½ä»¤è¦æ¯” <code>patch</code> è°¨æ…å¾—å¤šã€‚ å¹¶ä¸”ï¼Œå®ƒä¸ä¼šä¸ºä½ åˆ›å»ºæäº¤â€”â€”åœ¨è¿è¡Œä¹‹åï¼Œä½ éœ€è¦æ‰‹åŠ¨æš‚å­˜å¹¶æäº¤è¡¥ä¸æ‰€å¼•å…¥çš„æ›´æ”¹ã€‚</p><p>åœ¨å®é™…åº”ç”¨è¡¥ä¸å‰ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ <code>git apply</code> æ¥æ£€æŸ¥è¡¥ä¸æ˜¯å¦å¯ä»¥é¡ºåˆ©åº”ç”¨â€”â€”å³å¯¹è¡¥ä¸è¿è¡Œ <code>git apply --check</code> å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git apply --check 0001-seeing-if-this-helps-the-gem.patch</span><br><span class="line">error: patch failed: ticgit.gemspec:1</span><br><span class="line">error: ticgit.gemspec: patch does not apply</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰äº§ç”Ÿè¾“å‡ºï¼Œåˆ™è¯¥è¡¥ä¸å¯ä»¥é¡ºåˆ©åº”ç”¨ã€‚ å¦‚æœæ£€æŸ¥å¤±è´¥äº†ï¼Œè¯¥å‘½ä»¤è¿˜ä¼šä»¥ä¸€ä¸ªéé›¶çš„çŠ¶æ€é€€å‡ºï¼Œæ‰€ä»¥éœ€è¦æ—¶ä½ ä¹Ÿå¯ä»¥åœ¨è„šæœ¬ä¸­ä½¿ç”¨å®ƒã€‚</p><p><strong>ä½¿ç”¨ am å‘½ä»¤åº”ç”¨è¡¥ä¸</strong><br>å¦‚æœè¡¥ä¸çš„è´¡çŒ®è€…ä¹Ÿæ˜¯ä¸€ä¸ª Git ç”¨æˆ·ï¼Œå¹¶ä¸”å…¶èƒ½ç†Ÿç»ƒä½¿ç”¨ <code>format-patch</code> å‘½ä»¤æ¥ç”Ÿæˆè¡¥ä¸ï¼Œè¿™æ ·çš„è¯ä½ çš„å·¥ä½œä¼šå˜å¾—æ›´åŠ è½»æ¾ï¼Œå› ä¸ºè¿™ç§è¡¥ä¸ä¸­åŒ…å«äº†ä½œè€…ä¿¡æ¯å’Œæäº¤ä¿¡æ¯ä¾›ä½ å‚è€ƒã€‚ å¦‚æœå¯èƒ½çš„è¯ï¼Œè¯·é¼“åŠ±è´¡çŒ®è€…ä½¿ç”¨ <code>format-patch</code> è€Œä¸æ˜¯ <code>diff</code> æ¥ä¸ºä½ ç”Ÿæˆè¡¥ä¸ã€‚ è€Œåªæœ‰å¯¹è€å¼çš„è¡¥ä¸ï¼Œä½ æ‰å¿…é¡»ä½¿ç”¨ <code>git apply</code> å‘½ä»¤ã€‚</p><p>è¦åº”ç”¨ä¸€ä¸ªç”± <code>format-patch</code> å‘½ä»¤ç”Ÿæˆçš„è¡¥ä¸ï¼Œä½ åº”è¯¥ä½¿ç”¨ <code>git am</code> å‘½ä»¤ã€‚ ä»æŠ€æœ¯çš„è§’åº¦çœ‹ï¼Œ<code>git am</code> æ˜¯ä¸ºäº†è¯»å– mbox æ–‡ä»¶è€Œæ„å»ºçš„ï¼Œmbox æ˜¯ä¸€ç§ç”¨æ¥åœ¨å•ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­å­˜å‚¨ä¸€ä¸ªæˆ–å¤šä¸ªç”µå­é‚®ä»¶æ¶ˆæ¯çš„ç®€å•çº¯æ–‡æœ¬æ ¼å¼ã€‚ å…¶å¤§è‡´æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">From 330090432754092d704da8e76ca5c05c198e71a8 Mon Sep 17 00:00:00 2001</span><br><span class="line">From: Jessica Smith &lt;jessica@example.com&gt;</span><br><span class="line">Date: Sun, 6 Apr 2008 10:17:23 -0700</span><br><span class="line">Subject: [PATCH 1/2] add limit to log function</span><br><span class="line"></span><br><span class="line">Limit log functionality to the first 20</span><br></pre></td></tr></table></figure><p>è¿™å…¶å®å°±æ˜¯ä½ å‰é¢çœ‹åˆ°çš„ <code>format-patch</code> å‘½ä»¤è¾“å‡ºçš„å¼€å§‹å‡ è¡Œã€‚ è€ŒåŒæ—¶å®ƒä¹Ÿæ˜¯æœ‰æ•ˆçš„ mbox ç”µå­é‚®ä»¶æ ¼å¼ã€‚ å¦‚æœæœ‰äººä½¿ç”¨ <code>git send-email</code> å‘½ä»¤å°†è¡¥ä¸ä»¥ç”µå­é‚®ä»¶çš„å½¢å¼å‘é€ç»™ä½ ï¼Œä½ ä¾¿å¯ä»¥å°†å®ƒä¸‹è½½ä¸º mbox æ ¼å¼çš„æ–‡ä»¶ï¼Œä¹‹åå°† <code>git am</code> å‘½ä»¤æŒ‡å‘è¯¥æ–‡ä»¶ï¼Œå®ƒä¼šåº”ç”¨å…¶ä¸­åŒ…å«çš„æ‰€æœ‰è¡¥ä¸ã€‚ å¦‚æœä½ æ‰€ä½¿ç”¨çš„é‚®ä»¶å®¢æˆ·ç«¯èƒ½å¤ŸåŒæ—¶å°†å¤šå°é‚®ä»¶ä¿å­˜ä¸º mbox æ ¼å¼çš„æ–‡ä»¶ï¼Œä½ ç”šè‡³èƒ½å¤Ÿå°†ä¸€ç³»åˆ—è¡¥ä¸æ‰“åŒ…ä¸ºå•ä¸ª mbox æ–‡ä»¶ï¼Œå¹¶åˆ©ç”¨ <code>git am</code> å‘½ä»¤å°†å®ƒä»¬ä¸€æ¬¡æ€§å…¨éƒ¨åº”ç”¨ã€‚</p><p>ç„¶è€Œï¼Œå¦‚æœè´¡çŒ®è€…å°† <code>format-patch</code> ç”Ÿæˆçš„è¡¥ä¸æ–‡ä»¶ä¸Šä¼ åˆ°ç±»ä¼¼ Request Ticket çš„ä»»åŠ¡å¤„ç†ç³»ç»Ÿï¼Œä½ å¯ä»¥å…ˆå°†å…¶ä¿å­˜åˆ°æœ¬åœ°ï¼Œä¹‹åé€šè¿‡ <code>git am</code> æ¥åº”ç”¨è¡¥ä¸ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git am 0001-limit-log-function.patch</span><br><span class="line">Applying: add limit to log function</span><br></pre></td></tr></table></figure><p>ä½ ä¼šçœ‹åˆ°è¡¥ä¸è¢«é¡ºåˆ©åœ°åº”ç”¨ï¼Œå¹¶ä¸”ä¸ºä½ è‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æäº¤ã€‚ å…¶ä¸­çš„ä½œè€…ä¿¡æ¯æ¥è‡ªäºç”µå­é‚®ä»¶å¤´éƒ¨çš„ <code>From</code> å’Œ <code>Date</code> å­—æ®µï¼Œæäº¤æ¶ˆæ¯åˆ™å–è‡ª <code>Subject</code> å’Œé‚®ä»¶æ­£æ–‡ä¸­è¡¥ä¸ä¹‹å‰çš„å†…å®¹ã€‚ æ¯”å¦‚ï¼Œåº”ç”¨ä¸Šé¢é‚£ä¸ª mbox ç¤ºä¾‹åç”Ÿæˆçš„æäº¤æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=fuller -1</span><br><span class="line">commit 6c5e70b984a60b3cecd395edd5b48a7575bf58e0</span><br><span class="line">Author:     Jessica Smith &lt;jessica@example.com&gt;</span><br><span class="line">AuthorDate: Sun Apr 6 10:17:23 2008 -0700</span><br><span class="line">Commit:     Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">CommitDate: Thu Apr 9 09:19:06 2009 -0700</span><br><span class="line"></span><br><span class="line">   add limit to log function</span><br><span class="line"></span><br><span class="line">   Limit log functionality to the first 20</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>Commit</code> ä¿¡æ¯è¡¨ç¤ºçš„æ˜¯åº”ç”¨è¡¥ä¸çš„äººå’Œåº”ç”¨è¡¥ä¸çš„æ—¶é—´ã€‚ <code>Author</code> ä¿¡æ¯åˆ™è¡¨ç¤ºè¡¥ä¸çš„åŸä½œè€…å’ŒåŸæœ¬çš„åˆ›å»ºæ—¶é—´ã€‚</p><p>ä½†æ˜¯ï¼Œæœ‰æ—¶å€™æ— æ³•é¡ºåˆ©åœ°åº”ç”¨è¡¥ä¸ã€‚ è¿™ä¹Ÿè®¸æ˜¯å› ä¸ºä½ çš„ä¸»åˆ†æ”¯å’Œåˆ›å»ºè¡¥ä¸çš„åˆ†æ”¯ç›¸å·®è¾ƒå¤šï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å› ä¸ºè¿™ä¸ªè¡¥ä¸ä¾èµ–äºå…¶ä»–ä½ å°šæœªåº”ç”¨çš„è¡¥ä¸ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>git am</code> è¿›ç¨‹å°†ä¼šæŠ¥é”™å¹¶ä¸”è¯¢é—®ä½ è¦åšä»€ä¹ˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git am 0001-seeing-if-this-helps-the-gem.patch</span><br><span class="line">Applying: seeing if this helps the gem</span><br><span class="line">error: patch failed: ticgit.gemspec:1</span><br><span class="line">error: ticgit.gemspec: patch does not apply</span><br><span class="line">Patch failed at 0001.</span><br><span class="line">When you have resolved this problem run &quot;git am --resolved&quot;.</span><br><span class="line">If you would prefer to skip this patch, instead run &quot;git am --skip&quot;.</span><br><span class="line">To restore the original branch and stop patching run &quot;git am --abort&quot;.</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤å°†ä¼šåœ¨æ‰€æœ‰å‡ºç°é—®é¢˜çš„æ–‡ä»¶å†…åŠ å…¥å†²çªæ ‡è®°ï¼Œå°±å’Œå‘ç”Ÿå†²çªçš„åˆå¹¶æˆ–å˜åŸºæ“ä½œä¸€æ ·ã€‚ è€Œä½ è§£å†³é—®é¢˜çš„æ‰‹æ®µå¾ˆå¤§ç¨‹åº¦ä¸Šä¹Ÿæ˜¯ä¸€æ ·çš„â€”â€”å³æ‰‹åŠ¨ç¼–è¾‘é‚£äº›æ–‡ä»¶æ¥è§£å†³å†²çªï¼Œæš‚å­˜æ–°çš„æ–‡ä»¶ï¼Œä¹‹åè¿è¡Œ <code>git am --resolved</code> ç»§ç»­åº”ç”¨ä¸‹ä¸€ä¸ªè¡¥ä¸ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ (fix the file)</span><br><span class="line">$ git add ticgit.gemspec</span><br><span class="line">$ git am --resolved</span><br><span class="line">Applying: seeing if this helps the gem</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ å¸Œæœ› Git èƒ½å¤Ÿå°è¯•ä»¥æ›´åŠ æ™ºèƒ½çš„æ–¹å¼è§£å†³å†²çªï¼Œä½ å¯ä»¥å¯¹å…¶ä¼ é€’ <code>-3</code> é€‰é¡¹æ¥ä½¿ Git å°è¯•è¿›è¡Œä¸‰æ–¹åˆå¹¶ã€‚ è¯¥é€‰é¡¹é»˜è®¤å¹¶æ²¡æœ‰æ‰“å¼€ï¼Œå› ä¸ºå¦‚æœç”¨äºåˆ›å»ºè¡¥ä¸çš„æäº¤å¹¶ä¸åœ¨ä½ çš„ç‰ˆæœ¬åº“å†…çš„è¯ï¼Œè¿™æ ·åšæ˜¯æ²¡æœ‰ç”¨å¤„çš„ã€‚ è€Œå¦‚æœä½ ç¡®å®æœ‰é‚£ä¸ªæäº¤çš„è¯â€”â€”æ¯”å¦‚è¡¥ä¸æ˜¯åŸºäºæŸä¸ªå…¬å…±æäº¤çš„â€”â€”é‚£ä¹ˆé€šå¸¸ <code>-3</code> é€‰é¡¹å¯¹äºåº”ç”¨æœ‰å†²çªçš„è¡¥ä¸æ˜¯æ›´åŠ æ˜æ™ºçš„é€‰æ‹©ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git am -3 0001-seeing-if-this-helps-the-gem.patch</span><br><span class="line">Applying: seeing if this helps the gem</span><br><span class="line">error: patch failed: ticgit.gemspec:1</span><br><span class="line">error: ticgit.gemspec: patch does not apply</span><br><span class="line">Using index info to reconstruct a base tree...</span><br><span class="line">Falling back to patching base and 3-way merge...</span><br><span class="line">No changes -- Patch already applied.</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ä¸Šé¢è¿™ç§æƒ…å†µï¼Œæˆ‘åœ¨ä¹‹å‰å·²ç»åº”ç”¨è¿‡åŒæ ·çš„è¡¥ä¸ã€‚ å¦‚æœæ²¡æœ‰ <code>-3</code> é€‰é¡¹çš„è¯ï¼Œè¿™çœ‹èµ·æ¥å°±åƒæ˜¯å­˜åœ¨ä¸€ä¸ªå†²çªã€‚</p><p>å¦‚æœä½ æ­£åœ¨åˆ©ç”¨ä¸€ä¸ª mbox æ–‡ä»¶åº”ç”¨å¤šä¸ªè¡¥ä¸ï¼Œä¹Ÿå¯ä»¥åœ¨äº¤äº’æ¨¡å¼ä¸‹è¿è¡Œ <code>am</code> å‘½ä»¤ï¼Œè¿™æ ·åœ¨æ¯ä¸ªè¡¥ä¸ä¹‹å‰ï¼Œå®ƒä¼šåœä½è¯¢é—®ä½ æ˜¯å¦è¦åº”ç”¨è¯¥è¡¥ä¸ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git am -3 -i mbox</span><br><span class="line">Commit Body is:</span><br><span class="line">--------------------------</span><br><span class="line">seeing if this helps the gem</span><br><span class="line">--------------------------</span><br><span class="line">Apply? [y]es/[n]o/[e]dit/[v]iew patch/[a]ccept all</span><br></pre></td></tr></table></figure><p>è¿™åœ¨ä½ ä¿å­˜çš„è¡¥ä¸è¾ƒå¤šæ—¶å¾ˆå¥½ç”¨ï¼Œå› ä¸ºä½ å¯ä»¥åœ¨åº”ç”¨ä¹‹å‰æŸ¥çœ‹å¿˜æ‰å†…å®¹çš„è¡¥ä¸ï¼Œå¹¶ä¸”è·³è¿‡å·²ç»åº”ç”¨è¿‡çš„è¡¥ä¸ã€‚</p><p>å½“ä¸ä½ çš„ç‰¹æ€§ç›¸å…³çš„æ‰€æœ‰è¡¥ä¸éƒ½è¢«åº”ç”¨å¹¶æäº¤åˆ°åˆ†æ”¯ä¸­ä¹‹åï¼Œä½ å°±å¯ä»¥é€‰æ‹©æ˜¯å¦ä»¥åŠå¦‚ä½•å°†å…¶æ•´åˆåˆ°æ›´é•¿æœŸçš„åˆ†æ”¯ä¸­å»äº†ã€‚</p><h4 id="æ£€å‡ºè¿œç¨‹åˆ†æ”¯"><a href="#æ£€å‡ºè¿œç¨‹åˆ†æ”¯" class="headerlink" title="æ£€å‡ºè¿œç¨‹åˆ†æ”¯"></a>æ£€å‡ºè¿œç¨‹åˆ†æ”¯</h4><p>å¦‚æœä½ çš„è´¡çŒ®è€…å»ºç«‹äº†è‡ªå·±çš„ç‰ˆæœ¬åº“ï¼Œå¹¶ä¸”å‘å…¶ä¸­æ¨é€äº†è‹¥å¹²ä¿®æ”¹ï¼Œä¹‹åå°†ç‰ˆæœ¬åº“çš„ URL å’ŒåŒ…å«æ›´æ”¹çš„è¿œç¨‹åˆ†æ”¯å‘é€ç»™ä½ ï¼Œé‚£ä¹ˆä½ å¯ä»¥å°†å…¶æ·»åŠ ä¸ºä¸€ä¸ªè¿œç¨‹åˆ†æ”¯ï¼Œå¹¶ä¸”åœ¨æœ¬åœ°è¿›è¡Œåˆå¹¶ã€‚</p><p>æ¯”å¦‚ Jessica å‘ä½ å‘é€äº†ä¸€å°ç”µå­é‚®ä»¶ï¼Œå†…å®¹æ˜¯åœ¨å¥¹çš„ç‰ˆæœ¬åº“ä¸­çš„ <code>ruby-client</code> åˆ†æ”¯ä¸­æœ‰ä¸€ä¸ªå¾ˆä¸é”™çš„æ–°åŠŸèƒ½ï¼Œä¸ºäº†æµ‹è¯•è¯¥åŠŸèƒ½ï¼Œä½ å¯ä»¥å°†å…¶æ·»åŠ ä¸ºä¸€ä¸ªè¿œç¨‹åˆ†æ”¯ï¼Œå¹¶åœ¨æœ¬åœ°æ£€å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add jessica git://github.com/jessica/myproject.git</span><br><span class="line">$ git fetch jessica</span><br><span class="line">$ git checkout -b rubyclient jessica/ruby-client</span><br></pre></td></tr></table></figure><p>å¦‚æœå¥¹å†æ¬¡å‘é‚®ä»¶è¯´å¦ä¸€ä¸ªåˆ†æ”¯ä¸­åŒ…å«å¦ä¸€ä¸ªä¼˜ç§€åŠŸèƒ½ï¼Œå› ä¸ºä¹‹å‰å·²ç»è®¾ç½®å¥½è¿œç¨‹åˆ†æ”¯äº†ï¼Œä½ å°±å¯ä»¥ç›´æ¥è¿›è¡ŒæŠ“å–åŠæ£€å‡ºæ“ä½œã€‚</p><p>è¿™å¯¹äºä¸ä»–äººé•¿æœŸåˆä½œå·¥ä½œæ¥è¯´å¾ˆæœ‰ç”¨ã€‚ è€Œå¯¹äºæäº¤è¡¥ä¸é¢‘ç‡è¾ƒå°çš„è´¡çŒ®è€…ï¼Œç›¸å¯¹äºæ¯ä¸ªäººç»´æŠ¤è‡ªå·±çš„æœåŠ¡å™¨ï¼Œä¸æ–­å¢åˆ è¿œç¨‹åˆ†æ”¯çš„åšæ³•ï¼Œä½¿ç”¨ç”µå­é‚®ä»¶æ¥æ¥æ”¶å¯èƒ½ä¼šæ¯”è¾ƒçœæ—¶ã€‚ å†µä¸”ä½ ä¹Ÿä¸ä¼šæƒ³è¦åŠ å…¥æ•°ç™¾ä¸ªåªæä¾›ä¸€ä¸¤ä¸ªè¡¥ä¸çš„è¿œç¨‹åˆ†æ”¯ã€‚ ç„¶è€Œï¼Œè„šæœ¬å’Œæ‰˜ç®¡æœåŠ¡åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥ç®€åŒ–è¿™äº›å·¥ä½œâ€”â€”è¿™å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äºä½ å’Œä½ çš„è´¡çŒ®è€…å¼€å‘çš„æ–¹å¼ã€‚</p><p>è¿™ç§æ–¹å¼çš„å¦ä¸€ç§ä¼˜ç‚¹æ˜¯ä½ å¯ä»¥åŒæ—¶å¾—åˆ°æäº¤å†å²ã€‚ è™½ç„¶ä»£ç åˆå¹¶ä¸­å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œä½†æ˜¯ä½ èƒ½è·çŸ¥ä»–äººçš„å·¥ä½œæ˜¯åŸºäºä½ çš„å†å²ä¸­çš„å…·ä½“å“ªä¸€ä¸ªä½ç½®ï¼›æ‰€ä»¥ Git ä¼šé»˜è®¤è¿›è¡Œä¸‰æ–¹åˆå¹¶ï¼Œä¸éœ€è¦æä¾› <code>-3</code> é€‰é¡¹ï¼Œä½ ä¹Ÿä¸éœ€è¦æ‹…å¿ƒè¡¥ä¸æ˜¯åŸºäºæŸä¸ªä½ æ— æ³•è®¿é—®çš„æäº¤ç”Ÿæˆçš„ã€‚</p><p>å¯¹äºéæŒç»­æ€§çš„åˆä½œï¼Œå¦‚æœä½ ä¾ç„¶æƒ³è¦ä»¥è¿™ç§æ–¹å¼æ‹‰å–æ•°æ®çš„è¯ï¼Œä½ å¯ä»¥å¯¹è¿œç¨‹ç‰ˆæœ¬åº“çš„ URL è°ƒç”¨ <code>git pull</code> å‘½ä»¤ã€‚ è¿™ä¼šæ‰§è¡Œä¸€ä¸ªä¸€æ¬¡æ€§çš„æŠ“å–ï¼Œè€Œä¸ä¼šå°†è¯¥ URL å­˜ä¸ºè¿œç¨‹å¼•ç”¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git pull https://github.com/onetimeguy/project</span><br><span class="line">From https://github.com/onetimeguy/project</span><br><span class="line"> * branch            HEAD       -&gt; FETCH_HEAD</span><br><span class="line">Merge made by recursive.</span><br></pre></td></tr></table></figure><h4 id="ç¡®å®šå¼•å…¥äº†å“ªäº›ä¸œè¥¿"><a href="#ç¡®å®šå¼•å…¥äº†å“ªäº›ä¸œè¥¿" class="headerlink" title="ç¡®å®šå¼•å…¥äº†å“ªäº›ä¸œè¥¿"></a>ç¡®å®šå¼•å…¥äº†å“ªäº›ä¸œè¥¿</h4><p>ä½ å·²ç»æœ‰äº†ä¸€ä¸ªåŒ…å«å…¶ä»–äººè´¡çŒ®çš„ç‰¹æ€§åˆ†æ”¯ã€‚ ç°åœ¨ä½ å¯ä»¥å†³å®šå¦‚ä½•å¤„ç†å®ƒä»¬äº†ã€‚ æœ¬èŠ‚å›é¡¾äº†è‹¥å¹²å‘½ä»¤ï¼Œä»¥ä¾¿äºä½ æ£€æŸ¥è‹¥å°†å…¶åˆå¹¶å…¥ä¸»åˆ†æ”¯æ‰€å¼•å…¥çš„æ›´æ”¹ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œä½ åº”è¯¥å¯¹è¯¥åˆ†æ”¯ä¸­æ‰€æœ‰ master åˆ†æ”¯å°šæœªåŒ…å«çš„æäº¤è¿›è¡Œæ£€æŸ¥ã€‚ é€šè¿‡åœ¨åˆ†æ”¯åç§°å‰åŠ å…¥ <code>--not</code> é€‰é¡¹ï¼Œä½ å¯ä»¥æ’é™¤ master åˆ†æ”¯ä¸­çš„æäº¤ã€‚ è¿™å’Œæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„ <code>master..contrib</code> æ ¼å¼æ˜¯ä¸€æ ·çš„ã€‚ å‡è®¾è´¡çŒ®è€…å‘ä½ å‘é€äº†ä¸¤ä¸ªè¡¥ä¸ï¼Œä¸ºæ­¤ä½ åˆ›å»ºäº†ä¸€ä¸ªåå« <code>contrib</code> çš„åˆ†æ”¯å¹¶åœ¨å…¶ä¸Šåº”ç”¨è¡¥ä¸ï¼Œä½ å¯ä»¥è¿è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git log contrib --not master</span><br><span class="line">commit 5b6235bd297351589efc4d73316f0a68d484f118</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Fri Oct 24 09:53:59 2008 -0700</span><br><span class="line"></span><br><span class="line">    seeing if this helps the gem</span><br><span class="line"></span><br><span class="line">commit 7482e0d16d04bea79d0dba8988cc78df655f16a0</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Mon Oct 22 19:38:36 2008 -0700</span><br><span class="line"></span><br><span class="line">    updated the gemspec to hopefully work better</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦æŸ¥çœ‹æ¯æ¬¡æäº¤æ‰€å¼•å…¥çš„å…·ä½“ä¿®æ”¹ï¼Œä½ åº”è¯¥è®°å¾—å¯ä»¥ç»™ <code>git log</code> å‘½ä»¤ä¼ é€’ <code>-p</code> é€‰é¡¹ï¼Œè¿™æ ·å®ƒä¼šåœ¨æ¯æ¬¡æäº¤åé¢é™„åŠ å¯¹åº”çš„å·®å¼‚ï¼ˆdiffï¼‰ã€‚</p><p>è€Œè¦æŸ¥çœ‹å°†è¯¥ç‰¹æ€§åˆ†æ”¯ä¸å¦ä¸€ä¸ªåˆ†æ”¯åˆå¹¶çš„å®Œæ•´ diffï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ä¸€ä¸ªæœ‰äº›å¥‡æ€ªçš„æŠ€å·§æ¥å¾—åˆ°æ­£ç¡®çš„ç»“æœã€‚ ä½ å¯èƒ½ä¼šæƒ³åˆ°è¿™ç§æ–¹å¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff master</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šè¾“å‡ºä¸€ä¸ª diffï¼Œä½†å®ƒå¯èƒ½å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ å¦‚æœåœ¨ä½ åˆ›å»ºç‰¹æ€§åˆ†æ”¯ä¹‹åï¼Œ<code>master</code> åˆ†æ”¯å‘å‰ç§»åŠ¨äº†ï¼Œä½ è·å¾—çš„ç»“æœå°±ä¼šæ˜¾å¾—æœ‰äº›ä¸å¯¹ã€‚ è¿™æ˜¯å› ä¸º Git ä¼šç›´æ¥å°†è¯¥ç‰¹æ€§åˆ†æ”¯ä¸ <code>master</code> åˆ†æ”¯çš„æœ€æ–°æäº¤å¿«ç…§è¿›è¡Œæ¯”è¾ƒã€‚ æ¯”å¦‚è¯´ä½ åœ¨ <code>master</code> åˆ†æ”¯ä¸­å‘æŸä¸ªæ–‡ä»¶æ·»åŠ äº†ä¸€è¡Œå†…å®¹ï¼Œé‚£ä¹ˆç›´æ¥æ¯”å¯¹æœ€æ–°å¿«ç…§çš„ç»“æœçœ‹ä¸Šå»å°±åƒæ˜¯ä½ åœ¨ç‰¹æ€§åˆ†æ”¯ä¸­å°†è¿™ä¸€è¡Œåˆ é™¤äº†ã€‚</p><p>å¦‚æœ <code>master</code> åˆ†æ”¯æ˜¯ä½ çš„ç‰¹æ€§åˆ†æ”¯çš„ç›´æ¥ç¥–å…ˆï¼Œå…¶å®æ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜çš„ï¼›ä½†æ˜¯ä¸€æ—¦ä¸¤ä¸ªåˆ†æ”¯çš„å†å²äº§ç”Ÿäº†åˆ†å‰ï¼Œä¸Šè¿°æ¯”å¯¹äº§ç”Ÿçš„ <code>diff</code> çœ‹ä¸Šå»å°±åƒæ˜¯å°†ç‰¹æ€§åˆ†æ”¯ä¸­æ‰€æœ‰çš„æ–°ä¸œè¥¿åŠ å…¥ï¼Œå¹¶ä¸”å°† <code>master</code> åˆ†æ”¯æ‰€ç‹¬æœ‰çš„ä¸œè¥¿åˆ é™¤ã€‚</p><p>è€Œä½ çœŸæ­£æƒ³è¦æ£€æŸ¥çš„ä¸œè¥¿ï¼Œå®é™…ä¸Šä»…ä»…æ˜¯ç‰¹æ€§åˆ†æ”¯æ‰€æ·»åŠ çš„æ›´æ”¹â€”â€”ä¹Ÿå°±æ˜¯è¯¥åˆ†æ”¯ä¸ <code>master</code> åˆ†æ”¯åˆå¹¶æ‰€è¦å¼•å…¥çš„å·¥ä½œã€‚ è¦è¾¾åˆ°æ­¤ç›®çš„ï¼Œä½ éœ€è¦è®© Git å¯¹ç‰¹æ€§åˆ†æ”¯ä¸Šæœ€æ–°çš„æäº¤ä¸è¯¥åˆ†æ”¯ä¸ <code>master</code> åˆ†æ”¯çš„é¦–ä¸ªå…¬å…±ç¥–å…ˆè¿›è¡Œæ¯”è¾ƒã€‚</p><p>ä»æŠ€æœ¯çš„è§’åº¦è®²ï¼Œä½ å¯ä»¥ä»¥æ‰‹å·¥çš„æ–¹å¼æ‰¾å‡ºå…¬å…±ç¥–å…ˆï¼Œå¹¶å¯¹å…¶æ˜¾å¼è¿è¡Œ <code>diff</code> å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git merge-base contrib master</span><br><span class="line">36c7dba2c95e6bbb78dfa822519ecfec6e1ca649</span><br><span class="line">$ git diff 36c7db</span><br></pre></td></tr></table></figure><p>ç„¶è€Œï¼Œè¿™ç§åšæ³•æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥ Git æä¾›äº†ä¸€ç§æ¯”è¾ƒä¾¿æ·çš„æ–¹å¼ï¼šä¸‰ç‚¹è¯­æ³•ã€‚ å¯¹äº <code>diff</code> å‘½ä»¤æ¥è¯´ï¼Œä½ å¯ä»¥é€šè¿‡æŠŠ <code>...</code> ç½®äºå¦ä¸€ä¸ªåˆ†æ”¯ååæ¥å¯¹è¯¥åˆ†æ”¯çš„æœ€æ–°æäº¤ä¸ä¸¤ä¸ªåˆ†æ”¯çš„å…±åŒç¥–å…ˆè¿›è¡Œæ¯”è¾ƒï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff master...contrib</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤ä»…ä¼šæ˜¾ç¤ºè‡ªå½“å‰ç‰¹æ€§åˆ†æ”¯ä¸ master åˆ†æ”¯çš„å…±åŒç¥–å…ˆèµ·ï¼Œè¯¥åˆ†æ”¯ä¸­çš„å·¥ä½œã€‚ è¿™ä¸ªè¯­æ³•å¾ˆæœ‰ç”¨ï¼Œåº”è¯¥ç‰¢è®°ã€‚</p><h4 id="å°†è´¡çŒ®çš„å·¥ä½œæ•´åˆè¿›æ¥"><a href="#å°†è´¡çŒ®çš„å·¥ä½œæ•´åˆè¿›æ¥" class="headerlink" title="å°†è´¡çŒ®çš„å·¥ä½œæ•´åˆè¿›æ¥"></a>å°†è´¡çŒ®çš„å·¥ä½œæ•´åˆè¿›æ¥</h4><p>å½“ç‰¹æ€§åˆ†æ”¯ä¸­æ‰€æœ‰çš„å·¥ä½œéƒ½å·²ç»å‡†å¤‡å¥½æ•´åˆè¿›å…¥æ›´é è¿‘ä¸»çº¿çš„åˆ†æ”¯æ—¶ï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯å¦‚ä½•è¿›è¡Œæ•´åˆäº†ã€‚ æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œä½ æƒ³ä½¿ç”¨æ€æ ·çš„æ€»ä½“å·¥ä½œæµæ¥ç»´æŠ¤ä½ çš„é¡¹ç›®ï¼Ÿ ä½ çš„é€‰æ‹©æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬ä¼šä»‹ç»å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚</p><p><strong>åˆå¹¶å·¥ä½œæµ</strong><br>ä¸€ç§éå¸¸ç®€å•çš„å·¥ä½œæµä¼šç›´æ¥å°†å·¥ä½œåˆå¹¶è¿›å…¥ <code>master</code> åˆ†æ”¯ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>master</code> åˆ†æ”¯åŒ…å«çš„ä»£ç æ˜¯åŸºæœ¬ç¨³å®šçš„ã€‚ å½“ä½ å®ŒæˆæŸä¸ªç‰¹æ€§åˆ†æ”¯çš„å·¥ä½œï¼Œæˆ–å®¡æ ¸é€šè¿‡äº†å…¶ä»–äººæ‰€è´¡çŒ®çš„å·¥ä½œæ—¶ï¼Œä½ ä¼šå°†å…¶åˆå¹¶è¿›å…¥ <code>master</code> åˆ†æ”¯ï¼Œä¹‹åå°†ç‰¹æ€§åˆ†æ”¯åˆ é™¤ï¼Œå¦‚æ­¤åå¤ã€‚ å¦‚æœæˆ‘ä»¬çš„ç‰ˆæœ¬åº“åŒ…å«ç±»ä¼¼ åŒ…å«è‹¥å¹²ç‰¹æ€§åˆ†æ”¯çš„æäº¤å†å²ã€‚ çš„ä¸¤ä¸ªåç§°åˆ†åˆ«ä¸º <code>ruby_client</code> å’Œ <code>php_client</code> çš„åˆ†æ”¯ï¼Œå¹¶ä¸”æˆ‘ä»¬å…ˆåˆå¹¶ <code>ruby_client</code> åˆ†æ”¯ï¼Œä¹‹ååˆå¹¶ <code>php_client</code> åˆ†æ”¯ï¼Œé‚£ä¹ˆæäº¤å†å²æœ€åä¼šå˜æˆ åˆå¹¶ç‰¹æ€§åˆ†æ”¯ä¹‹åã€‚ çš„æ ·å­ã€‚</p><p><img src="git-chapter-3/img1.png" alt></p><p><img src="git-chapter-3/img2.png" alt></p><p>è¿™ä¹Ÿè®¸æ˜¯æœ€ç®€å•çš„å·¥ä½œæµäº†ï¼Œä½†æ˜¯å½“é¡¹ç›®æ›´å¤§ï¼Œæˆ–æ›´ç¨³å®šï¼Œä½ å¯¹è‡ªå·±æ‰€å¼•å…¥çš„å·¥ä½œæ›´åŠ åœ¨æ„æ—¶ï¼Œå®ƒå¯èƒ½ä¼šå¸¦æ¥é—®é¢˜ã€‚</p><p>å¦‚æœä½ çš„é¡¹ç›®éå¸¸é‡è¦ï¼Œä½ å¯èƒ½ä¼šä½¿ç”¨ä¸¤é˜¶æ®µåˆå¹¶å¾ªç¯ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¼šç»´æŠ¤ä¸¤ä¸ªé•¿æœŸåˆ†æ”¯ï¼Œåˆ†åˆ«æ˜¯ <code>master</code> å’Œ <code>develop</code>ï¼Œ<code>master</code> åˆ†æ”¯åªä¼šåœ¨ä¸€ä¸ªéå¸¸ç¨³å®šçš„ç‰ˆæœ¬å‘å¸ƒæ—¶æ‰ä¼šæ›´æ–°ï¼Œè€Œæ‰€æœ‰çš„æ–°ä»£ç ä¼šé¦–å…ˆæ•´åˆè¿›å…¥ <code>develop</code> åˆ†æ”¯ã€‚ ä½ å®šæœŸå°†è¿™ä¸¤ä¸ªåˆ†æ”¯æ¨é€åˆ°å…¬å…±ç‰ˆæœ¬åº“ä¸­ã€‚ æ¯æ¬¡éœ€è¦åˆå¹¶æ–°çš„ç‰¹æ€§åˆ†æ”¯æ—¶ï¼ˆåˆå¹¶ç‰¹æ€§åˆ†æ”¯å‰ã€‚ï¼‰ï¼Œä½ éƒ½åº”è¯¥åˆå¹¶è¿›å…¥ <code>develop</code> åˆ†æ”¯ï¼ˆåˆå¹¶ç‰¹æ€§åˆ†æ”¯åã€‚ï¼‰ï¼›å½“æ‰“æ ‡ç­¾å‘å¸ƒçš„æ—¶å€™ï¼Œä½ ä¼šå°† <code>master</code> åˆ†æ”¯å¿«è¿›åˆ°å·²ç»ç¨³å®šçš„ <code>develop</code> åˆ†æ”¯ï¼ˆä¸€æ¬¡å‘å¸ƒä¹‹åï¼‰ã€‚</p><p><img src="git-chapter-3/img3.png" alt></p><p><img src="git-chapter-3/img4.png" alt></p><p><img src="git-chapter-3/img5.png" alt></p><p>è¿™æ ·å½“äººä»¬å…‹éš†ä½ é¡¹ç›®çš„ç‰ˆæœ¬åº“åï¼Œæ—¢å¯ä»¥æ£€å‡º <code>master</code> åˆ†æ”¯ä»¥æ„å»ºæœ€æ–°çš„ç¨³å®šç‰ˆæœ¬å¹¶ä¿æŒæ›´æ–°ï¼Œä¹Ÿå¯ä»¥æ£€å‡ºåŒ…å«æ›´å¤šæ–°ä¸œè¥¿çš„ <code>develop</code> åˆ†æ”¯ã€‚ ä½ ä¹Ÿå¯ä»¥æ‰©å±•è¿™ä¸ªæ¦‚å¿µï¼Œç»´æŠ¤ä¸€ä¸ªå°†æ‰€æœ‰å·¥ä½œåˆå¹¶åˆ°ä¸€èµ·çš„æ•´åˆåˆ†æ”¯ã€‚ å½“è¯¥åˆ†æ”¯çš„ä»£ç ç¨³å®šå¹¶é€šè¿‡æµ‹è¯•ä¹‹åï¼Œå°†å…¶åˆå¹¶è¿›å…¥ <code>develop</code> åˆ†æ”¯ï¼›ç»è¿‡ä¸€æ®µæ—¶é—´ï¼Œç¡®è®¤å…¶ç¨³å®šä¹‹åï¼Œå°†å…¶ä»¥å¿«è¿›çš„å½¢å¼å¹¶å…¥ <code>master</code> åˆ†æ”¯ã€‚</p><p><strong>å¤§é¡¹ç›®åˆå¹¶å·¥ä½œæµ</strong><br>Git é¡¹ç›®åŒ…å«å››ä¸ªé•¿æœŸåˆ†æ”¯ï¼š<code>master</code>ã€<code>next</code>ï¼Œç”¨äºæ–°å·¥ä½œçš„ puï¼ˆproposed updatesï¼‰å’Œç”¨äºç»´æŠ¤æ€§å‘åç§»æ¤å·¥ä½œï¼ˆmaintenance backportsï¼‰çš„ <code>maint</code> åˆ†æ”¯ã€‚ è´¡çŒ®è€…çš„æ–°å·¥ä½œä¼šä»¥ç±»ä¼¼ä¹‹å‰æ‰€ä»‹ç»çš„æ–¹å¼æ”¶å…¥ç‰¹æ€§åˆ†æ”¯ä¸­ï¼ˆè§ ç®¡ç†å¤æ‚çš„ä¸€ç³»åˆ—æ¥æ”¶è´¡çŒ®çš„å¹³è¡Œç‰¹æ€§åˆ†æ”¯ã€‚ï¼‰ã€‚ ä¹‹åå¯¹ç‰¹æ€§åˆ†æ”¯è¿›è¡Œæµ‹è¯•è¯„ä¼°ï¼Œæ£€æŸ¥å…¶æ˜¯å¦å·²ç»èƒ½å¤Ÿåˆå¹¶ï¼Œæˆ–è€…ä»éœ€è¦æ›´å¤šå·¥ä½œã€‚ å®‰å…¨çš„ç‰¹æ€§åˆ†æ”¯ä¼šè¢«åˆå¹¶å…¥ <code>next</code> åˆ†æ”¯ï¼Œä¹‹åè¯¥åˆ†æ”¯ä¼šè¢«æ¨é€ä½¿å¾—æ‰€æœ‰äººéƒ½å¯ä»¥å°è¯•æ•´åˆåˆ°ä¸€èµ·çš„ç‰¹æ€§ã€‚</p><p><img src="git-chapter-3/img6.png" alt></p><p>å¦‚æœç‰¹æ€§åˆ†æ”¯éœ€è¦æ›´å¤šå·¥ä½œï¼Œå®ƒåˆ™ä¼šè¢«å¹¶å…¥ <code>pu</code> åˆ†æ”¯ã€‚ å½“å®ƒä»¬å®Œå…¨ç¨³å®šä¹‹åï¼Œä¼šè¢«å†æ¬¡å¹¶å…¥ <code>master</code> åˆ†æ”¯ã€‚ è¿™æ„å‘³ç€ <code>master</code> åˆ†æ”¯å§‹ç»ˆåœ¨è¿›è¡Œå¿«è¿›ï¼Œ<code>next</code> åˆ†æ”¯å¶å°”ä¼šè¢«å˜åŸºï¼Œè€Œ <code>pu</code> åˆ†æ”¯çš„å˜åŸºæ¯”è¾ƒé¢‘ç¹ï¼š</p><p><img src="git-chapter-3/img7.png" alt></p><p>å½“ç‰¹æ€§åˆ†æ”¯æœ€ç»ˆè¢«å¹¶å…¥ <code>master</code> åˆ†æ”¯åï¼Œä¾¿ä¼šè¢«ä»ç‰ˆæœ¬åº“ä¸­åˆ é™¤æ‰ã€‚ Git é¡¹ç›®è¿˜æœ‰ä¸€ä¸ªä»ä¸Šä¸€æ¬¡å‘å¸ƒä¸­æ´¾ç”Ÿå‡ºæ¥çš„ <code>maint</code> åˆ†æ”¯æ¥æä¾›å‘åç§»æ¤è¿‡æ¥çš„è¡¥ä¸ä»¥ä¾›å‘å¸ƒç»´æŠ¤æ›´æ–°ã€‚ å› æ­¤ï¼Œå½“ä½ å…‹éš† Git çš„ç‰ˆæœ¬åº“ä¹‹åï¼Œå°±ä¼šæœ‰å››ä¸ªå¯åˆ†åˆ«è¯„ä¼°è¯¥é¡¹ç›®å¼€å‘çš„ä¸åŒé˜¶æ®µçš„å¯æ£€å‡ºçš„åˆ†æ”¯ï¼Œæ£€å‡ºå“ªä¸ªåˆ†æ”¯ï¼Œå–å†³äºä½ éœ€è¦å¤šæ–°çš„ç‰ˆæœ¬ï¼Œæˆ–è€…ä½ æƒ³è¦å¦‚ä½•è¿›è¡Œè´¡çŒ®ï¼›å¯¹äºç»´æŠ¤è€…æ¥è¯´ï¼Œè¿™å¥—ç»“æ„åŒ–çš„å·¥ä½œæµèƒ½å¸®åŠ©å®ƒä»¬å®¡æŸ¥æ–°çš„è´¡çŒ®ã€‚</p><p><strong>å˜åŸºä¸æ‹£é€‰å·¥ä½œæµ</strong><br>ä¸ºäº†ä¿æŒçº¿æ€§çš„æäº¤å†å²ï¼Œæœ‰äº›ç»´æŠ¤è€…æ›´å–œæ¬¢åœ¨ <code>master</code> åˆ†æ”¯ä¸Šå¯¹è´¡çŒ®è¿‡æ¥çš„å·¥ä½œè¿›è¡Œå˜åŸºå’Œæ‹£é€‰ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†å…¶åˆå¹¶ã€‚ å½“ä½ å®Œæˆäº†æŸä¸ªç‰¹æ€§åˆ†æ”¯ä¸­çš„å·¥ä½œï¼Œå¹¶ä¸”å†³å®šè¦å°†å…¶æ•´åˆçš„æ—¶å€™ï¼Œä½ å¯ä»¥åœ¨è¯¥åˆ†æ”¯ä¸­è¿è¡Œå˜åŸºå‘½ä»¤ï¼Œåœ¨å½“å‰ <code>master</code> åˆ†æ”¯ï¼ˆæˆ–è€…æ˜¯ <code>develop</code> ç­‰åˆ†æ”¯ï¼‰çš„åŸºç¡€ä¸Šé‡æ–°æ„é€ ä¿®æ”¹ã€‚ å¦‚æœç»“æœç†æƒ³çš„è¯ï¼Œä½ å¯ä»¥å¿«è¿› <code>master</code> åˆ†æ”¯ï¼Œæœ€åå¾—åˆ°ä¸€ä¸ªçº¿æ€§çš„é¡¹ç›®æäº¤å†å²ã€‚</p><p>å¦ä¸€ç§å°†å¼•å…¥çš„å·¥ä½œè½¬ç§»åˆ°å…¶ä»–åˆ†æ”¯çš„æ–¹æ³•æ˜¯æ‹£é€‰ã€‚ Git ä¸­çš„æ‹£é€‰ç±»ä¼¼äºå¯¹ç‰¹å®šçš„æŸæ¬¡æäº¤çš„å˜åŸºã€‚ å®ƒä¼šæå–è¯¥æäº¤çš„è¡¥ä¸ï¼Œä¹‹åå°è¯•å°†å…¶é‡æ–°åº”ç”¨åˆ°å½“å‰åˆ†æ”¯ä¸Šã€‚ è¿™ç§æ–¹å¼åœ¨ä½ åªæƒ³å¼•å…¥ç‰¹æ€§åˆ†æ”¯ä¸­çš„æŸä¸ªæäº¤ï¼Œæˆ–è€…ç‰¹æ€§åˆ†æ”¯ä¸­åªæœ‰ä¸€ä¸ªæäº¤ï¼Œè€Œä½ ä¸æƒ³è¿è¡Œå˜åŸºæ—¶å¾ˆæœ‰ç”¨ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ çš„é¡¹ç›®æäº¤å†å²ç±»ä¼¼ï¼š</p><p><img src="git-chapter-3/img8.png" alt></p><p>å¦‚æœä½ å¸Œæœ›å°†æäº¤ <code>e43a6</code> æ‹‰å–åˆ° <code>master</code> åˆ†æ”¯ï¼Œä½ å¯ä»¥è¿è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git cherry-pick e43a6fd3e94888d76779ad79fb568ed180e5fcdf</span><br><span class="line">Finished one cherry-pick.</span><br><span class="line">[master]: created a0a41a9: &quot;More friendly message when locking the index fails.&quot;</span><br><span class="line"> 3 files changed, 17 insertions(+), 3 deletions(-)</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¼šæ‹‰å–å’Œ <code>e43a6</code> ç›¸åŒçš„æ›´æ”¹ï¼Œä½†æ˜¯å› ä¸ºåº”ç”¨çš„æ—¥æœŸä¸åŒï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªæ–°çš„æäº¤ SHA-1 å€¼ã€‚ ç°åœ¨ä½ çš„å†å²ä¼šå˜æˆè¿™æ ·ï¼š</p><p><img src="git-chapter-3/img9.png" alt></p><p>ç°åœ¨ä½ å¯ä»¥åˆ é™¤è¿™ä¸ªç‰¹æ€§åˆ†æ”¯ï¼Œå¹¶ä¸¢å¼ƒä¸æƒ³æ‹‰å…¥çš„æäº¤ã€‚</p><p><strong>Rerere</strong><br>å¦‚æœä½ åœ¨è¿›è¡Œå¤§é‡çš„åˆå¹¶æˆ–å˜åŸºï¼Œæˆ–ç»´æŠ¤ä¸€ä¸ªé•¿æœŸçš„ç‰¹æ€§åˆ†æ”¯ï¼ŒGit æä¾›çš„ä¸€ä¸ªå«åšâ€œrerereâ€çš„åŠŸèƒ½ä¼šæœ‰ä¸€äº›å¸®åŠ©ã€‚</p><p>Rerere æ˜¯â€œé‡ç”¨å·²è®°å½•çš„å†²çªè§£å†³æ–¹æ¡ˆï¼ˆreuse recorded resolutionï¼‰â€çš„æ„æ€â€”â€”å®ƒæ˜¯ä¸€ç§ç®€åŒ–å†²çªè§£å†³çš„æ–¹æ³•ã€‚ å½“å¯ç”¨ rerere æ—¶ï¼ŒGit å°†ä¼šç»´æŠ¤ä¸€äº›æˆåŠŸåˆå¹¶ä¹‹å‰å’Œä¹‹åçš„é•œåƒï¼Œå½“ Git å‘ç°ä¹‹å‰å·²ç»ä¿®å¤è¿‡ç±»ä¼¼çš„å†²çªæ—¶ï¼Œä¾¿ä¼šä½¿ç”¨ä¹‹å‰çš„ä¿®å¤æ–¹æ¡ˆï¼Œè€Œä¸éœ€è¦ä½ çš„å¹²é¢„ã€‚</p><p>è¿™ä¸ªåŠŸèƒ½åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ªé…ç½®é€‰é¡¹å’Œä¸€ä¸ªå‘½ä»¤ã€‚ å…¶ä¸­çš„é…ç½®é€‰é¡¹æ˜¯ <code>rerere.enabled</code>ï¼ŒæŠŠå®ƒæ”¾åœ¨å…¨å±€é…ç½®ä¸­å°±å¯ä»¥äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global rerere.enabled true</span><br></pre></td></tr></table></figure><p>ç°åœ¨æ¯å½“ä½ è¿›è¡Œä¸€æ¬¡éœ€è¦è§£å†³å†²çªçš„åˆå¹¶æ—¶ï¼Œè§£å†³æ–¹æ¡ˆéƒ½ä¼šè¢«è®°å½•åœ¨ç¼“å­˜ä¸­ï¼Œä»¥å¤‡ä¹‹åä½¿ç”¨ã€‚</p><p>å¦‚æœä½ éœ€è¦å’Œ rerere çš„ç¼“å­˜äº¤äº’ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>git rerere</code> å‘½ä»¤ã€‚ å½“å•ç‹¬è°ƒç”¨å®ƒæ—¶ï¼ŒGit ä¼šæ£€æŸ¥è§£å†³æ–¹æ¡ˆæ•°æ®åº“ï¼Œå°è¯•å¯»æ‰¾ä¸€ä¸ªå’Œå½“å‰ä»»ä¸€å†²çªç›¸å…³çš„åŒ¹é…é¡¹å¹¶è§£å†³å†²çªï¼ˆå°½ç®¡å½“ <code>rerere.enabled</code> è¢«è®¾ç½®ä¸º <code>true</code> æ—¶ä¼šè‡ªåŠ¨è¿›è¡Œï¼‰ã€‚ å®ƒä¹Ÿæœ‰è‹¥å¹²å­å‘½ä»¤ï¼Œå¯ç”¨æ¥æŸ¥çœ‹è®°å½•é¡¹ï¼Œåˆ é™¤ç‰¹å®šè§£å†³æ–¹æ¡ˆå’Œæ¸…é™¤ç¼“å­˜å…¨éƒ¨å†…å®¹ç­‰ã€‚ æˆ‘ä»¬å°†åœ¨ Rerere ä¸­è¯¦ç»†æ¢è®¨ã€‚</p><h4 id="ä¸ºå‘å¸ƒæ‰“æ ‡ç­¾"><a href="#ä¸ºå‘å¸ƒæ‰“æ ‡ç­¾" class="headerlink" title="ä¸ºå‘å¸ƒæ‰“æ ‡ç­¾"></a>ä¸ºå‘å¸ƒæ‰“æ ‡ç­¾</h4><p>å½“ä½ å†³å®šè¿›è¡Œä¸€æ¬¡å‘å¸ƒæ—¶ï¼Œä½ å¯èƒ½æƒ³è¦ç•™ä¸‹ä¸€ä¸ªæ ‡ç­¾ï¼Œè¿™æ ·åœ¨ä¹‹åçš„ä»»ä½•ä¸€ä¸ªæäº¤ç‚¹éƒ½å¯ä»¥é‡æ–°åˆ›å»ºè¯¥å‘å¸ƒã€‚ ä½ åœ¨ Git åŸºç¡€ ä¸­å·²ç»äº†è§£äº†åˆ›å»ºæ–°æ ‡ç­¾çš„è¿‡ç¨‹ã€‚ ä½œä¸ºä¸€ä¸ªç»´æŠ¤è€…ï¼Œå¦‚æœä½ å†³å®šè¦ä¸ºæ ‡ç­¾ç­¾åçš„è¯ï¼Œæ‰“æ ‡ç­¾çš„è¿‡ç¨‹åº”è¯¥æ˜¯è¿™æ ·å­çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -s v1.5 -m &apos;my signed 1.5 tag&apos;</span><br><span class="line">You need a passphrase to unlock the secret key for</span><br><span class="line">user: &quot;Scott Chacon &lt;schacon@gmail.com&gt;&quot;</span><br><span class="line">1024-bit DSA key, ID F721C45A, created 2009-02-09</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ ä¸ºæ ‡ç­¾ç­¾åäº†ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°åˆ†å‘ç”¨æ¥ç­¾åçš„ PGP å…¬é’¥çš„é—®é¢˜ã€‚ Git é¡¹ç›®çš„ç»´æŠ¤è€…å·²ç»è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼Œå…¶æ–¹æ³•æ˜¯åœ¨ç‰ˆæœ¬åº“ä¸­ä»¥ blob å¯¹è±¡çš„å½¢å¼åŒ…å«ä»–ä»¬çš„å…¬é’¥ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªç›´æ¥æŒ‡å‘è¯¥å†…å®¹çš„æ ‡ç­¾ã€‚ è¦å®Œæˆè¿™ä¸€ä»»åŠ¡ï¼Œé¦–å…ˆä½ å¯ä»¥é€šè¿‡è¿è¡Œ <code>gpg --list-keys</code> æ‰¾å‡ºä½ æ‰€æƒ³è¦çš„ keyï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --list-keys</span><br><span class="line">/Users/schacon/.gnupg/pubring.gpg</span><br><span class="line">---------------------------------</span><br><span class="line">pub   1024D/F721C45A 2009-02-09 [expires: 2010-02-09]</span><br><span class="line">uid                  Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">sub   2048g/45D02282 2009-02-09 [expires: 2010-02-09]</span><br></pre></td></tr></table></figure><p>ä¹‹åä½ å¯ä»¥é€šè¿‡å¯¼å‡º key å¹¶é€šè¿‡ç®¡é“ä¼ é€’ç»™ <code>git hash-object</code> æ¥ç›´æ¥å°† key å¯¼å…¥åˆ° Git çš„æ•°æ®åº“ä¸­ï¼Œ<code>git hash-object</code> å‘½ä»¤ä¼šå‘ Git ä¸­å†™å…¥ä¸€ä¸ªåŒ…å«å…¶å†…å®¹çš„æ–° blob å¯¹è±¡ï¼Œå¹¶å‘ä½ è¿”å›è¯¥ blob å¯¹è±¡çš„ SHA-1 å€¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ gpg -a --export F721C45A | git hash-object -w --stdin</span><br><span class="line">659ef797d181633c87ec71ac3f9ba29fe5775b92</span><br></pre></td></tr></table></figure><p>æ—¢ç„¶ Git ä¸­å·²ç»åŒ…å«ä½ çš„ key çš„å†…å®¹äº†ï¼Œä½ å°±å¯ä»¥é€šè¿‡æŒ‡å®šç”± <code>hash-object</code> å‘½ä»¤ç»™å‡ºçš„æ–° SHA-1 å€¼æ¥åˆ›å»ºä¸€ä¸ªç›´æ¥æŒ‡å‘å®ƒçš„æ ‡ç­¾ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a maintainer-pgp-pub 659ef797d181633c87ec71ac3f9ba29fe5775b92</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è¿è¡Œ <code>git push --tags</code> å‘½ä»¤ï¼Œé‚£ä¹ˆ <code>maintainer-pgp-pub</code> æ ‡ç­¾å°†ä¼šè¢«å…±äº«ç»™æ‰€æœ‰äººã€‚ éœ€è¦æ ¡éªŒæ ‡ç­¾çš„äººå¯ä»¥é€šè¿‡ä»æ•°æ®åº“ä¸­ç›´æ¥æ‹‰å– blob å¯¹è±¡å¹¶å¯¼å…¥åˆ° GPG ä¸­æ¥å¯¼å…¥ PGP keyï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git show maintainer-pgp-pub | gpg --import</span><br></pre></td></tr></table></figure><p>äººä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ª key æ¥æ ¡éªŒæ‰€æœ‰ç”±ä½ ç­¾åçš„æ ‡ç­¾ã€‚ å¦å¤–ï¼Œå¦‚æœä½ åœ¨æ ‡ç­¾ä¿¡æ¯ä¸­åŒ…å«äº†ä¸€äº›æ“ä½œè¯´æ˜ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¿è¡Œ <code>git show &lt;tag&gt;</code> æ¥è·å–æ›´å¤šå…³äºæ ‡ç­¾æ ¡éªŒçš„è¯´æ˜ã€‚</p><h4 id="ç”Ÿæˆä¸€ä¸ªæ„å»ºå·"><a href="#ç”Ÿæˆä¸€ä¸ªæ„å»ºå·" class="headerlink" title="ç”Ÿæˆä¸€ä¸ªæ„å»ºå·"></a>ç”Ÿæˆä¸€ä¸ªæ„å»ºå·</h4><p>Git ä¸­ä¸å­˜åœ¨éšæ¯æ¬¡æäº¤é€’å¢çš„â€œv123â€ä¹‹ç±»çš„æ•°å­—åºåˆ—ï¼Œå¦‚æœä½ æƒ³è¦ä¸ºæäº¤é™„ä¸Šä¸€ä¸ªå¯è¯»çš„åç§°ï¼Œå¯ä»¥å¯¹å…¶è¿è¡Œ <code>git describe</code> å‘½ä»¤ã€‚ Git å°†ä¼šç»™å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒç”±æœ€è¿‘çš„æ ‡ç­¾åã€è‡ªè¯¥æ ‡ç­¾ä¹‹åçš„æäº¤æ•°ç›®å’Œä½ æ‰€æè¿°çš„æäº¤çš„éƒ¨åˆ† SHA-1 å€¼æ„æˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git describe master</span><br><span class="line">v1.6.2-rc1-20-g8c5b85c</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä½ åœ¨å¯¼å‡ºä¸€ä¸ªå¿«ç…§æˆ–æ„å»ºæ—¶ï¼Œå¯ä»¥ç»™å‡ºä¸€ä¸ªä¾¿äºäººä»¬ç†è§£çš„å‘½åã€‚ å®é™…ä¸Šï¼Œå¦‚æœä½ çš„ Git æ˜¯ä» Git è‡ªå·±çš„ç‰ˆæœ¬åº“å…‹éš†ä¸‹æ¥å¹¶æ„å»ºçš„ï¼Œé‚£ä¹ˆ <code>git --version</code> å‘½ä»¤ç»™å‡ºçš„ç»“æœæ˜¯ä¸æ­¤ç±»ä¼¼çš„ã€‚ å¦‚æœä½ æ‰€æè¿°çš„æäº¤è‡ªèº«å°±æœ‰ä¸€ä¸ªæ ‡ç­¾ï¼Œé‚£ä¹ˆå®ƒå°†åªä¼šè¾“å‡ºæ ‡ç­¾åï¼Œæ²¡æœ‰åé¢ä¸¤é¡¹ä¿¡æ¯ã€‚</p><p>æ³¨æ„ <code>git describe</code> å‘½ä»¤åªé€‚ç”¨äºæœ‰æ³¨è§£çš„æ ‡ç­¾ï¼ˆå³ä½¿ç”¨ <code>-a</code> æˆ– <code>-s</code> é€‰é¡¹åˆ›å»ºçš„æ ‡ç­¾ï¼‰ï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨ä½¿ç”¨ <code>git describe</code> å‘½ä»¤çš„è¯ï¼Œä¸ºäº†ç¡®ä¿èƒ½ä¸ºæ ‡ç­¾ç”Ÿæˆåˆé€‚çš„åç§°ï¼Œæ‰“å‘å¸ƒæ ‡ç­¾æ—¶éƒ½åº”è¯¥é‡‡ç”¨åŠ æ³¨è§£çš„æ–¹å¼ã€‚ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ªå­—ç¬¦ä¸²æ¥è°ƒç”¨ <code>checkout</code> æˆ– <code>show</code> å‘½ä»¤ï¼Œä½†æ˜¯è¿™ä¾èµ–äºå…¶æœ«å°¾çš„ç®€çŸ­ SHA-1 å€¼ï¼Œå› æ­¤ä¸ä¸€å®šä¸€ç›´æœ‰æ•ˆã€‚ æ¯”å¦‚ï¼Œæœ€è¿‘ Linux å†…æ ¸ä¸ºäº†ä¿è¯ SHA-1 å€¼å¯¹è±¡çš„å”¯ä¸€æ€§ï¼Œå°†å…¶ä½æ•°ç”± 8 ä½æ‰©å±•åˆ°äº† 10 ä½ï¼Œå¯¼è‡´ä»¥å‰çš„ <code>git describe</code> è¾“å‡ºå…¨éƒ¨å¤±æ•ˆã€‚`</p><h4 id="å‡†å¤‡ä¸€æ¬¡å‘å¸ƒ"><a href="#å‡†å¤‡ä¸€æ¬¡å‘å¸ƒ" class="headerlink" title="å‡†å¤‡ä¸€æ¬¡å‘å¸ƒ"></a>å‡†å¤‡ä¸€æ¬¡å‘å¸ƒ</h4><p>ç°åœ¨ä½ å¯ä»¥å‘å¸ƒä¸€ä¸ªæ„å»ºäº†ã€‚ å…¶ä¸­ä¸€ä»¶äº‹æƒ…å°±æ˜¯ä¸ºé‚£äº›ä¸ä½¿ç”¨ Git çš„å¯æ€œåŒ…ä»¬åˆ›å»ºä¸€ä¸ªæœ€æ–°çš„å¿«ç…§å½’æ¡£ã€‚ ä½¿ç”¨ <code>git archive</code> å‘½ä»¤å®Œæˆæ­¤å·¥ä½œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git archive master --prefix=&apos;project/&apos; | gzip &gt; `git describe master`.tar.gz</span><br><span class="line">$ ls *.tar.gz</span><br><span class="line">v1.6.2-rc1-20-g8c5b85c.tar.gz</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰äººå°†è¿™ä¸ªå‹ç¼©åŒ…è§£å‹ï¼Œä»–å°±å¯ä»¥å¾—åˆ°ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹çš„æœ€æ–°å¿«ç…§ã€‚ ä½ ä¹Ÿå¯ä»¥ä»¥ç±»ä¼¼çš„æ–¹å¼åˆ›å»ºä¸€ä¸ª zip å‹ç¼©åŒ…ï¼Œä½†æ­¤æ—¶ä½ åº”è¯¥å‘ <code>git archive</code> å‘½ä»¤ä¼ é€’ <code>--format=zip</code> é€‰é¡¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git archive master --prefix=&apos;project/&apos; --format=zip &gt; `git describe master`.zip</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ æœ‰äº†æœ¬æ¬¡å‘å¸ƒçš„ä¸€ä¸ª tar åŒ…å’Œä¸€ä¸ª zip åŒ…ï¼Œå¯ä»¥å°†å…¶ä¸Šä¼ åˆ°ç½‘ç«™æˆ–ä»¥ç”µå­é‚®ä»¶çš„å½¢å¼å‘é€ç»™äººä»¬ã€‚</p><h4 id="åˆ¶ä½œæäº¤ç®€æŠ¥"><a href="#åˆ¶ä½œæäº¤ç®€æŠ¥" class="headerlink" title="åˆ¶ä½œæäº¤ç®€æŠ¥"></a>åˆ¶ä½œæäº¤ç®€æŠ¥</h4><p>ç°åœ¨æ˜¯æ—¶å€™é€šçŸ¥é‚®ä»¶åˆ—è¡¨é‡Œé‚£äº›å¥½å¥‡ä½ çš„é¡¹ç›®å‘ç”Ÿäº†ä»€ä¹ˆçš„äººäº†ã€‚ ä½¿ç”¨ <code>git shortlog</code> å‘½ä»¤å¯ä»¥å¿«é€Ÿç”Ÿæˆä¸€ä»½åŒ…å«ä»ä¸Šæ¬¡å‘å¸ƒä¹‹åé¡¹ç›®æ–°å¢å†…å®¹çš„ä¿®æ”¹æ—¥å¿—ï¼ˆchangelogï¼‰ç±»æ–‡æ¡£ã€‚ å®ƒä¼šå¯¹ä½ ç»™å®šèŒƒå›´å†…çš„æ‰€æœ‰æäº¤è¿›è¡Œæ€»ç»“ï¼›æ¯”å¦‚ï¼Œä½ çš„ä¸Šä¸€æ¬¡å‘å¸ƒåç§°æ˜¯ v1.0.1ï¼Œé‚£ä¹ˆä¸‹é¢çš„å‘½ä»¤å¯ä»¥ç»™å‡ºä¸Šæ¬¡å‘å¸ƒä»¥æ¥æ‰€æœ‰æäº¤çš„æ€»ç»“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git shortlog --no-merges master --not v1.0.1</span><br><span class="line">Chris Wanstrath (8):</span><br><span class="line">      Add support for annotated tags to Grit::Tag</span><br><span class="line">      Add packed-refs annotated tag support.</span><br><span class="line">      Add Grit::Commit#to_patch</span><br><span class="line">      Update version and History.txt</span><br><span class="line">      Remove stray `puts`</span><br><span class="line">      Make ls_tree ignore nils</span><br><span class="line"></span><br><span class="line">Tom Preston-Werner (4):</span><br><span class="line">      fix dates in history</span><br><span class="line">      dynamic version method</span><br><span class="line">      Version bump to 1.0.2</span><br><span class="line">      Regenerated gemspec for version 1.0.2</span><br></pre></td></tr></table></figure><p>è¿™ä»½æ•´æ´çš„æ€»ç»“åŒ…æ‹¬äº†è‡ª v1.0.1 ä»¥æ¥çš„æ‰€æœ‰æäº¤ï¼Œå¹¶ä¸”å·²ç»æŒ‰ç…§ä½œè€…åˆ†å¥½ç»„ï¼Œä½ å¯ä»¥é€šè¿‡ç”µå­é‚®ä»¶å°†å…¶ç›´æ¥å‘é€åˆ°åˆ—è¡¨ä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitï¼šæœåŠ¡å™¨</title>
      <link href="/2018/06/08/Git%EF%BC%9A%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2018/06/08/Git%EF%BC%9A%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åº”è¯¥å·²ç»æœ‰åŠæ³•ä½¿ç”¨ Git æ¥å®Œæˆæ—¥å¸¸å·¥ä½œã€‚ ç„¶è€Œï¼Œä¸ºäº†ä½¿ç”¨ Git åä½œåŠŸèƒ½ï¼Œä½ è¿˜éœ€è¦æœ‰è¿œç¨‹çš„ Git ä»“åº“ã€‚ å°½ç®¡åœ¨æŠ€æœ¯ä¸Šä½ å¯ä»¥ä»ä¸ªäººä»“åº“è¿›è¡Œæ¨é€ï¼ˆpushï¼‰å’Œæ‹‰å–ï¼ˆpullï¼‰æ¥ä¿®æ”¹å†…å®¹ï¼Œä½†ä¸é¼“åŠ±ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå› ä¸ºä¸€ä¸ç•™å¿ƒå°±å¾ˆå®¹æ˜“å¼„æ··å…¶ä»–äººçš„è¿›åº¦ã€‚ æ­¤å¤–ï¼Œä½ å¸Œæœ›ä½ çš„åˆä½œè€…ä»¬å³ä½¿åœ¨ä½ çš„ç”µè„‘æœªè”æœºæ—¶äº¦èƒ½å­˜å–ä»“åº“ â€” æ‹¥æœ‰ä¸€ä¸ªæ›´å¯é çš„å…¬ç”¨ä»“åº“ååˆ†æœ‰ç”¨ã€‚ å› æ­¤ï¼Œä¸ä»–äººåˆä½œçš„æœ€ä½³æ–¹æ³•å³æ˜¯å»ºç«‹ä¸€ä¸ªä½ ä¸åˆä½œè€…ä»¬éƒ½æœ‰æƒåˆ©è®¿é—®ï¼Œä¸”å¯ä»é‚£é‡Œæ¨é€å’Œæ‹‰å–èµ„æ–™çš„å…±ç”¨ä»“åº“ã€‚</p><a id="more"></a><p>æ¶è®¾ä¸€å° Git æœåŠ¡å™¨å¹¶ä¸éš¾ã€‚ é¦–å…ˆï¼Œé€‰æ‹©ä½ å¸Œæœ›æœåŠ¡å™¨ä½¿ç”¨çš„é€šè®¯åè®®ã€‚ åœ¨æœ¬ç« ç¬¬ä¸€èŠ‚å°†ä»‹ç»å¯ç”¨çš„åè®®ä»¥åŠå„è‡ªä¼˜ç¼ºç‚¹ã€‚ ä¸‹é¢ä¸€èŠ‚å°†è§£é‡Šä½¿ç”¨é‚£äº›åè®®çš„å…¸å‹è®¾ç½®åŠå¦‚ä½•åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šè¿è¡Œã€‚ æœ€åï¼Œå¦‚æœä½ ä¸ä»‹æ„æ‰˜ç®¡ä½ çš„ä»£ç åœ¨å…¶ä»–äººçš„æœåŠ¡å™¨ï¼Œä¸”ä¸æƒ³ç»å†è®¾ç½®ä¸ç»´æŠ¤è‡ªå·±æœåŠ¡å™¨çš„éº»çƒ¦ï¼Œå¯ä»¥è¯•è¯•æˆ‘ä»¬ä»‹ç»çš„å‡ ä¸ªä»“åº“æ‰˜ç®¡æœåŠ¡ã€‚</p><p>å¦‚æœä½ å¯¹æ¶è®¾è‡ªå·±çš„æœåŠ¡å™¨æ²¡å…´è¶£ï¼Œå¯ä»¥è·³åˆ°æœ¬ç« æœ€åä¸€èŠ‚å»çœ‹çœ‹å¦‚ä½•ç”³è¯·ä¸€ä¸ªä»£ç æ‰˜ç®¡æœåŠ¡çš„å¸æˆ·ç„¶åç»§ç»­ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬ä¼šåœ¨é‚£é‡Œè®¨è®ºåˆ†æ•£å¼æºç æ§åˆ¶ç¯å¢ƒçš„æ—æ—æ€»æ€»ã€‚</p><p>ä¸€ä¸ªè¿œç¨‹ä»“åº“é€šå¸¸åªæ˜¯ä¸€ä¸ªè£¸ä»“åº“ï¼ˆbare repositoryï¼‰â€”â€”å³ä¸€ä¸ªæ²¡æœ‰å½“å‰å·¥ä½œç›®å½•çš„ä»“åº“ã€‚ å› ä¸ºè¯¥ä»“åº“ä»…ä»…ä½œä¸ºåˆä½œåª’ä»‹ï¼Œä¸éœ€è¦ä»ç£ç›˜æ£€æŸ¥å¿«ç…§ï¼›å­˜æ”¾çš„åªæœ‰ Git çš„èµ„æ–™ã€‚ ç®€å•çš„è¯´ï¼Œè£¸ä»“åº“å°±æ˜¯ä½ å·¥ç¨‹ç›®å½•å†…çš„ <code>.git</code> å­ç›®å½•å†…å®¹ï¼Œä¸åŒ…å«å…¶ä»–èµ„æ–™ã€‚</p><h3 id="åè®®"><a href="#åè®®" class="headerlink" title="åè®®"></a>åè®®</h3><p>Git å¯ä»¥ä½¿ç”¨å››ç§ä¸»è¦çš„åè®®æ¥ä¼ è¾“èµ„æ–™ï¼šæœ¬åœ°åè®®ï¼ˆLocalï¼‰ï¼ŒHTTP åè®®ï¼ŒSSHï¼ˆSecure Shellï¼‰åè®®åŠ Git åè®®ã€‚ åœ¨æ­¤ï¼Œæˆ‘ä»¬å°†ä¼šè®¨è®ºé‚£äº›åè®®åŠå“ªäº›æƒ…å½¢åº”è¯¥ä½¿ç”¨ï¼ˆæˆ–é¿å…ä½¿ç”¨ï¼‰ä»–ä»¬ã€‚</p><h4 id="æœ¬åœ°åè®®"><a href="#æœ¬åœ°åè®®" class="headerlink" title="æœ¬åœ°åè®®"></a>æœ¬åœ°åè®®</h4><p>æœ€åŸºæœ¬çš„å°±æ˜¯ æœ¬åœ°åè®®ï¼ˆLocal protocolï¼‰ ï¼Œå…¶ä¸­çš„è¿œç¨‹ç‰ˆæœ¬åº“å°±æ˜¯ç¡¬ç›˜å†…çš„å¦ä¸€ä¸ªç›®å½•ã€‚ è¿™å¸¸è§äºå›¢é˜Ÿæ¯ä¸€ä¸ªæˆå‘˜éƒ½å¯¹ä¸€ä¸ªå…±äº«çš„æ–‡ä»¶ç³»ç»Ÿï¼ˆä¾‹å¦‚ä¸€ä¸ªæŒ‚è½½çš„ NFSï¼‰æ‹¥æœ‰è®¿é—®æƒï¼Œæˆ–è€…æ¯”è¾ƒå°‘è§çš„å¤šäººå…±ç”¨åŒä¸€å°ç”µè„‘çš„æƒ…å†µã€‚ åè€…å¹¶ä¸ç†æƒ³ï¼Œå› ä¸ºä½ çš„æ‰€æœ‰ä»£ç ç‰ˆæœ¬åº“å¦‚æœé•¿å­˜äºåŒä¸€å°ç”µè„‘ï¼Œæ›´å¯èƒ½å‘ç”Ÿç¾éš¾æ€§çš„æŸå¤±ã€‚</p><p>å¦‚æœä½ ä½¿ç”¨å…±äº«æ–‡ä»¶ç³»ç»Ÿï¼Œå°±å¯ä»¥ä»æœ¬åœ°ç‰ˆæœ¬åº“å…‹éš†ï¼ˆcloneï¼‰ã€æ¨é€ï¼ˆpushï¼‰ä»¥åŠæ‹‰å–ï¼ˆpullï¼‰ã€‚ åƒè¿™æ ·å»å…‹éš†ä¸€ä¸ªç‰ˆæœ¬åº“æˆ–è€…å¢åŠ ä¸€ä¸ªè¿œç¨‹åˆ°ç°æœ‰çš„é¡¹ç›®ä¸­ï¼Œä½¿ç”¨ç‰ˆæœ¬åº“è·¯å¾„ä½œä¸º URLã€‚ ä¾‹å¦‚ï¼Œå…‹éš†ä¸€ä¸ªæœ¬åœ°ç‰ˆæœ¬åº“ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹çš„å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone /opt/git/project.git</span><br></pre></td></tr></table></figure><p>æˆ–ä½ å¯ä»¥æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone file:///opt/git/project.git</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨ URL å¼€å¤´æ˜ç¡®çš„æŒ‡å®š <code>file://</code>ï¼Œé‚£ä¹ˆ Git çš„è¡Œä¸ºä¼šç•¥æœ‰ä¸åŒã€‚ å¦‚æœä»…æ˜¯æŒ‡å®šè·¯å¾„ï¼ŒGit ä¼šå°è¯•ä½¿ç”¨ç¡¬é“¾æ¥ï¼ˆhard linkï¼‰æˆ–ç›´æ¥å¤åˆ¶æ‰€éœ€è¦çš„æ–‡ä»¶ã€‚ å¦‚æœæŒ‡å®š <code>file://</code>ï¼ŒGit ä¼šè§¦å‘å¹³æ—¶ç”¨äºç½‘è·¯ä¼ è¾“èµ„æ–™çš„è¿›ç¨‹ï¼Œé‚£é€šå¸¸æ˜¯ä¼ è¾“æ•ˆç‡è¾ƒä½çš„æ–¹æ³•ã€‚ æŒ‡å®š <code>file://</code> çš„ä¸»è¦ç›®çš„æ˜¯å–å¾—ä¸€ä¸ªæ²¡æœ‰å¤–éƒ¨å‚è€ƒï¼ˆextraneous referencesï¼‰æˆ–å¯¹è±¡ï¼ˆobjectï¼‰çš„å¹²å‡€ç‰ˆæœ¬åº“å‰¯æœ¬â€“ é€šå¸¸æ˜¯åœ¨ä»å…¶ä»–ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå¯¼å…¥åæˆ–ä¸€äº›ç±»ä¼¼æƒ…å†µéœ€è¦è¿™ä¹ˆåšã€‚ åœ¨æ­¤æˆ‘ä»¬å°†ä½¿ç”¨æ™®é€šè·¯å¾„ï¼Œå› ä¸ºè¿™æ ·é€šå¸¸æ›´å¿«ã€‚</p><p>è¦å¢åŠ ä¸€ä¸ªæœ¬åœ°ç‰ˆæœ¬åº“åˆ°ç°æœ‰çš„ Git é¡¹ç›®ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹çš„å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add local_proj /opt/git/project.git</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå°±å¯ä»¥åƒåœ¨ç½‘ç»œä¸Šä¸€æ ·ä»è¿œç«¯ç‰ˆæœ¬åº“æ¨é€å’Œæ‹‰å–æ›´æ–°äº†ã€‚</p><p><strong>ä¼˜ç‚¹</strong><br>åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„ç‰ˆæœ¬åº“çš„ä¼˜ç‚¹æ˜¯ç®€å•ï¼Œå¹¶ä¸”ç›´æ¥ä½¿ç”¨äº†ç°æœ‰çš„æ–‡ä»¶æƒé™å’Œç½‘ç»œè®¿é—®æƒé™ã€‚ å¦‚æœä½ çš„å›¢é˜Ÿå·²ç»æœ‰å…±äº«æ–‡ä»¶ç³»ç»Ÿï¼Œå»ºç«‹ç‰ˆæœ¬åº“ä¼šååˆ†å®¹æ˜“ã€‚ åªéœ€è¦åƒè®¾ç½®å…¶ä»–å…±äº«ç›®å½•ä¸€æ ·ï¼ŒæŠŠä¸€ä¸ªè£¸ç‰ˆæœ¬åº“çš„å‰¯æœ¬æ”¾åˆ°å¤§å®¶éƒ½å¯ä»¥è®¿é—®çš„è·¯å¾„ï¼Œå¹¶è®¾ç½®å¥½è¯»/å†™çš„æƒé™ï¼Œå°±å¯ä»¥äº†ï¼Œ æˆ‘ä»¬ä¼šåœ¨ åœ¨æœåŠ¡å™¨ä¸Šæ­å»º Git è®¨è®ºå¦‚ä½•å¯¼å‡ºä¸€ä¸ªè£¸ç‰ˆæœ¬åº“ã€‚</p><p>è¿™ä¹Ÿæ˜¯å¿«é€Ÿä»åˆ«äººçš„å·¥ä½œç›®å½•ä¸­æ‹‰å–æ›´æ–°çš„æ–¹æ³•ã€‚ å¦‚æœä½ å’Œåˆ«äººä¸€èµ·åˆä½œä¸€ä¸ªé¡¹ç›®ï¼Œä»–æƒ³è®©ä½ ä»ç‰ˆæœ¬åº“ä¸­æ‹‰å–æ›´æ–°æ—¶ï¼Œè¿è¡Œç±»ä¼¼ <code>git pull /home/john/project</code> çš„å‘½ä»¤æ¯”æ¨é€åˆ°æœåŠ¡å™¨å†å–å›ç®€å•å¤šäº†ã€‚</p><p><strong>ç¼ºç‚¹</strong><br>è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯ï¼Œé€šå¸¸å…±äº«æ–‡ä»¶ç³»ç»Ÿæ¯”è¾ƒéš¾é…ç½®ï¼Œå¹¶ä¸”æ¯”èµ·åŸºæœ¬çš„ç½‘ç»œè¿æ¥è®¿é—®ï¼Œè¿™ä¸æ–¹ä¾¿ä»å¤šä¸ªä½ç½®è®¿é—®ã€‚ å¦‚æœä½ æƒ³ä»å®¶é‡Œæ¨é€å†…å®¹ï¼Œå¿…é¡»å…ˆæŒ‚è½½ä¸€ä¸ªè¿œç¨‹ç£ç›˜ï¼Œç›¸æ¯”ç½‘ç»œè¿æ¥çš„è®¿é—®æ–¹å¼ï¼Œé…ç½®ä¸æ–¹ä¾¿ï¼Œé€Ÿåº¦ä¹Ÿæ…¢ã€‚</p><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ç±»ä¼¼äºå…±äº«æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¸€å®šæ˜¯æœ€å¿«çš„ã€‚ è®¿é—®æœ¬åœ°ç‰ˆæœ¬åº“çš„é€Ÿåº¦ä¸ä½ è®¿é—®æ•°æ®çš„é€Ÿåº¦æ˜¯ä¸€æ ·çš„ã€‚ åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œå¦‚æœå…è®¸ Git è®¿é—®æœ¬åœ°ç¡¬ç›˜ï¼Œä¸€èˆ¬çš„é€šè¿‡ NFS è®¿é—®ç‰ˆæœ¬åº“è¦æ¯”é€šè¿‡ SSH è®¿é—®æ…¢ã€‚</p><p>æœ€ç»ˆï¼Œè¿™ä¸ªåè®®å¹¶ä¸ä¿æŠ¤ä»“åº“é¿å…æ„å¤–çš„æŸåã€‚ æ¯ä¸€ä¸ªç”¨æˆ·éƒ½æœ‰â€œè¿œç¨‹â€ç›®å½•çš„å®Œæ•´ shell æƒé™ï¼Œæ²¡æœ‰æ–¹æ³•å¯ä»¥é˜»æ­¢ä»–ä»¬ä¿®æ”¹æˆ–åˆ é™¤ Git å†…éƒ¨æ–‡ä»¶å’ŒæŸåä»“åº“ã€‚</p><h4 id="HTTP-åè®®"><a href="#HTTP-åè®®" class="headerlink" title="HTTP åè®®"></a>HTTP åè®®</h4><p>Git é€šè¿‡ HTTP é€šä¿¡æœ‰ä¸¤ç§æ¨¡å¼ã€‚ åœ¨ Git 1.6.6 ç‰ˆæœ¬ä¹‹å‰åªæœ‰ä¸€ä¸ªæ–¹å¼å¯ç”¨ï¼Œååˆ†ç®€å•å¹¶ä¸”é€šå¸¸æ˜¯åªè¯»æ¨¡å¼çš„ã€‚ Git 1.6.6 ç‰ˆæœ¬å¼•å…¥äº†ä¸€ç§æ–°çš„ã€æ›´æ™ºèƒ½çš„åè®®ï¼Œè®© Git å¯ä»¥åƒé€šè¿‡ SSH é‚£æ ·æ™ºèƒ½çš„åå•†å’Œä¼ è¾“æ•°æ®ã€‚ ä¹‹åå‡ å¹´ï¼Œè¿™ä¸ªæ–°çš„ HTTP åè®®å› ä¸ºå…¶ç®€å•ã€æ™ºèƒ½å˜çš„ååˆ†æµè¡Œã€‚ æ–°ç‰ˆæœ¬çš„ HTTP åè®®ä¸€èˆ¬è¢«ç§°ä¸ºâ€œæ™ºèƒ½â€ HTTP åè®®ï¼Œæ—§ç‰ˆæœ¬çš„ä¸€èˆ¬è¢«ç§°ä¸ºâ€œå“‘â€ HTTP åè®®ã€‚ æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹æ–°çš„â€œæ™ºèƒ½â€ HTTP åè®®ã€‚</p><p><strong>æ™ºèƒ½ï¼ˆSmartï¼‰ HTTP åè®®</strong><br>â€œæ™ºèƒ½â€ HTTP åè®®çš„è¿è¡Œæ–¹å¼å’Œ SSH åŠ Git åè®®ç±»ä¼¼ï¼Œåªæ˜¯è¿è¡Œåœ¨æ ‡å‡†çš„ HTTP/S ç«¯å£ä¸Šå¹¶ä¸”å¯ä»¥ä½¿ç”¨å„ç§ HTTP éªŒè¯æœºåˆ¶ï¼Œè¿™æ„å‘³ç€ä½¿ç”¨èµ·æ¥ä¼šæ¯” SSH åè®®ç®€å•çš„å¤šï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨ HTTP åè®®çš„ç”¨æˆ·åï¼å¯†ç çš„åŸºç¡€æˆæƒï¼Œå…å»è®¾ç½® SSH å…¬é’¥ã€‚</p><p>æ™ºèƒ½ HTTP åè®®æˆ–è®¸å·²ç»æ˜¯æœ€æµè¡Œçš„ä½¿ç”¨ Git çš„æ–¹å¼äº†ï¼Œå®ƒå³æ”¯æŒåƒ <code>git://</code> åè®®ä¸€æ ·è®¾ç½®åŒ¿åæœåŠ¡ï¼Œä¹Ÿå¯ä»¥åƒ SSH åè®®ä¸€æ ·æä¾›ä¼ è¾“æ—¶çš„æˆæƒå’ŒåŠ å¯†ã€‚ è€Œä¸”åªç”¨ä¸€ä¸ª URL å°±å¯ä»¥éƒ½åšåˆ°ï¼Œçœå»äº†ä¸ºä¸åŒçš„éœ€æ±‚è®¾ç½®ä¸åŒçš„ URLã€‚ å¦‚æœä½ è¦æ¨é€åˆ°ä¸€ä¸ªéœ€è¦æˆæƒçš„æœåŠ¡å™¨ä¸Šï¼ˆä¸€èˆ¬æ¥è®²éƒ½éœ€è¦ï¼‰ï¼ŒæœåŠ¡å™¨ä¼šæç¤ºä½ è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚ ä»æœåŠ¡å™¨è·å–æ•°æ®æ—¶ä¹Ÿä¸€æ ·ã€‚</p><p>äº‹å®ä¸Šï¼Œç±»ä¼¼ GitHub çš„æœåŠ¡ï¼Œä½ åœ¨ç½‘é¡µä¸Šçœ‹åˆ°çš„ URL ï¼ˆæ¯”å¦‚ï¼Œ <code>https://github.com/schacon/simplegit[]</code>ï¼‰ï¼Œå’Œä½ åœ¨å…‹éš†ã€æ¨é€ï¼ˆå¦‚æœä½ æœ‰æƒé™ï¼‰æ—¶ä½¿ç”¨çš„æ˜¯ä¸€æ ·çš„ã€‚</p><p><strong>å“‘ï¼ˆDumbï¼‰ HTTP åè®®</strong><br>å¦‚æœæœåŠ¡å™¨æ²¡æœ‰æä¾›æ™ºèƒ½ HTTP åè®®çš„æœåŠ¡ï¼ŒGit å®¢æˆ·ç«¯ä¼šå°è¯•ä½¿ç”¨æ›´ç®€å•çš„â€œå“‘â€ HTTP åè®®ã€‚ å“‘ HTTP åè®®é‡Œ web æœåŠ¡å™¨ä»…æŠŠè£¸ç‰ˆæœ¬åº“å½“ä½œæ™®é€šæ–‡ä»¶æ¥å¯¹å¾…ï¼Œæä¾›æ–‡ä»¶æœåŠ¡ã€‚ å“‘ HTTP åè®®çš„ä¼˜ç¾ä¹‹å¤„åœ¨äºè®¾ç½®èµ·æ¥ç®€å•ã€‚ åŸºæœ¬ä¸Šï¼Œåªéœ€è¦æŠŠä¸€ä¸ªè£¸ç‰ˆæœ¬åº“æ”¾åœ¨ HTTP æ ¹ç›®å½•ï¼Œè®¾ç½®ä¸€ä¸ªå«åš <code>post-update</code> çš„æŒ‚é’©å°±å¯ä»¥äº†ã€‚ æ­¤æ—¶ï¼Œåªè¦èƒ½è®¿é—® web æœåŠ¡å™¨ä¸Šä½ çš„ç‰ˆæœ¬åº“ï¼Œå°±å¯ä»¥å…‹éš†ä½ çš„ç‰ˆæœ¬åº“ã€‚ ä¸‹é¢æ˜¯è®¾ç½®ä» HTTP è®¿é—®ç‰ˆæœ¬åº“çš„æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cd /var/www/htdocs/</span><br><span class="line">$ git clone --bare /path/to/git_project gitproject.git</span><br><span class="line">$ cd gitproject.git</span><br><span class="line">$ mv hooks/post-update.sample hooks/post-update</span><br><span class="line">$ chmod a+x hooks/post-update</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥äº†ã€‚ Git è‡ªå¸¦çš„ <code>post-update</code> æŒ‚é’©ä¼šé»˜è®¤æ‰§è¡Œåˆé€‚çš„å‘½ä»¤ï¼ˆ<code>git update-server-info</code>ï¼‰ï¼Œæ¥ç¡®ä¿é€šè¿‡ HTTP çš„è·å–å’Œå…‹éš†æ“ä½œæ­£å¸¸å·¥ä½œã€‚ è¿™æ¡å‘½ä»¤ä¼šåœ¨ä½ é€šè¿‡ SSH å‘ç‰ˆæœ¬åº“æ¨é€ä¹‹åè¢«æ‰§è¡Œï¼›ç„¶ååˆ«äººå°±å¯ä»¥é€šè¿‡ç±»ä¼¼ä¸‹é¢çš„å‘½ä»¤æ¥å…‹éš†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://example.com/gitproject.git</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬ç”¨äº† Apache é‡Œè®¾ç½®äº†å¸¸ç”¨çš„è·¯å¾„ <code>/var/www/htdocs</code>ï¼Œä¸è¿‡ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•é™æ€ web æœåŠ¡å™¨ â€”â€” åªéœ€è¦æŠŠè£¸ç‰ˆæœ¬åº“æ”¾åˆ°æ­£ç¡®çš„ç›®å½•ä¸‹å°±å¯ä»¥ã€‚ Git çš„æ•°æ®æ˜¯ä»¥åŸºæœ¬çš„é™æ€æ–‡ä»¶å½¢å¼æä¾›çš„ã€‚</p><p>é€šå¸¸çš„ï¼Œä¼šåœ¨å¯ä»¥æä¾›è¯»ï¼å†™çš„æ™ºèƒ½ HTTP æœåŠ¡å’Œç®€å•çš„åªè¯»çš„å“‘ HTTP æœåŠ¡ä¹‹é—´é€‰ä¸€ä¸ªã€‚ æå°‘ä¼šå°†äºŒè€…æ··åˆæä¾›æœåŠ¡ã€‚</p><p><strong>ä¼˜ç‚¹</strong><br>æˆ‘ä»¬å°†åªå…³æ³¨æ™ºèƒ½ HTTP åè®®çš„ä¼˜ç‚¹ã€‚</p><p>ä¸åŒçš„è®¿é—®æ–¹å¼åªéœ€è¦ä¸€ä¸ª URL ä»¥åŠæœåŠ¡å™¨åªåœ¨éœ€è¦æˆæƒæ—¶æç¤ºè¾“å…¥æˆæƒä¿¡æ¯ï¼Œè¿™ä¸¤ä¸ªç®€ä¾¿æ€§è®©ç»ˆç«¯ç”¨æˆ·ä½¿ç”¨ Git å˜å¾—éå¸¸ç®€å•ã€‚ ç›¸æ¯” SSH åè®®ï¼Œå¯ä»¥ä½¿ç”¨ç”¨æˆ·åï¼å¯†ç æˆæƒæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œè¿™æ ·ç”¨æˆ·å°±ä¸å¿…é¡»åœ¨ä½¿ç”¨ Git ä¹‹å‰å…ˆåœ¨æœ¬åœ°ç”Ÿæˆ SSH å¯†é’¥å¯¹å†æŠŠå…¬é’¥ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚ å¯¹éèµ„æ·±çš„ä½¿ç”¨è€…ï¼Œæˆ–è€…ç³»ç»Ÿä¸Šç¼ºå°‘ SSH ç›¸å…³ç¨‹åºçš„ä½¿ç”¨è€…ï¼ŒHTTP åè®®çš„å¯ç”¨æ€§æ˜¯ä¸»è¦çš„ä¼˜åŠ¿ã€‚ ä¸ SSH åè®®ç±»ä¼¼ï¼ŒHTTP åè®®ä¹Ÿéå¸¸å¿«å’Œé«˜æ•ˆã€‚</p><p>ä½ ä¹Ÿå¯ä»¥åœ¨ HTTPS åè®®ä¸Šæä¾›åªè¯»ç‰ˆæœ¬åº“çš„æœåŠ¡ï¼Œå¦‚æ­¤ä½ åœ¨ä¼ è¾“æ•°æ®çš„æ—¶å€™å°±å¯ä»¥åŠ å¯†æ•°æ®ï¼›æˆ–è€…ï¼Œä½ ç”šè‡³å¯ä»¥è®©å®¢æˆ·ç«¯ä½¿ç”¨æŒ‡å®šçš„ SSL è¯ä¹¦ã€‚</p><p>å¦ä¸€ä¸ªå¥½å¤„æ˜¯ HTTP/S åè®®è¢«å¹¿æ³›ä½¿ç”¨ï¼Œä¸€èˆ¬çš„ä¼ä¸šé˜²ç«å¢™éƒ½ä¼šå…è®¸è¿™äº›ç«¯å£çš„æ•°æ®é€šè¿‡ã€‚</p><p><strong>ç¼ºç‚¹</strong><br>åœ¨ä¸€äº›æœåŠ¡å™¨ä¸Šï¼Œæ¶è®¾ HTTP/S åè®®çš„æœåŠ¡ç«¯ä¼šæ¯” SSH åè®®çš„æ£˜æ‰‹ä¸€äº›ã€‚ é™¤äº†è¿™ä¸€ç‚¹ï¼Œç”¨å…¶ä»–åè®®æä¾› Git æœåŠ¡ä¸ â€œæ™ºèƒ½â€ HTTP åè®®ç›¸æ¯”å°±å‡ ä¹æ²¡æœ‰ä¼˜åŠ¿äº†ã€‚</p><p>å¦‚æœä½ åœ¨ HTTP ä¸Šä½¿ç”¨éœ€æˆæƒçš„æ¨é€ï¼Œç®¡ç†å‡­è¯ä¼šæ¯”ä½¿ç”¨ SSH å¯†é’¥è®¤è¯éº»çƒ¦ä¸€äº›ã€‚ ç„¶è€Œï¼Œä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨å‡­è¯å­˜å‚¨å·¥å…·ï¼Œæ¯”å¦‚ OSX çš„ Keychain æˆ–è€… Windows çš„å‡­è¯ç®¡ç†å™¨ã€‚ å‚è€ƒ å‡­è¯å­˜å‚¨ å¦‚ä½•å®‰å…¨åœ°ä¿å­˜ HTTP å¯†ç ã€‚</p><h4 id="SSH-åè®®"><a href="#SSH-åè®®" class="headerlink" title="SSH åè®®"></a>SSH åè®®</h4><p>æ¶è®¾ Git æœåŠ¡å™¨æ—¶å¸¸ç”¨ SSH åè®®ä½œä¸ºä¼ è¾“åè®®ã€‚ å› ä¸ºå¤§å¤šæ•°ç¯å¢ƒä¸‹æœåŠ¡å™¨å·²ç»æ”¯æŒé€šè¿‡ SSH è®¿é—® â€”â€” å³ä½¿æ²¡æœ‰ä¹Ÿå¾ˆå®¹æ˜“æ¶è®¾ã€‚ SSH åè®®ä¹Ÿæ˜¯ä¸€ä¸ªéªŒè¯æˆæƒçš„ç½‘ç»œåè®®ï¼›å¹¶ä¸”ï¼Œå› ä¸ºå…¶æ™®éæ€§ï¼Œæ¶è®¾å’Œä½¿ç”¨éƒ½å¾ˆå®¹æ˜“ã€‚</p><p>é€šè¿‡ SSH åè®®å…‹éš†ç‰ˆæœ¬åº“ï¼Œä½ å¯ä»¥æŒ‡å®šä¸€ä¸ª <code>ssh://</code> çš„ URLï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone ssh://user@server/project.git</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨ä¸€ä¸ªç®€çŸ­çš„ scp å¼çš„å†™æ³•ï¼š    </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone user@server:project.git</span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥ä¸æŒ‡å®šç”¨æˆ·ï¼ŒGit ä¼šä½¿ç”¨å½“å‰ç™»å½•çš„ç”¨æˆ·åã€‚</p><p><strong>ä¼˜åŠ¿</strong><br>ç”¨ SSH åè®®çš„ä¼˜åŠ¿æœ‰å¾ˆå¤šã€‚ é¦–å…ˆï¼ŒSSH æ¶è®¾ç›¸å¯¹ç®€å• â€”â€” SSH å®ˆæŠ¤è¿›ç¨‹å¾ˆå¸¸è§ï¼Œå¤šæ•°ç®¡ç†å‘˜éƒ½æœ‰ä½¿ç”¨ç»éªŒï¼Œå¹¶ä¸”å¤šæ•°æ“ä½œç³»ç»Ÿéƒ½åŒ…å«äº†å®ƒåŠç›¸å…³çš„ç®¡ç†å·¥å…·ã€‚ å…¶æ¬¡ï¼Œé€šè¿‡ SSH è®¿é—®æ˜¯å®‰å…¨çš„ â€”â€” æ‰€æœ‰ä¼ è¾“æ•°æ®éƒ½è¦ç»è¿‡æˆæƒå’ŒåŠ å¯†ã€‚ æœ€åï¼Œä¸ HTTP/S åè®®ã€Git åè®®åŠæœ¬åœ°åè®®ä¸€æ ·ï¼ŒSSH åè®®å¾ˆé«˜æ•ˆï¼Œåœ¨ä¼ è¾“å‰ä¹Ÿä¼šå°½é‡å‹ç¼©æ•°æ®ã€‚</p><p><strong>ç¼ºç‚¹</strong><br>SSH åè®®çš„ç¼ºç‚¹åœ¨äºä½ ä¸èƒ½é€šè¿‡ä»–å®ç°åŒ¿åè®¿é—®ã€‚ å³ä¾¿åªè¦è¯»å–æ•°æ®ï¼Œä½¿ç”¨è€…ä¹Ÿè¦æœ‰é€šè¿‡ SSH è®¿é—®ä½ çš„ä¸»æœºçš„æƒé™ï¼Œè¿™ä½¿å¾— SSH åè®®ä¸åˆ©äºå¼€æºçš„é¡¹ç›®ã€‚ å¦‚æœä½ åªåœ¨å…¬å¸ç½‘ç»œä½¿ç”¨ï¼ŒSSH åè®®å¯èƒ½æ˜¯ä½ å”¯ä¸€è¦ç”¨åˆ°çš„åè®®ã€‚ å¦‚æœä½ è¦åŒæ—¶æä¾›åŒ¿ååªè¯»è®¿é—®å’Œ SSH åè®®ï¼Œé‚£ä¹ˆä½ é™¤äº†ä¸ºè‡ªå·±æ¨é€æ¶è®¾ SSH æœåŠ¡ä»¥å¤–ï¼Œè¿˜å¾—æ¶è®¾ä¸€ä¸ªå¯ä»¥è®©å…¶ä»–äººè®¿é—®çš„æœåŠ¡ã€‚</p><h4 id="Git-åè®®"><a href="#Git-åè®®" class="headerlink" title="Git åè®®"></a>Git åè®®</h4><p>æ¥ä¸‹æ¥æ˜¯ Git åè®®ã€‚ è¿™æ˜¯åŒ…å«åœ¨ Git é‡Œçš„ä¸€ä¸ªç‰¹æ®Šçš„å®ˆæŠ¤è¿›ç¨‹ï¼›å®ƒç›‘å¬åœ¨ä¸€ä¸ªç‰¹å®šçš„ç«¯å£ï¼ˆ9418ï¼‰ï¼Œç±»ä¼¼äº SSH æœåŠ¡ï¼Œä½†æ˜¯è®¿é—®æ— éœ€ä»»ä½•æˆæƒã€‚ è¦è®©ç‰ˆæœ¬åº“æ”¯æŒ Git åè®®ï¼Œéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ª <code>git-daemon-export-ok</code> æ–‡ä»¶ â€”â€” å®ƒæ˜¯ Git åè®®å®ˆæŠ¤è¿›ç¨‹ä¸ºè¿™ä¸ªç‰ˆæœ¬åº“æä¾›æœåŠ¡çš„å¿…è¦æ¡ä»¶ â€”â€” ä½†æ˜¯é™¤æ­¤ä¹‹å¤–æ²¡æœ‰ä»»ä½•å®‰å…¨æªæ–½ã€‚ è¦ä¹ˆè°éƒ½å¯ä»¥å…‹éš†è¿™ä¸ªç‰ˆæœ¬åº“ï¼Œè¦ä¹ˆè°ä¹Ÿä¸èƒ½ã€‚ è¿™æ„å‘³ç€ï¼Œé€šå¸¸ä¸èƒ½é€šè¿‡ Git åè®®æ¨é€ã€‚ ç”±äºæ²¡æœ‰æˆæƒæœºåˆ¶ï¼Œä¸€æ—¦ä½ å¼€æ”¾æ¨é€æ“ä½œï¼Œæ„å‘³ç€ç½‘ç»œä¸ŠçŸ¥é“è¿™ä¸ªé¡¹ç›® URL çš„äººéƒ½å¯ä»¥å‘é¡¹ç›®æ¨é€æ•°æ®ã€‚ ä¸ç”¨è¯´ï¼Œæå°‘ä¼šæœ‰äººè¿™ä¹ˆåšã€‚</p><p><strong>ä¼˜ç‚¹</strong><br>ç›®å‰ï¼ŒGit åè®®æ˜¯ Git ä½¿ç”¨çš„ç½‘ç»œä¼ è¾“åè®®é‡Œæœ€å¿«çš„ã€‚ å¦‚æœä½ çš„é¡¹ç›®æœ‰å¾ˆå¤§çš„è®¿é—®é‡ï¼Œæˆ–è€…ä½ çš„é¡¹ç›®å¾ˆåºå¤§å¹¶ä¸”ä¸éœ€è¦ä¸ºå†™è¿›è¡Œç”¨æˆ·æˆæƒï¼Œæ¶è®¾ Git å®ˆæŠ¤è¿›ç¨‹æ¥æä¾›æœåŠ¡æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚ å®ƒä½¿ç”¨ä¸ SSH ç›¸åŒçš„æ•°æ®ä¼ è¾“æœºåˆ¶ï¼Œä½†æ˜¯çœå»äº†åŠ å¯†å’Œæˆæƒçš„å¼€é”€ã€‚</p><p><strong>ç¼ºç‚¹</strong><br>Git åè®®ç¼ºç‚¹æ˜¯ç¼ºä¹æˆæƒæœºåˆ¶ã€‚ æŠŠ Git åè®®ä½œä¸ºè®¿é—®é¡¹ç›®ç‰ˆæœ¬åº“çš„å”¯ä¸€æ‰‹æ®µæ˜¯ä¸å¯å–çš„ã€‚ ä¸€èˆ¬çš„åšæ³•é‡Œï¼Œä¼šåŒæ—¶æä¾› SSH æˆ–è€… HTTPS åè®®çš„è®¿é—®æœåŠ¡ï¼Œåªè®©å°‘æ•°å‡ ä¸ªå¼€å‘è€…æœ‰æ¨é€ï¼ˆå†™ï¼‰æƒé™ï¼Œå…¶ä»–äººé€šè¿‡ <code>git://</code> è®¿é—®åªæœ‰è¯»æƒé™ã€‚ Git åè®®ä¹Ÿè®¸ä¹Ÿæ˜¯æœ€éš¾æ¶è®¾çš„ã€‚ å®ƒè¦æ±‚æœ‰è‡ªå·±çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œè¿™å°±è¦é…ç½® <code>xinetd</code> æˆ–è€…å…¶ä»–çš„ç¨‹åºï¼Œè¿™äº›å·¥ä½œå¹¶ä¸ç®€å•ã€‚ å®ƒè¿˜è¦æ±‚é˜²ç«å¢™å¼€æ”¾ 9418 ç«¯å£ï¼Œä½†æ˜¯ä¼ä¸šé˜²ç«å¢™ä¸€èˆ¬ä¸ä¼šå¼€æ”¾è¿™ä¸ªéæ ‡å‡†ç«¯å£ã€‚ è€Œå¤§å‹çš„ä¼ä¸šé˜²ç«å¢™é€šå¸¸ä¼šå°é”è¿™ä¸ªç«¯å£ã€‚</p><h3 id="åœ¨æœåŠ¡å™¨ä¸Šæ­å»º-Git"><a href="#åœ¨æœåŠ¡å™¨ä¸Šæ­å»º-Git" class="headerlink" title="åœ¨æœåŠ¡å™¨ä¸Šæ­å»º Git"></a>åœ¨æœåŠ¡å™¨ä¸Šæ­å»º Git</h3><p>ç°åœ¨æˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•åœ¨ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Šæ­å»º Git æœåŠ¡æ¥è¿è¡Œè¿™äº›åè®®ã€‚</p><p>åœ¨å¼€å§‹æ¶è®¾ Git æœåŠ¡å™¨å‰ï¼Œéœ€è¦æŠŠç°æœ‰ä»“åº“å¯¼å‡ºä¸ºè£¸ä»“åº“â€”â€”å³ä¸€ä¸ªä¸åŒ…å«å½“å‰å·¥ä½œç›®å½•çš„ä»“åº“ã€‚ è¿™é€šå¸¸æ˜¯å¾ˆç®€å•çš„ã€‚ ä¸ºäº†é€šè¿‡å…‹éš†ä½ çš„ä»“åº“æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„è£¸ä»“åº“ï¼Œä½ éœ€è¦åœ¨å…‹éš†å‘½ä»¤ååŠ ä¸Š <code>--bare</code> é€‰é¡¹ã€‚ æŒ‰ç…§æƒ¯ä¾‹ï¼Œè£¸ä»“åº“ç›®å½•åä»¥ <code>.git</code> ç»“å°¾ï¼Œå°±åƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git clone --bare my_project my_project.git</span><br><span class="line">Cloning into bare repository &apos;my_project.git&apos;...</span><br><span class="line">done.</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œä½ çš„ <code>my_project.git</code> ç›®å½•ä¸­åº”è¯¥æœ‰ Git ç›®å½•çš„å‰¯æœ¬äº†ã€‚</p><p>æ•´ä½“ä¸Šæ•ˆæœå¤§è‡´ç›¸å½“äº</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp -Rf my_project/.git my_project.git</span><br></pre></td></tr></table></figure><p>è™½ç„¶åœ¨é…ç½®æ–‡ä»¶ä¸­æœ‰è‹¥å¹²ä¸åŒï¼Œä½†æ˜¯å¯¹äºä½ çš„ç›®çš„æ¥è¯´ï¼Œè¿™ä¸¤ç§æ–¹å¼éƒ½æ˜¯ä¸€æ ·çš„ã€‚ å®ƒåªå–å‡º Git ä»“åº“è‡ªèº«ï¼Œä¸è¦å·¥ä½œç›®å½•ï¼Œç„¶åç‰¹åˆ«ä¸ºå®ƒå•ç‹¬åˆ›å»ºä¸€ä¸ªç›®å½•ã€‚</p><h4 id="æŠŠè£¸ä»“åº“æ”¾åˆ°æœåŠ¡å™¨ä¸Š"><a href="#æŠŠè£¸ä»“åº“æ”¾åˆ°æœåŠ¡å™¨ä¸Š" class="headerlink" title="æŠŠè£¸ä»“åº“æ”¾åˆ°æœåŠ¡å™¨ä¸Š"></a>æŠŠè£¸ä»“åº“æ”¾åˆ°æœåŠ¡å™¨ä¸Š</h4><p>æ—¢ç„¶ä½ æœ‰äº†è£¸ä»“åº“çš„å‰¯æœ¬ï¼Œå‰©ä¸‹è¦åšçš„å°±æ˜¯æŠŠè£¸ä»“åº“æ”¾åˆ°æœåŠ¡å™¨ä¸Šå¹¶è®¾ç½®ä½ çš„åè®®ã€‚ å‡è®¾ä¸€ä¸ªåŸŸåä¸º <code>git.example.com</code> çš„æœåŠ¡å™¨å·²ç»æ¶è®¾å¥½ï¼Œå¹¶å¯ä»¥é€šè¿‡ SSH è¿æ¥ï¼Œä½ æƒ³æŠŠæ‰€æœ‰çš„ Git ä»“åº“æ”¾åœ¨ <code>/opt/git</code> ç›®å½•ä¸‹ã€‚ å‡è®¾æœåŠ¡å™¨ä¸Šå­˜åœ¨ <code>/opt/git/</code> ç›®å½•ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¤åˆ¶ä½ çš„è£¸ä»“åº“æ¥åˆ›å»ºä¸€ä¸ªæ–°ä»“åº“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ scp -r my_project.git user@git.example.com:/opt/git</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå…¶ä»–é€šè¿‡ SSH è¿æ¥è¿™å°æœåŠ¡å™¨å¹¶å¯¹ <code>/opt/git</code> ç›®å½•æ‹¥æœ‰å¯è¯»æƒé™çš„ä½¿ç”¨è€…ï¼Œé€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥å…‹éš†ä½ çš„ä»“åº“ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone user@git.example.com:/opt/git/my_project.git</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸€ä¸ªç”¨æˆ·ï¼Œé€šè¿‡ä½¿ç”¨ SSH è¿æ¥åˆ°ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¹¶ä¸”å…¶å¯¹ <code>/opt/git/my_project.git</code> ç›®å½•æ‹¥æœ‰å¯å†™æƒé™ï¼Œé‚£ä¹ˆä»–å°†è‡ªåŠ¨æ‹¥æœ‰æ¨é€æƒé™ã€‚</p><p>å¦‚æœåˆ°è¯¥é¡¹ç›®ç›®å½•ä¸­è¿è¡Œ <code>git init</code> å‘½ä»¤ï¼Œå¹¶åŠ ä¸Š <code>--shared</code> é€‰é¡¹ï¼Œé‚£ä¹ˆ Git ä¼šè‡ªåŠ¨ä¿®æ”¹è¯¥ä»“åº“ç›®å½•çš„ç»„æƒé™ä¸ºå¯å†™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ssh user@git.example.com</span><br><span class="line">$ cd /opt/git/my_project.git</span><br><span class="line">$ git init --bare --shared</span><br></pre></td></tr></table></figure><p>ç”±æ­¤å¯è§ï¼Œæ ¹æ®ç°æœ‰çš„ Git ä»“åº“åˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ï¼Œç„¶åæŠŠå®ƒæ”¾ä¸Šä½ å’Œåä½œè€…éƒ½æœ‰ SSH è®¿é—®æƒçš„æœåŠ¡å™¨æ˜¯å¤šä¹ˆå®¹æ˜“ã€‚ ç°åœ¨ä½ ä»¬å·²ç»å‡†å¤‡å¥½åœ¨åŒä¸€é¡¹ç›®ä¸Šå±•å¼€åˆä½œäº†ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™çš„ç¡®æ˜¯æ¶è®¾ä¸€ä¸ªå‡ ä¸ªäººæ‹¥æœ‰è¿æ¥æƒçš„ Git æœåŠ¡çš„å…¨éƒ¨â€”â€”åªè¦åœ¨æœåŠ¡å™¨ä¸ŠåŠ å…¥å¯ä»¥ç”¨ SSH ç™»å½•çš„å¸å·ï¼Œç„¶åæŠŠè£¸ä»“åº“æ”¾åœ¨å¤§å®¶éƒ½æœ‰è¯»å†™æƒé™çš„åœ°æ–¹ã€‚ ä½ å·²ç»å‡†å¤‡å¥½äº†ä¸€åˆ‡ï¼Œæ— éœ€æ›´å¤šã€‚</p><p>ä¸‹é¢çš„å‡ èŠ‚ä¸­ï¼Œä½ ä¼šäº†è§£å¦‚ä½•æ‰©å±•åˆ°æ›´å¤æ‚çš„è®¾å®šã€‚ è¿™äº›å†…å®¹åŒ…å«å¦‚ä½•é¿å…ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·å»ºç«‹ä¸€ä¸ªè´¦æˆ·ï¼Œç»™ä»“åº“æ·»åŠ å…¬å…±è¯»å–æƒé™ï¼Œæ¶è®¾ç½‘é¡µç•Œé¢ç­‰ç­‰ã€‚ ç„¶è€Œï¼Œè¯·è®°ä½è¿™ä¸€ç‚¹ï¼Œå¦‚æœåªæ˜¯å’Œå‡ ä¸ªäººåœ¨ä¸€ä¸ªç§æœ‰é¡¹ç›®ä¸Šåˆä½œçš„è¯ï¼Œä»…ä»… æ˜¯ä¸€ä¸ª SSH æœåŠ¡å™¨å’Œè£¸ä»“åº“å°±è¶³å¤Ÿäº†ã€‚</p><h4 id="å°å‹å®‰è£…"><a href="#å°å‹å®‰è£…" class="headerlink" title="å°å‹å®‰è£…"></a>å°å‹å®‰è£…</h4><p>å¦‚æœè®¾å¤‡è¾ƒå°‘æˆ–è€…ä½ åªæƒ³åœ¨å°å‹å¼€å‘å›¢é˜Ÿé‡Œå°è¯• Git ï¼Œé‚£ä¹ˆä¸€åˆ‡éƒ½å¾ˆç®€å•ã€‚ æ¶è®¾ Git æœåŠ¡æœ€å¤æ‚çš„åœ°æ–¹åœ¨äºç”¨æˆ·ç®¡ç†ã€‚ å¦‚æœéœ€è¦ä»“åº“å¯¹ç‰¹å®šçš„ç”¨æˆ·å¯è¯»ï¼Œè€Œç»™å¦ä¸€éƒ¨åˆ†ç”¨æˆ·è¯»å†™æƒé™ï¼Œé‚£ä¹ˆè®¿é—®å’Œè®¸å¯å®‰æ’å°±ä¼šæ¯”è¾ƒå›°éš¾ã€‚</p><h4 id="SSH-è¿æ¥"><a href="#SSH-è¿æ¥" class="headerlink" title="SSH è¿æ¥"></a>SSH è¿æ¥</h4><p>å¦‚æœä½ æœ‰ä¸€å°æ‰€æœ‰å¼€å‘è€…éƒ½å¯ä»¥ç”¨ SSH è¿æ¥çš„æœåŠ¡å™¨ï¼Œæ¶è®¾ä½ çš„ç¬¬ä¸€ä¸ªä»“åº“å°±ååˆ†ç®€å•äº†ï¼Œå› ä¸ºä½ å‡ ä¹ä»€ä¹ˆéƒ½ä¸ç”¨åšï¼ˆæ­£å¦‚æˆ‘ä»¬ä¸Šä¸€èŠ‚æ‰€è¯´çš„ï¼‰ã€‚ å¦‚æœä½ æƒ³åœ¨ä½ çš„ä»“åº“ä¸Šè®¾ç½®æ›´å¤æ‚çš„è®¿é—®æ§åˆ¶æƒé™ï¼Œåªè¦ä½¿ç”¨æœåŠ¡å™¨æ“ä½œç³»ç»Ÿçš„æ™®é€šçš„æ–‡ä»¶ç³»ç»Ÿæƒé™å°±è¡Œäº†ã€‚</p><p>å¦‚æœéœ€è¦å›¢é˜Ÿé‡Œçš„æ¯ä¸ªäººéƒ½å¯¹ä»“åº“æœ‰å†™æƒé™ï¼Œåˆä¸èƒ½ç»™æ¯ä¸ªäººåœ¨æœåŠ¡å™¨ä¸Šå»ºç«‹è´¦æˆ·ï¼Œé‚£ä¹ˆæä¾› SSH è¿æ¥å°±æ˜¯å”¯ä¸€çš„é€‰æ‹©äº†ã€‚ æˆ‘ä»¬å‡è®¾ç”¨æ¥å…±äº«ä»“åº“çš„æœåŠ¡å™¨å·²ç»å®‰è£…äº† SSH æœåŠ¡ï¼Œè€Œä¸”ä½ é€šè¿‡å®ƒè®¿é—®æœåŠ¡å™¨ã€‚</p><p>æœ‰å‡ ä¸ªæ–¹æ³•å¯ä»¥ä½¿ä½ ç»™å›¢é˜Ÿæ¯ä¸ªæˆå‘˜æä¾›è®¿é—®æƒã€‚ ç¬¬ä¸€ä¸ªå°±æ˜¯ç»™å›¢é˜Ÿé‡Œçš„æ¯ä¸ªäººåˆ›å»ºè´¦å·ï¼Œè¿™ç§æ–¹æ³•å¾ˆç›´æ¥ä½†ä¹Ÿå¾ˆéº»çƒ¦ã€‚ æˆ–è®¸ä½ ä¸ä¼šæƒ³è¦ä¸ºæ¯ä¸ªäººè¿è¡Œä¸€æ¬¡ <code>adduser</code> å¹¶ä¸”è®¾ç½®ä¸´æ—¶å¯†ç ã€‚</p><p>ç¬¬äºŒä¸ªåŠæ³•æ˜¯åœ¨ä¸»æœºä¸Šå»ºç«‹ä¸€ä¸ª git è´¦æˆ·ï¼Œè®©æ¯ä¸ªéœ€è¦å†™æƒé™çš„äººå‘é€ä¸€ä¸ª SSH å…¬é’¥ï¼Œç„¶åå°†å…¶åŠ å…¥ git è´¦æˆ·çš„ <code>~/.ssh/authorized_keys</code> æ–‡ä»¶ã€‚ è¿™æ ·ä¸€æ¥ï¼Œæ‰€æœ‰äººéƒ½å°†é€šè¿‡ git è´¦æˆ·è®¿é—®ä¸»æœºã€‚ è¿™ä¸€ç‚¹ä¹Ÿä¸ä¼šå½±å“æäº¤çš„æ•°æ®â€”â€”è®¿é—®ä¸»æœºç”¨çš„èº«ä»½ä¸ä¼šå½±å“æäº¤å¯¹è±¡çš„æäº¤è€…ä¿¡æ¯ã€‚</p><p>å¦ä¸€ä¸ªåŠæ³•æ˜¯è®© SSH æœåŠ¡å™¨é€šè¿‡æŸä¸ª LDAP æœåŠ¡ï¼Œæˆ–è€…å…¶ä»–å·²ç»è®¾å®šå¥½çš„é›†ä¸­æˆæƒæœºåˆ¶ï¼Œæ¥è¿›è¡Œæˆæƒã€‚ åªè¦æ¯ä¸ªç”¨æˆ·å¯ä»¥è·å¾—ä¸»æœºçš„ shell è®¿é—®æƒé™ï¼Œä»»ä½• SSH æˆæƒæœºåˆ¶ä½ éƒ½å¯è§†ä¸ºæ˜¯æœ‰æ•ˆçš„ã€‚</p><h3 id="ç”Ÿæˆ-SSH-å…¬é’¥"><a href="#ç”Ÿæˆ-SSH-å…¬é’¥" class="headerlink" title="ç”Ÿæˆ SSH å…¬é’¥"></a>ç”Ÿæˆ SSH å…¬é’¥</h3><p>å¦‚å‰æ‰€è¿°ï¼Œè®¸å¤š Git æœåŠ¡å™¨éƒ½ä½¿ç”¨ SSH å…¬é’¥è¿›è¡Œè®¤è¯ã€‚ ä¸ºäº†å‘ Git æœåŠ¡å™¨æä¾› SSH å…¬é’¥ï¼Œå¦‚æœæŸç³»ç»Ÿç”¨æˆ·å°šæœªæ‹¥æœ‰å¯†é’¥ï¼Œå¿…é¡»äº‹å…ˆä¸ºå…¶ç”Ÿæˆä¸€ä»½ã€‚ è¿™ä¸ªè¿‡ç¨‹åœ¨æ‰€æœ‰æ“ä½œç³»ç»Ÿä¸Šéƒ½æ˜¯ç›¸ä¼¼çš„ã€‚ é¦–å…ˆï¼Œä½ éœ€è¦ç¡®è®¤è‡ªå·±æ˜¯å¦å·²ç»æ‹¥æœ‰å¯†é’¥ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·çš„ SSH å¯†é’¥å­˜å‚¨åœ¨å…¶ <code>~/.ssh</code> ç›®å½•ä¸‹ã€‚ è¿›å…¥è¯¥ç›®å½•å¹¶åˆ—å‡ºå…¶ä¸­å†…å®¹ï¼Œä½ ä¾¿å¯ä»¥å¿«é€Ÿç¡®è®¤è‡ªå·±æ˜¯å¦å·²æ‹¥æœ‰å¯†é’¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~/.ssh</span><br><span class="line">$ ls</span><br><span class="line">authorized_keys2  id_dsa       known_hosts</span><br><span class="line">config            id_dsa.pub</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦å¯»æ‰¾ä¸€å¯¹ä»¥ <code>id_dsa</code> æˆ– <code>id_rsa</code> å‘½åçš„æ–‡ä»¶ï¼Œå…¶ä¸­ä¸€ä¸ªå¸¦æœ‰ <code>.pub</code> æ‰©å±•åã€‚ <code>.pub</code> æ–‡ä»¶æ˜¯ä½ çš„å…¬é’¥ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯ç§é’¥ã€‚ å¦‚æœæ‰¾ä¸åˆ°è¿™æ ·çš„æ–‡ä»¶ï¼ˆæˆ–è€…æ ¹æœ¬æ²¡æœ‰ <code>.ssh</code> ç›®å½•ï¼‰ï¼Œä½ å¯ä»¥é€šè¿‡è¿è¡Œ <code>ssh-keygen</code> ç¨‹åºæ¥åˆ›å»ºå®ƒä»¬ã€‚åœ¨ Linux/Mac ç³»ç»Ÿä¸­ï¼Œ<code>ssh-keygen</code> éš SSH è½¯ä»¶åŒ…æä¾›ï¼›åœ¨ Windows ä¸Šï¼Œè¯¥ç¨‹åºåŒ…å«äº MSysGit è½¯ä»¶åŒ…ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/home/schacon/.ssh/id_rsa):</span><br><span class="line">Created directory &apos;/home/schacon/.ssh&apos;.</span><br><span class="line">Enter passphrase (empty for no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved in /home/schacon/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /home/schacon/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">d0:82:24:8e:d7:f1:bb:9b:33:53:96:93:49:da:9b:e3 schacon@mylaptop.local</span><br></pre></td></tr></table></figure><p>é¦–å…ˆ <code>ssh-keygen</code> ä¼šç¡®è®¤å¯†é’¥çš„å­˜å‚¨ä½ç½®ï¼ˆé»˜è®¤æ˜¯ <code>.ssh/id_rsa</code>ï¼‰ï¼Œç„¶åå®ƒä¼šè¦æ±‚ä½ è¾“å…¥ä¸¤æ¬¡å¯†é’¥å£ä»¤ã€‚å¦‚æœä½ ä¸æƒ³åœ¨ä½¿ç”¨å¯†é’¥æ—¶è¾“å…¥å£ä»¤ï¼Œå°†å…¶ç•™ç©ºå³å¯ã€‚</p><p>ç°åœ¨ï¼Œè¿›è¡Œäº†ä¸Šè¿°æ“ä½œçš„ç”¨æˆ·éœ€è¦å°†å„è‡ªçš„å…¬é’¥å‘é€ç»™ä»»æ„ä¸€ä¸ª Git æœåŠ¡å™¨ç®¡ç†å‘˜ï¼ˆå‡è®¾æœåŠ¡å™¨æ­£åœ¨ä½¿ç”¨åŸºäºå…¬é’¥çš„ SSH éªŒè¯è®¾ç½®ï¼‰ã€‚ ä»–ä»¬æ‰€è¦åšçš„å°±æ˜¯å¤åˆ¶å„è‡ªçš„ <code>.pub</code> æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†å…¶é€šè¿‡é‚®ä»¶å‘é€ã€‚ å…¬é’¥çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ cat ~/.ssh/id_rsa.pub</span><br><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAklOUpkDHrfHY17SbrmTIpNLTGK9Tjom/BWDSU</span><br><span class="line">GPl+nafzlHDTYW7hdI4yZ5ew18JH4JW9jbhUFrviQzM7xlELEVf4h9lFX5QVkbPppSwg0cda3</span><br><span class="line">Pbv7kOdJ/MTyBlWXFCR+HAo3FXRitBqxiX1nKhXpHAZsMciLq8V6RjsNAQwdsdMFvSlVK/7XA</span><br><span class="line">t3FaoJoAsncM1Q9x5+3V0Ww68/eIFmb1zuUFljQJKprrX88XypNDvjYNby6vw/Pb0rwert/En</span><br><span class="line">mZ+AW4OZPnTPI89ZPmVMLuayrD2cE86Z/il8b+gw3r3+1nKatmIkjn2so1d01QraTlMqVSsbx</span><br><span class="line">NrRFi9wrf+M7Q== schacon@mylaptop.local</span><br></pre></td></tr></table></figure><p>å…³äºåœ¨å¤šç§æ“ä½œç³»ç»Ÿä¸­ç”Ÿæˆ SSH å¯†é’¥çš„æ›´æ·±å…¥æ•™ç¨‹ï¼Œè¯·å‚é˜… GitHub çš„ SSH å¯†é’¥æŒ‡å— <a href="https://help.github.com/articles/generating-ssh-keys" target="_blank" rel="noopener">https://help.github.com/articles/generating-ssh-keys</a>ã€‚</p><h3 id="é…ç½®æœåŠ¡å™¨"><a href="#é…ç½®æœåŠ¡å™¨" class="headerlink" title="é…ç½®æœåŠ¡å™¨"></a>é…ç½®æœåŠ¡å™¨</h3><p>æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•é…ç½®æœåŠ¡å™¨ç«¯çš„ SSH è®¿é—®ã€‚ æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>authorized_keys</code> æ–¹æ³•æ¥å¯¹ç”¨æˆ·è¿›è¡Œè®¤è¯ã€‚ åŒæ—¶æˆ‘ä»¬å‡è®¾ä½ ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿæ˜¯æ ‡å‡†çš„ Linux å‘è¡Œç‰ˆï¼Œæ¯”å¦‚ Ubuntuã€‚ é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ“ä½œç³»ç»Ÿç”¨æˆ· <code>git</code>ï¼Œå¹¶ä¸ºå…¶å»ºç«‹ä¸€ä¸ª <code>.ssh</code> ç›®å½•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo adduser git</span><br><span class="line">$ su git</span><br><span class="line">$ cd</span><br><span class="line">$ mkdir .ssh &amp;&amp; chmod 700 .ssh</span><br><span class="line">$ touch .ssh/authorized_keys &amp;&amp; chmod 600 .ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºç³»ç»Ÿç”¨æˆ· <code>git</code> çš„ <code>authorized_keys</code> æ–‡ä»¶æ·»åŠ ä¸€äº›å¼€å‘è€… SSH å…¬é’¥ã€‚ å‡è®¾æˆ‘ä»¬å·²ç»è·å¾—äº†è‹¥å¹²å—ä¿¡ä»»çš„å…¬é’¥ï¼Œå¹¶å°†å®ƒä»¬ä¿å­˜åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚ ä¸å‰æ–‡ç±»ä¼¼ï¼Œè¿™äº›å…¬é’¥çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ cat /tmp/id_rsa.john.pub</span><br><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCB007n/ww+ouN4gSLKssMxXnBOvf9LGt4L</span><br><span class="line">ojG6rs6hPB09j9R/T17/x4lhJA0F3FR1rP6kYBRsWj2aThGw6HXLm9/5zytK6Ztg3RPKK+4k</span><br><span class="line">Yjh6541NYsnEAZuXz0jTTyAUfrtU3Z5E003C4oxOj6H0rfIF1kKI9MAQLMdpGW1GYEIgS9Ez</span><br><span class="line">Sdfd8AcCIicTDWbqLAcU4UpkaX8KyGlLwsNuuGztobF8m72ALC/nLF6JLtPofwFBlgc+myiv</span><br><span class="line">O7TCUSBdLQlgMVOFq1I2uPWQOkOWQAHukEOmfjy2jctxSDBQ220ymjaNsHT4kgtZg2AYYgPq</span><br><span class="line">dAv8JggJICUvax2T9va5 gsg-keypair</span><br></pre></td></tr></table></figure><p>å°†è¿™äº›å…¬é’¥åŠ å…¥ç³»ç»Ÿç”¨æˆ· <code>git</code> çš„ <code>.ssh</code> ç›®å½•ä¸‹ <code>authorized_keys</code> æ–‡ä»¶çš„æœ«å°¾ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat /tmp/id_rsa.john.pub &gt;&gt; ~/.ssh/authorized_keys</span><br><span class="line">$ cat /tmp/id_rsa.josie.pub &gt;&gt; ~/.ssh/authorized_keys</span><br><span class="line">$ cat /tmp/id_rsa.jessica.pub &gt;&gt; ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬æ¥ä¸ºå¼€å‘è€…æ–°å»ºä¸€ä¸ªç©ºä»“åº“ã€‚å¯ä»¥å€ŸåŠ©å¸¦ <code>--bare</code> é€‰é¡¹çš„ <code>git init</code> å‘½ä»¤æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯¥å‘½ä»¤åœ¨åˆå§‹åŒ–ä»“åº“æ—¶ä¸ä¼šåˆ›å»ºå·¥ä½œç›®å½•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cd /opt/git</span><br><span class="line">$ mkdir project.git</span><br><span class="line">$ cd project.git</span><br><span class="line">$ git init --bare</span><br><span class="line">Initialized empty Git repository in /opt/git/project.git/</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼ŒJohnã€Josie æˆ–è€… Jessica ä¸­çš„ä»»æ„ä¸€äººå¯ä»¥å°†ä»–ä»¬é¡¹ç›®çš„æœ€åˆç‰ˆæœ¬æ¨é€åˆ°è¿™ä¸ªä»“åº“ä¸­ï¼Œä»–åªéœ€å°†æ­¤ä»“åº“è®¾ç½®ä¸ºé¡¹ç›®çš„è¿œç¨‹ä»“åº“å¹¶å‘å…¶æ¨é€åˆ†æ”¯ã€‚ è¯·æ³¨æ„ï¼Œæ¯æ·»åŠ ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œéƒ½éœ€è¦æœ‰äººç™»å½•æœåŠ¡å™¨å–å¾— shellï¼Œå¹¶åˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ã€‚ æˆ‘ä»¬å‡å®šè¿™ä¸ªè®¾ç½®äº† <code>git</code> ç”¨æˆ·å’Œ Git ä»“åº“çš„æœåŠ¡å™¨ä½¿ç”¨ <code>gitserver</code> ä½œä¸ºä¸»æœºåã€‚ åŒæ—¶ï¼Œå‡è®¾è¯¥æœåŠ¡å™¨è¿è¡Œåœ¨å†…ç½‘ï¼Œå¹¶ä¸”ä½ å·²åœ¨ DNS é…ç½®ä¸­å°† <code>gitserver</code> æŒ‡å‘æ­¤æœåŠ¡å™¨ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼ˆå‡å®š <code>myproject</code> æ˜¯å·²æœ‰é¡¹ç›®ä¸”å…¶ä¸­å·²åŒ…å«æ–‡ä»¶ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># on John&apos;s computer</span><br><span class="line">$ cd myproject</span><br><span class="line">$ git init</span><br><span class="line">$ git add .</span><br><span class="line">$ git commit -m &apos;initial commit&apos;</span><br><span class="line">$ git remote add origin git@gitserver:/opt/git/project.git</span><br><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå…¶ä»–å¼€å‘è€…å¯ä»¥å…‹éš†æ­¤ä»“åº“ï¼Œå¹¶æ¨å›å„è‡ªçš„æ”¹åŠ¨ï¼Œæ­¥éª¤å¾ˆç®€å•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git@gitserver:/opt/git/project.git</span><br><span class="line">$ cd project</span><br><span class="line">$ vim README</span><br><span class="line">$ git commit -am &apos;fix for the README file&apos;</span><br><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œä½ å¯ä»¥å¿«é€Ÿæ­å»ºä¸€ä¸ªå…·æœ‰è¯»å†™æƒé™ã€é¢å‘å¤šä¸ªå¼€å‘è€…çš„ Git æœåŠ¡å™¨ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›®å‰æ‰€æœ‰ï¼ˆè·å¾—æˆæƒçš„ï¼‰å¼€å‘è€…ç”¨æˆ·éƒ½èƒ½ä»¥ç³»ç»Ÿç”¨æˆ· <code>git</code> çš„èº«ä»½ç™»å½•æœåŠ¡å™¨ä»è€Œè·å¾—ä¸€ä¸ªæ™®é€š shellã€‚ å¦‚æœä½ æƒ³å¯¹æ­¤åŠ ä»¥é™åˆ¶ï¼Œåˆ™éœ€è¦ä¿®æ”¹ <code>passwd</code> æ–‡ä»¶ä¸­ï¼ˆ<code>git</code> ç”¨æˆ·æ‰€å¯¹åº”ï¼‰çš„ shell å€¼ã€‚</p><p>å€ŸåŠ©ä¸€ä¸ªåä¸º <code>git-shell</code> çš„å—é™ shell å·¥å…·ï¼Œä½ å¯ä»¥æ–¹ä¾¿åœ°å°†ç”¨æˆ· <code>git</code> çš„æ´»åŠ¨é™åˆ¶åœ¨ä¸ Git ç›¸å…³çš„èŒƒå›´å†…ã€‚è¯¥å·¥å…·éš Git è½¯ä»¶åŒ…ä¸€åŒæä¾›ã€‚ å¦‚æœå°† <code>git-shell</code> è®¾ç½®ä¸ºç”¨æˆ· <code>git</code> çš„ç™»å½• shellï¼ˆlogin shellï¼‰ï¼Œé‚£ä¹ˆç”¨æˆ· <code>git</code> ä¾¿ä¸èƒ½è·å¾—æ­¤æœåŠ¡å™¨çš„æ™®é€š shell è®¿é—®æƒé™ã€‚ è‹¥è¦ä½¿ç”¨ <code>git-shell</code>ï¼Œéœ€è¦ç”¨å®ƒæ›¿æ¢æ‰ bash æˆ– cshï¼Œä½¿å…¶æˆä¸ºç³»ç»Ÿç”¨æˆ·çš„ç™»å½• shellã€‚ ä¸ºè¿›è¡Œä¸Šè¿°æ“ä½œï¼Œé¦–å…ˆä½ å¿…é¡»ç¡®ä¿ <code>git-shell</code> å·²å­˜åœ¨äº <code>/etc/shells</code> æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat /etc/shells   # see if `git-shell` is already in there.  If not...</span><br><span class="line">$ which git-shell   # make sure git-shell is installed on your system.</span><br><span class="line">$ sudo vim /etc/shells  # and add the path to git-shell from last command</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ <code>chsh &lt;username&gt;</code> å‘½ä»¤ä¿®æ”¹ä»»ä¸€ç³»ç»Ÿç”¨æˆ·çš„ shellï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo chsh git  # and enter the path to git-shell, usually: /usr/bin/git-shell</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œç”¨æˆ· <code>git</code> å°±åªèƒ½åˆ©ç”¨ SSH è¿æ¥å¯¹ Git ä»“åº“è¿›è¡Œæ¨é€å’Œæ‹‰å–æ“ä½œï¼Œè€Œä¸èƒ½ç™»å½•æœºå™¨å¹¶å–å¾—æ™®é€š shellã€‚ å¦‚æœè¯•å›¾ç™»å½•ï¼Œä½ ä¼šå‘ç°å°è¯•è¢«æ‹’ç»ï¼Œåƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ssh git@gitserver</span><br><span class="line">fatal: Interactive git shell is not enabled.</span><br><span class="line">hint: ~/git-shell-commands should exist and have read and execute access.</span><br><span class="line">Connection to gitserver closed.</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œç½‘ç»œç›¸å…³çš„ Git å‘½ä»¤ä¾ç„¶èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œä½†æ˜¯å¼€å‘è€…ç”¨æˆ·å·²ç»æ— æ³•å¾—åˆ°ä¸€ä¸ªæ™®é€š shell äº†ã€‚ æ­£å¦‚è¾“å‡ºä¿¡æ¯æ‰€æç¤ºçš„ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ <code>git</code> ç”¨æˆ·çš„å®¶ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªç›®å½•ï¼Œæ¥å¯¹ <code>git-shell</code> å‘½ä»¤è¿›è¡Œä¸€å®šç¨‹åº¦çš„è‡ªå®šä¹‰ã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥é™åˆ¶æ‰æŸäº›æœ¬åº”è¢«æœåŠ¡å™¨æ¥å—çš„ Git å‘½ä»¤ï¼Œæˆ–è€…å¯¹åˆšæ‰çš„ SSH æ‹’ç»ç™»å½•ä¿¡æ¯è¿›è¡Œè‡ªå®šä¹‰ï¼Œè¿™æ ·ï¼Œå½“æœ‰å¼€å‘è€…ç”¨æˆ·ä»¥ç±»ä¼¼æ–¹å¼å°è¯•ç™»å½•æ—¶ï¼Œä¾¿ä¼šçœ‹åˆ°ä½ çš„ä¿¡æ¯ã€‚ è¦äº†è§£æ›´å¤šæœ‰å…³è‡ªå®šä¹‰ shell çš„ä¿¡æ¯ï¼Œè¯·è¿è¡Œ <code>git help shell</code>ã€‚</p><h3 id="Git-å®ˆæŠ¤è¿›ç¨‹"><a href="#Git-å®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="Git å®ˆæŠ¤è¿›ç¨‹"></a>Git å®ˆæŠ¤è¿›ç¨‹</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†é€šè¿‡ â€œGitâ€ åè®®å»ºç«‹ä¸€ä¸ªåŸºäºå®ˆæŠ¤è¿›ç¨‹çš„ä»“åº“ã€‚ å¯¹äºå¿«é€Ÿä¸”æ— éœ€æˆæƒçš„ Git æ•°æ®è®¿é—®ï¼Œè¿™æ˜¯ä¸€ä¸ªç†æƒ³ä¹‹é€‰ã€‚ è¯·æ³¨æ„ï¼Œå› ä¸ºå…¶ä¸åŒ…å«æˆæƒæœåŠ¡ï¼Œä»»ä½•é€šè¿‡è¯¥åè®®ç®¡ç†çš„å†…å®¹å°†åœ¨å…¶ç½‘ç»œä¸Šå…¬å¼€ã€‚</p><p>å¦‚æœè¿è¡Œåœ¨é˜²ç«å¢™ä¹‹å¤–çš„æœåŠ¡å™¨ä¸Šï¼Œå®ƒåº”è¯¥åªå¯¹é‚£äº›å…¬å¼€çš„åªè¯»é¡¹ç›®æœåŠ¡ã€‚ å¦‚æœè¿è¡Œåœ¨é˜²ç«å¢™ä¹‹å†…çš„æœåŠ¡å™¨ä¸Šï¼Œå®ƒå¯ç”¨äºæ”¯æ’‘å¤§é‡å‚ä¸äººå‘˜æˆ–è‡ªåŠ¨ç³»ç»Ÿï¼ˆç”¨äºæŒç»­é›†æˆæˆ–ç¼–è¯‘çš„ä¸»æœºï¼‰åªè¯»è®¿é—®çš„é¡¹ç›®ï¼Œè¿™æ ·å¯ä»¥çœå»é€ä¸€é…ç½® SSH å…¬é’¥çš„éº»çƒ¦ã€‚</p><p>æ— è®ºä½•æ—¶ï¼Œè¯¥ Git åè®®éƒ½æ˜¯ç›¸å¯¹å®¹æ˜“è®¾å®šçš„ã€‚ é€šå¸¸ï¼Œä½ åªéœ€è¦ä»¥å®ˆæŠ¤è¿›ç¨‹çš„å½¢å¼è¿è¡Œè¯¥å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git daemon --reuseaddr --base-path=/opt/git/ /opt/git/</span><br></pre></td></tr></table></figure><p><code>--reuseaddr</code> å…è®¸æœåŠ¡å™¨åœ¨æ— éœ€ç­‰å¾…æ—§è¿æ¥è¶…æ—¶çš„æƒ…å†µä¸‹é‡å¯ï¼Œ<code>--base-path</code> é€‰é¡¹å…è®¸ç”¨æˆ·åœ¨æœªå®Œå…¨æŒ‡å®šè·¯å¾„çš„æ¡ä»¶ä¸‹å…‹éš†é¡¹ç›®ï¼Œç»“å°¾çš„è·¯å¾„å°†å‘Šè¯‰ Git å®ˆæŠ¤è¿›ç¨‹ä»ä½•å¤„å¯»æ‰¾ä»“åº“æ¥å¯¼å‡ºã€‚ å¦‚æœæœ‰é˜²ç«å¢™æ­£åœ¨è¿è¡Œï¼Œä½ éœ€è¦å¼€æ”¾ç«¯å£ 9418 çš„é€šä¿¡æƒé™ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡è®¸å¤šæ–¹å¼å°†è¯¥è¿›ç¨‹ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œï¼Œè¿™ä¸»è¦å–å†³äºä½ æ‰€ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿã€‚ åœ¨ä¸€å° Ubuntu æœºå™¨ä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä»½ Upstart è„šæœ¬ã€‚ å› æ­¤ï¼Œæ‰¾åˆ°å¦‚ä¸‹æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/event.d/local-git-daemon</span><br></pre></td></tr></table></figure><p>å¹¶æ·»åŠ ä¸‹åˆ—è„šæœ¬å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">start on startup</span><br><span class="line">stop on shutdown</span><br><span class="line">exec /usr/bin/git daemon \</span><br><span class="line">    --user=git --group=git \</span><br><span class="line">    --reuseaddr \</span><br><span class="line">    --base-path=/opt/git/ \</span><br><span class="line">    /opt/git/</span><br><span class="line">respawn</span><br></pre></td></tr></table></figure><p>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨ä¸€ä¸ªå¯¹ä»“åº“æ‹¥æœ‰åªè¯»æƒé™çš„ç”¨æˆ·èº«ä»½æ¥è¿è¡Œè¯¥å®ˆæŠ¤è¿›ç¨‹â€”â€”ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ· git-ro å¹¶ä¸”ä»¥è¯¥ç”¨æˆ·èº«ä»½æ¥è¿è¡Œå®ˆæŠ¤è¿›ç¨‹ã€‚ ä¸ºç®€ä¾¿èµ·è§ï¼Œæˆ‘ä»¬å°†åƒ <code>git-shell</code> ä¸€æ ·ï¼ŒåŒæ ·ä½¿ç”¨ git ç”¨æˆ·æ¥è¿è¡Œå®ƒã€‚</p><p>å½“ä½ é‡å¯æœºå™¨æ—¶ï¼Œä½ çš„ Git å®ˆæŠ¤è¿›ç¨‹å°†ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œå¹¶ä¸”å¦‚æœè¿›ç¨‹è¢«æ„å¤–ç»“æŸå®ƒä¼šè‡ªåŠ¨é‡æ–°è¿è¡Œã€‚ ä¸ºäº†åœ¨ä¸é‡å¯çš„æƒ…å†µä¸‹ç›´æ¥è¿è¡Œï¼Œä½ å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">initctl start local-git-daemon</span><br></pre></td></tr></table></figure><p>åœ¨å…¶ä»–ç³»ç»Ÿä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>sysvinit</code> ç³»ç»Ÿä¸­çš„ <code>xinetd</code> è„šæœ¬ï¼Œæˆ–è€…å¦å¤–çš„æ–¹å¼æ¥å®ç°â€”â€”åªè¦ä½ èƒ½å¤Ÿå°†å…¶å‘½ä»¤å®ˆæŠ¤è¿›ç¨‹åŒ–å¹¶å®ç°ç›‘æ§ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œä½ éœ€è¦å‘Šè¯‰ Git å“ªäº›ä»“åº“å…è®¸åŸºäºæœåŠ¡å™¨çš„æ— æˆæƒè®¿é—®ã€‚ ä½ å¯ä»¥åœ¨æ¯ä¸ªä»“åº“ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>git-daemon-export-ok</code> çš„æ–‡ä»¶æ¥å®ç°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd /path/to/project.git</span><br><span class="line">$ touch git-daemon-export-ok</span><br></pre></td></tr></table></figure><p>è¯¥æ–‡ä»¶å°†å…è®¸ Git æä¾›æ— éœ€æˆæƒçš„é¡¹ç›®è®¿é—®æœåŠ¡ã€‚</p><h3 id="Smart-HTTP"><a href="#Smart-HTTP" class="headerlink" title="Smart HTTP"></a>Smart HTTP</h3><p>æˆ‘ä»¬ä¸€èˆ¬é€šè¿‡ SSH è¿›è¡Œæˆæƒè®¿é—®ï¼Œé€šè¿‡ <code>git://</code> è¿›è¡Œæ— æˆæƒè®¿é—®ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ç§åè®®å¯ä»¥åŒæ—¶å®ç°ä»¥ä¸Šä¸¤ç§æ–¹å¼çš„è®¿é—®ã€‚ è®¾ç½® Smart HTTP ä¸€èˆ¬åªéœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå¯ç”¨ä¸€ä¸ª Git è‡ªå¸¦çš„åä¸º <code>git-http-backend</code> çš„ CGI è„šæœ¬ã€‚ è¯¥ CGI è„šæœ¬å°†ä¼šè¯»å–ç”± <code>git fetch</code> æˆ– <code>git push</code> å‘½ä»¤å‘ HTTP URL å‘é€çš„è¯·æ±‚è·¯å¾„å’Œå¤´éƒ¨ä¿¡æ¯ï¼Œæ¥åˆ¤æ–­è¯¥å®¢æˆ·ç«¯æ˜¯å¦æ”¯æŒ HTTP é€šä¿¡ï¼ˆä¸ä½äº 1.6.6 ç‰ˆæœ¬çš„å®¢æˆ·ç«¯æ”¯æŒæ­¤ç‰¹æ€§ï¼‰ã€‚ å¦‚æœ CGI å‘ç°è¯¥å®¢æˆ·ç«¯æ”¯æŒæ™ºèƒ½ï¼ˆSmartï¼‰æ¨¡å¼ï¼Œå®ƒå°†ä¼šä»¥æ™ºèƒ½æ¨¡å¼ä¸å®ƒè¿›è¡Œé€šä¿¡ï¼Œå¦åˆ™å®ƒå°†ä¼šå›è½åˆ°å“‘ï¼ˆDumbï¼‰æ¨¡å¼ä¸‹ï¼ˆå› æ­¤å®ƒå¯ä»¥å¯¹æŸäº›è€çš„å®¢æˆ·ç«¯å®ç°å‘ä¸‹å…¼å®¹ï¼‰ã€‚</p><p>åœ¨å®Œæˆä»¥ä¸Šç®€å•çš„å®‰è£…æ­¥éª¤åï¼Œ æˆ‘ä»¬å°†ç”¨ Apache æ¥ä½œä¸º CGI æœåŠ¡å™¨ã€‚ å¦‚æœä½ æ²¡æœ‰å®‰è£… Apacheï¼Œä½ å¯ä»¥åœ¨ Linux ç¯å¢ƒä¸‹æ‰§è¡Œå¦‚ä¸‹æˆ–ç±»ä¼¼çš„å‘½ä»¤æ¥å®‰è£…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install apache2 apache2-utils</span><br><span class="line">$ a2enmod cgi alias env</span><br></pre></td></tr></table></figure><p>è¯¥æ“ä½œå°†ä¼šå¯ç”¨ <code>mod_cgi</code>ï¼Œ <code>mod_alias</code>ï¼Œ å’Œ <code>mod_env</code> ç­‰ Apache æ¨¡å—ï¼Œ è¿™äº›æ¨¡å—éƒ½æ˜¯ä½¿è¯¥åŠŸèƒ½æ­£å¸¸å·¥ä½œæ‰€å¿…é¡»çš„ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦å‘ Apache é…ç½®æ–‡ä»¶æ·»åŠ ä¸€äº›å†…å®¹ï¼Œæ¥è®© <code>git-http-backend</code> ä½œä¸º Web æœåŠ¡å™¨å¯¹ <code>/git</code> è·¯å¾„è¯·æ±‚çš„å¤„ç†å™¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SetEnv GIT_PROJECT_ROOT /opt/git</span><br><span class="line">SetEnv GIT_HTTP_EXPORT_ALL</span><br><span class="line">ScriptAlias /git/ /usr/lib/git-core/git-http-backend/</span><br></pre></td></tr></table></figure><p>å¦‚æœç•™ç©º <code>GIT_HTTP_EXPORT_ALL</code> è¿™ä¸ªç¯å¢ƒå˜é‡ï¼ŒGit å°†åªå¯¹æ— æˆæƒå®¢æˆ·ç«¯æä¾›å¸¦ <code>git-daemon-export-ok</code> æ–‡ä»¶çš„ç‰ˆæœ¬åº“ï¼Œå°±åƒ Git å®ˆæŠ¤è¿›ç¨‹ä¸€æ ·ã€‚</p><p>æ¥ç€ä½ éœ€è¦è®© Apache æ¥å—é€šè¿‡è¯¥è·¯å¾„çš„è¯·æ±‚ï¼Œæ·»åŠ å¦‚ä¸‹çš„å†…å®¹è‡³ Apache é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory &quot;/usr/lib/git-core*&quot;&gt;</span><br><span class="line">   Options ExecCGI Indexes</span><br><span class="line">   Order allow,deny</span><br><span class="line">   Allow from all</span><br><span class="line">   Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œå¦‚æœæƒ³å®ç°å†™æ“ä½œæˆæƒéªŒè¯ï¼Œä½¿ç”¨å¦‚ä¸‹çš„æœªæˆæƒå±è”½é…ç½®å³å¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;LocationMatch &quot;^/git/.*/git-receive-pack$&quot;&gt;</span><br><span class="line">    AuthType Basic</span><br><span class="line">    AuthName &quot;Git Access&quot;</span><br><span class="line">    AuthUserFile /opt/git/.htpasswd</span><br><span class="line">    Require valid-user</span><br><span class="line">&lt;/LocationMatch&gt;</span><br></pre></td></tr></table></figure><p>è¿™éœ€è¦ä½ åˆ›å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰åˆæ³•ç”¨æˆ·å¯†ç çš„ <code>.htaccess</code> æ–‡ä»¶ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ·»åŠ  â€œschaconâ€ ç”¨æˆ·åˆ°æ­¤æ–‡ä»¶çš„ä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ htdigest -c /opt/git/.htpasswd &quot;Git Access&quot; schacon</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥é€šè¿‡è®¸å¤šæ–¹å¼æ·»åŠ  Apache æˆæƒç”¨æˆ·ï¼Œé€‰æ‹©ä½¿ç”¨å…¶ä¸­ä¸€ç§æ–¹å¼å³å¯ã€‚ ä»¥ä¸Šä»…ä»…åªæ˜¯æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°çš„æœ€ç®€å•çš„ä¸€ä¸ªä¾‹å­ã€‚ å¦‚æœæ„¿æ„çš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ SSL è¿è¡Œå®ƒï¼Œä»¥ä¿è¯æ‰€æœ‰æ•°æ®æ˜¯åœ¨åŠ å¯†çŠ¶æ€ä¸‹è¿›è¡Œä¼ è¾“çš„ã€‚</p><p>æˆ‘ä»¬ä¸æƒ³æ·±å…¥å»è®²è§£ Apache é…ç½®æ–‡ä»¶ï¼Œå› ä¸ºä½ å¯èƒ½ä¼šä½¿ç”¨ä¸åŒçš„ Web æœåŠ¡å™¨ï¼Œæˆ–è€…å¯èƒ½æœ‰ä¸åŒçš„æˆæƒéœ€æ±‚ã€‚ å®ƒçš„ä¸»è¦åŸç†æ˜¯ä½¿ç”¨ä¸€ä¸ª Git é™„å¸¦çš„ï¼Œåä¸º <code>git-http-backend</code> çš„ CGIã€‚å®ƒè¢«å¼•ç”¨æ¥å¤„ç†åå•†é€šè¿‡ HTTP å‘é€å’Œæ¥æ”¶çš„æ•°æ®ã€‚ å®ƒæœ¬èº«å¹¶ä¸åŒ…å«ä»»ä½•æˆæƒåŠŸèƒ½ï¼Œä½†æ˜¯æˆæƒåŠŸèƒ½å¯ä»¥åœ¨ Web æœåŠ¡å™¨å±‚å¼•ç”¨å®ƒæ—¶è¢«è½»æ¾å®ç°ã€‚ ä½ å¯ä»¥åœ¨ä»»ä½•æ‰€æœ‰å¯ä»¥å¤„ç† CGI çš„ Web æœåŠ¡å™¨ä¸ŠåŠåˆ°è¿™ç‚¹ï¼Œæ‰€ä»¥éšä¾¿æŒ‘ä¸€ä¸ªä½ æœ€ç†Ÿæ‚‰çš„ Web æœåŠ¡å™¨è¯•æ‰‹å§ã€‚</p><h3 id="GitWeb"><a href="#GitWeb" class="headerlink" title="GitWeb"></a>GitWeb</h3><p>å¦‚æœä½ å¯¹é¡¹ç›®æœ‰è¯»å†™æƒé™æˆ–åªè¯»æƒé™ï¼Œä½ å¯èƒ½éœ€è¦å»ºç«‹èµ·ä¸€ä¸ªåŸºäºç½‘é¡µçš„ç®€æ˜“æŸ¥çœ‹å™¨ã€‚ Git æä¾›äº†ä¸€ä¸ªå«åš GitWeb çš„ CGI è„šæœ¬æ¥åšè¿™é¡¹å·¥ä½œã€‚</p><p>å¦‚æœä½ æƒ³è¦æŸ¥çœ‹ GitWeb å¦‚ä½•å±•ç¤ºä½ çš„é¡¹ç›®ï¼Œå¹¶ä¸”åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…äº†è½»é‡çº§ç½‘ç»œæœåŠ¡å™¨æ¯”å¦‚ <code>lighttpd</code> æˆ– <code>webrick</code>ï¼Œ Git æä¾›äº†ä¸€ä¸ªå‘½ä»¤æ¥è®©ä½ å¯åŠ¨ä¸€ä¸ªä¸´æ—¶çš„æœåŠ¡å™¨ã€‚ åœ¨ Linux ç³»ç»Ÿçš„ç”µè„‘ä¸Šï¼Œ<code>lighttpd</code> é€šå¸¸å·²ç»å®‰è£…äº†ï¼Œæ‰€ä»¥ä½ åªéœ€è¦åœ¨é¡¹ç›®ç›®å½•é‡Œæ‰§è¡Œ <code>git instaweb</code> å‘½ä»¤å³å¯ã€‚ å¦‚æœä½ ä½¿ç”¨ Mac ç³»ç»Ÿï¼Œ Mac OS X Leopard ç³»ç»Ÿå·²ç»é¢„å®‰è£…äº† Rubyï¼Œæ‰€ä»¥ <code>webrick</code> æˆ–è®¸æ˜¯ä½ æœ€å¥½çš„é€‰æ‹©ã€‚ å¦‚æœä¸æƒ³ä½¿ç”¨ <code>lighttpd</code> å¯åŠ¨ <code>instaweb</code> å‘½ä»¤ï¼Œä½ éœ€è¦åœ¨æ‰§è¡Œæ—¶åŠ å…¥ <code>--httpd</code> å‚æ•°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git instaweb --httpd=webrick</span><br><span class="line">[2009-02-21 10:02:21] INFO  WEBrick 1.3.1</span><br><span class="line">[2009-02-21 10:02:21] INFO  ruby 1.8.6 (2008-03-03) [universal-darwin9.0]</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å¯åŠ¨äº†ä¸€ä¸ªç›‘å¬ 1234 ç«¯å£çš„ HTTP æœåŠ¡å™¨ï¼Œå¹¶ä¸”è‡ªåŠ¨æ‰“å¼€äº†æµè§ˆå™¨ã€‚ è¿™å¯¹ä½ æ¥è¯´ååˆ†æ–¹ä¾¿ã€‚ å½“ä½ å·²ç»å®Œæˆäº†å·¥ä½œå¹¶æƒ³å…³é—­è¿™ä¸ªæœåŠ¡å™¨ï¼Œä½ å¯ä»¥æ‰§è¡ŒåŒä¸€ä¸ªå‘½ä»¤ï¼Œå¹¶åŠ ä¸Š <code>--stop</code> é€‰é¡¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git instaweb --httpd=webrick --stop</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ ç°åœ¨æƒ³ä¸ºä½ çš„å›¢é˜Ÿæˆ–ä½ æ‰˜ç®¡çš„å¼€æºé¡¹ç›®æŒç»­çš„è¿è¡Œè¿™ä¸ªé¡µé¢ï¼Œä½ éœ€è¦é€šè¿‡æ™®é€šçš„ Web æœåŠ¡å™¨æ¥è®¾ç½® CGI è„šæœ¬ã€‚ ä¸€äº› Linux å‘è¡Œç‰ˆçš„è½¯ä»¶åº“æœ‰ <code>gitweb</code> åŒ…ï¼Œå¯ä»¥é€šè¿‡ <code>apt</code> æˆ– <code>yum</code> æ¥å®‰è£…ï¼Œä½ å¯ä»¥å…ˆè¯•è¯•ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å¿«é€Ÿçš„äº†è§£ä¸€ä¸‹å¦‚ä½•æ‰‹åŠ¨å®‰è£… GitWebã€‚ é¦–å…ˆï¼Œä½ éœ€è¦è·å¾— Git çš„æºä»£ç ï¼Œå®ƒåŒ…å«äº† GitWeb ï¼Œå¹¶å¯ä»¥ç”Ÿæˆè‡ªå®šä¹‰çš„ CGI è„šæœ¬ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git://git.kernel.org/pub/scm/git/git.git</span><br><span class="line">$ cd git/</span><br><span class="line">$ make GITWEB_PROJECTROOT=&quot;/opt/git&quot; prefix=/usr gitweb</span><br><span class="line">    SUBDIR gitweb</span><br><span class="line">    SUBDIR ../</span><br><span class="line">make[2]: `GIT-VERSION-FILE&apos; is up to date.</span><br><span class="line">    GEN gitweb.cgi</span><br><span class="line">    GEN static/gitweb.js</span><br><span class="line">$ sudo cp -Rf gitweb /var/www/</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ éœ€è¦åœ¨å‘½ä»¤ä¸­æŒ‡å®š <code>GITWEB_PROJECTROOT</code> å˜é‡æ¥è®©ç¨‹åºçŸ¥é“ä½ çš„ Git ç‰ˆæœ¬åº“çš„ä½ç½®ã€‚ ç°åœ¨ï¼Œä½ éœ€è¦åœ¨ Apache ä¸­ä½¿ç”¨è¿™ä¸ª CGI è„šæœ¬ï¼Œä½ éœ€è¦ä¸ºæ­¤æ·»åŠ ä¸€ä¸ªè™šæ‹Ÿä¸»æœºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerName gitserver</span><br><span class="line">    DocumentRoot /var/www/gitweb</span><br><span class="line">    &lt;Directory /var/www/gitweb&gt;</span><br><span class="line">        Options ExecCGI +FollowSymLinks +SymLinksIfOwnerMatch</span><br><span class="line">        AllowOverride All</span><br><span class="line">        order allow,deny</span><br><span class="line">        Allow from all</span><br><span class="line">        AddHandler cgi-script cgi</span><br><span class="line">        DirectoryIndex gitweb.cgi</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure><p>å†æ¬¡æé†’ï¼ŒGitWeb å¯ä»¥é€šè¿‡ä»»ä½•ä¸€ä¸ªæ”¯æŒ CGI æˆ– Perl çš„ç½‘ç»œæœåŠ¡å™¨æ¶è®¾ï¼›å¦‚æœä½ éœ€è¦çš„è¯ï¼Œæ¶è®¾èµ·æ¥åº”è¯¥ä¸ä¼šå¾ˆå›°éš¾ã€‚ ç°åœ¨ï¼Œä½ å¯ä»¥è®¿é—® <code>http://gitserver/</code> åœ¨çº¿æŸ¥çœ‹ä½ çš„ç‰ˆæœ¬åº“ã€‚</p><h3 id="GitLab"><a href="#GitLab" class="headerlink" title="GitLab"></a>GitLab</h3><p>è™½ç„¶ GitWeb ç›¸å½“ç®€å•ã€‚ ä½†å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªæ›´ç°ä»£ï¼ŒåŠŸèƒ½æ›´å…¨çš„ Git æœåŠ¡å™¨ï¼Œè¿™é‡Œæœ‰å‡ ä¸ªå¼€æºçš„è§£å†³æ–¹æ¡ˆå¯ä¾›ä½ é€‰æ‹©å®‰è£…ã€‚ å› ä¸º GitLab æ˜¯å…¶ä¸­æœ€å‡ºåçš„ä¸€ä¸ªï¼Œæˆ‘ä»¬å°†å®ƒä½œä¸ºç¤ºä¾‹å¹¶è®¨è®ºå®ƒçš„å®‰è£…å’Œä½¿ç”¨ã€‚ è¿™æ¯” GitWeb è¦å¤æ‚çš„å¤šå¹¶ä¸”éœ€è¦æ›´å¤šçš„ç»´æŠ¤ï¼Œä½†å®ƒçš„ç¡®æ˜¯ä¸€ä¸ªåŠŸèƒ½æ›´å…¨çš„é€‰æ‹©ã€‚</p><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>GitLab æ˜¯ä¸€ä¸ªæ•°æ®åº“æ”¯æŒçš„ web åº”ç”¨ï¼Œæ‰€ä»¥ç›¸æ¯”äºå…¶ä»– git æœåŠ¡å™¨ï¼Œå®ƒçš„å®‰è£…è¿‡ç¨‹æ¶‰åŠåˆ°æ›´å¤šçš„ä¸œè¥¿ã€‚ å¹¸è¿çš„æ˜¯ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ‰éå¸¸è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜å’Œæ”¯æŒã€‚</p><p>è¿™é‡Œæœ‰ä¸€äº›å¯å‚è€ƒçš„æ–¹æ³•å¸®ä½ å®‰è£… GitLab ã€‚ ä¸ºäº†æ›´å¿«é€Ÿçš„å¯åŠ¨å’Œè¿è¡Œï¼Œä½ å¯ä»¥ä¸‹è½½è™šæ‹Ÿæœºé•œåƒæˆ–è€…åœ¨ <a href="https://bitnami.com/stack/gitlab" target="_blank" rel="noopener">https://bitnami.com/stack/gitlab</a> ä¸Šè·å–ä¸€é”®å®‰è£…åŒ…ï¼ŒåŒæ—¶è°ƒæ•´é…ç½®ä½¿ä¹‹ç¬¦åˆä½ ç‰¹å®šçš„ç¯å¢ƒã€‚ Bitnami çš„ä¸€ä¸ªä¼˜ç‚¹åœ¨äºå®ƒçš„ç™»å½•ç•Œé¢ï¼ˆé€šè¿‡ alt-&amp;rarr é”®è¿›å…¥ï¼‰ï¼›å®ƒä¼šå‘Šè¯‰ä½ å®‰è£…å¥½çš„ GitLab çš„ IP åœ°å€ä»¥åŠé»˜è®¤çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</p><p><img src="git-chapter-8/img1.png" alt></p><p>æ— è®ºå¦‚ä½•ï¼Œè·Ÿç€ GitLab ç¤¾åŒºç‰ˆçš„ readme æ–‡ä»¶ä¸€æ­¥æ­¥æ¥ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®ƒ <a href="https://gitlab.com/gitlab-org/gitlab-ce/tree/master" target="_blank" rel="noopener">https://gitlab.com/gitlab-org/gitlab-ce/tree/master</a> ã€‚ åœ¨è¿™é‡Œä½ å°†ä¼šåœ¨ä¸»èœå•ä¸­æ‰¾åˆ°å®‰è£… GitLab çš„å¸®åŠ©ï¼Œä¸€ä¸ªå¯ä»¥åœ¨ Digital Ocean ä¸Šè¿è¡Œçš„è™šæ‹Ÿæœºï¼Œä»¥åŠ RPM å’Œ DEB åŒ…ï¼ˆéƒ½æ˜¯æµ‹è¯•ç‰ˆï¼‰ã€‚ è¿™é‡Œè¿˜æœ‰ â€œéå®˜æ–¹â€ çš„å¼•å¯¼è®© GitLab è¿è¡Œåœ¨éæ ‡å‡†çš„æ“ä½œç³»ç»Ÿå’Œæ•°æ®åº“ä¸Šï¼Œä¸€ä¸ªå…¨æ‰‹åŠ¨çš„å®‰è£…è„šæœ¬ï¼Œä»¥åŠè®¸å¤šå…¶ä»–çš„è¯é¢˜ã€‚</p><h4 id="ç®¡ç†"><a href="#ç®¡ç†" class="headerlink" title="ç®¡ç†"></a>ç®¡ç†</h4><p>GitLab çš„ç®¡ç†ç•Œé¢æ˜¯é€šè¿‡ç½‘ç»œè¿›å…¥çš„ã€‚ å°†ä½ çš„æµè§ˆå™¨è½¬åˆ°å·²ç»å®‰è£… GitLab çš„ ä¸»æœºåæˆ– IP åœ°å€ï¼Œç„¶åä»¥ç®¡ç†å‘˜èº«ä»½ç™»å½•å³å¯ã€‚ é»˜è®¤çš„ç”¨æˆ·åæ˜¯ <code>admin@local.host</code>ï¼Œé»˜è®¤çš„å¯†ç æ˜¯ <code>5iveL!fe</code>ï¼ˆä½ ä¼šå¾—åˆ°ç±»ä¼¼ è¯·ç™»å½•åå°½å¿«æ›´æ¢å¯†ç  çš„æç¤ºï¼‰ã€‚ ç™»å½•åï¼Œç‚¹å‡»ä¸»æ ä¸Šæ–¹é å³ä½ç½®çš„ â€œAdmin areaâ€ å›¾æ ‡è¿›è¡Œç®¡ç†ã€‚</p><p><img src="git-chapter-8/img2.png" alt></p><p><strong>ä½¿ç”¨è€…</strong><br>GitLab ä¸Šçš„ç”¨æˆ·æŒ‡çš„æ˜¯å¯¹åº”åä½œè€…çš„å¸å·ã€‚ ç”¨æˆ·å¸å·æ²¡æœ‰å¾ˆå¤šå¤æ‚çš„åœ°æ–¹ï¼Œä¸»è¦æ˜¯åŒ…å«ç™»å½•æ•°æ®çš„ç”¨æˆ·ä¿¡æ¯é›†åˆã€‚ æ¯ä¸€ä¸ªç”¨æˆ·è´¦å·éƒ½æœ‰ä¸€ä¸ª å‘½åç©ºé—´ ï¼Œå³è¯¥ç”¨æˆ·é¡¹ç›®çš„é€»è¾‘é›†åˆã€‚ å¦‚æœä¸€ä¸ªå« <code>jane</code> çš„ç”¨æˆ·æ‹¥æœ‰ä¸€ä¸ªåç§°æ˜¯ <code>project</code> çš„é¡¹ç›®ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡¹ç›®çš„ url ä¼šæ˜¯ <a href="http://server/jane/project" target="_blank" rel="noopener">http://server/jane/project</a> ã€‚</p><p><img src="git-chapter-8/img3.png" alt></p><p>ç§»é™¤ä¸€ä¸ªç”¨æˆ·æœ‰ä¸¤ç§æ–¹æ³•ã€‚ â€œå±è”½ï¼ˆBlockingï¼‰â€ ä¸€ä¸ªç”¨æˆ·é˜»æ­¢ä»–ç™»å½• GitLab å®ä¾‹ï¼Œä½†æ˜¯è¯¥ç”¨æˆ·å‘½åç©ºé—´ä¸‹çš„æ‰€æœ‰æ•°æ®ä»ç„¶ä¼šè¢«ä¿å­˜ï¼Œå¹¶ä¸”ä»å¯ä»¥é€šè¿‡è¯¥ç”¨æˆ·æäº¤å¯¹åº”çš„ç™»å½•é‚®ç®±é“¾æ¥å›ä»–çš„ä¸ªäººä¿¡æ¯é¡µã€‚</p><p>è€Œå¦ä¸€æ–¹é¢ï¼Œâ€œé”€æ¯ï¼ˆDestroyingï¼‰â€ ä¸€ä¸ªç”¨æˆ·ï¼Œä¼šå½»åº•çš„å°†ä»–ä»æ•°æ®åº“å’Œæ–‡ä»¶ç³»ç»Ÿä¸­ç§»é™¤ã€‚ ä»–å‘½åç©ºé—´ä¸‹çš„æ‰€æœ‰é¡¹ç›®å’Œæ•°æ®éƒ½ä¼šè¢«åˆ é™¤ï¼Œæ‹¥æœ‰çš„ä»»ä½•ç»„ä¹Ÿä¼šè¢«ç§»é™¤ã€‚ è¿™æ˜¾ç„¶æ˜¯ä¸€ä¸ªæ›´æ°¸ä¹…ä¸”æ›´å…·ç ´ååŠ›çš„è¡Œä¸ºï¼Œæ‰€ä»¥å¾ˆå°‘ç”¨åˆ°è¿™ç§æ–¹æ³•ã€‚</p><p><strong>ç»„</strong><br>ä¸€ä¸ª GitLab çš„ç»„æ˜¯ä¸€äº›é¡¹ç›®çš„é›†åˆï¼Œè¿åŒå…³äºå¤šå°‘ç”¨æˆ·å¯ä»¥è®¿é—®è¿™äº›é¡¹ç›®çš„æ•°æ®ã€‚ æ¯ä¸€ä¸ªç»„éƒ½æœ‰ä¸€ä¸ªé¡¹ç›®å‘½åç©ºé—´ï¼ˆä¸ç”¨æˆ·ä¸€æ ·ï¼‰ï¼Œæ‰€ä»¥å¦‚æœä¸€ä¸ªå« <code>training</code> çš„ç»„æ‹¥æœ‰ä¸€ä¸ªåç§°æ˜¯ <code>materials</code> çš„é¡¹ç›®ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡¹ç›®çš„ url ä¼šæ˜¯ <a href="http://server/training/materials" target="_blank" rel="noopener">http://server/training/materials</a> ã€‚</p><p><img src="git-chapter-8/img4.png" alt></p><p>æ¯ä¸€ä¸ªç»„éƒ½æœ‰è®¸å¤šç”¨æˆ·ä¸ä¹‹å…³è”ï¼Œæ¯ä¸€ä¸ªç”¨æˆ·å¯¹ç»„ä¸­çš„é¡¹ç›®ä»¥åŠç»„æœ¬èº«çš„æƒé™éƒ½æœ‰çº§åˆ«åŒºåˆ†ã€‚ æƒé™çš„èŒƒå›´ä» â€œè®¿å®¢â€ï¼ˆä»…èƒ½æé—®é¢˜å’Œè®¨è®ºï¼‰ åˆ° â€œæ‹¥æœ‰è€…â€ï¼ˆå®Œå…¨æ§åˆ¶ç»„ã€æˆå‘˜å’Œé¡¹ç›®ï¼‰ã€‚ æƒé™çš„ç§ç±»å¤ªå¤šä»¥è‡³äºéš¾ä»¥åœ¨è¿™é‡Œä¸€ä¸€åˆ—ä¸¾ï¼Œä¸è¿‡åœ¨ GitLab çš„ç®¡ç†ç•Œé¢ä¸Šæœ‰å¸®åŠ©é“¾æ¥ã€‚</p><p><strong>é¡¹ç›®</strong><br>ä¸€ä¸ª GitLab çš„é¡¹ç›®ç›¸å½“äº git çš„ç‰ˆæœ¬åº“ã€‚ æ¯ä¸€ä¸ªé¡¹ç›®éƒ½å±äºä¸€ä¸ªç”¨æˆ·æˆ–è€…ä¸€ä¸ªç»„çš„å•ä¸ªå‘½åç©ºé—´ã€‚ å¦‚æœè¿™ä¸ªé¡¹ç›®å±äºä¸€ä¸ªç”¨æˆ·ï¼Œé‚£ä¹ˆè¿™ä¸ªæ‹¥æœ‰è€…å¯¹æ‰€æœ‰å¯ä»¥è·å–è¿™ä¸ªé¡¹ç›®çš„äººæ‹¥æœ‰ç›´æ¥ç®¡ç†æƒï¼›å¦‚æœè¿™ä¸ªé¡¹ç›®å±äºä¸€ä¸ªç»„ï¼Œé‚£ä¹ˆè¯¥ç»„ä¸­ç”¨æˆ·çº§åˆ«çš„æƒé™ä¹Ÿä¼šèµ·ä½œç”¨ã€‚</p><p>æ¯ä¸€ä¸ªé¡¹ç›®éƒ½æœ‰ä¸€ä¸ªå¯è§†çº§åˆ«ï¼Œæ§åˆ¶ç€è°å¯ä»¥çœ‹åˆ°è¿™ä¸ªé¡¹ç›®é¡µé¢å’Œä»“åº“ã€‚ å¦‚æœä¸€ä¸ªé¡¹ç›®æ˜¯ ç§æœ‰ çš„ï¼Œè¿™ä¸ªé¡¹ç›®çš„æ‹¥æœ‰è€…å¿…é¡»æ˜ç¡®æˆæƒä»è€Œä½¿ç‰¹å®šçš„ç”¨æˆ·å¯ä»¥è®¿é—®ã€‚ ä¸€ä¸ª å†…éƒ¨ çš„é¡¹ç›®å¯ä»¥è¢«æ‰€æœ‰ç™»å½•çš„äººçœ‹åˆ°ï¼Œè€Œä¸€ä¸ª å…¬å¼€ çš„é¡¹ç›®åˆ™æ˜¯å¯¹æ‰€æœ‰äººå¯è§çš„ã€‚ æ³¨æ„ï¼Œè¿™ç§æ§åˆ¶æ—¢åŒ…æ‹¬ git â€œfetchâ€ çš„ä½¿ç”¨ä¹ŸåŒ…æ‹¬å¯¹é¡¹ç›® web ç”¨æˆ·ç•Œé¢çš„è®¿é—®ã€‚</p><p><strong>é’©å­</strong><br>GitLab åœ¨é¡¹ç›®å’Œç³»ç»Ÿçº§åˆ«ä¸Šéƒ½æ”¯æŒé’©å­ç¨‹åºã€‚ å¯¹ä»»æ„çº§åˆ«ï¼Œå½“æœ‰ç›¸å…³äº‹ä»¶å‘ç”Ÿæ—¶ï¼ŒGitLab çš„æœåŠ¡å™¨ä¼šæ‰§è¡Œä¸€ä¸ªåŒ…å«æè¿°æ€§ JSON æ•°æ®çš„ HTTP è¯·æ±‚ã€‚ è¿™æ˜¯è‡ªåŠ¨åŒ–è¿æ¥ä½ çš„ git ç‰ˆæœ¬åº“å’Œ GitLab å®ä¾‹åˆ°å…¶ä»–çš„å¼€å‘å·¥å…·ï¼Œæ¯”å¦‚ CI æœåŠ¡å™¨ï¼ŒèŠå¤©å®¤ï¼Œæˆ–è€…éƒ¨ç½²å·¥å…·çš„ä¸€ä¸ªæå¥½æ–¹æ³•ã€‚</p><h4 id="åŸºæœ¬ç”¨é€”"><a href="#åŸºæœ¬ç”¨é€”" class="headerlink" title="åŸºæœ¬ç”¨é€”"></a>åŸºæœ¬ç”¨é€”</h4><p>ä½ æƒ³è¦åœ¨ GitLab åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯å»ºç«‹ä¸€ä¸ªæ–°é¡¹ç›®ã€‚ è¿™é€šè¿‡ç‚¹å‡»å·¥å…·æ ä¸Šçš„ â€œ+â€ å›¾æ ‡å®Œæˆã€‚ ä½ ä¼šè¢«è¦æ±‚å¡«å†™é¡¹ç›®åç§°ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªé¡¹ç›®æ‰€å±çš„å‘½åç©ºé—´ï¼Œä»¥åŠå®ƒçš„å¯è§†å±‚çº§ã€‚ ç»å¤§å¤šæ•°çš„è®¾å®šå¹¶ä¸æ˜¯æ°¸ä¹…çš„ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç•Œé¢é‡æ–°è°ƒæ•´ã€‚ ç‚¹å‡» â€œCreate Projectâ€ï¼Œä½ å°±å®Œæˆäº†ã€‚</p><p>é¡¹ç›®å­˜åœ¨åï¼Œä½ å¯èƒ½ä¼šæƒ³å°†å®ƒä¸æœ¬åœ°çš„ Git ç‰ˆæœ¬åº“è¿æ¥ã€‚ æ¯ä¸€ä¸ªé¡¹ç›®éƒ½å¯ä»¥é€šè¿‡ HTTPS æˆ–è€… SSH è¿æ¥ï¼Œä»»æ„ä¸¤è€…éƒ½å¯ä»¥è¢«ç”¨æ¥é…ç½®è¿œç¨‹ Gitã€‚ åœ¨é¡¹ç›®ä¸»é¡µçš„é¡¶æ å¯ä»¥çœ‹åˆ°è¿™ä¸ªé¡¹ç›®çš„ URLsã€‚ å¯¹äºä¸€ä¸ªå­˜åœ¨çš„æœ¬åœ°ç‰ˆæœ¬åº“ï¼Œè¿™ä¸ªå‘½ä»¤å°†ä¼šå‘ä¸»æœºä½ç½®æ·»åŠ ä¸€ä¸ªå« <code>gitlab</code> çš„è¿œç¨‹ä»“åº“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add gitlab https://server/namespace/project.git</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ çš„æœ¬åœ°æ²¡æœ‰ç‰ˆæœ¬åº“çš„å‰¯æœ¬ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://server/namespace/project.git</span><br></pre></td></tr></table></figure><p>web ç”¨æˆ·ç•Œé¢æä¾›äº†å‡ ä¸ªæœ‰ç”¨çš„è·å–ç‰ˆæœ¬åº“ä¿¡æ¯çš„ç½‘é¡µã€‚ æ¯ä¸€ä¸ªé¡¹ç›®çš„ä¸»é¡µéƒ½æ˜¾ç¤ºäº†æœ€è¿‘çš„æ´»åŠ¨ï¼Œå¹¶ä¸”é€šè¿‡é¡¶éƒ¨çš„é“¾æ¥å¯ä»¥ä½¿ä½ æµè§ˆé¡¹ç›®æ–‡ä»¶ä»¥åŠæäº¤æ—¥å¿—ã€‚</p><h4 id="ä¸€èµ·å·¥ä½œ"><a href="#ä¸€èµ·å·¥ä½œ" class="headerlink" title="ä¸€èµ·å·¥ä½œ"></a>ä¸€èµ·å·¥ä½œ</h4><p>åœ¨ä¸€ä¸ª GitLab é¡¹ç›®ä¸Šä¸€èµ·å·¥ä½œçš„æœ€ç®€å•æ–¹æ³•å°±æ˜¯èµ‹äºˆåä½œè€…å¯¹ git ç‰ˆæœ¬åº“çš„ç›´æ¥ push æƒé™ã€‚ ä½ å¯ä»¥é€šè¿‡é¡¹ç›®è®¾å®šçš„ â€œMembersï¼ˆæˆå‘˜ï¼‰â€ éƒ¨åˆ†å‘ä¸€ä¸ªé¡¹ç›®æ·»åŠ å†™ä½œè€…ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ–°çš„åä½œè€…ä¸ä¸€ä¸ªè®¿é—®çº§åˆ«å…³è”ï¼ˆä¸åŒçš„è®¿é—®çº§åˆ«åœ¨ ç»„ ä¸­å·²ç®€å•è®¨è®ºï¼‰ã€‚ é€šè¿‡èµ‹äºˆä¸€ä¸ªåä½œè€… â€œDeveloperï¼ˆå¼€å‘è€…ï¼‰â€ æˆ–è€…æ›´é«˜çš„è®¿é—®çº§åˆ«ï¼Œè¿™ä¸ªç”¨æˆ·å°±å¯ä»¥æ¯«æ— çº¦æŸåœ°ç›´æ¥å‘ç‰ˆæœ¬åº“æˆ–è€…å‘åˆ†æ”¯è¿›è¡Œæäº¤ã€‚</p><p>å¦å¤–ä¸€ä¸ªè®©åˆä½œæ›´è§£è€¦çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨åˆå¹¶è¯·æ±‚ã€‚ å®ƒçš„ä¼˜ç‚¹åœ¨äºè®©ä»»ä½•èƒ½å¤Ÿçœ‹åˆ°è¿™ä¸ªé¡¹ç›®çš„åä½œè€…åœ¨è¢«ç®¡æ§çš„æƒ…å†µä¸‹å¯¹è¿™ä¸ªé¡¹ç›®ä½œå‡ºè´¡çŒ®ã€‚ å¯ä»¥ç›´æ¥è®¿é—®çš„åä½œè€…èƒ½å¤Ÿç®€å•çš„åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå‘è¿™ä¸ªåˆ†æ”¯è¿›è¡Œæäº¤ï¼Œä¹Ÿå¯ä»¥å¼€å¯ä¸€ä¸ªå‘ <code>master</code> æˆ–è€…å…¶ä»–ä»»ä½•ä¸€ä¸ªåˆ†æ”¯çš„åˆå¹¶è¯·æ±‚ã€‚ å¯¹ç‰ˆæœ¬åº“æ²¡æœ‰æ¨é€æƒé™çš„åä½œè€…åˆ™å¯ä»¥ â€œforkâ€ è¿™ä¸ªç‰ˆæœ¬åº“ï¼ˆå³åˆ›å»ºå±äºè‡ªå·±çš„è¿™ä¸ªåº“çš„å‰¯æœ¬ï¼‰ï¼Œå‘ é‚£ä¸ª å‰¯æœ¬è¿›è¡Œæäº¤ï¼Œç„¶åä»é‚£ä¸ªå‰¯æœ¬å¼€å¯ä¸€ä¸ªåˆ°ä¸»é¡¹ç›®çš„åˆå¹¶è¯·æ±‚ã€‚ è¿™ä¸ªæ¨¡å‹ä½¿å¾—é¡¹ç›®æ‹¥æœ‰è€…å®Œå…¨æ§åˆ¶ç€å‘ç‰ˆæœ¬åº“çš„æäº¤ï¼Œä»¥åŠä»€ä¹ˆæ—¶å€™å…è®¸åŠ å…¥é™Œç”Ÿåä½œè€…çš„è´¡çŒ®ã€‚</p><p>åœ¨ GitLab ä¸­åˆå¹¶è¯·æ±‚å’Œé—®é¢˜æ˜¯ä¸€ä¸ªé•¿ä¹…è®¨è®ºçš„ä¸»è¦éƒ¨åˆ†ã€‚ æ¯ä¸€ä¸ªåˆå¹¶è¯·æ±‚éƒ½å…è®¸åœ¨æå‡ºæ”¹å˜çš„è¡Œè¿›è¡Œè®¨è®ºï¼ˆå®ƒæ”¯æŒä¸€ä¸ªè½»é‡çº§çš„ä»£ç å®¡æŸ¥ï¼‰ï¼Œä¹Ÿå…è®¸å¯¹ä¸€ä¸ªæ€»ä½“æ€§è¯é¢˜è¿›è¡Œè®¨è®ºã€‚ ä¸¤è€…éƒ½å¯ä»¥è¢«åˆ†é…ç»™ç”¨æˆ·ï¼Œæˆ–è€…ç»„ç»‡åˆ° milestonesï¼ˆé‡Œç¨‹ç¢‘ï¼‰ ç•Œé¢ã€‚</p><p>è¿™ä¸ªéƒ¨åˆ†ä¸»è¦èšç„¦äºåœ¨ GitLab ä¸­ä¸ Git ç›¸å…³çš„ç‰¹æ€§ï¼Œä½†æ˜¯ GitLab ä½œä¸ºä¸€ä¸ªæˆç†Ÿçš„ç³»ç»Ÿï¼Œå®ƒæä¾›äº†è®¸å¤šå…¶ä»–äº§å“æ¥å¸®åŠ©ä½ ååŒå·¥ä½œï¼Œä¾‹å¦‚é¡¹ç›® wiki ä¸ç³»ç»Ÿç»´æŠ¤å·¥å…·ã€‚ GitLab çš„ä¸€ä¸ªä¼˜ç‚¹åœ¨äºï¼ŒæœåŠ¡å™¨è®¾ç½®å’Œè¿è¡Œä»¥åï¼Œä½ å°†å¾ˆå°‘éœ€è¦è°ƒæ•´é…ç½®æ–‡ä»¶æˆ–é€šè¿‡ SSH è¿æ¥æœåŠ¡å™¨ï¼›ç»å¤§å¤šæ•°çš„ç®¡ç†å’Œæ—¥å¸¸ä½¿ç”¨éƒ½å¯ä»¥åœ¨æµè§ˆå™¨ç•Œé¢ä¸­å®Œæˆã€‚</p><h3 id="ç¬¬ä¸‰æ–¹æ‰˜ç®¡çš„é€‰æ‹©"><a href="#ç¬¬ä¸‰æ–¹æ‰˜ç®¡çš„é€‰æ‹©" class="headerlink" title="ç¬¬ä¸‰æ–¹æ‰˜ç®¡çš„é€‰æ‹©"></a>ç¬¬ä¸‰æ–¹æ‰˜ç®¡çš„é€‰æ‹©</h3><p>å¦‚æœä¸æƒ³è®¾ç«‹è‡ªå·±çš„ Git æœåŠ¡å™¨ï¼Œä½ å¯ä»¥é€‰æ‹©å°†ä½ çš„ Git é¡¹ç›®æ‰˜ç®¡åˆ°ä¸€ä¸ªå¤–éƒ¨ä¸“ä¸šçš„æ‰˜ç®¡ç½‘ç«™ã€‚ è¿™å¸¦æ¥äº†ä¸€äº›å¥½å¤„ï¼šä¸€ä¸ªæ‰˜ç®¡ç½‘ç«™å¯ä»¥ç”¨æ¥å¿«é€Ÿå»ºç«‹å¹¶å¼€å§‹é¡¹ç›®ï¼Œä¸”æ— éœ€è¿›è¡ŒæœåŠ¡å™¨ç»´æŠ¤å’Œç›‘æ§å·¥ä½œã€‚ å³ä½¿ä½ åœ¨å†…éƒ¨è®¾ç«‹å¹¶ä¸”è¿è¡Œäº†è‡ªå·±çš„æœåŠ¡å™¨ï¼Œä½ ä»ç„¶å¯ä»¥æŠŠä½ çš„å¼€æºä»£ç æ‰˜ç®¡åœ¨å…¬å…±æ‰˜ç®¡ç½‘ç«™â€”â€”è¿™é€šå¸¸æ›´æœ‰åŠ©äºå¼€æºç¤¾åŒºæ¥å‘ç°å’Œå¸®åŠ©ä½ ã€‚</p><p>ç°åœ¨ï¼Œæœ‰éå¸¸å¤šçš„æ‰˜ç®¡ä¾›ä½ é€‰æ‹©ï¼Œæ¯ä¸ªé€‰æ‹©éƒ½æœ‰ä¸åŒçš„ä¼˜ç¼ºç‚¹ã€‚ æ¬²æŸ¥çœ‹æœ€æ–°åˆ—è¡¨ï¼Œè¯·æµè§ˆ Git ç»´åŸºçš„ GitHosting é¡µé¢ <a href="https://git.wiki.kernel.org/index.php/GitHosting" target="_blank" rel="noopener">https://git.wiki.kernel.org/index.php/GitHosting</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitï¼šåˆ†æ”¯</title>
      <link href="/2018/06/07/Git%EF%BC%9A%E5%88%86%E6%94%AF/"/>
      <url>/2018/06/07/Git%EF%BC%9A%E5%88%86%E6%94%AF/</url>
      
        <content type="html"><![CDATA[<p>å‡ ä¹æ‰€æœ‰çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿéƒ½ä»¥æŸç§å½¢å¼æ”¯æŒåˆ†æ”¯ã€‚ ä½¿ç”¨åˆ†æ”¯æ„å‘³ç€ä½ å¯ä»¥æŠŠä½ çš„å·¥ä½œä»å¼€å‘ä¸»çº¿ä¸Šåˆ†ç¦»å¼€æ¥ï¼Œä»¥å…å½±å“å¼€å‘ä¸»çº¿ã€‚ åœ¨å¾ˆå¤šç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªç•¥å¾®ä½æ•ˆçš„è¿‡ç¨‹â€”â€”å¸¸å¸¸éœ€è¦å®Œå…¨åˆ›å»ºä¸€ä¸ªæºä»£ç ç›®å½•çš„å‰¯æœ¬ã€‚å¯¹äºå¤§é¡¹ç›®æ¥è¯´ï¼Œè¿™æ ·çš„è¿‡ç¨‹ä¼šè€—è´¹å¾ˆå¤šæ—¶é—´ã€‚</p><p>æœ‰äººæŠŠ Git çš„åˆ†æ”¯æ¨¡å‹ç§°ä¸ºå®ƒçš„â€œå¿…æ€æŠ€ç‰¹æ€§â€ï¼Œä¹Ÿæ­£å› ä¸ºè¿™ä¸€ç‰¹æ€§ï¼Œä½¿å¾— Git ä»ä¼—å¤šç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­è„±é¢–è€Œå‡ºã€‚ ä¸ºä½• Git çš„åˆ†æ”¯æ¨¡å‹å¦‚æ­¤å‡ºä¼—å‘¢ï¼Ÿ Git å¤„ç†åˆ†æ”¯çš„æ–¹å¼å¯è°“æ˜¯éš¾ä»¥ç½®ä¿¡çš„è½»é‡ï¼Œåˆ›å»ºæ–°åˆ†æ”¯è¿™ä¸€æ“ä½œå‡ ä¹èƒ½åœ¨ç¬é—´å®Œæˆï¼Œå¹¶ä¸”åœ¨ä¸åŒåˆ†æ”¯ä¹‹é—´çš„åˆ‡æ¢æ“ä½œä¹Ÿæ˜¯ä¸€æ ·ä¾¿æ·ã€‚ ä¸è®¸å¤šå…¶å®ƒç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸åŒï¼ŒGit é¼“åŠ±åœ¨å·¥ä½œæµç¨‹ä¸­é¢‘ç¹åœ°ä½¿ç”¨åˆ†æ”¯ä¸åˆå¹¶ï¼Œå“ªæ€•ä¸€å¤©ä¹‹å†…è¿›è¡Œè®¸å¤šæ¬¡ã€‚ ç†è§£å’Œç²¾é€šè¿™ä¸€ç‰¹æ€§ï¼Œä½ ä¾¿ä¼šæ„è¯†åˆ° Git æ˜¯å¦‚æ­¤çš„å¼ºå¤§è€Œåˆç‹¬ç‰¹ï¼Œå¹¶ä¸”ä»æ­¤çœŸæ­£æ”¹å˜ä½ çš„å¼€å‘æ–¹å¼ã€‚</p><a id="more"></a><h3 id="åˆ†æ”¯ç®€ä»‹"><a href="#åˆ†æ”¯ç®€ä»‹" class="headerlink" title="åˆ†æ”¯ç®€ä»‹"></a>åˆ†æ”¯ç®€ä»‹</h3><p>ä¸ºäº†çœŸæ­£ç†è§£ Git å¤„ç†åˆ†æ”¯çš„æ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦å›é¡¾ä¸€ä¸‹ Git æ˜¯å¦‚ä½•ä¿å­˜æ•°æ®çš„ã€‚</p><p>Git ä¿å­˜çš„ä¸æ˜¯æ–‡ä»¶çš„å˜åŒ–æˆ–è€…å·®å¼‚ï¼Œè€Œæ˜¯ä¸€ç³»åˆ—ä¸åŒæ—¶åˆ»çš„æ–‡ä»¶å¿«ç…§ã€‚</p><p>åœ¨è¿›è¡Œæäº¤æ“ä½œæ—¶ï¼ŒGit ä¼šä¿å­˜ä¸€ä¸ªæäº¤å¯¹è±¡ï¼ˆcommit objectï¼‰ã€‚çŸ¥é“äº† Git ä¿å­˜æ•°æ®çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè‡ªç„¶çš„æƒ³åˆ°â€”â€”è¯¥æäº¤å¯¹è±¡ä¼šåŒ…å«ä¸€ä¸ªæŒ‡å‘æš‚å­˜å†…å®¹å¿«ç…§çš„æŒ‡é’ˆã€‚ ä½†ä¸ä»…ä»…æ˜¯è¿™æ ·ï¼Œè¯¥æäº¤å¯¹è±¡è¿˜åŒ…å«äº†ä½œè€…çš„å§“åå’Œé‚®ç®±ã€æäº¤æ—¶è¾“å…¥çš„ä¿¡æ¯ä»¥åŠæŒ‡å‘å®ƒçš„çˆ¶å¯¹è±¡çš„æŒ‡é’ˆã€‚é¦–æ¬¡æäº¤äº§ç”Ÿçš„æäº¤å¯¹è±¡æ²¡æœ‰çˆ¶å¯¹è±¡ï¼Œæ™®é€šæäº¤æ“ä½œäº§ç”Ÿçš„æäº¤å¯¹è±¡æœ‰ä¸€ä¸ªçˆ¶å¯¹è±¡ï¼Œè€Œç”±å¤šä¸ªåˆ†æ”¯åˆå¹¶äº§ç”Ÿçš„æäº¤å¯¹è±¡æœ‰å¤šä¸ªçˆ¶å¯¹è±¡ï¼Œ</p><p>ä¸ºäº†æ›´åŠ å½¢è±¡åœ°è¯´æ˜ï¼Œæˆ‘ä»¬å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªå·¥ä½œç›®å½•ï¼Œé‡Œé¢åŒ…å«äº†ä¸‰ä¸ªå°†è¦è¢«æš‚å­˜å’Œæäº¤çš„æ–‡ä»¶ã€‚ æš‚å­˜æ“ä½œä¼šä¸ºæ¯ä¸€ä¸ªæ–‡ä»¶è®¡ç®—æ ¡éªŒå’Œï¼Œç„¶åä¼šæŠŠå½“å‰ç‰ˆæœ¬çš„æ–‡ä»¶å¿«ç…§ä¿å­˜åˆ° Git ä»“åº“ä¸­ï¼ˆGit ä½¿ç”¨ blob å¯¹è±¡æ¥ä¿å­˜å®ƒä»¬ï¼‰ï¼Œæœ€ç»ˆå°†æ ¡éªŒå’ŒåŠ å…¥åˆ°æš‚å­˜åŒºåŸŸç­‰å¾…æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git add README test.rb LICENSE</span><br><span class="line">$ git commit -m &apos;The initial commit of my project&apos;</span><br></pre></td></tr></table></figure><p>å½“ä½¿ç”¨ <code>git commit</code> è¿›è¡Œæäº¤æ“ä½œæ—¶ï¼ŒGit ä¼šå…ˆè®¡ç®—æ¯ä¸€ä¸ªå­ç›®å½•ï¼ˆæœ¬ä¾‹ä¸­åªæœ‰é¡¹ç›®æ ¹ç›®å½•ï¼‰çš„æ ¡éªŒå’Œï¼Œç„¶ååœ¨ Git ä»“åº“ä¸­è¿™äº›æ ¡éªŒå’Œä¿å­˜ä¸ºæ ‘å¯¹è±¡ã€‚ éšåï¼ŒGit ä¾¿ä¼šåˆ›å»ºä¸€ä¸ªæäº¤å¯¹è±¡ï¼Œå®ƒé™¤äº†åŒ…å«ä¸Šé¢æåˆ°çš„é‚£äº›ä¿¡æ¯å¤–ï¼Œè¿˜åŒ…å«æŒ‡å‘è¿™ä¸ªæ ‘å¯¹è±¡ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰çš„æŒ‡é’ˆã€‚å¦‚æ­¤ä¸€æ¥ï¼ŒGit å°±å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™é‡ç°æ­¤æ¬¡ä¿å­˜çš„å¿«ç…§ã€‚</p><p>ç°åœ¨ï¼ŒGit ä»“åº“ä¸­æœ‰äº”ä¸ªå¯¹è±¡ï¼šä¸‰ä¸ª blob å¯¹è±¡ï¼ˆä¿å­˜ç€æ–‡ä»¶å¿«ç…§ï¼‰ã€ä¸€ä¸ªæ ‘å¯¹è±¡ï¼ˆè®°å½•ç€ç›®å½•ç»“æ„å’Œ blob å¯¹è±¡ç´¢å¼•ï¼‰ä»¥åŠä¸€ä¸ªæäº¤å¯¹è±¡ï¼ˆåŒ…å«ç€æŒ‡å‘å‰è¿°æ ‘å¯¹è±¡çš„æŒ‡é’ˆå’Œæ‰€æœ‰æäº¤ä¿¡æ¯ï¼‰ã€‚</p><p><img src="git-chapter-1/img1.png" alt></p><p>åšäº›ä¿®æ”¹åå†æ¬¡æäº¤ï¼Œé‚£ä¹ˆè¿™æ¬¡äº§ç”Ÿçš„æäº¤å¯¹è±¡ä¼šåŒ…å«ä¸€ä¸ªæŒ‡å‘ä¸Šæ¬¡æäº¤å¯¹è±¡ï¼ˆçˆ¶å¯¹è±¡ï¼‰çš„æŒ‡é’ˆã€‚</p><p><img src="git-chapter-1/img2.png" alt></p><p>Git çš„åˆ†æ”¯ï¼Œå…¶å®æœ¬è´¨ä¸Šä»…ä»…æ˜¯æŒ‡å‘æäº¤å¯¹è±¡çš„å¯å˜æŒ‡é’ˆã€‚ Git çš„é»˜è®¤åˆ†æ”¯åå­—æ˜¯ <code>master</code>ã€‚ åœ¨å¤šæ¬¡æäº¤æ“ä½œä¹‹åï¼Œä½ å…¶å®å·²ç»æœ‰ä¸€ä¸ªæŒ‡å‘æœ€åé‚£ä¸ªæäº¤å¯¹è±¡çš„ <code>master</code> åˆ†æ”¯ã€‚ å®ƒä¼šåœ¨æ¯æ¬¡çš„æäº¤æ“ä½œä¸­è‡ªåŠ¨å‘å‰ç§»åŠ¨ã€‚</p><p><img src="git-chapter-1/img3.png" alt></p><h4 id="åˆ†æ”¯åˆ›å»º"><a href="#åˆ†æ”¯åˆ›å»º" class="headerlink" title="åˆ†æ”¯åˆ›å»º"></a>åˆ†æ”¯åˆ›å»º</h4><p>Git æ˜¯æ€ä¹ˆåˆ›å»ºæ–°åˆ†æ”¯çš„å‘¢ï¼Ÿ å¾ˆç®€å•ï¼Œå®ƒåªæ˜¯ä¸ºä½ åˆ›å»ºäº†ä¸€ä¸ªå¯ä»¥ç§»åŠ¨çš„æ–°çš„æŒ‡é’ˆã€‚ æ¯”å¦‚ï¼Œåˆ›å»ºä¸€ä¸ª testing åˆ†æ”¯ï¼Œ ä½ éœ€è¦ä½¿ç”¨ <code>git branch</code> å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch testing</span><br></pre></td></tr></table></figure><p>è¿™ä¼šåœ¨å½“å‰æ‰€åœ¨çš„æäº¤å¯¹è±¡ä¸Šåˆ›å»ºä¸€ä¸ªæŒ‡é’ˆã€‚</p><p><img src="git-chapter-1/img4.png" alt></p><p>é‚£ä¹ˆï¼ŒGit åˆæ˜¯æ€ä¹ˆçŸ¥é“å½“å‰åœ¨å“ªä¸€ä¸ªåˆ†æ”¯ä¸Šå‘¢ï¼Ÿ ä¹Ÿå¾ˆç®€å•ï¼Œå®ƒæœ‰ä¸€ä¸ªåä¸º <code>HEAD</code> çš„ç‰¹æ®ŠæŒ‡é’ˆã€‚ è¯·æ³¨æ„å®ƒå’Œè®¸å¤šå…¶å®ƒç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆå¦‚ Subversion æˆ– CVSï¼‰é‡Œçš„ <code>HEAD</code> æ¦‚å¿µå®Œå…¨ä¸åŒã€‚ åœ¨ Git ä¸­ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å½“å‰æ‰€åœ¨çš„æœ¬åœ°åˆ†æ”¯ï¼ˆè¯‘æ³¨ï¼šå°† <code>HEAD</code> æƒ³è±¡ä¸ºå½“å‰åˆ†æ”¯çš„åˆ«åï¼‰ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œä½ ä»ç„¶åœ¨ <code>master</code> åˆ†æ”¯ä¸Šã€‚ å› ä¸º <code>git branch</code> å‘½ä»¤ä»…ä»… åˆ›å»º ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ä¸­å»ã€‚</p><p><img src="git-chapter-1/img5.png" alt></p><p>ä½ å¯ä»¥ç®€å•åœ°ä½¿ç”¨ <code>git log</code> å‘½ä»¤æŸ¥çœ‹å„ä¸ªåˆ†æ”¯å½“å‰æ‰€æŒ‡çš„å¯¹è±¡ã€‚ æä¾›è¿™ä¸€åŠŸèƒ½çš„å‚æ•°æ˜¯ <code>--decorate</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline --decorate</span><br><span class="line">f30ab (HEAD, master, testing) add feature #32 - ability to add new</span><br><span class="line">34ac2 fixed bug #1328 - stack overflow under certain conditions</span><br><span class="line">98ca9 initial commit of my project</span><br></pre></td></tr></table></figure><p>æ­£å¦‚ä½ æ‰€è§ï¼Œå½“å‰ â€œmasterâ€ å’Œ â€œtestingâ€ åˆ†æ”¯å‡æŒ‡å‘æ ¡éªŒå’Œä»¥ <code>f30ab</code> å¼€å¤´çš„æäº¤å¯¹è±¡ã€‚</p><h4 id="åˆ†æ”¯åˆ‡æ¢"><a href="#åˆ†æ”¯åˆ‡æ¢" class="headerlink" title="åˆ†æ”¯åˆ‡æ¢"></a>åˆ†æ”¯åˆ‡æ¢</h4><p>è¦åˆ‡æ¢åˆ°ä¸€ä¸ªå·²å­˜åœ¨çš„åˆ†æ”¯ï¼Œä½ éœ€è¦ä½¿ç”¨ <code>git checkout</code> å‘½ä»¤ã€‚ æˆ‘ä»¬ç°åœ¨åˆ‡æ¢åˆ°æ–°åˆ›å»ºçš„ <code>testing</code> åˆ†æ”¯å»ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout testing</span><br></pre></td></tr></table></figure><p>è¿™æ · <code>HEAD</code> å°±æŒ‡å‘ <code>testing</code> åˆ†æ”¯äº†ã€‚</p><p><img src="git-chapter-1/img6.png" alt></p><p>é‚£ä¹ˆï¼Œè¿™æ ·çš„å®ç°æ–¹å¼ä¼šç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ ç°åœ¨ä¸å¦¨å†æäº¤ä¸€æ¬¡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vim test.rb</span><br><span class="line">$ git commit -a -m &apos;made a change&apos;</span><br></pre></td></tr></table></figure><p><img src="git-chapter-1/img7.png" alt></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œä½ çš„ <code>testing</code> åˆ†æ”¯å‘å‰ç§»åŠ¨äº†ï¼Œä½†æ˜¯ <code>master</code> åˆ†æ”¯å´æ²¡æœ‰ï¼Œå®ƒä»ç„¶æŒ‡å‘è¿è¡Œ <code>git checkout</code> æ—¶æ‰€æŒ‡çš„å¯¹è±¡ã€‚ è¿™å°±æœ‰æ„æ€äº†ï¼Œç°åœ¨æˆ‘ä»¬åˆ‡æ¢å› <code>master</code> åˆ†æ”¯çœ‹çœ‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br></pre></td></tr></table></figure><p><img src="git-chapter-1/img8.png" alt></p><p>è¿™æ¡å‘½ä»¤åšäº†ä¸¤ä»¶äº‹ã€‚ ä¸€æ˜¯ä½¿ HEAD æŒ‡å› <code>master</code> åˆ†æ”¯ï¼ŒäºŒæ˜¯å°†å·¥ä½œç›®å½•æ¢å¤æˆ <code>master</code> åˆ†æ”¯æ‰€æŒ‡å‘çš„å¿«ç…§å†…å®¹ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ç°åœ¨åšä¿®æ”¹çš„è¯ï¼Œé¡¹ç›®å°†å§‹äºä¸€ä¸ªè¾ƒæ—§çš„ç‰ˆæœ¬ã€‚ æœ¬è´¨ä¸Šæ¥è®²ï¼Œè¿™å°±æ˜¯å¿½ç•¥ <code>testing</code> åˆ†æ”¯æ‰€åšçš„ä¿®æ”¹ï¼Œä»¥ä¾¿äºå‘å¦ä¸€ä¸ªæ–¹å‘è¿›è¡Œå¼€å‘ã€‚</p><p>æˆ‘ä»¬ä¸å¦¨å†ç¨å¾®åšäº›ä¿®æ”¹å¹¶æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vim test.rb</span><br><span class="line">$ git commit -a -m &apos;made other changes&apos;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œè¿™ä¸ªé¡¹ç›®çš„æäº¤å†å²å·²ç»äº§ç”Ÿäº†åˆ†å‰ã€‚ å› ä¸ºåˆšæ‰ä½ åˆ›å»ºäº†ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢è¿‡å»è¿›è¡Œäº†ä¸€äº›å·¥ä½œï¼Œéšååˆåˆ‡æ¢å› master åˆ†æ”¯è¿›è¡Œäº†å¦å¤–ä¸€äº›å·¥ä½œã€‚ ä¸Šè¿°ä¸¤æ¬¡æ”¹åŠ¨é’ˆå¯¹çš„æ˜¯ä¸åŒåˆ†æ”¯ï¼šä½ å¯ä»¥åœ¨ä¸åŒåˆ†æ”¯é—´ä¸æ–­åœ°æ¥å›åˆ‡æ¢å’Œå·¥ä½œï¼Œå¹¶åœ¨æ—¶æœºæˆç†Ÿæ—¶å°†å®ƒä»¬åˆå¹¶èµ·æ¥ã€‚ è€Œæ‰€æœ‰è¿™äº›å·¥ä½œï¼Œä½ éœ€è¦çš„å‘½ä»¤åªæœ‰ <code>branch</code>ã€<code>checkout</code> å’Œ <code>commit</code>ã€‚</p><p><img src="git-chapter-1/img9.png" alt></p><p>ä½ å¯ä»¥ç®€å•åœ°ä½¿ç”¨ <code>git log</code> å‘½ä»¤æŸ¥çœ‹åˆ†å‰å†å²ã€‚ è¿è¡Œ <code>git log --oneline --decorate --graph --all</code> ï¼Œå®ƒä¼šè¾“å‡ºä½ çš„æäº¤å†å²ã€å„ä¸ªåˆ†æ”¯çš„æŒ‡å‘ä»¥åŠé¡¹ç›®çš„åˆ†æ”¯åˆ†å‰æƒ…å†µã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline --decorate --graph --all</span><br><span class="line">* c2b9e (HEAD, master) made other changes</span><br><span class="line">| * 87ab2 (testing) made a change</span><br><span class="line">|/</span><br><span class="line">* f30ab add feature #32 - ability to add new formats to the</span><br><span class="line">* 34ac2 fixed bug #1328 - stack overflow under certain conditions</span><br><span class="line">* 98ca9 initial commit of my project</span><br></pre></td></tr></table></figure><p>ç”±äº Git çš„åˆ†æ”¯å®è´¨ä¸Šä»…æ˜¯åŒ…å«æ‰€æŒ‡å¯¹è±¡æ ¡éªŒå’Œï¼ˆé•¿åº¦ä¸º 40 çš„ SHA-1 å€¼å­—ç¬¦ä¸²ï¼‰çš„æ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒçš„åˆ›å»ºå’Œé”€æ¯éƒ½å¼‚å¸¸é«˜æ•ˆã€‚ åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯å°±ç›¸å½“äºå¾€ä¸€ä¸ªæ–‡ä»¶ä¸­å†™å…¥ 41 ä¸ªå­—èŠ‚ï¼ˆ40 ä¸ªå­—ç¬¦å’Œ 1 ä¸ªæ¢è¡Œç¬¦ï¼‰ï¼Œå¦‚æ­¤çš„ç®€å•èƒ½ä¸å¿«å—ï¼Ÿ</p><p>è¿™ä¸è¿‡å»å¤§å¤šæ•°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå½¢æˆäº†é²œæ˜çš„å¯¹æ¯”ï¼Œå®ƒä»¬åœ¨åˆ›å»ºåˆ†æ”¯æ—¶ï¼Œå°†æ‰€æœ‰çš„é¡¹ç›®æ–‡ä»¶éƒ½å¤åˆ¶ä¸€éï¼Œå¹¶ä¿å­˜åˆ°ä¸€ä¸ªç‰¹å®šçš„ç›®å½•ã€‚ å®Œæˆè¿™æ ·ç¹ççš„è¿‡ç¨‹é€šå¸¸éœ€è¦å¥½å‡ ç§’é’Ÿï¼Œæœ‰æ—¶ç”šè‡³éœ€è¦å¥½å‡ åˆ†é’Ÿã€‚æ‰€éœ€æ—¶é—´çš„é•¿çŸ­ï¼Œå®Œå…¨å–å†³äºé¡¹ç›®çš„è§„æ¨¡ã€‚è€Œåœ¨ Git ä¸­ï¼Œä»»ä½•è§„æ¨¡çš„é¡¹ç›®éƒ½èƒ½åœ¨ç¬é—´åˆ›å»ºæ–°åˆ†æ”¯ã€‚ åŒæ—¶ï¼Œç”±äºæ¯æ¬¡æäº¤éƒ½ä¼šè®°å½•çˆ¶å¯¹è±¡ï¼Œæ‰€ä»¥å¯»æ‰¾æ°å½“çš„åˆå¹¶åŸºç¡€ï¼ˆè¯‘æ³¨ï¼šå³å…±åŒç¥–å…ˆï¼‰ä¹Ÿæ˜¯åŒæ ·çš„ç®€å•å’Œé«˜æ•ˆã€‚ è¿™äº›é«˜æ•ˆçš„ç‰¹æ€§ä½¿å¾— Git é¼“åŠ±å¼€å‘äººå‘˜é¢‘ç¹åœ°åˆ›å»ºå’Œä½¿ç”¨åˆ†æ”¯ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä½ ä¸ºä»€ä¹ˆåº”è¯¥è¿™æ ·åšã€‚</p><h3 id="åˆ†æ”¯çš„æ–°å»ºä¸åˆå¹¶"><a href="#åˆ†æ”¯çš„æ–°å»ºä¸åˆå¹¶" class="headerlink" title="åˆ†æ”¯çš„æ–°å»ºä¸åˆå¹¶"></a>åˆ†æ”¯çš„æ–°å»ºä¸åˆå¹¶</h3><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„åˆ†æ”¯æ–°å»ºä¸åˆ†æ”¯åˆå¹¶çš„ä¾‹å­ï¼Œå®é™…å·¥ä½œä¸­ä½ å¯èƒ½ä¼šç”¨åˆ°ç±»ä¼¼çš„å·¥ä½œæµã€‚ ä½ å°†ç»å†å¦‚ä¸‹æ­¥éª¤ï¼š</p><ol><li><p>å¼€å‘æŸä¸ªç½‘ç«™ã€‚</p></li><li><p>ä¸ºå®ç°æŸä¸ªæ–°çš„éœ€æ±‚ï¼Œåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚</p></li><li><p>åœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šå¼€å±•å·¥ä½œã€‚</p></li></ol><p>æ­£åœ¨æ­¤æ—¶ï¼Œä½ çªç„¶æ¥åˆ°ä¸€ä¸ªç”µè¯è¯´æœ‰ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜éœ€è¦ç´§æ€¥ä¿®è¡¥ã€‚ ä½ å°†æŒ‰ç…§å¦‚ä¸‹æ–¹å¼æ¥å¤„ç†ï¼š</p><ol><li><p>åˆ‡æ¢åˆ°ä½ çš„çº¿ä¸Šåˆ†æ”¯ï¼ˆproduction branchï¼‰ã€‚</p></li><li><p>ä¸ºè¿™ä¸ªç´§æ€¥ä»»åŠ¡æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åœ¨å…¶ä¸­ä¿®å¤å®ƒã€‚</p></li><li><p>åœ¨æµ‹è¯•é€šè¿‡ä¹‹åï¼Œåˆ‡æ¢å›çº¿ä¸Šåˆ†æ”¯ï¼Œç„¶ååˆå¹¶è¿™ä¸ªä¿®è¡¥åˆ†æ”¯ï¼Œæœ€åå°†æ”¹åŠ¨æ¨é€åˆ°çº¿ä¸Šåˆ†æ”¯ã€‚</p></li><li><p>åˆ‡æ¢å›ä½ æœ€åˆå·¥ä½œçš„åˆ†æ”¯ä¸Šï¼Œç»§ç»­å·¥ä½œã€‚</p></li></ol><h4 id="æ–°å»ºåˆ†æ”¯"><a href="#æ–°å»ºåˆ†æ”¯" class="headerlink" title="æ–°å»ºåˆ†æ”¯"></a>æ–°å»ºåˆ†æ”¯</h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬å‡è®¾ä½ æ­£åœ¨ä½ çš„é¡¹ç›®ä¸Šå·¥ä½œï¼Œå¹¶ä¸”å·²ç»æœ‰ä¸€äº›æäº¤ã€‚</p><p><img src="git-chapter-2/img1.png" alt></p><p>ç°åœ¨ï¼Œä½ å·²ç»å†³å®šè¦è§£å†³ä½ çš„å…¬å¸ä½¿ç”¨çš„é—®é¢˜è¿½è¸ªç³»ç»Ÿä¸­çš„ #53 é—®é¢˜ã€‚ æƒ³è¦æ–°å»ºä¸€ä¸ªåˆ†æ”¯å¹¶åŒæ—¶åˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯ä¸Šï¼Œä½ å¯ä»¥è¿è¡Œä¸€ä¸ªå¸¦æœ‰ <code>-b</code> å‚æ•°çš„ <code>git checkout</code> å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b iss53</span><br><span class="line">Switched to a new branch &quot;iss53&quot;</span><br></pre></td></tr></table></figure><p>å®ƒæ˜¯ä¸‹é¢ä¸¤æ¡å‘½ä»¤çš„ç®€å†™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch iss53</span><br><span class="line">$ git checkout iss53</span><br></pre></td></tr></table></figure><p><img src="git-chapter-2/img2.png" alt></p><p>ä½ ç»§ç»­åœ¨ #53 é—®é¢˜ä¸Šå·¥ä½œï¼Œå¹¶ä¸”åšäº†ä¸€äº›æäº¤ã€‚ åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œ<code>iss53</code> åˆ†æ”¯åœ¨ä¸æ–­çš„å‘å‰æ¨è¿›ï¼Œå› ä¸ºä½ å·²ç»æ£€å‡ºåˆ°è¯¥åˆ†æ”¯ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œä½ çš„ <code>HEAD</code> æŒ‡é’ˆæŒ‡å‘äº† <code>iss53</code> åˆ†æ”¯ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vim index.html</span><br><span class="line">$ git commit -a -m &apos;added a new footer [issue 53]&apos;</span><br></pre></td></tr></table></figure><p><img src="git-chapter-2/img3.png" alt></p><p>ç°åœ¨ä½ æ¥åˆ°é‚£ä¸ªç”µè¯ï¼Œæœ‰ä¸ªç´§æ€¥é—®é¢˜ç­‰å¾…ä½ æ¥è§£å†³ã€‚ æœ‰äº† Git çš„å¸®åŠ©ï¼Œä½ ä¸å¿…æŠŠè¿™ä¸ªç´§æ€¥é—®é¢˜å’Œ <code>iss53</code> çš„ä¿®æ”¹æ··åœ¨ä¸€èµ·ï¼Œä½ ä¹Ÿä¸éœ€è¦èŠ±å¤§åŠ›æ°”æ¥è¿˜åŸå…³äº 53# é—®é¢˜çš„ä¿®æ”¹ï¼Œç„¶åå†æ·»åŠ å…³äºè¿™ä¸ªç´§æ€¥é—®é¢˜çš„ä¿®æ”¹ï¼Œæœ€åå°†è¿™ä¸ªä¿®æ”¹æäº¤åˆ°çº¿ä¸Šåˆ†æ”¯ã€‚ ä½ æ‰€è¦åšçš„ä»…ä»…æ˜¯åˆ‡æ¢å› <code>master</code> åˆ†æ”¯ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨ä½ è¿™ä¹ˆåšä¹‹å‰ï¼Œè¦ç•™æ„ä½ çš„å·¥ä½œç›®å½•å’Œæš‚å­˜åŒºé‡Œé‚£äº›è¿˜æ²¡æœ‰è¢«æäº¤çš„ä¿®æ”¹ï¼Œå®ƒå¯èƒ½ä¼šå’Œä½ å³å°†æ£€å‡ºçš„åˆ†æ”¯äº§ç”Ÿå†²çªä»è€Œé˜»æ­¢ Git åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ã€‚ æœ€å¥½çš„æ–¹æ³•æ˜¯ï¼Œåœ¨ä½ åˆ‡æ¢åˆ†æ”¯ä¹‹å‰ï¼Œä¿æŒå¥½ä¸€ä¸ªå¹²å‡€çš„çŠ¶æ€ã€‚ æœ‰ä¸€äº›æ–¹æ³•å¯ä»¥ç»•è¿‡è¿™ä¸ªé—®é¢˜ï¼ˆå³ï¼Œä¿å­˜è¿›åº¦ï¼ˆstashingï¼‰ å’Œ ä¿®è¡¥æäº¤ï¼ˆcommit amendingï¼‰ï¼‰ï¼Œæˆ‘ä»¬ä¼šåœ¨ å‚¨è—ä¸æ¸…ç† ä¸­çœ‹åˆ°å…³äºè¿™ä¸¤ä¸ªå‘½ä»¤çš„ä»‹ç»ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å‡è®¾ä½ å·²ç»æŠŠä½ çš„ä¿®æ”¹å…¨éƒ¨æäº¤äº†ï¼Œè¿™æ—¶ä½ å¯ä»¥åˆ‡æ¢å› <code>master</code> åˆ†æ”¯äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">Switched to branch &apos;master&apos;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™ï¼Œä½ çš„å·¥ä½œç›®å½•å’Œä½ åœ¨å¼€å§‹ #53 é—®é¢˜ä¹‹å‰ä¸€æ¨¡ä¸€æ ·ï¼Œç°åœ¨ä½ å¯ä»¥ä¸“å¿ƒä¿®å¤ç´§æ€¥é—®é¢˜äº†ã€‚ è¯·ç‰¢è®°ï¼šå½“ä½ åˆ‡æ¢åˆ†æ”¯çš„æ—¶å€™ï¼ŒGit ä¼šé‡ç½®ä½ çš„å·¥ä½œç›®å½•ï¼Œä½¿å…¶çœ‹èµ·æ¥åƒå›åˆ°äº†ä½ åœ¨é‚£ä¸ªåˆ†æ”¯ä¸Šæœ€åä¸€æ¬¡æäº¤çš„æ ·å­ã€‚ Git ä¼šè‡ªåŠ¨æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ–‡ä»¶ä»¥ç¡®ä¿æ­¤æ—¶ä½ çš„å·¥ä½œç›®å½•å’Œè¿™ä¸ªåˆ†æ”¯æœ€åä¸€æ¬¡æäº¤æ—¶çš„æ ·å­ä¸€æ¨¡ä¸€æ ·ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œä½ è¦ä¿®å¤è¿™ä¸ªç´§æ€¥é—®é¢˜ã€‚ è®©æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªé’ˆå¯¹è¯¥ç´§æ€¥é—®é¢˜çš„åˆ†æ”¯ï¼ˆhotfix branchï¼‰ï¼Œåœ¨è¯¥åˆ†æ”¯ä¸Šå·¥ä½œç›´åˆ°é—®é¢˜è§£å†³ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b hotfix</span><br><span class="line">Switched to a new branch &apos;hotfix&apos;</span><br><span class="line">$ vim index.html</span><br><span class="line">$ git commit -a -m &apos;fixed the broken email address&apos;</span><br><span class="line">[hotfix 1fb7853] fixed the broken email address</span><br><span class="line"> 1 file changed, 2 insertions(+)</span><br></pre></td></tr></table></figure><p><img src="git-chapter-2/img4.png" alt></p><p>ä½ å¯ä»¥è¿è¡Œä½ çš„æµ‹è¯•ï¼Œç¡®ä¿ä½ çš„ä¿®æ”¹æ˜¯æ­£ç¡®çš„ï¼Œç„¶åå°†å…¶åˆå¹¶å›ä½ çš„ <code>master</code> åˆ†æ”¯æ¥éƒ¨ç½²åˆ°çº¿ä¸Šã€‚ ä½ å¯ä»¥ä½¿ç”¨ <code>git merge</code> å‘½ä»¤æ¥è¾¾åˆ°ä¸Šè¿°ç›®çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge hotfix</span><br><span class="line">Updating f42c576..3a0874c</span><br><span class="line">Fast-forward</span><br><span class="line"> index.html | 2 ++</span><br><span class="line"> 1 file changed, 2 insertions(+)</span><br></pre></td></tr></table></figure><p>åœ¨åˆå¹¶çš„æ—¶å€™ï¼Œä½ åº”è¯¥æ³¨æ„åˆ°äº†â€å¿«è¿›ï¼ˆfast-forwardï¼‰â€è¿™ä¸ªè¯ã€‚ ç”±äºå½“å‰ <code>master</code> åˆ†æ”¯æ‰€æŒ‡å‘çš„æäº¤æ˜¯ä½ å½“å‰æäº¤ï¼ˆæœ‰å…³ hotfix çš„æäº¤ï¼‰çš„ç›´æ¥ä¸Šæ¸¸ï¼Œæ‰€ä»¥ Git åªæ˜¯ç®€å•çš„å°†æŒ‡é’ˆå‘å‰ç§»åŠ¨ã€‚ æ¢å¥è¯è¯´ï¼Œå½“ä½ è¯•å›¾åˆå¹¶ä¸¤ä¸ªåˆ†æ”¯æ—¶ï¼Œå¦‚æœé¡ºç€ä¸€ä¸ªåˆ†æ”¯èµ°ä¸‹å»èƒ½å¤Ÿåˆ°è¾¾å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆ Git åœ¨åˆå¹¶ä¸¤è€…çš„æ—¶å€™ï¼Œåªä¼šç®€å•çš„å°†æŒ‡é’ˆå‘å‰æ¨è¿›ï¼ˆæŒ‡é’ˆå³ç§»ï¼‰ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹çš„åˆå¹¶æ“ä½œæ²¡æœ‰éœ€è¦è§£å†³çš„åˆ†æ­§â€”â€”è¿™å°±å«åš â€œå¿«è¿›ï¼ˆfast-forwardï¼‰â€ã€‚</p><p>ç°åœ¨ï¼Œæœ€æ–°çš„ä¿®æ”¹å·²ç»åœ¨ <code>master</code> åˆ†æ”¯æ‰€æŒ‡å‘çš„æäº¤å¿«ç…§ä¸­ï¼Œä½ å¯ä»¥ç€æ‰‹å‘å¸ƒè¯¥ä¿®å¤äº†ã€‚</p><p><img src="git-chapter-2/img5.png" alt></p><p>å…³äºè¿™ä¸ªç´§æ€¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆå‘å¸ƒä¹‹åï¼Œä½ å‡†å¤‡å›åˆ°è¢«æ‰“æ–­ä¹‹å‰æ—¶çš„å·¥ä½œä¸­ã€‚ ç„¶è€Œï¼Œä½ åº”è¯¥å…ˆåˆ é™¤ <code>hotfix</code> åˆ†æ”¯ï¼Œå› ä¸ºä½ å·²ç»ä¸å†éœ€è¦å®ƒäº† â€”â€” <code>master</code> åˆ†æ”¯å·²ç»æŒ‡å‘äº†åŒä¸€ä¸ªä½ç½®ã€‚ ä½ å¯ä»¥ä½¿ç”¨å¸¦ <code>-d</code> é€‰é¡¹çš„ <code>git branch</code> å‘½ä»¤æ¥åˆ é™¤åˆ†æ”¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d hotfix</span><br><span class="line">Deleted branch hotfix (3a0874c).</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ å¯ä»¥åˆ‡æ¢å›ä½ æ­£åœ¨å·¥ä½œçš„åˆ†æ”¯ç»§ç»­ä½ çš„å·¥ä½œï¼Œä¹Ÿå°±æ˜¯é’ˆå¯¹ #53 é—®é¢˜çš„é‚£ä¸ªåˆ†æ”¯ï¼ˆiss53 åˆ†æ”¯ï¼‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout iss53</span><br><span class="line">Switched to branch &quot;iss53&quot;</span><br><span class="line">$ vim index.html</span><br><span class="line">$ git commit -a -m &apos;finished the new footer [issue 53]&apos;</span><br><span class="line">[iss53 ad82d7a] finished the new footer [issue 53]</span><br><span class="line">1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure><p><img src="git-chapter-2/img6.png" alt></p><p>ä½ åœ¨ <code>hotfix</code> åˆ†æ”¯ä¸Šæ‰€åšçš„å·¥ä½œå¹¶æ²¡æœ‰åŒ…å«åˆ° <code>iss53</code> åˆ†æ”¯ä¸­ã€‚ å¦‚æœä½ éœ€è¦æ‹‰å– <code>hotfix</code> æ‰€åšçš„ä¿®æ”¹ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>git merge master</code> å‘½ä»¤å°† <code>master</code> åˆ†æ”¯åˆå¹¶å…¥ <code>iss53</code> åˆ†æ”¯ï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥ç­‰åˆ° <code>iss53</code> åˆ†æ”¯å®Œæˆå…¶ä½¿å‘½ï¼Œå†å°†å…¶åˆå¹¶å› <code>master</code> åˆ†æ”¯ã€‚</p><h4 id="åˆ†æ”¯çš„åˆå¹¶"><a href="#åˆ†æ”¯çš„åˆå¹¶" class="headerlink" title="åˆ†æ”¯çš„åˆå¹¶"></a>åˆ†æ”¯çš„åˆå¹¶</h4><p>å‡è®¾ä½ å·²ç»ä¿®æ­£äº† <code>#53</code> é—®é¢˜ï¼Œå¹¶ä¸”æ‰“ç®—å°†ä½ çš„å·¥ä½œåˆå¹¶å…¥ <code>master</code> åˆ†æ”¯ã€‚ ä¸ºæ­¤ï¼Œä½ éœ€è¦åˆå¹¶ <code>iss53</code> åˆ†æ”¯åˆ° <code>master</code> åˆ†æ”¯ï¼Œè¿™å’Œä¹‹å‰ä½ åˆå¹¶ <code>hotfix</code> åˆ†æ”¯æ‰€åšçš„å·¥ä½œå·®ä¸å¤šã€‚ ä½ åªéœ€è¦æ£€å‡ºåˆ°ä½ æƒ³åˆå¹¶å…¥çš„åˆ†æ”¯ï¼Œç„¶åè¿è¡Œ <code>git merge</code> å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">Switched to branch &apos;master&apos;</span><br><span class="line">$ git merge iss53</span><br><span class="line">Merge made by the &apos;recursive&apos; strategy.</span><br><span class="line">index.html |    1 +</span><br><span class="line">1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure><p>è¿™å’Œä½ ä¹‹å‰åˆå¹¶ <code>hotfix</code> åˆ†æ”¯çš„æ—¶å€™çœ‹èµ·æ¥æœ‰ä¸€ç‚¹ä¸ä¸€æ ·ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ çš„å¼€å‘å†å²ä»ä¸€ä¸ªæ›´æ—©çš„åœ°æ–¹å¼€å§‹åˆ†å‰å¼€æ¥ï¼ˆdivergedï¼‰ã€‚ å› ä¸ºï¼Œ<code>master</code> åˆ†æ”¯æ‰€åœ¨æäº¤å¹¶ä¸æ˜¯ <code>iss53</code> åˆ†æ”¯æ‰€åœ¨æäº¤çš„ç›´æ¥ç¥–å…ˆï¼ŒGit ä¸å¾—ä¸åšä¸€äº›é¢å¤–çš„å·¥ä½œã€‚ å‡ºç°è¿™ç§æƒ…å†µçš„æ—¶å€™ï¼ŒGit ä¼šä½¿ç”¨ä¸¤ä¸ªåˆ†æ”¯çš„æœ«ç«¯æ‰€æŒ‡çš„å¿«ç…§ï¼ˆ<code>C4</code> å’Œ <code>C5</code>ï¼‰ä»¥åŠè¿™ä¸¤ä¸ªåˆ†æ”¯çš„å·¥ä½œç¥–å…ˆï¼ˆ<code>C2</code>ï¼‰ï¼Œåšä¸€ä¸ªç®€å•çš„ä¸‰æ–¹åˆå¹¶ã€‚</p><p><img src="git-chapter-2/img7.png" alt></p><p>å’Œä¹‹å‰å°†åˆ†æ”¯æŒ‡é’ˆå‘å‰æ¨è¿›æ‰€ä¸åŒçš„æ˜¯ï¼ŒGit å°†æ­¤æ¬¡ä¸‰æ–¹åˆå¹¶çš„ç»“æœåšäº†ä¸€ä¸ªæ–°çš„å¿«ç…§å¹¶ä¸”è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤æŒ‡å‘å®ƒã€‚ è¿™ä¸ªè¢«ç§°ä½œä¸€æ¬¡åˆå¹¶æäº¤ï¼Œå®ƒçš„ç‰¹åˆ«ä¹‹å¤„åœ¨äºä»–æœ‰ä¸æ­¢ä¸€ä¸ªçˆ¶æäº¤ã€‚</p><p><img src="git-chapter-2/img8.png" alt></p><p>éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼ŒGit ä¼šè‡ªè¡Œå†³å®šé€‰å–å“ªä¸€ä¸ªæäº¤ä½œä¸ºæœ€ä¼˜çš„å…±åŒç¥–å…ˆï¼Œå¹¶ä»¥æ­¤ä½œä¸ºåˆå¹¶çš„åŸºç¡€ï¼›è¿™å’Œæ›´åŠ å¤è€çš„ CVS ç³»ç»Ÿæˆ–è€… Subversion ï¼ˆ1.5 ç‰ˆæœ¬ä¹‹å‰ï¼‰ä¸åŒï¼Œåœ¨è¿™äº›å¤è€çš„ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦è‡ªå·±é€‰æ‹©æœ€ä½³çš„åˆå¹¶åŸºç¡€ã€‚ Git çš„è¿™ä¸ªä¼˜åŠ¿ä½¿å…¶åœ¨åˆå¹¶æ“ä½œä¸Šæ¯”å…¶ä»–ç³»ç»Ÿè¦ç®€å•å¾ˆå¤šã€‚</p><p>æ—¢ç„¶ä½ çš„ä¿®æ”¹å·²ç»åˆå¹¶è¿›æ¥äº†ï¼Œä½ å·²ç»ä¸å†éœ€è¦ <code>iss53</code> åˆ†æ”¯äº†ã€‚ ç°åœ¨ä½ å¯ä»¥åœ¨ä»»åŠ¡è¿½è¸ªç³»ç»Ÿä¸­å…³é—­æ­¤é¡¹ä»»åŠ¡ï¼Œå¹¶åˆ é™¤è¿™ä¸ªåˆ†æ”¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d iss53</span><br></pre></td></tr></table></figure><h4 id="é‡åˆ°å†²çªæ—¶çš„åˆ†æ”¯åˆå¹¶"><a href="#é‡åˆ°å†²çªæ—¶çš„åˆ†æ”¯åˆå¹¶" class="headerlink" title="é‡åˆ°å†²çªæ—¶çš„åˆ†æ”¯åˆå¹¶"></a>é‡åˆ°å†²çªæ—¶çš„åˆ†æ”¯åˆå¹¶</h4><p>æœ‰æ—¶å€™åˆå¹¶æ“ä½œä¸ä¼šå¦‚æ­¤é¡ºåˆ©ã€‚ å¦‚æœä½ åœ¨ä¸¤ä¸ªä¸åŒçš„åˆ†æ”¯ä¸­ï¼Œå¯¹åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€ä¸ªéƒ¨åˆ†è¿›è¡Œäº†ä¸åŒçš„ä¿®æ”¹ï¼ŒGit å°±æ²¡æ³•å¹²å‡€çš„åˆå¹¶å®ƒä»¬ã€‚ å¦‚æœä½ å¯¹ #53 é—®é¢˜çš„ä¿®æ”¹å’Œæœ‰å…³ <code>hotfix</code> çš„ä¿®æ”¹éƒ½æ¶‰åŠåˆ°åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€å¤„ï¼Œåœ¨åˆå¹¶å®ƒä»¬çš„æ—¶å€™å°±ä¼šäº§ç”Ÿåˆå¹¶å†²çªï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git merge iss53</span><br><span class="line">Auto-merging index.html</span><br><span class="line">CONFLICT (content): Merge conflict in index.html</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ Git åšäº†åˆå¹¶ï¼Œä½†æ˜¯æ²¡æœ‰è‡ªåŠ¨åœ°åˆ›å»ºä¸€ä¸ªæ–°çš„åˆå¹¶æäº¤ã€‚ Git ä¼šæš‚åœä¸‹æ¥ï¼Œç­‰å¾…ä½ å»è§£å†³åˆå¹¶äº§ç”Ÿçš„å†²çªã€‚ ä½ å¯ä»¥åœ¨åˆå¹¶å†²çªåçš„ä»»æ„æ—¶åˆ»ä½¿ç”¨ <code>git status</code> å‘½ä»¤æ¥æŸ¥çœ‹é‚£äº›å› åŒ…å«åˆå¹¶å†²çªè€Œå¤„äºæœªåˆå¹¶ï¼ˆunmergedï¼‰çŠ¶æ€çš„æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">You have unmerged paths.</span><br><span class="line">  (fix conflicts and run &quot;git commit&quot;)</span><br><span class="line"></span><br><span class="line">Unmerged paths:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to mark resolution)</span><br><span class="line"></span><br><span class="line">    both modified:      index.html</span><br><span class="line"></span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br></pre></td></tr></table></figure><p>ä»»ä½•å› åŒ…å«åˆå¹¶å†²çªè€Œæœ‰å¾…è§£å†³çš„æ–‡ä»¶ï¼Œéƒ½ä¼šä»¥æœªåˆå¹¶çŠ¶æ€æ ‡è¯†å‡ºæ¥ã€‚ Git ä¼šåœ¨æœ‰å†²çªçš„æ–‡ä»¶ä¸­åŠ å…¥æ ‡å‡†çš„å†²çªè§£å†³æ ‡è®°ï¼Œè¿™æ ·ä½ å¯ä»¥æ‰“å¼€è¿™äº›åŒ…å«å†²çªçš„æ–‡ä»¶ç„¶åæ‰‹åŠ¨è§£å†³å†²çªã€‚ å‡ºç°å†²çªçš„æ–‡ä»¶ä¼šåŒ…å«ä¸€äº›ç‰¹æ®ŠåŒºæ®µï¼Œçœ‹èµ·æ¥åƒä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:index.html</span><br><span class="line">&lt;div id=&quot;footer&quot;&gt;contact : email.support@github.com&lt;/div&gt;</span><br><span class="line">=======</span><br><span class="line">&lt;div id=&quot;footer&quot;&gt;</span><br><span class="line"> please contact us at support@github.com</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; iss53:index.html</span><br></pre></td></tr></table></figure><p>è¿™è¡¨ç¤º <code>HEAD</code> æ‰€æŒ‡ç¤ºçš„ç‰ˆæœ¬ï¼ˆä¹Ÿå°±æ˜¯ä½ çš„ <code>master</code> åˆ†æ”¯æ‰€åœ¨çš„ä½ç½®ï¼Œå› ä¸ºä½ åœ¨è¿è¡Œ <code>merge</code> å‘½ä»¤çš„æ—¶å€™å·²ç»æ£€å‡ºåˆ°äº†è¿™ä¸ªåˆ†æ”¯ï¼‰åœ¨è¿™ä¸ªåŒºæ®µçš„ä¸ŠåŠéƒ¨åˆ†ï¼ˆ<code>=======</code> çš„ä¸ŠåŠéƒ¨åˆ†ï¼‰ï¼Œè€Œ <code>iss53</code> åˆ†æ”¯æ‰€æŒ‡ç¤ºçš„ç‰ˆæœ¬åœ¨ <code>=======</code> çš„ä¸‹åŠéƒ¨åˆ†ã€‚ ä¸ºäº†è§£å†³å†²çªï¼Œä½ å¿…é¡»é€‰æ‹©ä½¿ç”¨ç”± <code>=======</code> åˆ†å‰²çš„ä¸¤éƒ¨åˆ†ä¸­çš„ä¸€ä¸ªï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥è‡ªè¡Œåˆå¹¶è¿™äº›å†…å®¹ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥é€šè¿‡æŠŠè¿™æ®µå†…å®¹æ¢æˆä¸‹é¢çš„æ ·å­æ¥è§£å†³å†²çªï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;footer&quot;&gt;</span><br><span class="line">please contact us at email.support@github.com</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°çš„å†²çªè§£å†³æ–¹æ¡ˆä»…ä¿ç•™äº†å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯çš„ä¿®æ”¹ï¼Œå¹¶ä¸” <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code> , <code>=======</code> , å’Œ <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code> è¿™äº›è¡Œè¢«å®Œå…¨åˆ é™¤äº†ã€‚ åœ¨ä½ è§£å†³äº†æ‰€æœ‰æ–‡ä»¶é‡Œçš„å†²çªä¹‹åï¼Œå¯¹æ¯ä¸ªæ–‡ä»¶ä½¿ç”¨ <code>git add</code> å‘½ä»¤æ¥å°†å…¶æ ‡è®°ä¸ºå†²çªå·²è§£å†³ã€‚ ä¸€æ—¦æš‚å­˜è¿™äº›åŸæœ¬æœ‰å†²çªçš„æ–‡ä»¶ï¼ŒGit å°±ä¼šå°†å®ƒä»¬æ ‡è®°ä¸ºå†²çªå·²è§£å†³ã€‚</p><p>å¦‚æœä½ æƒ³ä½¿ç”¨å›¾å½¢åŒ–å·¥å…·æ¥è§£å†³å†²çªï¼Œä½ å¯ä»¥è¿è¡Œ <code>git mergetool</code>ï¼Œè¯¥å‘½ä»¤ä¼šä¸ºä½ å¯åŠ¨ä¸€ä¸ªåˆé€‚çš„å¯è§†åŒ–åˆå¹¶å·¥å…·ï¼Œå¹¶å¸¦é¢†ä½ ä¸€æ­¥ä¸€æ­¥è§£å†³è¿™äº›å†²çªï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git mergetool</span><br><span class="line"></span><br><span class="line">This message is displayed because &apos;merge.tool&apos; is not configured.</span><br><span class="line">See &apos;git mergetool --tool-help&apos; or &apos;git help config&apos; for more details.</span><br><span class="line">&apos;git mergetool&apos; will now attempt to use one of the following tools:</span><br><span class="line">opendiff kdiff3 tkdiff xxdiff meld tortoisemerge gvimdiff diffuse diffmerge ecmerge p4merge araxis bc3 codecompare vimdiff emerge</span><br><span class="line">Merging:</span><br><span class="line">index.html</span><br><span class="line"></span><br><span class="line">Normal merge conflict for &apos;index.html&apos;:</span><br><span class="line">  &#123;local&#125;: modified file</span><br><span class="line">  &#123;remote&#125;: modified file</span><br><span class="line">Hit return to start merge resolution tool (opendiff):</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³ä½¿ç”¨é™¤é»˜è®¤å·¥å…·ï¼ˆåœ¨è¿™é‡Œ Git ä½¿ç”¨ <code>opendiff</code> åšä¸ºé»˜è®¤çš„åˆå¹¶å·¥å…·ï¼Œå› ä¸ºä½œè€…åœ¨ Mac ä¸Šè¿è¡Œè¯¥ç¨‹åºï¼‰å¤–çš„å…¶ä»–åˆå¹¶å·¥å…·ï¼Œä½ å¯ä»¥åœ¨ â€œä¸‹åˆ—å·¥å…·ä¸­ï¼ˆone of the following toolsï¼‰â€ è¿™å¥åé¢çœ‹åˆ°æ‰€æœ‰æ”¯æŒçš„åˆå¹¶å·¥å…·ã€‚ ç„¶åè¾“å…¥ä½ å–œæ¬¢çš„å·¥å…·åå­—å°±å¯ä»¥äº†ã€‚</p><p>ç­‰ä½ é€€å‡ºåˆå¹¶å·¥å…·ä¹‹åï¼ŒGit ä¼šè¯¢é—®åˆšæ‰çš„åˆå¹¶æ˜¯å¦æˆåŠŸã€‚ å¦‚æœä½ å›ç­”æ˜¯ï¼ŒGit ä¼šæš‚å­˜é‚£äº›æ–‡ä»¶ä»¥è¡¨æ˜å†²çªå·²è§£å†³ï¼š ä½ å¯ä»¥å†æ¬¡è¿è¡Œ <code>git status</code> æ¥ç¡®è®¤æ‰€æœ‰çš„åˆå¹¶å†²çªéƒ½å·²è¢«è§£å†³ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">All conflicts fixed but you are still merging.</span><br><span class="line">  (use &quot;git commit&quot; to conclude merge)</span><br><span class="line"></span><br><span class="line">Changes to be committed:</span><br><span class="line"></span><br><span class="line">    modified:   index.html</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ å¯¹ç»“æœæ„Ÿåˆ°æ»¡æ„ï¼Œå¹¶ä¸”ç¡®å®šä¹‹å‰æœ‰å†²çªçš„çš„æ–‡ä»¶éƒ½å·²ç»æš‚å­˜äº†ï¼Œè¿™æ—¶ä½ å¯ä»¥è¾“å…¥ <code>git commit</code> æ¥å®Œæˆåˆå¹¶æäº¤ã€‚ é»˜è®¤æƒ…å†µä¸‹æäº¤ä¿¡æ¯çœ‹èµ·æ¥åƒä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Merge branch &apos;iss53&apos;</span><br><span class="line"></span><br><span class="line">Conflicts:</span><br><span class="line">    index.html</span><br><span class="line">#</span><br><span class="line"># It looks like you may be committing a merge.</span><br><span class="line"># If this is not correct, please remove the file</span><br><span class="line">#.git/MERGE_HEAD</span><br><span class="line"># and try again.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Please enter the commit message for your changes. Lines starting</span><br><span class="line"># with &apos;#&apos; will be ignored, and an empty message aborts the commit.</span><br><span class="line"># On branch master</span><br><span class="line"># All conflicts fixed but you are still merging.</span><br><span class="line">#</span><br><span class="line"># Changes to be committed:</span><br><span class="line">#modified:   index.html</span><br><span class="line">#</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è§‰å¾—ä¸Šè¿°çš„ä¿¡æ¯ä¸å¤Ÿå……åˆ†ï¼Œä¸èƒ½å®Œå…¨ä½“ç°åˆ†æ”¯åˆå¹¶çš„è¿‡ç¨‹ï¼Œä½ å¯ä»¥ä¿®æ”¹ä¸Šè¿°ä¿¡æ¯ï¼Œæ·»åŠ ä¸€äº›ç»†èŠ‚ç»™æœªæ¥æ£€è§†è¿™ä¸ªåˆå¹¶çš„è¯»è€…ä¸€äº›å¸®åŠ©ï¼Œå‘Šè¯‰ä»–ä»¬ä½ æ˜¯å¦‚ä½•è§£å†³åˆå¹¶å†²çªçš„ï¼Œä»¥åŠç†ç”±æ˜¯ä»€ä¹ˆã€‚</p><h3 id="åˆ†æ”¯ç®¡ç†"><a href="#åˆ†æ”¯ç®¡ç†" class="headerlink" title="åˆ†æ”¯ç®¡ç†"></a>åˆ†æ”¯ç®¡ç†</h3><p>ç°åœ¨å·²ç»åˆ›å»ºã€åˆå¹¶ã€åˆ é™¤äº†ä¸€äº›åˆ†æ”¯ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸€äº›å¸¸ç”¨çš„åˆ†æ”¯ç®¡ç†å·¥å…·ã€‚</p><p><code>git branch</code> å‘½ä»¤ä¸åªæ˜¯å¯ä»¥åˆ›å»ºä¸åˆ é™¤åˆ†æ”¯ã€‚ å¦‚æœä¸åŠ ä»»ä½•å‚æ•°è¿è¡Œå®ƒï¼Œä¼šå¾—åˆ°å½“å‰æ‰€æœ‰åˆ†æ”¯çš„ä¸€ä¸ªåˆ—è¡¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br><span class="line">  iss53</span><br><span class="line">* master</span><br><span class="line">  testing</span><br></pre></td></tr></table></figure><p>æ³¨æ„ <code>master</code> åˆ†æ”¯å‰çš„ <code>*</code> å­—ç¬¦ï¼šå®ƒä»£è¡¨ç°åœ¨æ£€å‡ºçš„é‚£ä¸€ä¸ªåˆ†æ”¯ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å‰ <code>HEAD</code> æŒ‡é’ˆæ‰€æŒ‡å‘çš„åˆ†æ”¯ï¼‰ã€‚ è¿™æ„å‘³ç€å¦‚æœåœ¨è¿™æ—¶å€™æäº¤ï¼Œ<code>master</code> åˆ†æ”¯å°†ä¼šéšç€æ–°çš„å·¥ä½œå‘å‰ç§»åŠ¨ã€‚ å¦‚æœéœ€è¦æŸ¥çœ‹æ¯ä¸€ä¸ªåˆ†æ”¯çš„æœ€åä¸€æ¬¡æäº¤ï¼Œå¯ä»¥è¿è¡Œ <code>git branch -v</code> å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -v</span><br><span class="line">  iss53   93b412c fix javascript issue</span><br><span class="line">* master  7a98805 Merge branch &apos;iss53&apos;</span><br><span class="line">  testing 782fd34 add scott to the author list in the readmes</span><br></pre></td></tr></table></figure><p><code>--merged</code> ä¸ <code>--no-merged</code> è¿™ä¸¤ä¸ªæœ‰ç”¨çš„é€‰é¡¹å¯ä»¥è¿‡æ»¤è¿™ä¸ªåˆ—è¡¨ä¸­å·²ç»åˆå¹¶æˆ–å°šæœªåˆå¹¶åˆ°å½“å‰åˆ†æ”¯çš„åˆ†æ”¯ã€‚ å¦‚æœè¦æŸ¥çœ‹å“ªäº›åˆ†æ”¯å·²ç»åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼Œå¯ä»¥è¿è¡Œ <code>git branch --merged</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git branch --merged</span><br><span class="line">  iss53</span><br><span class="line">* master</span><br></pre></td></tr></table></figure><p>å› ä¸ºä¹‹å‰å·²ç»åˆå¹¶äº† <code>iss53</code> åˆ†æ”¯ï¼Œæ‰€ä»¥ç°åœ¨çœ‹åˆ°å®ƒåœ¨åˆ—è¡¨ä¸­ã€‚ åœ¨è¿™ä¸ªåˆ—è¡¨ä¸­åˆ†æ”¯åå­—å‰æ²¡æœ‰ <code>*</code> å·çš„åˆ†æ”¯é€šå¸¸å¯ä»¥ä½¿ç”¨ <code>git branch -d</code> åˆ é™¤æ‰ï¼›ä½ å·²ç»å°†å®ƒä»¬çš„å·¥ä½œæ•´åˆåˆ°äº†å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šå¤±å»ä»»ä½•ä¸œè¥¿ã€‚</p><p>æŸ¥çœ‹æ‰€æœ‰åŒ…å«æœªåˆå¹¶å·¥ä½œçš„åˆ†æ”¯ï¼Œå¯ä»¥è¿è¡Œ <code>git branch --no-merged</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch --no-merged</span><br><span class="line">  testing</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¾ç¤ºäº†å…¶ä»–åˆ†æ”¯ã€‚ å› ä¸ºå®ƒåŒ…å«äº†è¿˜æœªåˆå¹¶çš„å·¥ä½œï¼Œå°è¯•ä½¿ç”¨ <code>git branch -d</code> å‘½ä»¤åˆ é™¤å®ƒæ—¶ä¼šå¤±è´¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d testing</span><br><span class="line">error: The branch &apos;testing&apos; is not fully merged.</span><br><span class="line">If you are sure you want to delete it, run &apos;git branch -D testing&apos;.</span><br></pre></td></tr></table></figure><p>å¦‚æœçœŸçš„æƒ³è¦åˆ é™¤åˆ†æ”¯å¹¶ä¸¢æ‰é‚£äº›å·¥ä½œï¼Œå¦‚åŒå¸®åŠ©ä¿¡æ¯é‡Œæ‰€æŒ‡å‡ºçš„ï¼Œå¯ä»¥ä½¿ç”¨ <code>-D</code> é€‰é¡¹å¼ºåˆ¶åˆ é™¤å®ƒã€‚</p><h3 id="åˆ†æ”¯å¼€å‘å·¥ä½œæµ"><a href="#åˆ†æ”¯å¼€å‘å·¥ä½œæµ" class="headerlink" title="åˆ†æ”¯å¼€å‘å·¥ä½œæµ"></a>åˆ†æ”¯å¼€å‘å·¥ä½œæµ</h3><p>ç°åœ¨ä½ å·²ç»å­¦ä¼šæ–°å»ºå’Œåˆå¹¶åˆ†æ”¯ï¼Œé‚£ä¹ˆä½ å¯ä»¥æˆ–è€…åº”è¯¥ç”¨å®ƒæ¥åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬ä¼šä»‹ç»ä¸€äº›å¸¸è§çš„åˆ©ç”¨åˆ†æ”¯è¿›è¡Œå¼€å‘çš„å·¥ä½œæµç¨‹ã€‚è€Œæ­£æ˜¯ç”±äºåˆ†æ”¯ç®¡ç†çš„ä¾¿æ·ï¼Œæ‰è¡ç”Ÿå‡ºè¿™äº›å…¸å‹çš„å·¥ä½œæ¨¡å¼ï¼Œä½ å¯ä»¥æ ¹æ®é¡¹ç›®å®é™…æƒ…å†µé€‰æ‹©ä¸€ç§ç”¨ç”¨çœ‹ã€‚</p><h4 id="é•¿æœŸåˆ†æ”¯"><a href="#é•¿æœŸåˆ†æ”¯" class="headerlink" title="é•¿æœŸåˆ†æ”¯"></a>é•¿æœŸåˆ†æ”¯</h4><p>å› ä¸º Git ä½¿ç”¨ç®€å•çš„ä¸‰æ–¹åˆå¹¶ï¼Œæ‰€ä»¥å°±ç®—åœ¨ä¸€æ®µè¾ƒé•¿çš„æ—¶é—´å†…ï¼Œåå¤æŠŠä¸€ä¸ªåˆ†æ”¯åˆå¹¶å…¥å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œä¹Ÿä¸æ˜¯ä»€ä¹ˆéš¾äº‹ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ•´ä¸ªé¡¹ç›®å¼€å‘å‘¨æœŸçš„ä¸åŒé˜¶æ®µï¼Œä½ å¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šä¸ªå¼€æ”¾çš„åˆ†æ”¯ï¼›ä½ å¯ä»¥å®šæœŸåœ°æŠŠæŸäº›ç‰¹æ€§åˆ†æ”¯åˆå¹¶å…¥å…¶ä»–åˆ†æ”¯ä¸­ã€‚</p><p>è®¸å¤šä½¿ç”¨ Git çš„å¼€å‘è€…éƒ½å–œæ¬¢ä½¿ç”¨è¿™ç§æ–¹å¼æ¥å·¥ä½œï¼Œæ¯”å¦‚åªåœ¨ <code>master</code> åˆ†æ”¯ä¸Šä¿ç•™å®Œå…¨ç¨³å®šçš„ä»£ç â€”â€”æœ‰å¯èƒ½ä»…ä»…æ˜¯å·²ç»å‘å¸ƒæˆ–å³å°†å‘å¸ƒçš„ä»£ç ã€‚ ä»–ä»¬è¿˜æœ‰ä¸€äº›åä¸º <code>develop</code> æˆ–è€… <code>next</code> çš„å¹³è¡Œåˆ†æ”¯ï¼Œè¢«ç”¨æ¥åšåç»­å¼€å‘æˆ–è€…æµ‹è¯•ç¨³å®šæ€§â€”â€”è¿™äº›åˆ†æ”¯ä¸å¿…ä¿æŒç»å¯¹ç¨³å®šï¼Œä½†æ˜¯ä¸€æ—¦è¾¾åˆ°ç¨³å®šçŠ¶æ€ï¼Œå®ƒä»¬å°±å¯ä»¥è¢«åˆå¹¶å…¥ <code>master</code> åˆ†æ”¯äº†ã€‚ è¿™æ ·ï¼Œåœ¨ç¡®ä¿è¿™äº›å·²å®Œæˆçš„ç‰¹æ€§åˆ†æ”¯ï¼ˆçŸ­æœŸåˆ†æ”¯ï¼Œæ¯”å¦‚ä¹‹å‰çš„ <code>iss53</code> åˆ†æ”¯ï¼‰èƒ½å¤Ÿé€šè¿‡æ‰€æœ‰æµ‹è¯•ï¼Œå¹¶ä¸”ä¸ä¼šå¼•å…¥æ›´å¤š bug ä¹‹åï¼Œå°±å¯ä»¥åˆå¹¶å…¥ä¸»å¹²åˆ†æ”¯ä¸­ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡çš„å‘å¸ƒã€‚</p><p>äº‹å®ä¸Šæˆ‘ä»¬åˆšæ‰è®¨è®ºçš„ï¼Œæ˜¯éšç€ä½ çš„æäº¤è€Œä¸æ–­å³ç§»çš„æŒ‡é’ˆã€‚ ç¨³å®šåˆ†æ”¯çš„æŒ‡é’ˆæ€»æ˜¯åœ¨æäº¤å†å²ä¸­è½åä¸€å¤§æˆªï¼Œè€Œå‰æ²¿åˆ†æ”¯çš„æŒ‡é’ˆå¾€å¾€æ¯”è¾ƒé å‰ã€‚</p><p><img src="git-chapter-3/img1.png" alt></p><p>é€šå¸¸æŠŠä»–ä»¬æƒ³è±¡æˆæµæ°´çº¿ï¼ˆwork silosï¼‰å¯èƒ½æ›´å¥½ç†è§£ä¸€ç‚¹ï¼Œé‚£äº›ç»è¿‡æµ‹è¯•è€ƒéªŒçš„æäº¤ä¼šè¢«é´é€‰åˆ°æ›´åŠ ç¨³å®šçš„æµæ°´çº¿ä¸Šå»ã€‚</p><p><img src="git-chapter-3/img2.png" alt></p><p>ä½ å¯ä»¥ç”¨è¿™ç§æ–¹æ³•ç»´æŠ¤ä¸åŒå±‚æ¬¡çš„ç¨³å®šæ€§ã€‚ ä¸€äº›å¤§å‹é¡¹ç›®è¿˜æœ‰ä¸€ä¸ª <code>proposed</code>ï¼ˆå»ºè®®ï¼‰ æˆ– <code>pu: proposed updates</code>ï¼ˆå»ºè®®æ›´æ–°ï¼‰åˆ†æ”¯ï¼Œå®ƒå¯èƒ½å› åŒ…å«ä¸€äº›ä¸æˆç†Ÿçš„å†…å®¹è€Œä¸èƒ½è¿›å…¥ <code>next</code> æˆ–è€… <code>master</code> åˆ†æ”¯ã€‚ è¿™ä¹ˆåšçš„ç›®çš„æ˜¯ä½¿ä½ çš„åˆ†æ”¯å…·æœ‰ä¸åŒçº§åˆ«çš„ç¨³å®šæ€§ï¼›å½“å®ƒä»¬å…·æœ‰ä¸€å®šç¨‹åº¦çš„ç¨³å®šæ€§åï¼Œå†æŠŠå®ƒä»¬åˆå¹¶å…¥å…·æœ‰æ›´é«˜çº§åˆ«ç¨³å®šæ€§çš„åˆ†æ”¯ä¸­ã€‚ å†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼Œä½¿ç”¨å¤šä¸ªé•¿æœŸåˆ†æ”¯çš„æ–¹æ³•å¹¶éå¿…è¦ï¼Œä½†æ˜¯è¿™ä¹ˆåšé€šå¸¸å¾ˆæœ‰å¸®åŠ©ï¼Œå°¤å…¶æ˜¯å½“ä½ åœ¨ä¸€ä¸ªéå¸¸åºå¤§æˆ–è€…å¤æ‚çš„é¡¹ç›®ä¸­å·¥ä½œæ—¶ã€‚</p><h4 id="ç‰¹æ€§åˆ†æ”¯"><a href="#ç‰¹æ€§åˆ†æ”¯" class="headerlink" title="ç‰¹æ€§åˆ†æ”¯"></a>ç‰¹æ€§åˆ†æ”¯</h4><p>ç‰¹æ€§åˆ†æ”¯å¯¹ä»»ä½•è§„æ¨¡çš„é¡¹ç›®éƒ½é€‚ç”¨ã€‚ ç‰¹æ€§åˆ†æ”¯æ˜¯ä¸€ç§çŸ­æœŸåˆ†æ”¯ï¼Œå®ƒè¢«ç”¨æ¥å®ç°å•ä¸€ç‰¹æ€§æˆ–å…¶ç›¸å…³å·¥ä½œã€‚ ä¹Ÿè®¸ä½ ä»æ¥æ²¡æœ‰åœ¨å…¶ä»–çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆ<code>VCS</code>ï¼‰ä¸Šè¿™ä¹ˆåšè¿‡ï¼Œå› ä¸ºåœ¨é‚£äº›ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­åˆ›å»ºå’Œåˆå¹¶åˆ†æ”¯é€šå¸¸å¾ˆè´¹åŠ²ã€‚ ç„¶è€Œï¼Œåœ¨ Git ä¸­ä¸€å¤©ä¹‹å†…å¤šæ¬¡åˆ›å»ºã€ä½¿ç”¨ã€åˆå¹¶ã€åˆ é™¤åˆ†æ”¯éƒ½å¾ˆå¸¸è§ã€‚</p><p>ä½ å·²ç»åœ¨ä¸Šä¸€èŠ‚ä¸­ä½ åˆ›å»ºçš„ <code>iss53</code> å’Œ <code>hotfix</code> ç‰¹æ€§åˆ†æ”¯ä¸­çœ‹åˆ°è¿‡è¿™ç§ç”¨æ³•ã€‚ ä½ åœ¨ä¸Šä¸€èŠ‚ç”¨åˆ°çš„ç‰¹æ€§åˆ†æ”¯ï¼ˆ<code>iss53</code> å’Œ <code>hotfix</code> åˆ†æ”¯ï¼‰ä¸­æäº¤äº†ä¸€äº›æ›´æ–°ï¼Œå¹¶ä¸”åœ¨å®ƒä»¬åˆå¹¶å…¥ä¸»å¹²åˆ†æ”¯ä¹‹åï¼Œä½ åˆåˆ é™¤äº†å®ƒä»¬ã€‚ è¿™é¡¹æŠ€æœ¯èƒ½ä½¿ä½ å¿«é€Ÿå¹¶ä¸”å®Œæ•´åœ°è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆ<code>context-switch</code>ï¼‰â€”â€”å› ä¸ºä½ çš„å·¥ä½œè¢«åˆ†æ•£åˆ°ä¸åŒçš„æµæ°´çº¿ä¸­ï¼Œåœ¨ä¸åŒçš„æµæ°´çº¿ä¸­æ¯ä¸ªåˆ†æ”¯éƒ½ä»…ä¸å…¶ç›®æ ‡ç‰¹æ€§ç›¸å…³ï¼Œå› æ­¤ï¼Œåœ¨åšä»£ç å®¡æŸ¥ä¹‹ç±»çš„å·¥ä½œçš„æ—¶å€™å°±èƒ½æ›´åŠ å®¹æ˜“åœ°çœ‹å‡ºä½ åšäº†å“ªäº›æ”¹åŠ¨ã€‚ ä½ å¯ä»¥æŠŠåšå‡ºçš„æ”¹åŠ¨åœ¨ç‰¹æ€§åˆ†æ”¯ä¸­ä¿ç•™å‡ åˆ†é’Ÿã€å‡ å¤©ç”šè‡³å‡ ä¸ªæœˆï¼Œç­‰å®ƒä»¬æˆç†Ÿä¹‹åå†åˆå¹¶ï¼Œè€Œä¸ç”¨åœ¨ä¹å®ƒä»¬å»ºç«‹çš„é¡ºåºæˆ–å·¥ä½œè¿›åº¦ã€‚</p><p>è€ƒè™‘è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼Œä½ åœ¨ <code>master</code> åˆ†æ”¯ä¸Šå·¥ä½œåˆ° <code>C1</code>ï¼Œè¿™æ—¶ä¸ºäº†è§£å†³ä¸€ä¸ªé—®é¢˜è€Œæ–°å»º <code>iss91</code> åˆ†æ”¯ï¼Œåœ¨ <code>iss91</code> åˆ†æ”¯ä¸Šå·¥ä½œåˆ° <code>C4</code>ï¼Œç„¶è€Œå¯¹äºé‚£ä¸ªé—®é¢˜ä½ åˆæœ‰äº†æ–°çš„æƒ³æ³•ï¼Œäºæ˜¯ä½ å†æ–°å»ºä¸€ä¸ª <code>iss91v2</code> åˆ†æ”¯è¯•å›¾ç”¨å¦ä¸€ç§æ–¹æ³•è§£å†³é‚£ä¸ªé—®é¢˜ï¼Œæ¥ç€ä½ å›åˆ° <code>master</code> åˆ†æ”¯å·¥ä½œäº†ä¸€ä¼šå„¿ï¼Œä½ åˆå†’å‡ºäº†ä¸€ä¸ªä¸å¤ªç¡®å®šçš„æƒ³æ³•ï¼Œä½ ä¾¿åœ¨ <code>C10</code> çš„æ—¶å€™æ–°å»ºä¸€ä¸ª <code>dumbidea</code> åˆ†æ”¯ï¼Œå¹¶åœ¨ä¸Šé¢åšäº›å®éªŒã€‚ ä½ çš„æäº¤å†å²çœ‹èµ·æ¥åƒä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><p><img src="git-chapter-3/img3.png" alt></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å‡è®¾ä¸¤ä»¶äº‹æƒ…ï¼šä½ å†³å®šä½¿ç”¨ç¬¬äºŒä¸ªæ–¹æ¡ˆæ¥è§£å†³é‚£ä¸ªé—®é¢˜ï¼Œå³ä½¿ç”¨åœ¨ <code>iss91v2</code> åˆ†æ”¯ä¸­æ–¹æ¡ˆï¼›å¦å¤–ï¼Œä½ å°† <code>dumbidea</code> åˆ†æ”¯æ‹¿ç»™ä½ çš„åŒäº‹çœ‹è¿‡ä¹‹åï¼Œç»“æœå‘ç°è¿™æ˜¯ä¸ªæƒŠäººä¹‹ä¸¾ã€‚ è¿™æ—¶ä½ å¯ä»¥æŠ›å¼ƒ <code>iss91</code> åˆ†æ”¯ï¼ˆå³ä¸¢å¼ƒ <code>C5</code> å’Œ <code>C6</code> æäº¤ï¼‰ï¼Œç„¶åæŠŠå¦å¤–ä¸¤ä¸ªåˆ†æ”¯åˆå¹¶å…¥ä¸»å¹²åˆ†æ”¯ã€‚ æœ€ç»ˆä½ çš„æäº¤å†å²çœ‹èµ·æ¥åƒä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><p><img src="git-chapter-3/img4.png" alt></p><p>æˆ‘ä»¬å°†ä¼šåœ¨ <a href="http://pengzhenjin.top/2018/06/09/Gitï¼šåˆ†å¸ƒå¼">åˆ†å¸ƒå¼ Git</a> ä¸­å‘ä½ æ­ç¤ºæ›´å¤šæœ‰å…³åˆ†æ”¯å·¥ä½œæµçš„ç»†èŠ‚ï¼Œå› æ­¤ï¼Œè¯·ç¡®ä¿ä½ é˜…è¯»å®Œé‚£ä¸ªç« èŠ‚ä¹‹åï¼Œå†æ¥å†³å®šä½ çš„ä¸‹ä¸ªé¡¹ç›®è¦ä½¿ç”¨ä»€ä¹ˆæ ·çš„åˆ†æ”¯ç­–ç•¥ï¼ˆbranching schemeï¼‰ã€‚</p><p>è¯·ç‰¢è®°ï¼Œå½“ä½ åšè¿™ä¹ˆå¤šæ“ä½œçš„æ—¶å€™ï¼Œè¿™äº›åˆ†æ”¯å…¨éƒ¨éƒ½å­˜äºæœ¬åœ°ã€‚ å½“ä½ æ–°å»ºå’Œåˆå¹¶åˆ†æ”¯çš„æ—¶å€™ï¼Œæ‰€æœ‰è¿™ä¸€åˆ‡éƒ½åªå‘ç”Ÿåœ¨ä½ æœ¬åœ°çš„ Git ç‰ˆæœ¬åº“ä¸­ â€”â€” æ²¡æœ‰ä¸æœåŠ¡å™¨å‘ç”Ÿäº¤äº’ã€‚</p><h3 id="è¿œç¨‹åˆ†æ”¯"><a href="#è¿œç¨‹åˆ†æ”¯" class="headerlink" title="è¿œç¨‹åˆ†æ”¯"></a>è¿œç¨‹åˆ†æ”¯</h3><p>è¿œç¨‹å¼•ç”¨æ˜¯å¯¹è¿œç¨‹ä»“åº“çš„å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰ï¼ŒåŒ…æ‹¬åˆ†æ”¯ã€æ ‡ç­¾ç­‰ç­‰ã€‚ ä½ å¯ä»¥é€šè¿‡ <code>git ls-remote (remote)</code> æ¥æ˜¾å¼åœ°è·å¾—è¿œç¨‹å¼•ç”¨çš„å®Œæ•´åˆ—è¡¨ï¼Œæˆ–è€…é€šè¿‡ <code>git remote show (remote)</code> è·å¾—è¿œç¨‹åˆ†æ”¯çš„æ›´å¤šä¿¡æ¯ã€‚ ç„¶è€Œï¼Œä¸€ä¸ªæ›´å¸¸è§çš„åšæ³•æ˜¯åˆ©ç”¨è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯ã€‚</p><p>è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯æ˜¯è¿œç¨‹åˆ†æ”¯çŠ¶æ€çš„å¼•ç”¨ã€‚ å®ƒä»¬æ˜¯ä½ ä¸èƒ½ç§»åŠ¨çš„æœ¬åœ°å¼•ç”¨ï¼Œå½“ä½ åšä»»ä½•ç½‘ç»œé€šä¿¡æ“ä½œæ—¶ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨ç§»åŠ¨ã€‚ è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯åƒæ˜¯ä½ ä¸Šæ¬¡è¿æ¥åˆ°è¿œç¨‹ä»“åº“æ—¶ï¼Œé‚£äº›åˆ†æ”¯æ‰€å¤„çŠ¶æ€çš„ä¹¦ç­¾ã€‚</p><p>å®ƒä»¬ä»¥ <code>(remote)/(branch)</code> å½¢å¼å‘½åã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³è¦çœ‹ä½ æœ€åä¸€æ¬¡ä¸è¿œç¨‹ä»“åº“ <code>origin</code> é€šä¿¡æ—¶ <code>master</code> åˆ†æ”¯çš„çŠ¶æ€ï¼Œä½ å¯ä»¥æŸ¥çœ‹ <code>origin/master</code> åˆ†æ”¯ã€‚ ä½ ä¸åŒäº‹åˆä½œè§£å†³ä¸€ä¸ªé—®é¢˜å¹¶ä¸”ä»–ä»¬æ¨é€äº†ä¸€ä¸ª <code>iss53</code> åˆ†æ”¯ï¼Œä½ å¯èƒ½æœ‰è‡ªå·±çš„æœ¬åœ° <code>iss53</code> åˆ†æ”¯ï¼›ä½†æ˜¯åœ¨æœåŠ¡å™¨ä¸Šçš„åˆ†æ”¯ä¼šæŒ‡å‘ <code>origin/iss53</code> çš„æäº¤ã€‚</p><p>è¿™å¯èƒ½æœ‰ä¸€ç‚¹å„¿éš¾ä»¥ç†è§£ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚ å‡è®¾ä½ çš„ç½‘ç»œé‡Œæœ‰ä¸€ä¸ªåœ¨ <code>git.ourcompany.com</code> çš„ Git æœåŠ¡å™¨ã€‚ å¦‚æœä½ ä»è¿™é‡Œå…‹éš†ï¼ŒGit çš„ <code>clone</code> å‘½ä»¤ä¼šä¸ºä½ è‡ªåŠ¨å°†å…¶å‘½åä¸º <code>origin</code>ï¼Œæ‹‰å–å®ƒçš„æ‰€æœ‰æ•°æ®ï¼Œåˆ›å»ºä¸€ä¸ªæŒ‡å‘å®ƒçš„ <code>master</code> åˆ†æ”¯çš„æŒ‡é’ˆï¼Œå¹¶ä¸”åœ¨æœ¬åœ°å°†å…¶å‘½åä¸º <code>origin/master</code>ã€‚ Git ä¹Ÿä¼šç»™ä½ ä¸€ä¸ªä¸ <code>origin</code> çš„ <code>master</code> åˆ†æ”¯åœ¨æŒ‡å‘åŒä¸€ä¸ªåœ°æ–¹çš„æœ¬åœ° <code>master</code> åˆ†æ”¯ï¼Œè¿™æ ·ä½ å°±æœ‰å·¥ä½œçš„åŸºç¡€ã€‚</p><p><img src="git-chapter-4/img1.png" alt></p><p>å¦‚æœä½ åœ¨æœ¬åœ°çš„ <code>master</code> åˆ†æ”¯åšäº†ä¸€äº›å·¥ä½œï¼Œä¸æ­¤åŒæ—¶ï¼Œå…¶ä»–äººæ¨é€æäº¤åˆ° <code>git.ourcompany.com</code> å¹¶æ›´æ–°äº†å®ƒçš„ <code>master</code> åˆ†æ”¯ï¼Œé‚£ä¹ˆä½ çš„æäº¤å†å²å°†å‘ä¸åŒçš„æ–¹å‘å‰è¿›ã€‚ å¦å¤–ï¼Œåªè¦ä½ ä¸ä¸ <code>origin</code> æœåŠ¡å™¨è¿æ¥ï¼Œä½ çš„ <code>origin/master</code> æŒ‡é’ˆå°±ä¸ä¼šç§»åŠ¨ã€‚</p><p><img src="git-chapter-4/img2.png" alt></p><p>å¦‚æœè¦åŒæ­¥ä½ çš„å·¥ä½œï¼Œè¿è¡Œ <code>git fetch origin</code> å‘½ä»¤ã€‚ è¿™ä¸ªå‘½ä»¤æŸ¥æ‰¾ â€œoriginâ€ æ˜¯å“ªä¸€ä¸ªæœåŠ¡å™¨ï¼ˆåœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒæ˜¯ <code>git.ourcompany.com</code>ï¼‰ï¼Œä»ä¸­æŠ“å–æœ¬åœ°æ²¡æœ‰çš„æ•°æ®ï¼Œå¹¶ä¸”æ›´æ–°æœ¬åœ°æ•°æ®åº“ï¼Œç§»åŠ¨ <code>origin/master</code> æŒ‡é’ˆæŒ‡å‘æ–°çš„ã€æ›´æ–°åçš„ä½ç½®ã€‚</p><p><img src="git-chapter-4/img3.png" alt></p><p>ä¸ºäº†æ¼”ç¤ºæœ‰å¤šä¸ªè¿œç¨‹ä»“åº“ä¸è¿œç¨‹åˆ†æ”¯çš„æƒ…å†µï¼Œæˆ‘ä»¬å‡å®šä½ æœ‰å¦ä¸€ä¸ªå†…éƒ¨ Git æœåŠ¡å™¨ï¼Œä»…ç”¨äºä½ çš„ sprint å°ç»„çš„å¼€å‘å·¥ä½œã€‚ è¿™ä¸ªæœåŠ¡å™¨ä½äº <code>git.team1.ourcompany.com</code>ã€‚ ä½ å¯ä»¥è¿è¡Œ <code>git remote add</code> å‘½ä»¤æ·»åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“å¼•ç”¨åˆ°å½“å‰çš„é¡¹ç›®ï¼Œè¿™ä¸ªå‘½ä»¤æˆ‘ä»¬ä¼šåœ¨ <a href="http://pengzhenjin.top/2018/06/06/Gitï¼šåŸºç¡€">Git åŸºç¡€</a> ä¸­è¯¦ç»†è¯´æ˜ã€‚ å°†è¿™ä¸ªè¿œç¨‹ä»“åº“å‘½åä¸º <code>teamone</code>ï¼Œå°†å…¶ä½œä¸ºæ•´ä¸ª URL çš„ç¼©å†™ã€‚</p><p><img src="git-chapter-4/img4.png" alt></p><p>ç°åœ¨ï¼Œå¯ä»¥è¿è¡Œ <code>git fetch teamone</code> æ¥æŠ“å–è¿œç¨‹ä»“åº“ <code>teamone</code> æœ‰è€Œæœ¬åœ°æ²¡æœ‰çš„æ•°æ®ã€‚ å› ä¸ºé‚£å°æœåŠ¡å™¨ä¸Šç°æœ‰çš„æ•°æ®æ˜¯ <code>origin</code> æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ªå­é›†ï¼Œæ‰€ä»¥ Git å¹¶ä¸ä¼šæŠ“å–æ•°æ®è€Œæ˜¯ä¼šè®¾ç½®è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯ <code>teamone/master</code> æŒ‡å‘ <code>teamone</code> çš„ <code>master</code> åˆ†æ”¯ã€‚</p><p><img src="git-chapter-4/img5.png" alt></p><h4 id="æ¨é€"><a href="#æ¨é€" class="headerlink" title="æ¨é€"></a>æ¨é€</h4><p>å½“ä½ æƒ³è¦å…¬å¼€åˆ†äº«ä¸€ä¸ªåˆ†æ”¯æ—¶ï¼Œéœ€è¦å°†å…¶æ¨é€åˆ°æœ‰å†™å…¥æƒé™çš„è¿œç¨‹ä»“åº“ä¸Šã€‚ æœ¬åœ°çš„åˆ†æ”¯å¹¶ä¸ä¼šè‡ªåŠ¨ä¸è¿œç¨‹ä»“åº“åŒæ­¥â€”â€”ä½ å¿…é¡»æ˜¾å¼åœ°æ¨é€æƒ³è¦åˆ†äº«çš„åˆ†æ”¯ã€‚ è¿™æ ·ï¼Œä½ å°±å¯ä»¥æŠŠä¸æ„¿æ„åˆ†äº«çš„å†…å®¹æ”¾åˆ°ç§äººåˆ†æ”¯ä¸Šï¼Œè€Œå°†éœ€è¦å’Œåˆ«äººåä½œçš„å†…å®¹æ¨é€åˆ°å…¬å¼€åˆ†æ”¯ã€‚</p><p>å¦‚æœå¸Œæœ›å’Œåˆ«äººä¸€èµ·åœ¨åä¸º <code>serverfix</code> çš„åˆ†æ”¯ä¸Šå·¥ä½œï¼Œä½ å¯ä»¥åƒæ¨é€ç¬¬ä¸€ä¸ªåˆ†æ”¯é‚£æ ·æ¨é€å®ƒã€‚ è¿è¡Œ <code>git push (remote) (branch)</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin serverfix</span><br><span class="line">Counting objects: 24, done.</span><br><span class="line">Delta compression using up to 8 threads.</span><br><span class="line">Compressing objects: 100% (15/15), done.</span><br><span class="line">Writing objects: 100% (24/24), 1.91 KiB | 0 bytes/s, done.</span><br><span class="line">Total 24 (delta 2), reused 0 (delta 0)</span><br><span class="line">To https://github.com/schacon/simplegit</span><br><span class="line"> * [new branch]      serverfix -&gt; serverfix</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰äº›å·¥ä½œè¢«ç®€åŒ–äº†ã€‚ Git è‡ªåŠ¨å°† <code>serverfix</code> åˆ†æ”¯åå­—å±•å¼€ä¸º <code>refs/heads/serverfix:refs/heads/serverfix</code>ï¼Œé‚£æ„å‘³ç€ï¼Œâ€œæ¨é€æœ¬åœ°çš„ <code>serverfix</code> åˆ†æ”¯æ¥æ›´æ–°è¿œç¨‹ä»“åº“ä¸Šçš„ <code>serverfix</code> åˆ†æ”¯ã€‚â€ æˆ‘ä»¬å°†ä¼šè¯¦ç»†å­¦ä¹  <a href="http://pengzhenjin.top/2018/06/12/Gitï¼šå†…éƒ¨åŸç†">Git å†…éƒ¨åŸç†</a> çš„ <code>refs/heads/</code> éƒ¨åˆ†ï¼Œä½†æ˜¯ç°åœ¨å¯ä»¥å…ˆæŠŠå®ƒæ”¾åœ¨å„¿ã€‚ ä½ ä¹Ÿå¯ä»¥è¿è¡Œ <code>git push origin serverfix:serverfix</code>ï¼Œå®ƒä¼šåšåŒæ ·çš„äº‹â€”â€”ä¹Ÿå°±æ˜¯è¯´â€œæ¨é€æœ¬åœ°çš„ <code>serverfix</code> åˆ†æ”¯ï¼Œå°†å…¶ä½œä¸ºè¿œç¨‹ä»“åº“çš„ <code>serverfix</code> åˆ†æ”¯â€ å¯ä»¥é€šè¿‡è¿™ç§æ ¼å¼æ¥æ¨é€æœ¬åœ°åˆ†æ”¯åˆ°ä¸€ä¸ªå‘½åä¸ç›¸åŒçš„è¿œç¨‹åˆ†æ”¯ã€‚ å¦‚æœå¹¶ä¸æƒ³è®©è¿œç¨‹ä»“åº“ä¸Šçš„åˆ†æ”¯å«åš <code>serverfix</code>ï¼Œå¯ä»¥è¿è¡Œ <code>git push origin serverfix:awesomebranch</code> æ¥å°†æœ¬åœ°çš„ <code>serverfix</code> åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“ä¸Šçš„ <code>awesomebranch</code> åˆ†æ”¯ã€‚</p><p>ä¸‹ä¸€æ¬¡å…¶ä»–åä½œè€…ä»æœåŠ¡å™¨ä¸ŠæŠ“å–æ•°æ®æ—¶ï¼Œä»–ä»¬ä¼šåœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ªè¿œç¨‹åˆ†æ”¯ <code>origin/serverfix</code>ï¼ŒæŒ‡å‘æœåŠ¡å™¨çš„ <code>serverfix</code> åˆ†æ”¯çš„å¼•ç”¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch origin</span><br><span class="line">remote: Counting objects: 7, done.</span><br><span class="line">remote: Compressing objects: 100% (2/2), done.</span><br><span class="line">remote: Total 3 (delta 0), reused 3 (delta 0)</span><br><span class="line">Unpacking objects: 100% (3/3), done.</span><br><span class="line">From https://github.com/schacon/simplegit</span><br><span class="line"> * [new branch]      serverfix    -&gt; origin/serverfix</span><br></pre></td></tr></table></figure><p>è¦ç‰¹åˆ«æ³¨æ„çš„ä¸€ç‚¹æ˜¯å½“æŠ“å–åˆ°æ–°çš„è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯æ—¶ï¼Œæœ¬åœ°ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä»½å¯ç¼–è¾‘çš„å‰¯æœ¬ï¼ˆæ‹·è´ï¼‰ã€‚ æ¢ä¸€å¥è¯è¯´ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¸ä¼šæœ‰ä¸€ä¸ªæ–°çš„ <code>serverfix</code> åˆ†æ”¯â€”â€”åªæœ‰ä¸€ä¸ªä¸å¯ä»¥ä¿®æ”¹çš„ <code>origin/serverfix</code> æŒ‡é’ˆã€‚</p><p>å¯ä»¥è¿è¡Œ <code>git merge origin/serverfix</code> å°†è¿™äº›å·¥ä½œåˆå¹¶åˆ°å½“å‰æ‰€åœ¨çš„åˆ†æ”¯ã€‚ å¦‚æœæƒ³è¦åœ¨è‡ªå·±çš„ <code>serverfix</code> åˆ†æ”¯ä¸Šå·¥ä½œï¼Œå¯ä»¥å°†å…¶å»ºç«‹åœ¨è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯ä¹‹ä¸Šï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b serverfix origin/serverfix</span><br><span class="line">Branch serverfix set up to track remote branch serverfix from origin.</span><br><span class="line">Switched to a new branch &apos;serverfix&apos;</span><br></pre></td></tr></table></figure><p>è¿™ä¼šç»™ä½ ä¸€ä¸ªç”¨äºå·¥ä½œçš„æœ¬åœ°åˆ†æ”¯ï¼Œå¹¶ä¸”èµ·ç‚¹ä½äº <code>origin/serverfix</code>ã€‚</p><h4 id="è·Ÿè¸ªåˆ†æ”¯"><a href="#è·Ÿè¸ªåˆ†æ”¯" class="headerlink" title="è·Ÿè¸ªåˆ†æ”¯"></a>è·Ÿè¸ªåˆ†æ”¯</h4><p>ä»ä¸€ä¸ªè¿œç¨‹è·Ÿè¸ªåˆ†æ”¯æ£€å‡ºä¸€ä¸ªæœ¬åœ°åˆ†æ”¯ä¼šè‡ªåŠ¨åˆ›å»ºæ‰€è°“çš„â€œè·Ÿè¸ªåˆ†æ”¯â€ï¼ˆå®ƒè·Ÿè¸ªçš„åˆ†æ”¯å«åšâ€œä¸Šæ¸¸åˆ†æ”¯â€ï¼‰ã€‚ è·Ÿè¸ªåˆ†æ”¯æ˜¯ä¸è¿œç¨‹åˆ†æ”¯æœ‰ç›´æ¥å…³ç³»çš„æœ¬åœ°åˆ†æ”¯ã€‚ å¦‚æœåœ¨ä¸€ä¸ªè·Ÿè¸ªåˆ†æ”¯ä¸Šè¾“å…¥ <code>git pull</code>ï¼ŒGit èƒ½è‡ªåŠ¨åœ°è¯†åˆ«å»å“ªä¸ªæœåŠ¡å™¨ä¸ŠæŠ“å–ã€åˆå¹¶åˆ°å“ªä¸ªåˆ†æ”¯ã€‚</p><p>å½“å…‹éš†ä¸€ä¸ªä»“åº“æ—¶ï¼Œå®ƒé€šå¸¸ä¼šè‡ªåŠ¨åœ°åˆ›å»ºä¸€ä¸ªè·Ÿè¸ª <code>origin/master</code> çš„ <code>master</code> åˆ†æ”¯ã€‚ ç„¶è€Œï¼Œå¦‚æœä½ æ„¿æ„çš„è¯å¯ä»¥è®¾ç½®å…¶ä»–çš„è·Ÿè¸ªåˆ†æ”¯ï¼Œæˆ–æ˜¯ä¸€ä¸ªåœ¨å…¶ä»–è¿œç¨‹ä»“åº“ä¸Šçš„è·Ÿè¸ªåˆ†æ”¯ï¼Œåˆæˆ–è€…ä¸è·Ÿè¸ª <code>master</code> åˆ†æ”¯ã€‚ æœ€ç®€å•çš„å®ä¾‹å°±æ˜¯åƒä¹‹å‰çœ‹åˆ°çš„é‚£æ ·ï¼Œè¿è¡Œ <code>git checkout -b [branch] [remotename]/[branch]</code>ã€‚ è¿™æ˜¯ä¸€ä¸ªååˆ†å¸¸ç”¨çš„æ“ä½œæ‰€ä»¥ Git æä¾›äº† <code>--track</code> å¿«æ·æ–¹å¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout --track origin/serverfix</span><br><span class="line">Branch serverfix set up to track remote branch serverfix from origin.</span><br><span class="line">Switched to a new branch &apos;serverfix&apos;</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦å°†æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯è®¾ç½®ä¸ºä¸åŒåå­—ï¼Œä½ å¯ä»¥è½»æ¾åœ°ä½¿ç”¨ä¸Šä¸€ä¸ªå‘½ä»¤å¢åŠ ä¸€ä¸ªä¸åŒåå­—çš„æœ¬åœ°åˆ†æ”¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b sf origin/serverfix</span><br><span class="line">Branch sf set up to track remote branch serverfix from origin.</span><br><span class="line">Switched to a new branch &apos;sf&apos;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæœ¬åœ°åˆ†æ”¯ <code>sf</code> ä¼šè‡ªåŠ¨ä» <code>origin/serverfix</code> æ‹‰å–ã€‚</p><p>è®¾ç½®å·²æœ‰çš„æœ¬åœ°åˆ†æ”¯è·Ÿè¸ªä¸€ä¸ªåˆšåˆšæ‹‰å–ä¸‹æ¥çš„è¿œç¨‹åˆ†æ”¯ï¼Œæˆ–è€…æƒ³è¦ä¿®æ”¹æ­£åœ¨è·Ÿè¸ªçš„ä¸Šæ¸¸åˆ†æ”¯ï¼Œä½ å¯ä»¥åœ¨ä»»æ„æ—¶é—´ä½¿ç”¨ <code>-u</code> æˆ– <code>--set-upstream-to</code> é€‰é¡¹è¿è¡Œ <code>git branch</code> æ¥æ˜¾å¼åœ°è®¾ç½®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -u origin/serverfix</span><br><span class="line">Branch serverfix set up to track remote branch serverfix from origin.</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦æŸ¥çœ‹è®¾ç½®çš„æ‰€æœ‰è·Ÿè¸ªåˆ†æ”¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>git branch</code> çš„ <code>-vv</code> é€‰é¡¹ã€‚ è¿™ä¼šå°†æ‰€æœ‰çš„æœ¬åœ°åˆ†æ”¯åˆ—å‡ºæ¥å¹¶ä¸”åŒ…å«æ›´å¤šçš„ä¿¡æ¯ï¼Œå¦‚æ¯ä¸€ä¸ªåˆ†æ”¯æ­£åœ¨è·Ÿè¸ªå“ªä¸ªè¿œç¨‹åˆ†æ”¯ä¸æœ¬åœ°åˆ†æ”¯æ˜¯å¦æ˜¯é¢†å…ˆã€è½åæˆ–æ˜¯éƒ½æœ‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -vv</span><br><span class="line">  iss53     7e424c3 [origin/iss53: ahead 2] forgot the brackets</span><br><span class="line">  master    1ae2a45 [origin/master] deploying index fix</span><br><span class="line">* serverfix f8674d9 [teamone/server-fix-good: ahead 3, behind 1] this should do it</span><br><span class="line">  testing   5ea463a trying something new</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯ä»¥çœ‹åˆ° <code>iss53</code> åˆ†æ”¯æ­£åœ¨è·Ÿè¸ª <code>origin/iss53</code> å¹¶ä¸” â€œaheadâ€ æ˜¯ 2ï¼Œæ„å‘³ç€æœ¬åœ°æœ‰ä¸¤ä¸ªæäº¤è¿˜æ²¡æœ‰æ¨é€åˆ°æœåŠ¡å™¨ä¸Šã€‚ ä¹Ÿèƒ½çœ‹åˆ° <code>master</code> åˆ†æ”¯æ­£åœ¨è·Ÿè¸ª <code>origin/master</code> åˆ†æ”¯å¹¶ä¸”æ˜¯æœ€æ–°çš„ã€‚ æ¥ä¸‹æ¥å¯ä»¥çœ‹åˆ° <code>serverfix</code> åˆ†æ”¯æ­£åœ¨è·Ÿè¸ª <code>teamone</code> æœåŠ¡å™¨ä¸Šçš„ <code>server-fix-good</code> åˆ†æ”¯å¹¶ä¸”é¢†å…ˆ 3 è½å 1ï¼Œæ„å‘³ç€æœåŠ¡å™¨ä¸Šæœ‰ä¸€æ¬¡æäº¤è¿˜æ²¡æœ‰åˆå¹¶å…¥åŒæ—¶æœ¬åœ°æœ‰ä¸‰æ¬¡æäº¤è¿˜æ²¡æœ‰æ¨é€ã€‚ æœ€åçœ‹åˆ° <code>testing</code> åˆ†æ”¯å¹¶æ²¡æœ‰è·Ÿè¸ªä»»ä½•è¿œç¨‹åˆ†æ”¯ã€‚</p><p>éœ€è¦é‡ç‚¹æ³¨æ„çš„ä¸€ç‚¹æ˜¯è¿™äº›æ•°å­—çš„å€¼æ¥è‡ªäºä½ ä»æ¯ä¸ªæœåŠ¡å™¨ä¸Šæœ€åä¸€æ¬¡æŠ“å–çš„æ•°æ®ã€‚ è¿™ä¸ªå‘½ä»¤å¹¶æ²¡æœ‰è¿æ¥æœåŠ¡å™¨ï¼Œå®ƒåªä¼šå‘Šè¯‰ä½ å…³äºæœ¬åœ°ç¼“å­˜çš„æœåŠ¡å™¨æ•°æ®ã€‚ å¦‚æœæƒ³è¦ç»Ÿè®¡æœ€æ–°çš„é¢†å…ˆä¸è½åæ•°å­—ï¼Œéœ€è¦åœ¨è¿è¡Œæ­¤å‘½ä»¤å‰æŠ“å–æ‰€æœ‰çš„è¿œç¨‹ä»“åº“ã€‚ å¯ä»¥åƒè¿™æ ·åšï¼š<code>$ git fetch --all; git branch -vv</code></p><h4 id="æ‹‰å–"><a href="#æ‹‰å–" class="headerlink" title="æ‹‰å–"></a>æ‹‰å–</h4><p>å½“ <code>git fetch</code> å‘½ä»¤ä»æœåŠ¡å™¨ä¸ŠæŠ“å–æœ¬åœ°æ²¡æœ‰çš„æ•°æ®æ—¶ï¼Œå®ƒå¹¶ä¸ä¼šä¿®æ”¹å·¥ä½œç›®å½•ä¸­çš„å†…å®¹ã€‚ å®ƒåªä¼šè·å–æ•°æ®ç„¶åè®©ä½ è‡ªå·±åˆå¹¶ã€‚ ç„¶è€Œï¼Œæœ‰ä¸€ä¸ªå‘½ä»¤å«ä½œ <code>git pull</code> åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å®ƒçš„å«ä¹‰æ˜¯ä¸€ä¸ª <code>git fetch</code> ç´§æ¥ç€ä¸€ä¸ª <code>git merge</code> å‘½ä»¤ã€‚ å¦‚æœæœ‰ä¸€ä¸ªåƒä¹‹å‰ç« èŠ‚ä¸­æ¼”ç¤ºçš„è®¾ç½®å¥½çš„è·Ÿè¸ªåˆ†æ”¯ï¼Œä¸ç®¡å®ƒæ˜¯æ˜¾å¼åœ°è®¾ç½®è¿˜æ˜¯é€šè¿‡ <code>clone</code> æˆ– <code>checkout</code> å‘½ä»¤ä¸ºä½ åˆ›å»ºçš„ï¼Œ<code>git pull</code> éƒ½ä¼šæŸ¥æ‰¾å½“å‰åˆ†æ”¯æ‰€è·Ÿè¸ªçš„æœåŠ¡å™¨ä¸åˆ†æ”¯ï¼Œä»æœåŠ¡å™¨ä¸ŠæŠ“å–æ•°æ®ç„¶åå°è¯•åˆå¹¶å…¥é‚£ä¸ªè¿œç¨‹åˆ†æ”¯ã€‚</p><p>ç”±äº <code>git pull</code> çš„é­”æ³•ç»å¸¸ä»¤äººå›°æƒ‘æ‰€ä»¥é€šå¸¸å•ç‹¬æ˜¾å¼åœ°ä½¿ç”¨ <code>fetch</code> ä¸ <code>merge</code> å‘½ä»¤ä¼šæ›´å¥½ä¸€äº›ã€‚</p><h4 id="åˆ é™¤è¿œç¨‹åˆ†æ”¯"><a href="#åˆ é™¤è¿œç¨‹åˆ†æ”¯" class="headerlink" title="åˆ é™¤è¿œç¨‹åˆ†æ”¯"></a>åˆ é™¤è¿œç¨‹åˆ†æ”¯</h4><p>å‡è®¾ä½ å·²ç»é€šè¿‡è¿œç¨‹åˆ†æ”¯åšå®Œæ‰€æœ‰çš„å·¥ä½œäº†â€”â€”ä¹Ÿå°±æ˜¯è¯´ä½ å’Œä½ çš„åä½œè€…å·²ç»å®Œæˆäº†ä¸€ä¸ªç‰¹æ€§å¹¶ä¸”å°†å…¶åˆå¹¶åˆ°äº†è¿œç¨‹ä»“åº“çš„ <code>master</code> åˆ†æ”¯ï¼ˆæˆ–ä»»ä½•å…¶ä»–ç¨³å®šä»£ç åˆ†æ”¯ï¼‰ã€‚ å¯ä»¥è¿è¡Œå¸¦æœ‰ <code>--delete</code> é€‰é¡¹çš„ <code>git push</code> å‘½ä»¤æ¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯ã€‚ å¦‚æœæƒ³è¦ä»æœåŠ¡å™¨ä¸Šåˆ é™¤ <code>serverfix</code> åˆ†æ”¯ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin --delete serverfix</span><br><span class="line">To https://github.com/schacon/simplegit</span><br><span class="line"> - [deleted]         serverfix</span><br></pre></td></tr></table></figure><p>åŸºæœ¬ä¸Šè¿™ä¸ªå‘½ä»¤åšçš„åªæ˜¯ä»æœåŠ¡å™¨ä¸Šç§»é™¤è¿™ä¸ªæŒ‡é’ˆã€‚ Git æœåŠ¡å™¨é€šå¸¸ä¼šä¿ç•™æ•°æ®ä¸€æ®µæ—¶é—´ç›´åˆ°åƒåœ¾å›æ”¶è¿è¡Œï¼Œæ‰€ä»¥å¦‚æœä¸å°å¿ƒåˆ é™¤æ‰äº†ï¼Œé€šå¸¸æ˜¯å¾ˆå®¹æ˜“æ¢å¤çš„ã€‚</p><h3 id="å˜åŸº"><a href="#å˜åŸº" class="headerlink" title="å˜åŸº"></a>å˜åŸº</h3><p>åœ¨ Git ä¸­æ•´åˆæ¥è‡ªä¸åŒåˆ†æ”¯çš„ä¿®æ”¹ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š<code>merge</code> ä»¥åŠ <code>rebase</code>ã€‚ åœ¨æœ¬èŠ‚ä¸­æˆ‘ä»¬å°†å­¦ä¹ ä»€ä¹ˆæ˜¯â€œå˜åŸºâ€ï¼Œæ€æ ·ä½¿ç”¨â€œå˜åŸºâ€ï¼Œå¹¶å°†å±•ç¤ºè¯¥æ“ä½œçš„æƒŠè‰³ä¹‹å¤„ï¼Œä»¥åŠæŒ‡å‡ºåœ¨ä½•ç§æƒ…å†µä¸‹ä½ åº”é¿å…ä½¿ç”¨å®ƒã€‚</p><h4 id="å˜åŸºçš„åŸºæœ¬æ“ä½œ"><a href="#å˜åŸºçš„åŸºæœ¬æ“ä½œ" class="headerlink" title="å˜åŸºçš„åŸºæœ¬æ“ä½œ"></a>å˜åŸºçš„åŸºæœ¬æ“ä½œ</h4><p>è¯·å›é¡¾ä¹‹å‰åœ¨ åˆ†æ”¯çš„åˆå¹¶ ä¸­çš„ä¸€ä¸ªä¾‹å­ï¼Œä½ ä¼šçœ‹åˆ°å¼€å‘ä»»åŠ¡åˆ†å‰åˆ°ä¸¤ä¸ªä¸åŒåˆ†æ”¯ï¼Œåˆå„è‡ªæäº¤äº†æ›´æ–°ã€‚</p><p><img src="git-chapter-5/img1.png" alt></p><p>ä¹‹å‰ä»‹ç»è¿‡ï¼Œæ•´åˆåˆ†æ”¯æœ€å®¹æ˜“çš„æ–¹æ³•æ˜¯ <code>merge</code> å‘½ä»¤ã€‚ å®ƒä¼šæŠŠä¸¤ä¸ªåˆ†æ”¯çš„æœ€æ–°å¿«ç…§ï¼ˆ<code>C3</code> å’Œ <code>C4</code>ï¼‰ä»¥åŠäºŒè€…æœ€è¿‘çš„å…±åŒç¥–å…ˆï¼ˆ<code>C2</code>ï¼‰è¿›è¡Œä¸‰æ–¹åˆå¹¶ï¼Œåˆå¹¶çš„ç»“æœæ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„å¿«ç…§ï¼ˆå¹¶æäº¤ï¼‰ã€‚</p><p><img src="git-chapter-5/img2.png" alt></p><p>å…¶å®ï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼šä½ å¯ä»¥æå–åœ¨ <code>C4</code> ä¸­å¼•å…¥çš„è¡¥ä¸å’Œä¿®æ”¹ï¼Œç„¶ååœ¨ <code>C3</code> çš„åŸºç¡€ä¸Šåº”ç”¨ä¸€æ¬¡ã€‚ åœ¨ Git ä¸­ï¼Œè¿™ç§æ“ä½œå°±å«åš å˜åŸºã€‚ ä½ å¯ä»¥ä½¿ç”¨ <code>rebase</code> å‘½ä»¤å°†æäº¤åˆ°æŸä¸€åˆ†æ”¯ä¸Šçš„æ‰€æœ‰ä¿®æ”¹éƒ½ç§»è‡³å¦ä¸€åˆ†æ”¯ä¸Šï¼Œå°±å¥½åƒâ€œé‡æ–°æ’­æ”¾â€ä¸€æ ·ã€‚</p><p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout experiment</span><br><span class="line">$ git rebase master</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: added staged command</span><br></pre></td></tr></table></figure><p>å®ƒçš„åŸç†æ˜¯é¦–å…ˆæ‰¾åˆ°è¿™ä¸¤ä¸ªåˆ†æ”¯ï¼ˆå³å½“å‰åˆ†æ”¯ <code>experiment</code>ã€å˜åŸºæ“ä½œçš„ç›®æ ‡åŸºåº•åˆ†æ”¯ <code>master</code>ï¼‰çš„æœ€è¿‘å…±åŒç¥–å…ˆ <code>C2</code>ï¼Œç„¶åå¯¹æ¯”å½“å‰åˆ†æ”¯ç›¸å¯¹äºè¯¥ç¥–å…ˆçš„å†æ¬¡æäº¤ï¼Œæå–ç›¸åº”çš„ä¿®æ”¹å¹¶å­˜ä¸ºä¸´æ—¶æ–‡ä»¶ï¼Œç„¶åå°†å½“å‰åˆ†æ”¯æŒ‡å‘ç›®æ ‡åŸºåº• <code>C3</code>, æœ€åä»¥æ­¤å°†ä¹‹å‰å¦å­˜ä¸ºä¸´æ—¶æ–‡ä»¶çš„ä¿®æ”¹ä¾åºåº”ç”¨ã€‚ï¼ˆè¯‘æ³¨ï¼šå†™æ˜äº† commit idï¼Œä»¥ä¾¿ç†è§£ï¼Œä¸‹åŒï¼‰</p><p><img src="git-chapter-5/img3.png" alt></p><p>ç°åœ¨å›åˆ° <code>master</code> åˆ†æ”¯ï¼Œè¿›è¡Œä¸€æ¬¡å¿«è¿›åˆå¹¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge experiment</span><br></pre></td></tr></table></figure><p><img src="git-chapter-5/img4.png" alt></p><p>æ­¤æ—¶ï¼Œ<code>C4&#39;</code> æŒ‡å‘çš„å¿«ç…§å°±å’Œä¸Šé¢ä½¿ç”¨ <code>merge</code> å‘½ä»¤çš„ä¾‹å­ä¸­ <code>C5</code> æŒ‡å‘çš„å¿«ç…§ä¸€æ¨¡ä¸€æ ·äº†ã€‚ è¿™ä¸¤ç§æ•´åˆæ–¹æ³•çš„æœ€ç»ˆç»“æœæ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½†æ˜¯å˜åŸºä½¿å¾—æäº¤å†å²æ›´åŠ æ•´æ´ã€‚ ä½ åœ¨æŸ¥çœ‹ä¸€ä¸ªç»è¿‡å˜åŸºçš„åˆ†æ”¯çš„å†å²è®°å½•æ—¶ä¼šå‘ç°ï¼Œå°½ç®¡å®é™…çš„å¼€å‘å·¥ä½œæ˜¯å¹¶è¡Œçš„ï¼Œä½†å®ƒä»¬çœ‹ä¸Šå»å°±åƒæ˜¯ä¸²è¡Œçš„ä¸€æ ·ï¼Œæäº¤å†å²æ˜¯ä¸€æ¡ç›´çº¿æ²¡æœ‰åˆ†å‰ã€‚</p><p>ä¸€èˆ¬æˆ‘ä»¬è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿åœ¨å‘è¿œç¨‹åˆ†æ”¯æ¨é€æ—¶èƒ½ä¿æŒæäº¤å†å²çš„æ•´æ´â€”â€”ä¾‹å¦‚å‘æŸä¸ªå…¶ä»–äººç»´æŠ¤çš„é¡¹ç›®è´¡çŒ®ä»£ç æ—¶ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ é¦–å…ˆåœ¨è‡ªå·±çš„åˆ†æ”¯é‡Œè¿›è¡Œå¼€å‘ï¼Œå½“å¼€å‘å®Œæˆæ—¶ä½ éœ€è¦å…ˆå°†ä½ çš„ä»£ç å˜åŸºåˆ° <code>origin/master</code> ä¸Šï¼Œç„¶åå†å‘ä¸»é¡¹ç›®æäº¤ä¿®æ”¹ã€‚ è¿™æ ·çš„è¯ï¼Œè¯¥é¡¹ç›®çš„ç»´æŠ¤è€…å°±ä¸å†éœ€è¦è¿›è¡Œæ•´åˆå·¥ä½œï¼Œåªéœ€è¦å¿«è¿›åˆå¹¶ä¾¿å¯ã€‚</p><p>è¯·æ³¨æ„ï¼Œæ— è®ºæ˜¯é€šè¿‡å˜åŸºï¼Œè¿˜æ˜¯é€šè¿‡ä¸‰æ–¹åˆå¹¶ï¼Œæ•´åˆçš„æœ€ç»ˆç»“æœæ‰€æŒ‡å‘çš„å¿«ç…§å§‹ç»ˆæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡æäº¤å†å²ä¸åŒç½¢äº†ã€‚ å˜åŸºæ˜¯å°†ä¸€ç³»åˆ—æäº¤æŒ‰ç…§åŸæœ‰æ¬¡åºä¾æ¬¡åº”ç”¨åˆ°å¦ä¸€åˆ†æ”¯ä¸Šï¼Œè€Œåˆå¹¶æ˜¯æŠŠæœ€ç»ˆç»“æœåˆåœ¨ä¸€èµ·ã€‚</p><h4 id="æ›´æœ‰è¶£çš„å˜åŸºä¾‹å­"><a href="#æ›´æœ‰è¶£çš„å˜åŸºä¾‹å­" class="headerlink" title="æ›´æœ‰è¶£çš„å˜åŸºä¾‹å­"></a>æ›´æœ‰è¶£çš„å˜åŸºä¾‹å­</h4><p>åœ¨å¯¹ä¸¤ä¸ªåˆ†æ”¯è¿›è¡Œå˜åŸºæ—¶ï¼Œæ‰€ç”Ÿæˆçš„â€œé‡æ”¾â€å¹¶ä¸ä¸€å®šè¦åœ¨ç›®æ ‡åˆ†æ”¯ä¸Šåº”ç”¨ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡å®šå¦å¤–çš„ä¸€ä¸ªåˆ†æ”¯è¿›è¡Œåº”ç”¨ã€‚ å°±åƒ ä»ä¸€ä¸ªç‰¹æ€§åˆ†æ”¯é‡Œå†åˆ†å‡ºä¸€ä¸ªç‰¹æ€§åˆ†æ”¯çš„æäº¤å†å² ä¸­çš„ä¾‹å­é‚£æ ·ã€‚ ä½ åˆ›å»ºäº†ä¸€ä¸ªç‰¹æ€§åˆ†æ”¯ <code>server</code>ï¼Œä¸ºæœåŠ¡ç«¯æ·»åŠ äº†ä¸€äº›åŠŸèƒ½ï¼Œæäº¤äº† <code>C3</code> å’Œ <code>C4</code>ã€‚ ç„¶åä» <code>C3</code> ä¸Šåˆ›å»ºäº†ç‰¹æ€§åˆ†æ”¯ <code>client</code>ï¼Œä¸ºå®¢æˆ·ç«¯æ·»åŠ äº†ä¸€äº›åŠŸèƒ½ï¼Œæäº¤äº† <code>C8</code> å’Œ <code>C9</code>ã€‚ æœ€åï¼Œä½ å›åˆ° <code>server</code> åˆ†æ”¯ï¼Œåˆæäº¤äº† <code>C10</code>ã€‚</p><p><img src="git-chapter-5/img5.png" alt></p><p>å‡è®¾ä½ å¸Œæœ›å°† <code>client</code> ä¸­çš„ä¿®æ”¹åˆå¹¶åˆ°ä¸»åˆ†æ”¯å¹¶å‘å¸ƒï¼Œä½†æš‚æ—¶å¹¶ä¸æƒ³åˆå¹¶ <code>server</code> ä¸­çš„ä¿®æ”¹ï¼Œå› ä¸ºå®ƒä»¬è¿˜éœ€è¦ç»è¿‡æ›´å…¨é¢çš„æµ‹è¯•ã€‚ è¿™æ—¶ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ <code>git rebase</code> å‘½ä»¤çš„ <code>--onto</code> é€‰é¡¹ï¼Œé€‰ä¸­åœ¨ <code>client</code> åˆ†æ”¯é‡Œä½†ä¸åœ¨ <code>server</code> åˆ†æ”¯é‡Œçš„ä¿®æ”¹ï¼ˆå³ <code>C8</code> å’Œ <code>C9</code>ï¼‰ï¼Œå°†å®ƒä»¬åœ¨ <code>master</code> åˆ†æ”¯ä¸Šé‡æ”¾ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase --onto master server client</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤çš„æ„æ€æ˜¯ï¼šâ€œå–å‡º <code>client</code> åˆ†æ”¯ï¼Œæ‰¾å‡ºå¤„äº <code>client</code> åˆ†æ”¯å’Œ <code>server</code> åˆ†æ”¯çš„å…±åŒç¥–å…ˆä¹‹åçš„ä¿®æ”¹ï¼Œç„¶åæŠŠå®ƒä»¬åœ¨ <code>master</code> åˆ†æ”¯ä¸Šé‡æ”¾ä¸€éâ€ã€‚ è¿™ç†è§£èµ·æ¥æœ‰ä¸€ç‚¹å¤æ‚ï¼Œä¸è¿‡æ•ˆæœéå¸¸é…·ã€‚</p><p><img src="git-chapter-5/img6.png" alt></p><p>ç°åœ¨å¯ä»¥å¿«è¿›åˆå¹¶ <code>master</code> åˆ†æ”¯äº†ã€‚ï¼ˆå¦‚ä¸‹å›¾ å¿«è¿›åˆå¹¶ master åˆ†æ”¯ï¼Œä½¿ä¹‹åŒ…å«æ¥è‡ª client åˆ†æ”¯çš„ä¿®æ”¹ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge client</span><br></pre></td></tr></table></figure><p><img src="git-chapter-5/img7.png" alt></p><p>æ¥ä¸‹æ¥ä½ å†³å®šå°† <code>server</code> åˆ†æ”¯ä¸­çš„ä¿®æ”¹ä¹Ÿæ•´åˆè¿›æ¥ã€‚ ä½¿ç”¨ <code>git rebase [basebranch] [topicbranch]</code> å‘½ä»¤å¯ä»¥ç›´æ¥å°†ç‰¹æ€§åˆ†æ”¯ï¼ˆå³æœ¬ä¾‹ä¸­çš„ <code>server</code>ï¼‰å˜åŸºåˆ°ç›®æ ‡åˆ†æ”¯ï¼ˆå³ <code>master</code>ï¼‰ä¸Šã€‚è¿™æ ·åšèƒ½çœå»ä½ å…ˆåˆ‡æ¢åˆ° <code>server</code> åˆ†æ”¯ï¼Œå†å¯¹å…¶æ‰§è¡Œå˜åŸºå‘½ä»¤çš„å¤šä¸ªæ­¥éª¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase master server</span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾ å°† server ä¸­çš„ä¿®æ”¹å˜åŸºåˆ° master ä¸Š æ‰€ç¤ºï¼Œ<code>server</code> ä¸­çš„ä»£ç è¢«â€œç»­â€åˆ°äº† <code>master</code> åé¢ã€‚</p><p><img src="git-chapter-5/img8.png" alt></p><p>ç„¶åå°±å¯ä»¥å¿«è¿›åˆå¹¶ä¸»åˆ†æ”¯ <code>master</code> äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge server</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œ<code>client</code> å’Œ <code>server</code> åˆ†æ”¯ä¸­çš„ä¿®æ”¹éƒ½å·²ç»æ•´åˆåˆ°ä¸»åˆ†æ”¯é‡Œäº†ï¼Œä½ å¯ä»¥åˆ é™¤è¿™ä¸¤ä¸ªåˆ†æ”¯ï¼Œæœ€ç»ˆæäº¤å†å²ä¼šå˜æˆä¸‹å›¾ æœ€ç»ˆçš„æäº¤å†å² ä¸­çš„æ ·å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d client</span><br><span class="line">$ git branch -d server</span><br></pre></td></tr></table></figure><p><img src="git-chapter-5/img9.png" alt></p><h4 id="å˜åŸºçš„é£é™©"><a href="#å˜åŸºçš„é£é™©" class="headerlink" title="å˜åŸºçš„é£é™©"></a>å˜åŸºçš„é£é™©</h4><p>å‘ƒï¼Œå¥‡å¦™çš„å˜åŸºä¹Ÿå¹¶éå®Œç¾æ— ç¼ºï¼Œè¦ç”¨å®ƒå¾—éµå®ˆä¸€æ¡å‡†åˆ™ï¼š</p><p><strong>ä¸è¦å¯¹åœ¨ä½ çš„ä»“åº“å¤–æœ‰å‰¯æœ¬çš„åˆ†æ”¯æ‰§è¡Œå˜åŸºã€‚</strong></p><p>å¦‚æœä½ éµå¾ªè¿™æ¡é‡‘ç§‘ç‰å¾‹ï¼Œå°±ä¸ä¼šå‡ºå·®é”™ã€‚ å¦åˆ™ï¼Œäººæ°‘ç¾¤ä¼—ä¼šä»‡æ¨ä½ ï¼Œä½ çš„æœ‹å‹å’Œå®¶äººä¹Ÿä¼šå˜²ç¬‘ä½ ï¼Œå”¾å¼ƒä½ ã€‚</p><p>å˜åŸºæ“ä½œçš„å®è´¨æ˜¯ä¸¢å¼ƒä¸€äº›ç°æœ‰çš„æäº¤ï¼Œç„¶åç›¸åº”åœ°æ–°å»ºä¸€äº›å†…å®¹ä¸€æ ·ä½†å®é™…ä¸Šä¸åŒçš„æäº¤ã€‚ å¦‚æœä½ å·²ç»å°†æäº¤æ¨é€è‡³æŸä¸ªä»“åº“ï¼Œè€Œå…¶ä»–äººä¹Ÿå·²ç»ä»è¯¥ä»“åº“æ‹‰å–æäº¤å¹¶è¿›è¡Œäº†åç»­å·¥ä½œï¼Œæ­¤æ—¶ï¼Œå¦‚æœä½ ç”¨ <code>git rebase</code> å‘½ä»¤é‡æ–°æ•´ç†äº†æäº¤å¹¶å†æ¬¡æ¨é€ï¼Œä½ çš„åŒä¼´å› æ­¤å°†ä¸å¾—ä¸å†æ¬¡å°†ä»–ä»¬æ‰‹å¤´çš„å·¥ä½œä¸ä½ çš„æäº¤è¿›è¡Œæ•´åˆï¼Œå¦‚æœæ¥ä¸‹æ¥ä½ è¿˜è¦æ‹‰å–å¹¶æ•´åˆä»–ä»¬ä¿®æ”¹è¿‡çš„æäº¤ï¼Œäº‹æƒ…å°±ä¼šå˜å¾—ä¸€å›¢ç³Ÿã€‚</p><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªåœ¨å…¬å¼€çš„ä»“åº“ä¸Šæ‰§è¡Œå˜åŸºæ“ä½œæ‰€å¸¦æ¥çš„é—®é¢˜ã€‚ å‡è®¾ä½ ä»ä¸€ä¸ªä¸­å¤®æœåŠ¡å™¨å…‹éš†ç„¶ååœ¨å®ƒçš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¸€äº›å¼€å‘ã€‚ ä½ çš„æäº¤å†å²å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="git-chapter-5/img10.png" alt></p><p>ç„¶åï¼ŒæŸäººåˆå‘ä¸­å¤®æœåŠ¡å™¨æäº¤äº†ä¸€äº›ä¿®æ”¹ï¼Œå…¶ä¸­è¿˜åŒ…æ‹¬ä¸€æ¬¡åˆå¹¶ã€‚ ä½ æŠ“å–äº†è¿™äº›åœ¨è¿œç¨‹åˆ†æ”¯ä¸Šçš„ä¿®æ”¹ï¼Œå¹¶å°†å…¶åˆå¹¶åˆ°ä½ æœ¬åœ°çš„å¼€å‘åˆ†æ”¯ï¼Œç„¶åä½ çš„æäº¤å†å²å°±ä¼šå˜æˆè¿™æ ·ï¼š</p><p><img src="git-chapter-5/img11.png" alt></p><p>æ¥ä¸‹æ¥ï¼Œè¿™ä¸ªäººåˆå†³å®šæŠŠåˆå¹¶æ“ä½œå›æ»šï¼Œæ”¹ç”¨å˜åŸºï¼›ç»§è€Œåˆç”¨ <code>git push --force</code> å‘½ä»¤è¦†ç›–äº†æœåŠ¡å™¨ä¸Šçš„æäº¤å†å²ã€‚ ä¹‹åä½ ä»æœåŠ¡å™¨æŠ“å–æ›´æ–°ï¼Œä¼šå‘ç°å¤šå‡ºæ¥ä¸€äº›æ–°çš„æäº¤ã€‚</p><p><img src="git-chapter-5/img12.png" alt></p><p>ç»“æœå°±æ˜¯ä½ ä»¬ä¸¤äººçš„å¤„å¢ƒéƒ½ååˆ†å°´å°¬ã€‚ å¦‚æœä½ æ‰§è¡Œ <code>git pull</code> å‘½ä»¤ï¼Œä½ å°†åˆå¹¶æ¥è‡ªä¸¤æ¡æäº¤å†å²çš„å†…å®¹ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„åˆå¹¶æäº¤ï¼Œæœ€ç»ˆä»“åº“ä¼šå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="git-chapter-5/img13.png" alt></p><p>æ­¤æ—¶å¦‚æœä½ æ‰§è¡Œ <code>git log</code> å‘½ä»¤ï¼Œä½ ä¼šå‘ç°æœ‰ä¸¤ä¸ªæäº¤çš„ä½œè€…ã€æ—¥æœŸã€æ—¥å¿—å±…ç„¶æ˜¯ä¸€æ ·çš„ï¼Œè¿™ä¼šä»¤äººæ„Ÿåˆ°æ··ä¹±ã€‚ æ­¤å¤–ï¼Œå¦‚æœä½ å°†è¿™ä¸€å †åˆæ¨é€åˆ°æœåŠ¡å™¨ä¸Šï¼Œä½ å®é™…ä¸Šæ˜¯å°†é‚£äº›å·²ç»è¢«å˜åŸºæŠ›å¼ƒçš„æäº¤åˆæ‰¾äº†å›æ¥ï¼Œè¿™ä¼šä»¤äººæ„Ÿåˆ°æ›´åŠ æ··ä¹±ã€‚ å¾ˆæ˜æ˜¾å¯¹æ–¹å¹¶ä¸æƒ³åœ¨æäº¤å†å²ä¸­çœ‹åˆ° <code>C4</code> å’Œ <code>C6</code>ï¼Œå› ä¸ºä¹‹å‰å°±æ˜¯ä»–æŠŠè¿™ä¸¤ä¸ªæäº¤é€šè¿‡å˜åŸºä¸¢å¼ƒçš„ã€‚</p><h4 id="ç”¨å˜åŸºè§£å†³å˜åŸº"><a href="#ç”¨å˜åŸºè§£å†³å˜åŸº" class="headerlink" title="ç”¨å˜åŸºè§£å†³å˜åŸº"></a>ç”¨å˜åŸºè§£å†³å˜åŸº</h4><p>å¦‚æœä½  çœŸçš„ é­é‡äº†ç±»ä¼¼çš„å¤„å¢ƒï¼ŒGit è¿˜æœ‰ä¸€äº›é«˜çº§é­”æ³•å¯ä»¥å¸®åˆ°ä½ ã€‚ å¦‚æœå›¢é˜Ÿä¸­çš„æŸäººå¼ºåˆ¶æ¨é€å¹¶è¦†ç›–äº†ä¸€äº›ä½ æ‰€åŸºäºçš„æäº¤ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯æ£€æŸ¥ä½ åšäº†å“ªäº›ä¿®æ”¹ï¼Œä»¥åŠä»–ä»¬è¦†ç›–äº†å“ªäº›ä¿®æ”¹ã€‚</p><p>å®é™…ä¸Šï¼ŒGit é™¤äº†å¯¹æ•´ä¸ªæäº¤è®¡ç®— SHA-1 æ ¡éªŒå’Œä»¥å¤–ï¼Œä¹Ÿå¯¹æœ¬æ¬¡æäº¤æ‰€å¼•å…¥çš„ä¿®æ”¹è®¡ç®—äº†æ ¡éªŒå’Œâ€”â€” å³ â€œpatch-idâ€ã€‚</p><p>å¦‚æœä½ æ‹‰å–è¢«è¦†ç›–è¿‡çš„æ›´æ–°å¹¶å°†ä½ æ‰‹å¤´çš„å·¥ä½œåŸºäºæ­¤è¿›è¡Œå˜åŸºçš„è¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ Git éƒ½èƒ½æˆåŠŸåˆ†è¾¨å‡ºå“ªäº›æ˜¯ä½ çš„ä¿®æ”¹ï¼Œå¹¶æŠŠå®ƒä»¬åº”ç”¨åˆ°æ–°åˆ†æ”¯ä¸Šã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœé‡åˆ°å‰é¢æåˆ°çš„ æœ‰äººæ¨é€äº†ç»è¿‡å˜åŸºçš„æäº¤ï¼Œå¹¶ä¸¢å¼ƒäº†ä½ çš„æœ¬åœ°å¼€å‘æ‰€åŸºäºçš„ä¸€äº›æäº¤ é‚£ç§æƒ…å¢ƒï¼Œå¦‚æœæˆ‘ä»¬ä¸æ˜¯æ‰§è¡Œåˆå¹¶ï¼Œè€Œæ˜¯æ‰§è¡Œ <code>git rebase teamone/master</code>, Git å°†ä¼šï¼š</p><ul><li><p>æ£€æŸ¥å“ªäº›æäº¤æ˜¯æˆ‘ä»¬çš„åˆ†æ”¯ä¸Šç‹¬æœ‰çš„ï¼ˆC2ï¼ŒC3ï¼ŒC4ï¼ŒC6ï¼ŒC7ï¼‰</p></li><li><p>æ£€æŸ¥å…¶ä¸­å“ªäº›æäº¤ä¸æ˜¯åˆå¹¶æ“ä½œçš„ç»“æœï¼ˆC2ï¼ŒC3ï¼ŒC4ï¼‰</p></li><li><p>æ£€æŸ¥å“ªäº›æäº¤åœ¨å¯¹æ–¹è¦†ç›–æ›´æ–°æ—¶å¹¶æ²¡æœ‰è¢«çº³å…¥ç›®æ ‡åˆ†æ”¯ï¼ˆåªæœ‰ C2 å’Œ C3ï¼Œå› ä¸º C4 å…¶å®å°±æ˜¯ C4â€™ï¼‰</p></li><li><p>æŠŠæŸ¥åˆ°çš„è¿™äº›æäº¤åº”ç”¨åœ¨ <code>teamone/master</code> ä¸Šé¢</p></li></ul><p>ä»è€Œæˆ‘ä»¬å°†å¾—åˆ°ä¸ ä½ å°†ç›¸åŒçš„å†…å®¹åˆåˆå¹¶äº†ä¸€æ¬¡ï¼Œç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„æäº¤ ä¸­ä¸åŒçš„ç»“æœï¼Œå¦‚ä¸‹å›¾ åœ¨ä¸€ä¸ªè¢«å˜åŸºç„¶åå¼ºåˆ¶æ¨é€çš„åˆ†æ”¯ä¸Šå†æ¬¡æ‰§è¡Œå˜åŸº æ‰€ç¤ºã€‚</p><p><img src="git-chapter-5/img14.png" alt></p><p>è¦æƒ³ä¸Šè¿°æ–¹æ¡ˆæœ‰æ•ˆï¼Œè¿˜éœ€è¦å¯¹æ–¹åœ¨å˜åŸºæ—¶ç¡®ä¿ C4â€™ å’Œ C4 æ˜¯å‡ ä¹ä¸€æ ·çš„ã€‚ å¦åˆ™å˜åŸºæ“ä½œå°†æ— æ³•è¯†åˆ«ï¼Œå¹¶æ–°å»ºå¦ä¸€ä¸ªç±»ä¼¼ C4 çš„è¡¥ä¸ï¼ˆè€Œè¿™ä¸ªè¡¥ä¸å¾ˆå¯èƒ½æ— æ³•æ•´æ´çš„æ•´åˆå…¥å†å²ï¼Œå› ä¸ºè¡¥ä¸ä¸­çš„ä¿®æ”¹å·²ç»å­˜åœ¨äºæŸä¸ªåœ°æ–¹äº†ï¼‰ã€‚</p><p>åœ¨æœ¬ä¾‹ä¸­å¦ä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>git pull --rebase</code> å‘½ä»¤è€Œä¸æ˜¯ç›´æ¥ <code>git pull</code>ã€‚ åˆæˆ–è€…ä½ å¯ä»¥è‡ªå·±æ‰‹åŠ¨å®Œæˆè¿™ä¸ªè¿‡ç¨‹ï¼Œå…ˆ <code>git fetch</code>ï¼Œå† <code>git rebase teamone/master</code>ã€‚</p><p>å¦‚æœä½ ä¹ æƒ¯ä½¿ç”¨ <code>git pull</code> ï¼ŒåŒæ—¶åˆå¸Œæœ›é»˜è®¤ä½¿ç”¨é€‰é¡¹ <code>--rebase</code>ï¼Œä½ å¯ä»¥æ‰§è¡Œè¿™æ¡è¯­å¥ <code>git config --global pull.rebase true</code> æ¥æ›´æ”¹ <code>pull.rebase</code> çš„é»˜è®¤é…ç½®ã€‚</p><p>åªè¦ä½ æŠŠå˜åŸºå‘½ä»¤å½“ä½œæ˜¯åœ¨æ¨é€å‰æ¸…ç†æäº¤ä½¿ä¹‹æ•´æ´çš„å·¥å…·ï¼Œå¹¶ä¸”åªåœ¨ä»æœªæ¨é€è‡³å…±ç”¨ä»“åº“çš„æäº¤ä¸Šæ‰§è¡Œå˜åŸºå‘½ä»¤ï¼Œå°±ä¸ä¼šæœ‰äº‹ã€‚ å‡å¦‚åœ¨é‚£äº›å·²ç»è¢«æ¨é€è‡³å…±ç”¨ä»“åº“çš„æäº¤ä¸Šæ‰§è¡Œå˜åŸºå‘½ä»¤ï¼Œå¹¶å› æ­¤ä¸¢å¼ƒäº†ä¸€äº›åˆ«äººçš„å¼€å‘æ‰€åŸºäºçš„æäº¤ï¼Œé‚£ä½ å°±æœ‰å¤§éº»çƒ¦äº†ï¼Œä½ çš„åŒäº‹ä¹Ÿä¼šå› æ­¤é„™è§†ä½ ã€‚</p><p>å¦‚æœä½ æˆ–ä½ çš„åŒäº‹åœ¨æŸäº›æƒ…å½¢ä¸‹å†³æ„è¦è¿™ä¹ˆåšï¼Œè¯·ä¸€å®šè¦é€šçŸ¥æ¯ä¸ªäººæ‰§è¡Œ <code>git pull --rebase</code> å‘½ä»¤ï¼Œè¿™æ ·å°½ç®¡ä¸èƒ½é¿å…ä¼¤ç—›ï¼Œä½†èƒ½æœ‰æ‰€ç¼“è§£ã€‚</p><h4 id="å˜åŸº-vs-åˆå¹¶"><a href="#å˜åŸº-vs-åˆå¹¶" class="headerlink" title="å˜åŸº vs. åˆå¹¶"></a>å˜åŸº vs. åˆå¹¶</h4><p>è‡³æ­¤ï¼Œä½ å·²åœ¨å®æˆ˜ä¸­å­¦ä¹ äº†å˜åŸºå’Œåˆå¹¶çš„ç”¨æ³•ï¼Œä½ ä¸€å®šä¼šæƒ³é—®ï¼Œåˆ°åº•å“ªç§æ–¹å¼æ›´å¥½ã€‚ åœ¨å›ç­”è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œè®©æˆ‘ä»¬é€€åä¸€æ­¥ï¼Œæƒ³è®¨è®ºä¸€ä¸‹æäº¤å†å²åˆ°åº•æ„å‘³ç€ä»€ä¹ˆã€‚</p><p>æœ‰ä¸€ç§è§‚ç‚¹è®¤ä¸ºï¼Œä»“åº“çš„æäº¤å†å²å³æ˜¯ è®°å½•å®é™…å‘ç”Ÿè¿‡ä»€ä¹ˆã€‚ å®ƒæ˜¯é’ˆå¯¹å†å²çš„æ–‡æ¡£ï¼Œæœ¬èº«å°±æœ‰ä»·å€¼ï¼Œä¸èƒ½ä¹±æ”¹ã€‚ ä»è¿™ä¸ªè§’åº¦çœ‹æ¥ï¼Œæ”¹å˜æäº¤å†å²æ˜¯ä¸€ç§äºµæ¸ï¼Œä½ ä½¿ç”¨ è°è¨€ æ©ç›–äº†å®é™…å‘ç”Ÿè¿‡çš„äº‹æƒ…ã€‚ å¦‚æœç”±åˆå¹¶äº§ç”Ÿçš„æäº¤å†å²æ˜¯ä¸€å›¢ç³Ÿæ€ä¹ˆåŠï¼Ÿ æ—¢ç„¶äº‹å®å°±æ˜¯å¦‚æ­¤ï¼Œé‚£ä¹ˆè¿™äº›ç—•è¿¹å°±åº”è¯¥è¢«ä¿ç•™ä¸‹æ¥ï¼Œè®©åäººèƒ½å¤ŸæŸ¥é˜…ã€‚</p><p>å¦ä¸€ç§è§‚ç‚¹åˆ™æ­£å¥½ç›¸åï¼Œä»–ä»¬è®¤ä¸ºæäº¤å†å²æ˜¯ é¡¹ç›®è¿‡ç¨‹ä¸­å‘ç”Ÿçš„äº‹ã€‚ æ²¡äººä¼šå‡ºç‰ˆä¸€æœ¬ä¹¦çš„ç¬¬ä¸€ç‰ˆè‰ç¨¿ï¼Œè½¯ä»¶ç»´æŠ¤æ‰‹å†Œä¹Ÿæ˜¯éœ€è¦åå¤ä¿®è®¢æ‰èƒ½æ–¹ä¾¿ä½¿ç”¨ã€‚ æŒè¿™ä¸€è§‚ç‚¹çš„äººä¼šä½¿ç”¨ <code>rebase</code> åŠ <code>filter-branch</code> ç­‰å·¥å…·æ¥ç¼–å†™æ•…äº‹ï¼Œæ€ä¹ˆæ–¹ä¾¿åæ¥çš„è¯»è€…å°±æ€ä¹ˆå†™ã€‚</p><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å›åˆ°ä¹‹å‰çš„é—®é¢˜ä¸Šæ¥ï¼Œåˆ°åº•åˆå¹¶è¿˜æ˜¯å˜åŸºå¥½ï¼Ÿå¸Œæœ›ä½ èƒ½æ˜ç™½ï¼Œè¿™å¹¶æ²¡æœ‰ä¸€ä¸ªç®€å•çš„ç­”æ¡ˆã€‚ Git æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå®ƒå…è®¸ä½ å¯¹æäº¤å†å²åšè®¸å¤šäº‹æƒ…ï¼Œä½†æ¯ä¸ªå›¢é˜Ÿã€æ¯ä¸ªé¡¹ç›®å¯¹æ­¤çš„éœ€æ±‚å¹¶ä¸ç›¸åŒã€‚ æ—¢ç„¶ä½ å·²ç»åˆ†åˆ«å­¦ä¹ äº†ä¸¤è€…çš„ç”¨æ³•ï¼Œç›¸ä¿¡ä½ èƒ½å¤Ÿæ ¹æ®å®é™…æƒ…å†µä½œå‡ºæ˜æ™ºçš„é€‰æ‹©ã€‚</p><p>æ€»çš„åŸåˆ™æ˜¯ï¼Œåªå¯¹å°šæœªæ¨é€æˆ–åˆ†äº«ç»™åˆ«äººçš„æœ¬åœ°ä¿®æ”¹æ‰§è¡Œå˜åŸºæ“ä½œæ¸…ç†å†å²ï¼Œä»ä¸å¯¹å·²æ¨é€è‡³åˆ«å¤„çš„æäº¤æ‰§è¡Œå˜åŸºæ“ä½œï¼Œè¿™æ ·ï¼Œä½ æ‰èƒ½äº«å—åˆ°ä¸¤ç§æ–¹å¼å¸¦æ¥çš„ä¾¿åˆ©ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitï¼šåŸºç¡€</title>
      <link href="/2018/06/06/Git%EF%BC%9A%E5%9F%BA%E7%A1%80/"/>
      <url>/2018/06/06/Git%EF%BC%9A%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h3 id="å®‰è£…-Git"><a href="#å®‰è£…-Git" class="headerlink" title="å®‰è£… Git"></a>å®‰è£… Git</h3><p>åœ¨ä½ å¼€å§‹ä½¿ç”¨ Git å‰ï¼Œéœ€è¦å°†å®ƒå®‰è£…åœ¨ä½ çš„è®¡ç®—æœºä¸Šã€‚ å³ä¾¿å·²ç»å®‰è£…ï¼Œæœ€å¥½å°†å®ƒå‡çº§åˆ°æœ€æ–°çš„ç‰ˆæœ¬ã€‚ ä½ å¯ä»¥é€šè¿‡è½¯ä»¶åŒ…æˆ–è€…å…¶å®ƒå®‰è£…ç¨‹åºæ¥å®‰è£…ï¼Œæˆ–è€…ä¸‹è½½æºç ç¼–è¯‘å®‰è£…ã€‚</p><h4 id="åœ¨-Linux-ä¸Šå®‰è£…"><a href="#åœ¨-Linux-ä¸Šå®‰è£…" class="headerlink" title="åœ¨ Linux ä¸Šå®‰è£…"></a>åœ¨ Linux ä¸Šå®‰è£…</h4><p>å¦‚æœä½ æƒ³åœ¨ Linux ä¸Šç”¨äºŒè¿›åˆ¶å®‰è£…ç¨‹åºæ¥å®‰è£… Gitï¼Œå¯ä»¥ä½¿ç”¨å‘è¡Œç‰ˆåŒ…å«çš„åŸºç¡€è½¯ä»¶åŒ…ç®¡ç†å·¥å…·æ¥å®‰è£…ã€‚ å¦‚æœä»¥ Fedora ä¸Šä¸ºä¾‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ yumï¼š</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install git</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ åœ¨åŸºäº Debian çš„å‘è¡Œç‰ˆä¸Šï¼Œè¯·å°è¯•ç”¨ apt-getï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install git</span><br></pre></td></tr></table></figure><p>è¦äº†è§£æ›´å¤šé€‰æ‹©ï¼ŒGit å®˜æ–¹ç½‘ç«™ä¸Šæœ‰åœ¨å„ç§ Unix é£æ ¼çš„ç³»ç»Ÿä¸Šå®‰è£…æ­¥éª¤ï¼Œç½‘å€ä¸º <a href="https://git-scm.com/download/linux" target="_blank" rel="noopener">https://git-scm.com/download/linux</a>ã€‚</p><h4 id="åœ¨-Mac-ä¸Šå®‰è£…"><a href="#åœ¨-Mac-ä¸Šå®‰è£…" class="headerlink" title="åœ¨ Mac ä¸Šå®‰è£…"></a>åœ¨ Mac ä¸Šå®‰è£…</h4><p>åœ¨ Mac ä¸Šå®‰è£… Git æœ‰å¤šç§æ–¹å¼ã€‚ æœ€ç®€å•çš„æ–¹æ³•æ˜¯å®‰è£… Xcode Command Line Toolsã€‚ Mavericks ï¼ˆ10.9ï¼‰ æˆ–æ›´é«˜ç‰ˆæœ¬çš„ç³»ç»Ÿä¸­ï¼Œåœ¨ Terminal é‡Œå°è¯•é¦–æ¬¡è¿è¡Œ git å‘½ä»¤å³å¯ã€‚ å¦‚æœæ²¡æœ‰å®‰è£…è¿‡å‘½ä»¤è¡Œå¼€å‘è€…å·¥å…·ï¼Œå°†ä¼šæç¤ºä½ å®‰è£…ã€‚</p><p>å¦‚æœä½ æƒ³å®‰è£…æ›´æ–°çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨äºŒè¿›åˆ¶å®‰è£…ç¨‹åºã€‚ å®˜æ–¹ç»´æŠ¤çš„ OSX Git å®‰è£…ç¨‹åºå¯ä»¥åœ¨ Git å®˜æ–¹ç½‘ç«™ä¸‹è½½ï¼Œç½‘å€ä¸º <a href="https://git-scm.com/download/mac" target="_blank" rel="noopener">https://git-scm.com/download/mac</a>ã€‚</p><p><img src="git-chapter1-img1.png" alt></p><p>Figure 7. Git OS X å®‰è£…ç¨‹åº.<br>ä½ ä¹Ÿå¯ä»¥å°†å®ƒä½œä¸º GitHub for Mac çš„ä¸€éƒ¨åˆ†æ¥å®‰è£…ã€‚ å®ƒä»¬çš„å›¾å½¢åŒ– Git å·¥å…·æœ‰ä¸€ä¸ªå®‰è£…å‘½ä»¤è¡Œå·¥å…·çš„é€‰é¡¹ã€‚ ä½ å¯ä»¥ä» GitHub for Mac ç½‘ç«™ä¸‹è½½è¯¥å·¥å…·ï¼Œç½‘å€ä¸º <a href="http://mac.github.com" target="_blank" rel="noopener">http://mac.github.com</a>ã€‚</p><h4 id="åœ¨-Windows-ä¸Šå®‰è£…"><a href="#åœ¨-Windows-ä¸Šå®‰è£…" class="headerlink" title="åœ¨ Windows ä¸Šå®‰è£…"></a>åœ¨ Windows ä¸Šå®‰è£…</h4><p>åœ¨ Windows ä¸Šå®‰è£… Git ä¹Ÿæœ‰å‡ ç§å®‰è£…æ–¹æ³•ã€‚ å®˜æ–¹ç‰ˆæœ¬å¯ä»¥åœ¨ Git å®˜æ–¹ç½‘ç«™ä¸‹è½½ã€‚ æ‰“å¼€ <a href="http://git-scm.com/download/win" target="_blank" rel="noopener">http://git-scm.com/download/win</a>ï¼Œä¸‹è½½ä¼šè‡ªåŠ¨å¼€å§‹ã€‚ è¦æ³¨æ„è¿™æ˜¯ä¸€ä¸ªåä¸º Git for Windows çš„é¡¹ç›®ï¼ˆä¹Ÿå«åš msysGitï¼‰ï¼Œå’Œ Git æ˜¯åˆ†åˆ«ç‹¬ç«‹çš„é¡¹ç›®ï¼›æ›´å¤šä¿¡æ¯è¯·è®¿é—® <a href="http://gitforwindows.org" target="_blank" rel="noopener">http://gitforwindows.org</a>ã€‚</p><p>å¦ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ˜¯å®‰è£… GitHub for Windowsã€‚ è¯¥å®‰è£…ç¨‹åºåŒ…å«å›¾å½¢åŒ–å’Œå‘½ä»¤è¡Œç‰ˆæœ¬çš„ Gitã€‚ å®ƒä¹Ÿèƒ½æ”¯æŒ Powershellï¼Œæä¾›äº†ç¨³å®šçš„å‡­è¯ç¼“å­˜å’Œå¥å…¨çš„æ¢è¡Œè®¾ç½®ã€‚ ç¨åæˆ‘ä»¬ä¼šå¯¹è¿™æ–¹é¢æœ‰æ›´å¤šäº†è§£ï¼Œç°åœ¨åªè¦ä¸€å¥è¯å°±å¤Ÿäº†ï¼Œè¿™äº›éƒ½æ˜¯ä½ æ‰€éœ€è¦çš„ã€‚ ä½ å¯ä»¥åœ¨ GitHub for Windows ç½‘ç«™ä¸‹è½½ï¼Œç½‘å€ä¸º <a href="http://windows.github.com" target="_blank" rel="noopener">http://windows.github.com</a>ã€‚</p><h4 id="ä»æºä»£ç å®‰è£…"><a href="#ä»æºä»£ç å®‰è£…" class="headerlink" title="ä»æºä»£ç å®‰è£…"></a>ä»æºä»£ç å®‰è£…</h4><p>æœ‰äººè§‰å¾—ä»æºç å®‰è£… Git æ›´å®ç”¨ï¼Œå› ä¸ºä½ èƒ½å¾—åˆ°æœ€æ–°çš„ç‰ˆæœ¬ã€‚ äºŒè¿›åˆ¶å®‰è£…ç¨‹åºå€¾å‘äºæœ‰ä¸€äº›æ»åï¼Œå½“ç„¶è¿‘å‡ å¹´ Git å·²ç»æˆç†Ÿï¼Œè¿™ä¸ªå·®å¼‚ä¸å†æ˜¾è‘—ã€‚</p><p>å¦‚æœä½ æƒ³ä»æºç å®‰è£… Gitï¼Œéœ€è¦å®‰è£… Git ä¾èµ–çš„åº“ï¼šcurlã€zlibã€opensslã€expatï¼Œè¿˜æœ‰ libiconvã€‚ å¦‚æœä½ çš„ç³»ç»Ÿä¸Šæœ‰ yum ï¼ˆå¦‚ Fedoraï¼‰æˆ–è€… apt-getï¼ˆå¦‚åŸºäº Debian çš„ç³»ç»Ÿï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¹‹ä¸€æ¥å®‰è£…æœ€å°åŒ–çš„ä¾èµ–åŒ…æ¥ç¼–è¯‘å’Œå®‰è£… Git çš„äºŒè¿›åˆ¶ç‰ˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install curl-devel expat-devel gettext-devel \</span><br><span class="line">  openssl-devel zlib-devel</span><br><span class="line">$ sudo apt-get install libcurl4-gnutls-dev libexpat1-dev gettext \</span><br><span class="line">  libz-dev libssl-dev</span><br></pre></td></tr></table></figure><p>ä¸ºäº†èƒ½å¤Ÿæ·»åŠ æ›´å¤šæ ¼å¼çš„æ–‡æ¡£ï¼ˆå¦‚ doc, html, infoï¼‰ï¼Œä½ éœ€è¦å®‰è£…ä»¥ä¸‹çš„ä¾èµ–åŒ…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install asciidoc xmlto docbook2x</span><br><span class="line">$ sudo apt-get install asciidoc xmlto docbook2x</span><br></pre></td></tr></table></figure><p>å½“ä½ å®‰è£…å¥½æ‰€æœ‰çš„å¿…è¦ä¾èµ–ï¼Œä½ å¯ä»¥ç»§ç»­ä»å‡ ä¸ªåœ°æ–¹æ¥å–å¾—æœ€æ–°å‘å¸ƒç‰ˆæœ¬çš„ tar åŒ…ã€‚ ä½ å¯ä»¥ä» Kernel.org ç½‘ç«™è·å–ï¼Œç½‘å€ä¸º <a href="https://www.kernel.org/pub/software/scm/git" target="_blank" rel="noopener">https://www.kernel.org/pub/software/scm/git</a>ï¼Œæˆ–ä» GitHub ç½‘ç«™ä¸Šçš„é•œåƒæ¥è·å¾—ï¼Œç½‘å€ä¸º <a href="https://github.com/git/git/releases" target="_blank" rel="noopener">https://github.com/git/git/releases</a>ã€‚ é€šå¸¸åœ¨ GitHub ä¸Šçš„æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œä½† kernel.org ä¸ŠåŒ…å«æœ‰æ–‡ä»¶ä¸‹è½½ç­¾åï¼Œå¦‚æœä½ æƒ³éªŒè¯ä¸‹è½½æ­£ç¡®æ€§çš„è¯ä¼šç”¨åˆ°ã€‚</p><p>æ¥ç€ï¼Œç¼–è¯‘å¹¶å®‰è£…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ tar -zxf git-2.0.0.tar.gz</span><br><span class="line">$ cd git-2.0.0</span><br><span class="line">$ make configure</span><br><span class="line">$ ./configure --prefix=/usr</span><br><span class="line">$ make all doc info</span><br><span class="line">$ sudo make install install-doc install-html install-info</span><br></pre></td></tr></table></figure><p>å®Œæˆåï¼Œä½ å¯ä»¥ä½¿ç”¨ Git æ¥è·å– Git çš„å‡çº§ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git://git.kernel.org/pub/scm/git/git.git</span><br></pre></td></tr></table></figure><h3 id="åˆæ¬¡è¿è¡Œ-Git-å‰çš„é…ç½®"><a href="#åˆæ¬¡è¿è¡Œ-Git-å‰çš„é…ç½®" class="headerlink" title="åˆæ¬¡è¿è¡Œ Git å‰çš„é…ç½®"></a>åˆæ¬¡è¿è¡Œ Git å‰çš„é…ç½®</h3><p>æ—¢ç„¶å·²ç»åœ¨ç³»ç»Ÿä¸Šå®‰è£…äº† Gitï¼Œä½ ä¼šæƒ³è¦åšå‡ ä»¶äº‹æ¥å®šåˆ¶ä½ çš„ Git ç¯å¢ƒã€‚ æ¯å°è®¡ç®—æœºä¸Šåªéœ€è¦é…ç½®ä¸€æ¬¡ï¼Œç¨‹åºå‡çº§æ—¶ä¼šä¿ç•™é…ç½®ä¿¡æ¯ã€‚ ä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™å†æ¬¡é€šè¿‡è¿è¡Œå‘½ä»¤æ¥ä¿®æ”¹å®ƒä»¬ã€‚</p><p>Git è‡ªå¸¦ä¸€ä¸ª <code>git config</code> çš„å·¥å…·æ¥å¸®åŠ©è®¾ç½®æ§åˆ¶ Git å¤–è§‚å’Œè¡Œä¸ºçš„é…ç½®å˜é‡ã€‚ è¿™äº›å˜é‡å­˜å‚¨åœ¨ä¸‰ä¸ªä¸åŒçš„ä½ç½®ï¼š      </p><ol><li><code>/etc/gitconfig</code> æ–‡ä»¶: åŒ…å«ç³»ç»Ÿä¸Šæ¯ä¸€ä¸ªç”¨æˆ·åŠä»–ä»¬ä»“åº“çš„é€šç”¨é…ç½®ã€‚ å¦‚æœä½¿ç”¨å¸¦æœ‰ <code>--system</code> é€‰é¡¹çš„ <code>git config</code> æ—¶ï¼Œå®ƒä¼šä»æ­¤æ–‡ä»¶è¯»å†™é…ç½®å˜é‡ã€‚</li><li><code>~/.gitconfig</code> æˆ– <code>~/.config/git/config</code> æ–‡ä»¶ï¼šåªé’ˆå¯¹å½“å‰ç”¨æˆ·ã€‚ å¯ä»¥ä¼ é€’ <code>--global</code> é€‰é¡¹è®© Git è¯»å†™æ­¤æ–‡ä»¶ã€‚</li><li>å½“å‰ä½¿ç”¨ä»“åº“çš„ Git ç›®å½•ä¸­çš„ <code>config</code> æ–‡ä»¶ï¼ˆå°±æ˜¯ <code>.git/config</code>ï¼‰ï¼šé’ˆå¯¹è¯¥ä»“åº“ã€‚</li></ol><p>æ¯ä¸€ä¸ªçº§åˆ«è¦†ç›–ä¸Šä¸€çº§åˆ«çš„é…ç½®ï¼Œæ‰€ä»¥ <code>.git/config</code> çš„é…ç½®å˜é‡ä¼šè¦†ç›– <code>/etc/gitconfig</code> ä¸­çš„é…ç½®å˜é‡ã€‚</p><p>åœ¨ Windows ç³»ç»Ÿä¸­ï¼ŒGit ä¼šæŸ¥æ‰¾ <code>$HOME</code> ç›®å½•ä¸‹ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ <code>C:\Users\$USER</code>ï¼‰çš„ <code>.gitconfig</code> æ–‡ä»¶ã€‚ Git åŒæ ·ä¹Ÿä¼šå¯»æ‰¾ <code>/etc/gitconfig</code> æ–‡ä»¶ï¼Œä½†åªé™äº MSys çš„æ ¹ç›®å½•ä¸‹ï¼Œå³å®‰è£… Git æ—¶æ‰€é€‰çš„ç›®æ ‡ä½ç½®ã€‚</p><h4 id="ç”¨æˆ·ä¿¡æ¯"><a href="#ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="ç”¨æˆ·ä¿¡æ¯"></a>ç”¨æˆ·ä¿¡æ¯</h4><p>å½“å®‰è£…å®Œ Git åº”è¯¥åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è®¾ç½®ä½ çš„ç”¨æˆ·åç§°ä¸é‚®ä»¶åœ°å€ã€‚ è¿™æ ·åšå¾ˆé‡è¦ï¼Œå› ä¸ºæ¯ä¸€ä¸ª Git çš„æäº¤éƒ½ä¼šä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼Œå¹¶ä¸”å®ƒä¼šå†™å…¥åˆ°ä½ çš„æ¯ä¸€æ¬¡æäº¤ä¸­ï¼Œä¸å¯æ›´æ”¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;John Doe&quot;</span><br><span class="line">$ git config --global user.email johndoe@example.com</span><br></pre></td></tr></table></figure><p>å†æ¬¡å¼ºè°ƒï¼Œå¦‚æœä½¿ç”¨äº† â€“global é€‰é¡¹ï¼Œé‚£ä¹ˆè¯¥å‘½ä»¤åªéœ€è¦è¿è¡Œä¸€æ¬¡ï¼Œå› ä¸ºä¹‹åæ— è®ºä½ åœ¨è¯¥ç³»ç»Ÿä¸Šåšä»»ä½•äº‹æƒ…ï¼Œ Git éƒ½ä¼šä½¿ç”¨é‚£äº›ä¿¡æ¯ã€‚ å½“ä½ æƒ³é’ˆå¯¹ç‰¹å®šé¡¹ç›®ä½¿ç”¨ä¸åŒçš„ç”¨æˆ·åç§°ä¸é‚®ä»¶åœ°å€æ—¶ï¼Œå¯ä»¥åœ¨é‚£ä¸ªé¡¹ç›®ç›®å½•ä¸‹è¿è¡Œæ²¡æœ‰ â€“global é€‰é¡¹çš„å‘½ä»¤æ¥é…ç½®ã€‚</p><p>å¾ˆå¤š GUI å·¥å…·éƒ½ä¼šåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶å¸®åŠ©ä½ é…ç½®è¿™äº›ä¿¡æ¯ã€‚</p><h4 id="æ–‡æœ¬ç¼–è¾‘å™¨"><a href="#æ–‡æœ¬ç¼–è¾‘å™¨" class="headerlink" title="æ–‡æœ¬ç¼–è¾‘å™¨"></a>æ–‡æœ¬ç¼–è¾‘å™¨</h4><p>æ—¢ç„¶ç”¨æˆ·ä¿¡æ¯å·²ç»è®¾ç½®å®Œæ¯•ï¼Œä½ å¯ä»¥é…ç½®é»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨äº†ï¼Œå½“ Git éœ€è¦ä½ è¾“å…¥ä¿¡æ¯æ—¶ä¼šè°ƒç”¨å®ƒã€‚ å¦‚æœæœªé…ç½®ï¼ŒGit ä¼šä½¿ç”¨æ“ä½œç³»ç»Ÿé»˜è®¤çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œé€šå¸¸æ˜¯ Vimã€‚ å¦‚æœä½ æƒ³ä½¿ç”¨ä¸åŒçš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä¾‹å¦‚ Emacsï¼Œå¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.editor emacs</span><br></pre></td></tr></table></figure><h4 id="æ£€æŸ¥é…ç½®ä¿¡æ¯"><a href="#æ£€æŸ¥é…ç½®ä¿¡æ¯" class="headerlink" title="æ£€æŸ¥é…ç½®ä¿¡æ¯"></a>æ£€æŸ¥é…ç½®ä¿¡æ¯</h4><p>å¦‚æœæƒ³è¦æ£€æŸ¥ä½ çš„é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ <code>git config --list</code> å‘½ä»¤æ¥åˆ—å‡ºæ‰€æœ‰ Git å½“æ—¶èƒ½æ‰¾åˆ°çš„é…ç½®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git config --list</span><br><span class="line">user.name=John Doe</span><br><span class="line">user.email=johndoe@example.com</span><br><span class="line">color.status=auto</span><br><span class="line">color.branch=auto</span><br><span class="line">color.interactive=auto</span><br><span class="line">color.diff=auto</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ä½ å¯èƒ½ä¼šçœ‹åˆ°é‡å¤çš„å˜é‡åï¼Œå› ä¸º Git ä¼šä»ä¸åŒçš„æ–‡ä»¶ä¸­è¯»å–åŒä¸€ä¸ªé…ç½®ï¼ˆä¾‹å¦‚ï¼š<code>/etc/gitconfig</code> ä¸ <code>~/.gitconfig</code>ï¼‰ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼ŒGit ä¼šä½¿ç”¨å®ƒæ‰¾åˆ°çš„æ¯ä¸€ä¸ªå˜é‡çš„æœ€åä¸€ä¸ªé…ç½®ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡è¾“å…¥ <code>git config &lt;key&gt;</code>ï¼š æ¥æ£€æŸ¥ Git çš„æŸä¸€é¡¹é…ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config user.name</span><br><span class="line">John Doe</span><br></pre></td></tr></table></figure><h3 id="è·å–å¸®åŠ©"><a href="#è·å–å¸®åŠ©" class="headerlink" title="è·å–å¸®åŠ©"></a>è·å–å¸®åŠ©</h3><p>è‹¥ä½ ä½¿ç”¨ Git æ—¶éœ€è¦è·å–å¸®åŠ©ï¼Œæœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥æ‰¾åˆ° Git å‘½ä»¤çš„ä½¿ç”¨æ‰‹å†Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git help &lt;verb&gt;</span><br><span class="line">$ git &lt;verb&gt; --help</span><br><span class="line">$ man git-&lt;verb&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œè¦æƒ³è·å¾— config å‘½ä»¤çš„æ‰‹å†Œï¼Œæ‰§è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git help config</span><br></pre></td></tr></table></figure><p>è¿™äº›å‘½ä»¤å¾ˆæ£’ï¼Œå› ä¸ºä½ éšæ—¶éšåœ°å¯ä»¥ä½¿ç”¨è€Œæ— éœ€è”ç½‘ã€‚ å¦‚æœä½ è§‰å¾—æ‰‹å†Œæˆ–è€…æœ¬ä¹¦çš„å†…å®¹è¿˜ä¸å¤Ÿç”¨ï¼Œä½ å¯ä»¥å°è¯•åœ¨ Freenode IRC æœåŠ¡å™¨ï¼ˆ irc.freenode.net ï¼‰çš„ <code>#git</code> æˆ– <code>#github</code> é¢‘é“å¯»æ±‚å¸®åŠ©ã€‚ è¿™äº›é¢‘é“ç»å¸¸æœ‰ä¸Šç™¾äººåœ¨çº¿ï¼Œä»–ä»¬éƒ½ç²¾é€š Git å¹¶ä¸”ä¹äºåŠ©äººã€‚</p><h3 id="è·å–-Git-ä»“åº“"><a href="#è·å–-Git-ä»“åº“" class="headerlink" title="è·å– Git ä»“åº“"></a>è·å– Git ä»“åº“</h3><p>æœ‰ä¸¤ç§å–å¾— Git é¡¹ç›®ä»“åº“çš„æ–¹æ³•ã€‚ ç¬¬ä¸€ç§æ˜¯åœ¨ç°æœ‰é¡¹ç›®æˆ–ç›®å½•ä¸‹å¯¼å…¥æ‰€æœ‰æ–‡ä»¶åˆ° Git ä¸­ï¼› ç¬¬äºŒç§æ˜¯ä»ä¸€ä¸ªæœåŠ¡å™¨å…‹éš†ä¸€ä¸ªç°æœ‰çš„ Git ä»“åº“ã€‚</p><h4 id="åœ¨ç°æœ‰ç›®å½•ä¸­åˆå§‹åŒ–ä»“åº“"><a href="#åœ¨ç°æœ‰ç›®å½•ä¸­åˆå§‹åŒ–ä»“åº“" class="headerlink" title="åœ¨ç°æœ‰ç›®å½•ä¸­åˆå§‹åŒ–ä»“åº“"></a>åœ¨ç°æœ‰ç›®å½•ä¸­åˆå§‹åŒ–ä»“åº“</h4><p>å¦‚æœä½ æ‰“ç®—ä½¿ç”¨ Git æ¥å¯¹ç°æœ‰çš„é¡¹ç›®è¿›è¡Œç®¡ç†ï¼Œä½ åªéœ€è¦è¿›å…¥è¯¥é¡¹ç›®ç›®å½•å¹¶è¾“å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤å°†åˆ›å»ºä¸€ä¸ªåä¸º .git çš„å­ç›®å½•ï¼Œè¿™ä¸ªå­ç›®å½•å«æœ‰ä½ åˆå§‹åŒ–çš„ Git ä»“åº“ä¸­æ‰€æœ‰çš„å¿…é¡»æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶æ˜¯ Git ä»“åº“çš„éª¨å¹²ã€‚ ä½†æ˜¯ï¼Œåœ¨è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä»…ä»…æ˜¯åšäº†ä¸€ä¸ªåˆå§‹åŒ–çš„æ“ä½œï¼Œä½ çš„é¡¹ç›®é‡Œçš„æ–‡ä»¶è¿˜æ²¡æœ‰è¢«è·Ÿè¸ªã€‚ (å‚è§ Git <a href="http://pengzhenjin.top/2018/06/12/Gitï¼šå†…éƒ¨åŸç†">å†…éƒ¨åŸç†</a> æ¥äº†è§£æ›´å¤šå…³äºåˆ°åº• <code>.git</code> æ–‡ä»¶å¤¹ä¸­åŒ…å«äº†å“ªäº›æ–‡ä»¶çš„ä¿¡æ¯ã€‚)</p><p>å¦‚æœä½ æ˜¯åœ¨ä¸€ä¸ªå·²ç»å­˜åœ¨æ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼ˆè€Œä¸æ˜¯ç©ºæ–‡ä»¶å¤¹ï¼‰ä¸­åˆå§‹åŒ– Git ä»“åº“æ¥è¿›è¡Œç‰ˆæœ¬æ§åˆ¶çš„è¯ï¼Œä½ åº”è¯¥å¼€å§‹è·Ÿè¸ªè¿™äº›æ–‡ä»¶å¹¶æäº¤ã€‚ ä½ å¯é€šè¿‡ <code>git add</code> å‘½ä»¤æ¥å®ç°å¯¹æŒ‡å®šæ–‡ä»¶çš„è·Ÿè¸ªï¼Œç„¶åæ‰§è¡Œ <code>git commit</code> æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git add *.c</span><br><span class="line">$ git add LICENSE</span><br><span class="line">$ git commit -m &apos;initial project version&apos;</span><br></pre></td></tr></table></figure><p>ç¨åæˆ‘ä»¬å†é€ä¸€è§£é‡Šæ¯ä¸€æ¡æŒ‡ä»¤çš„æ„æ€ã€‚ ç°åœ¨ï¼Œä½ å·²ç»å¾—åˆ°äº†ä¸€ä¸ªå®é™…ç»´æŠ¤ï¼ˆæˆ–è€…è¯´æ˜¯è·Ÿè¸ªï¼‰ç€è‹¥å¹²ä¸ªæ–‡ä»¶çš„ Git ä»“åº“ã€‚</p><h4 id="å…‹éš†ç°æœ‰çš„ä»“åº“"><a href="#å…‹éš†ç°æœ‰çš„ä»“åº“" class="headerlink" title="å…‹éš†ç°æœ‰çš„ä»“åº“"></a>å…‹éš†ç°æœ‰çš„ä»“åº“</h4><p>å¦‚æœä½ æƒ³è·å¾—ä¸€ä»½å·²ç»å­˜åœ¨äº†çš„ Git ä»“åº“çš„æ‹·è´ï¼Œæ¯”å¦‚è¯´ï¼Œä½ æƒ³ä¸ºæŸä¸ªå¼€æºé¡¹ç›®è´¡çŒ®è‡ªå·±çš„ä¸€ä»½åŠ›ï¼Œè¿™æ—¶å°±è¦ç”¨åˆ° <code>git clone</code> å‘½ä»¤ã€‚ å¦‚æœä½ å¯¹å…¶å®ƒçš„ VCS ç³»ç»Ÿï¼ˆæ¯”å¦‚è¯´ Subversionï¼‰å¾ˆç†Ÿæ‚‰ï¼Œè¯·ç•™å¿ƒä¸€ä¸‹ä½ æ‰€ä½¿ç”¨çš„å‘½ä»¤æ˜¯â€cloneâ€è€Œä¸æ˜¯â€checkoutâ€ã€‚ è¿™æ˜¯ Git åŒºåˆ«äºå…¶å®ƒç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼ŒGit å…‹éš†çš„æ˜¯è¯¥ Git ä»“åº“æœåŠ¡å™¨ä¸Šçš„å‡ ä¹æ‰€æœ‰æ•°æ®ï¼Œè€Œä¸æ˜¯ä»…ä»…å¤åˆ¶å®Œæˆä½ çš„å·¥ä½œæ‰€éœ€è¦æ–‡ä»¶ã€‚ å½“ä½ æ‰§è¡Œ <code>git clone</code> å‘½ä»¤çš„æ—¶å€™ï¼Œé»˜è®¤é…ç½®ä¸‹è¿œç¨‹ Git ä»“åº“ä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶çš„æ¯ä¸€ä¸ªç‰ˆæœ¬éƒ½å°†è¢«æ‹‰å–ä¸‹æ¥ã€‚ äº‹å®ä¸Šï¼Œå¦‚æœä½ çš„æœåŠ¡å™¨çš„ç£ç›˜åæ‰äº†ï¼Œä½ é€šå¸¸å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ä¸ªå…‹éš†ä¸‹æ¥çš„ç”¨æˆ·ç«¯æ¥é‡å»ºæœåŠ¡å™¨ä¸Šçš„ä»“åº“ï¼ˆè™½ç„¶å¯èƒ½ä¼šä¸¢å¤±æŸäº›æœåŠ¡å™¨ç«¯çš„æŒ‚é’©è®¾ç½®ï¼Œä½†æ˜¯æ‰€æœ‰ç‰ˆæœ¬çš„æ•°æ®ä»åœ¨ï¼Œè¯¦è§ <a href="http://pengzhenjin.top/2018/06/08/Gitï¼šæœåŠ¡å™¨">åœ¨æœåŠ¡å™¨ä¸Šæ­å»º Git</a> ï¼‰ã€‚</p><p>å…‹éš†ä»“åº“çš„å‘½ä»¤æ ¼å¼æ˜¯ <code>git clone [url]</code>ã€‚ æ¯”å¦‚ï¼Œè¦å…‹éš† Git çš„å¯é“¾æ¥åº“ libgit2ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/libgit2/libgit2</span><br></pre></td></tr></table></figure><p>è¿™ä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º â€œlibgit2â€ çš„ç›®å½•ï¼Œå¹¶åœ¨è¿™ä¸ªç›®å½•ä¸‹åˆå§‹åŒ–ä¸€ä¸ª <code>.git</code> æ–‡ä»¶å¤¹ï¼Œä»è¿œç¨‹ä»“åº“æ‹‰å–ä¸‹æ‰€æœ‰æ•°æ®æ”¾å…¥ <code>.git</code> æ–‡ä»¶å¤¹ï¼Œç„¶åä»ä¸­è¯»å–æœ€æ–°ç‰ˆæœ¬çš„æ–‡ä»¶çš„æ‹·è´ã€‚ å¦‚æœä½ è¿›å…¥åˆ°è¿™ä¸ªæ–°å»ºçš„ <code>libgit2</code> æ–‡ä»¶å¤¹ï¼Œä½ ä¼šå‘ç°æ‰€æœ‰çš„é¡¹ç›®æ–‡ä»¶å·²ç»åœ¨é‡Œé¢äº†ï¼Œå‡†å¤‡å°±ç»ªç­‰å¾…åç»­çš„å¼€å‘å’Œä½¿ç”¨ã€‚ å¦‚æœä½ æƒ³åœ¨å…‹éš†è¿œç¨‹ä»“åº“çš„æ—¶å€™ï¼Œè‡ªå®šä¹‰æœ¬åœ°ä»“åº“çš„åå­—ï¼Œä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/libgit2/libgit2 mylibgit</span><br></pre></td></tr></table></figure><p>è¿™å°†æ‰§è¡Œä¸ä¸Šä¸€ä¸ªå‘½ä»¤ç›¸åŒçš„æ“ä½œï¼Œä¸è¿‡åœ¨æœ¬åœ°åˆ›å»ºçš„ä»“åº“åå­—å˜ä¸º <code>mylibgit</code>ã€‚</p><p>Git æ”¯æŒå¤šç§æ•°æ®ä¼ è¾“åè®®ã€‚ ä¸Šé¢çš„ä¾‹å­ä½¿ç”¨çš„æ˜¯ <code>https://</code> åè®®ï¼Œä¸è¿‡ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>git://</code> åè®®æˆ–è€…ä½¿ç”¨ SSH ä¼ è¾“åè®®ï¼Œæ¯”å¦‚ <code>user@server:path/to/repo.git</code> ã€‚ <a href="http://pengzhenjin.top/2018/06/08/Gitï¼šæœåŠ¡å™¨">åœ¨æœåŠ¡å™¨ä¸Šæ­å»º Git</a> å°†ä¼šä»‹ç»æ‰€æœ‰è¿™äº›åè®®åœ¨æœåŠ¡å™¨ç«¯å¦‚ä½•é…ç½®ä½¿ç”¨ï¼Œä»¥åŠå„ç§æ–¹å¼ä¹‹é—´çš„åˆ©å¼Šã€‚</p><h3 id="è®°å½•æ¯æ¬¡æ›´æ–°åˆ°ä»“åº“"><a href="#è®°å½•æ¯æ¬¡æ›´æ–°åˆ°ä»“åº“" class="headerlink" title="è®°å½•æ¯æ¬¡æ›´æ–°åˆ°ä»“åº“"></a>è®°å½•æ¯æ¬¡æ›´æ–°åˆ°ä»“åº“</h3><p>ç°åœ¨æˆ‘ä»¬æ‰‹ä¸Šæœ‰äº†ä¸€ä¸ªçœŸå®é¡¹ç›®çš„ Git ä»“åº“ï¼Œå¹¶ä»è¿™ä¸ªä»“åº“ä¸­å–å‡ºäº†æ‰€æœ‰æ–‡ä»¶çš„å·¥ä½œæ‹·è´ã€‚ æ¥ä¸‹æ¥ï¼Œå¯¹è¿™äº›æ–‡ä»¶åšäº›ä¿®æ”¹ï¼Œåœ¨å®Œæˆäº†ä¸€ä¸ªé˜¶æ®µçš„ç›®æ ‡ä¹‹åï¼Œæäº¤æœ¬æ¬¡æ›´æ–°åˆ°ä»“åº“ã€‚</p><p>è¯·è®°ä½ï¼Œä½ å·¥ä½œç›®å½•ä¸‹çš„æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½ä¸å¤–ä¹è¿™ä¸¤ç§çŠ¶æ€ï¼šå·²è·Ÿè¸ªæˆ–æœªè·Ÿè¸ªã€‚ å·²è·Ÿè¸ªçš„æ–‡ä»¶æ˜¯æŒ‡é‚£äº›è¢«çº³å…¥äº†ç‰ˆæœ¬æ§åˆ¶çš„æ–‡ä»¶ï¼Œåœ¨ä¸Šä¸€æ¬¡å¿«ç…§ä¸­æœ‰å®ƒä»¬çš„è®°å½•ï¼Œåœ¨å·¥ä½œä¸€æ®µæ—¶é—´åï¼Œå®ƒä»¬çš„çŠ¶æ€å¯èƒ½å¤„äºæœªä¿®æ”¹ï¼Œå·²ä¿®æ”¹æˆ–å·²æ”¾å…¥æš‚å­˜åŒºã€‚ å·¥ä½œç›®å½•ä¸­é™¤å·²è·Ÿè¸ªæ–‡ä»¶ä»¥å¤–çš„æ‰€æœ‰å…¶å®ƒæ–‡ä»¶éƒ½å±äºæœªè·Ÿè¸ªæ–‡ä»¶ï¼Œå®ƒä»¬æ—¢ä¸å­˜åœ¨äºä¸Šæ¬¡å¿«ç…§çš„è®°å½•ä¸­ï¼Œä¹Ÿæ²¡æœ‰æ”¾å…¥æš‚å­˜åŒºã€‚ åˆæ¬¡å…‹éš†æŸä¸ªä»“åº“çš„æ—¶å€™ï¼Œå·¥ä½œç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½å±äºå·²è·Ÿè¸ªæ–‡ä»¶ï¼Œå¹¶å¤„äºæœªä¿®æ”¹çŠ¶æ€ã€‚</p><p>ç¼–è¾‘è¿‡æŸäº›æ–‡ä»¶ä¹‹åï¼Œç”±äºè‡ªä¸Šæ¬¡æäº¤åä½ å¯¹å®ƒä»¬åšäº†ä¿®æ”¹ï¼ŒGit å°†å®ƒä»¬æ ‡è®°ä¸ºå·²ä¿®æ”¹æ–‡ä»¶ã€‚ æˆ‘ä»¬é€æ­¥å°†è¿™äº›ä¿®æ”¹è¿‡çš„æ–‡ä»¶æ”¾å…¥æš‚å­˜åŒºï¼Œç„¶åæäº¤æ‰€æœ‰æš‚å­˜äº†çš„ä¿®æ”¹ï¼Œå¦‚æ­¤åå¤ã€‚æ‰€ä»¥ä½¿ç”¨ Git æ—¶æ–‡ä»¶çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š<br><img src="git-chapter1-img2.png" alt><br>Figure 8. æ–‡ä»¶çš„çŠ¶æ€å˜åŒ–å‘¨æœŸ</p><h4 id="æ£€æŸ¥å½“å‰æ–‡ä»¶çŠ¶æ€"><a href="#æ£€æŸ¥å½“å‰æ–‡ä»¶çŠ¶æ€" class="headerlink" title="æ£€æŸ¥å½“å‰æ–‡ä»¶çŠ¶æ€"></a>æ£€æŸ¥å½“å‰æ–‡ä»¶çŠ¶æ€</h4><p>è¦æŸ¥çœ‹å“ªäº›æ–‡ä»¶å¤„äºä»€ä¹ˆçŠ¶æ€ï¼Œå¯ä»¥ç”¨ <code>git status</code> å‘½ä»¤ã€‚ å¦‚æœåœ¨å…‹éš†ä»“åº“åç«‹å³ä½¿ç”¨æ­¤å‘½ä»¤ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working directory clean</span><br></pre></td></tr></table></figure><p>è¿™è¯´æ˜ä½ ç°åœ¨çš„å·¥ä½œç›®å½•ç›¸å½“å¹²å‡€ã€‚æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰å·²è·Ÿè¸ªæ–‡ä»¶åœ¨ä¸Šæ¬¡æäº¤åéƒ½æœªè¢«æ›´æ”¹è¿‡ã€‚ æ­¤å¤–ï¼Œä¸Šé¢çš„ä¿¡æ¯è¿˜è¡¨æ˜ï¼Œå½“å‰ç›®å½•ä¸‹æ²¡æœ‰å‡ºç°ä»»ä½•å¤„äºæœªè·Ÿè¸ªçŠ¶æ€çš„æ–°æ–‡ä»¶ï¼Œå¦åˆ™ Git ä¼šåœ¨è¿™é‡Œåˆ—å‡ºæ¥ã€‚ æœ€åï¼Œè¯¥å‘½ä»¤è¿˜æ˜¾ç¤ºäº†å½“å‰æ‰€åœ¨åˆ†æ”¯ï¼Œå¹¶å‘Šè¯‰ä½ è¿™ä¸ªåˆ†æ”¯åŒè¿œç¨‹æœåŠ¡å™¨ä¸Šå¯¹åº”çš„åˆ†æ”¯æ²¡æœ‰åç¦»ã€‚ ç°åœ¨ï¼Œåˆ†æ”¯åæ˜¯ â€œmasterâ€,è¿™æ˜¯é»˜è®¤çš„åˆ†æ”¯åã€‚ æˆ‘ä»¬åœ¨ <a href="http://pengzhenjin.top/2018/06/07/Gitï¼šåˆ†æ”¯">Git åˆ†æ”¯</a> ä¼šè¯¦ç»†è®¨è®ºåˆ†æ”¯å’Œå¼•ç”¨ã€‚</p><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬åœ¨é¡¹ç›®ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„ README æ–‡ä»¶ã€‚ å¦‚æœä¹‹å‰å¹¶ä¸å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨ git status å‘½ä»¤ï¼Œä½ å°†çœ‹åˆ°ä¸€ä¸ªæ–°çš„æœªè·Ÿè¸ªæ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ echo &apos;My Project&apos; &gt; README</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Untracked files:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</span><br><span class="line"></span><br><span class="line">    README</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use &quot;git add&quot; to track)</span><br></pre></td></tr></table></figure><p>åœ¨çŠ¶æ€æŠ¥å‘Šä¸­å¯ä»¥çœ‹åˆ°æ–°å»ºçš„ README æ–‡ä»¶å‡ºç°åœ¨ <code>Untracked files</code> ä¸‹é¢ã€‚ æœªè·Ÿè¸ªçš„æ–‡ä»¶æ„å‘³ç€ Git åœ¨ä¹‹å‰çš„å¿«ç…§ï¼ˆæäº¤ï¼‰ä¸­æ²¡æœ‰è¿™äº›æ–‡ä»¶ï¼›Git ä¸ä¼šè‡ªåŠ¨å°†ä¹‹çº³å…¥è·Ÿè¸ªèŒƒå›´ï¼Œé™¤éä½ æ˜æ˜ç™½ç™½åœ°å‘Šè¯‰å®ƒâ€œæˆ‘éœ€è¦è·Ÿè¸ªè¯¥æ–‡ä»¶â€ï¼Œ è¿™æ ·çš„å¤„ç†è®©ä½ ä¸å¿…æ‹…å¿ƒå°†ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶æˆ–å…¶å®ƒä¸æƒ³è¢«è·Ÿè¸ªçš„æ–‡ä»¶åŒ…å«è¿›æ¥ã€‚ ä¸è¿‡ç°åœ¨çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç¡®å®æƒ³è¦è·Ÿè¸ªç®¡ç† README è¿™ä¸ªæ–‡ä»¶ã€‚</p><h4 id="è·Ÿè¸ªæ–°æ–‡ä»¶"><a href="#è·Ÿè¸ªæ–°æ–‡ä»¶" class="headerlink" title="è·Ÿè¸ªæ–°æ–‡ä»¶"></a>è·Ÿè¸ªæ–°æ–‡ä»¶</h4><p>ä½¿ç”¨å‘½ä»¤ <code>git add</code> å¼€å§‹è·Ÿè¸ªä¸€ä¸ªæ–‡ä»¶ã€‚ æ‰€ä»¥ï¼Œè¦è·Ÿè¸ª README æ–‡ä»¶ï¼Œè¿è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add README</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å†è¿è¡Œ <code>git status</code> å‘½ä»¤ï¼Œä¼šçœ‹åˆ° README æ–‡ä»¶å·²è¢«è·Ÿè¸ªï¼Œå¹¶å¤„äºæš‚å­˜çŠ¶æ€ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   README</span><br></pre></td></tr></table></figure><p>åªè¦åœ¨ <code>Changes to be committed</code> è¿™è¡Œä¸‹é¢çš„ï¼Œå°±è¯´æ˜æ˜¯å·²æš‚å­˜çŠ¶æ€ã€‚ å¦‚æœæ­¤æ—¶æäº¤ï¼Œé‚£ä¹ˆè¯¥æ–‡ä»¶æ­¤æ—¶æ­¤åˆ»çš„ç‰ˆæœ¬å°†è¢«ç•™å­˜åœ¨å†å²è®°å½•ä¸­ã€‚ ä½ å¯èƒ½ä¼šæƒ³èµ·ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨ <code>git init</code> åå°±è¿è¡Œäº† <code>git add (files)</code> å‘½ä»¤ï¼Œå¼€å§‹è·Ÿè¸ªå½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚ <code>git add</code> å‘½ä»¤ä½¿ç”¨æ–‡ä»¶æˆ–ç›®å½•çš„è·¯å¾„ä½œä¸ºå‚æ•°ï¼›å¦‚æœå‚æ•°æ˜¯ç›®å½•çš„è·¯å¾„ï¼Œè¯¥å‘½ä»¤å°†é€’å½’åœ°è·Ÿè¸ªè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚</p><h4 id="æš‚å­˜å·²ä¿®æ”¹æ–‡ä»¶"><a href="#æš‚å­˜å·²ä¿®æ”¹æ–‡ä»¶" class="headerlink" title="æš‚å­˜å·²ä¿®æ”¹æ–‡ä»¶"></a>æš‚å­˜å·²ä¿®æ”¹æ–‡ä»¶</h4><p>ç°åœ¨æˆ‘ä»¬æ¥ä¿®æ”¹ä¸€ä¸ªå·²è¢«è·Ÿè¸ªçš„æ–‡ä»¶ã€‚ å¦‚æœä½ ä¿®æ”¹äº†ä¸€ä¸ªåä¸º <code>CONTRIBUTING.md</code> çš„å·²è¢«è·Ÿè¸ªçš„æ–‡ä»¶ï¼Œç„¶åè¿è¡Œ <code>git status</code> å‘½ä»¤ï¼Œä¼šçœ‹åˆ°ä¸‹é¢å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   README</span><br><span class="line"></span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure><p>æ–‡ä»¶ <code>CONTRIBUTING.md</code> å‡ºç°åœ¨ <code>Changes not staged for commit</code> è¿™è¡Œä¸‹é¢ï¼Œè¯´æ˜å·²è·Ÿè¸ªæ–‡ä»¶çš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†è¿˜æ²¡æœ‰æ”¾åˆ°æš‚å­˜åŒºã€‚ è¦æš‚å­˜è¿™æ¬¡æ›´æ–°ï¼Œéœ€è¦è¿è¡Œ <code>git add</code> å‘½ä»¤ã€‚ è¿™æ˜¯ä¸ªå¤šåŠŸèƒ½å‘½ä»¤ï¼šå¯ä»¥ç”¨å®ƒå¼€å§‹è·Ÿè¸ªæ–°æ–‡ä»¶ï¼Œæˆ–è€…æŠŠå·²è·Ÿè¸ªçš„æ–‡ä»¶æ”¾åˆ°æš‚å­˜åŒºï¼Œè¿˜èƒ½ç”¨äºåˆå¹¶æ—¶æŠŠæœ‰å†²çªçš„æ–‡ä»¶æ ‡è®°ä¸ºå·²è§£å†³çŠ¶æ€ç­‰ã€‚ å°†è¿™ä¸ªå‘½ä»¤ç†è§£ä¸ºâ€œæ·»åŠ å†…å®¹åˆ°ä¸‹ä¸€æ¬¡æäº¤ä¸­â€è€Œä¸æ˜¯â€œå°†ä¸€ä¸ªæ–‡ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­â€è¦æ›´åŠ åˆé€‚ã€‚ ç°åœ¨è®©æˆ‘ä»¬è¿è¡Œ <code>git add</code> å°†â€CONTRIBUTING.mdâ€æ”¾åˆ°æš‚å­˜åŒºï¼Œç„¶åå†çœ‹çœ‹ <code>git status</code> çš„è¾“å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git add CONTRIBUTING.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   README</span><br><span class="line">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä¸¤ä¸ªæ–‡ä»¶éƒ½å·²æš‚å­˜ï¼Œä¸‹æ¬¡æäº¤æ—¶å°±ä¼šä¸€å¹¶è®°å½•åˆ°ä»“åº“ã€‚ å‡è®¾æ­¤æ—¶ï¼Œä½ æƒ³è¦åœ¨ <code>CONTRIBUTING.md</code> é‡Œå†åŠ æ¡æ³¨é‡Šï¼Œ é‡æ–°ç¼–è¾‘å­˜ç›˜åï¼Œå‡†å¤‡å¥½æäº¤ã€‚ ä¸è¿‡ä¸”æ…¢ï¼Œå†è¿è¡Œ <code>git status</code> çœ‹çœ‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ vim CONTRIBUTING.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   README</span><br><span class="line">    modified:   CONTRIBUTING.md</span><br><span class="line"></span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure><p>æ€ä¹ˆå›äº‹ï¼Ÿ ç°åœ¨ <code>CONTRIBUTING.md</code> æ–‡ä»¶åŒæ—¶å‡ºç°åœ¨æš‚å­˜åŒºå’Œéæš‚å­˜åŒºã€‚ è¿™æ€ä¹ˆå¯èƒ½å‘¢ï¼Ÿ å¥½å§ï¼Œå®é™…ä¸Š Git åªä¸è¿‡æš‚å­˜äº†ä½ è¿è¡Œ <code>git add</code> å‘½ä»¤æ—¶çš„ç‰ˆæœ¬ï¼Œ å¦‚æœä½ ç°åœ¨æäº¤ï¼Œ<code>CONTRIBUTING.md</code> çš„ç‰ˆæœ¬æ˜¯ä½ æœ€åä¸€æ¬¡è¿è¡Œ <code>git add</code> å‘½ä»¤æ—¶çš„é‚£ä¸ªç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯ä½ è¿è¡Œ <code>git commit</code> æ—¶ï¼Œåœ¨å·¥ä½œç›®å½•ä¸­çš„å½“å‰ç‰ˆæœ¬ã€‚ æ‰€ä»¥ï¼Œè¿è¡Œäº† <code>git add</code> ä¹‹ååˆä½œäº†ä¿®è®¢çš„æ–‡ä»¶ï¼Œéœ€è¦é‡æ–°è¿è¡Œ <code>git add</code> æŠŠæœ€æ–°ç‰ˆæœ¬é‡æ–°æš‚å­˜èµ·æ¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git add CONTRIBUTING.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   README</span><br><span class="line">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure><h4 id="çŠ¶æ€ç®€è§ˆ"><a href="#çŠ¶æ€ç®€è§ˆ" class="headerlink" title="çŠ¶æ€ç®€è§ˆ"></a>çŠ¶æ€ç®€è§ˆ</h4><p><code>git status</code> å‘½ä»¤çš„è¾“å‡ºååˆ†è¯¦ç»†ï¼Œä½†å…¶ç”¨è¯­æœ‰äº›ç¹çã€‚ å¦‚æœä½ ä½¿ç”¨ <code>git status -s</code> å‘½ä»¤æˆ– <code>git status --short</code> å‘½ä»¤ï¼Œä½ å°†å¾—åˆ°ä¸€ç§æ›´ä¸ºç´§å‡‘çš„æ ¼å¼è¾“å‡ºã€‚ è¿è¡Œ <code>git status -s</code> ï¼ŒçŠ¶æ€æŠ¥å‘Šè¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git status -s</span><br><span class="line"> M README</span><br><span class="line">MM Rakefile</span><br><span class="line">A  lib/git.rb</span><br><span class="line">M  lib/simplegit.rb</span><br><span class="line">?? LICENSE.txt</span><br></pre></td></tr></table></figure><p>æ–°æ·»åŠ çš„æœªè·Ÿè¸ªæ–‡ä»¶å‰é¢æœ‰ ?? æ ‡è®°ï¼Œæ–°æ·»åŠ åˆ°æš‚å­˜åŒºä¸­çš„æ–‡ä»¶å‰é¢æœ‰ A æ ‡è®°ï¼Œä¿®æ”¹è¿‡çš„æ–‡ä»¶å‰é¢æœ‰ M æ ‡è®°ã€‚ ä½ å¯èƒ½æ³¨æ„åˆ°äº† M æœ‰ä¸¤ä¸ªå¯ä»¥å‡ºç°çš„ä½ç½®ï¼Œå‡ºç°åœ¨å³è¾¹çš„ M è¡¨ç¤ºè¯¥æ–‡ä»¶è¢«ä¿®æ”¹äº†ä½†æ˜¯è¿˜æ²¡æ”¾å…¥æš‚å­˜åŒºï¼Œå‡ºç°åœ¨é å·¦è¾¹çš„ M è¡¨ç¤ºè¯¥æ–‡ä»¶è¢«ä¿®æ”¹äº†å¹¶æ”¾å…¥äº†æš‚å­˜åŒºã€‚ ä¾‹å¦‚ï¼Œä¸Šé¢çš„çŠ¶æ€æŠ¥å‘Šæ˜¾ç¤ºï¼š <code>README</code> æ–‡ä»¶åœ¨å·¥ä½œåŒºè¢«ä¿®æ”¹äº†ä½†æ˜¯è¿˜æ²¡æœ‰å°†ä¿®æ”¹åçš„æ–‡ä»¶æ”¾å…¥æš‚å­˜åŒº,<code>lib/simplegit.rb</code> æ–‡ä»¶è¢«ä¿®æ”¹äº†å¹¶å°†ä¿®æ”¹åçš„æ–‡ä»¶æ”¾å…¥äº†æš‚å­˜åŒºã€‚ è€Œ <code>Rakefile</code> åœ¨å·¥ä½œåŒºè¢«ä¿®æ”¹å¹¶æäº¤åˆ°æš‚å­˜åŒºååˆåœ¨å·¥ä½œåŒºä¸­è¢«ä¿®æ”¹äº†ï¼Œæ‰€ä»¥åœ¨æš‚å­˜åŒºå’Œå·¥ä½œåŒºéƒ½æœ‰è¯¥æ–‡ä»¶è¢«ä¿®æ”¹äº†çš„è®°å½•ã€‚</p><h4 id="å¿½ç•¥æ–‡ä»¶"><a href="#å¿½ç•¥æ–‡ä»¶" class="headerlink" title="å¿½ç•¥æ–‡ä»¶"></a>å¿½ç•¥æ–‡ä»¶</h4><p>ä¸€èˆ¬æˆ‘ä»¬æ€»ä¼šæœ‰äº›æ–‡ä»¶æ— éœ€çº³å…¥ Git çš„ç®¡ç†ï¼Œä¹Ÿä¸å¸Œæœ›å®ƒä»¬æ€»å‡ºç°åœ¨æœªè·Ÿè¸ªæ–‡ä»¶åˆ—è¡¨ã€‚ é€šå¸¸éƒ½æ˜¯äº›è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼Œæ¯”å¦‚æ—¥å¿—æ–‡ä»¶ï¼Œæˆ–è€…ç¼–è¯‘è¿‡ç¨‹ä¸­åˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶ç­‰ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º <code>.gitignore</code> çš„æ–‡ä»¶ï¼Œåˆ—å‡ºè¦å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼ã€‚ æ¥çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat .gitignore</span><br><span class="line">*.[oa]</span><br><span class="line">*~</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€è¡Œå‘Šè¯‰ Git å¿½ç•¥æ‰€æœ‰ä»¥ <code>.o</code> æˆ– <code>.a</code> ç»“å°¾çš„æ–‡ä»¶ã€‚ä¸€èˆ¬è¿™ç±»å¯¹è±¡æ–‡ä»¶å’Œå­˜æ¡£æ–‡ä»¶éƒ½æ˜¯ç¼–è¯‘è¿‡ç¨‹ä¸­å‡ºç°çš„ã€‚ ç¬¬äºŒè¡Œå‘Šè¯‰ Git å¿½ç•¥æ‰€æœ‰ä»¥æ³¢æµªç¬¦ï¼ˆ~ï¼‰ç»“å°¾çš„æ–‡ä»¶ï¼Œè®¸å¤šæ–‡æœ¬ç¼–è¾‘è½¯ä»¶ï¼ˆæ¯”å¦‚ Emacsï¼‰éƒ½ç”¨è¿™æ ·çš„æ–‡ä»¶åä¿å­˜å‰¯æœ¬ã€‚ æ­¤å¤–ï¼Œä½ å¯èƒ½è¿˜éœ€è¦å¿½ç•¥ logï¼Œtmp æˆ–è€… pid ç›®å½•ï¼Œä»¥åŠè‡ªåŠ¨ç”Ÿæˆçš„æ–‡æ¡£ç­‰ç­‰ã€‚ è¦å…»æˆä¸€å¼€å§‹å°±è®¾ç½®å¥½ .gitignore æ–‡ä»¶çš„ä¹ æƒ¯ï¼Œä»¥å…å°†æ¥è¯¯æäº¤è¿™ç±»æ— ç”¨çš„æ–‡ä»¶ã€‚</p><p>æ–‡ä»¶ <code>.gitignore</code> çš„æ ¼å¼è§„èŒƒå¦‚ä¸‹ï¼š</p><ul><li><p>æ‰€æœ‰ç©ºè¡Œæˆ–è€…ä»¥ ï¼ƒ å¼€å¤´çš„è¡Œéƒ½ä¼šè¢« Git å¿½ç•¥ã€‚</p></li><li><p>å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ glob æ¨¡å¼åŒ¹é…ã€‚</p></li><li><p>åŒ¹é…æ¨¡å¼å¯ä»¥ä»¥ï¼ˆ/ï¼‰å¼€å¤´é˜²æ­¢é€’å½’ã€‚</p></li><li><p>åŒ¹é…æ¨¡å¼å¯ä»¥ä»¥ï¼ˆ/ï¼‰ç»“å°¾æŒ‡å®šç›®å½•ã€‚</p></li><li><p>è¦å¿½ç•¥æŒ‡å®šæ¨¡å¼ä»¥å¤–çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¯ä»¥åœ¨æ¨¡å¼å‰åŠ ä¸ŠæƒŠå¹å·ï¼ˆ!ï¼‰å–åã€‚</p></li></ul><p>æ‰€è°“çš„ glob æ¨¡å¼æ˜¯æŒ‡ shell æ‰€ä½¿ç”¨çš„ç®€åŒ–äº†çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ æ˜Ÿå· (*)åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªä»»æ„å­—ç¬¦ï¼›[abc] åŒ¹é…ä»»ä½•ä¸€ä¸ªåˆ—åœ¨æ–¹æ‹¬å·ä¸­çš„å­—ç¬¦ï¼ˆè¿™ä¸ªä¾‹å­è¦ä¹ˆåŒ¹é…ä¸€ä¸ª aï¼Œè¦ä¹ˆåŒ¹é…ä¸€ä¸ª bï¼Œè¦ä¹ˆåŒ¹é…ä¸€ä¸ª cï¼‰ï¼›é—®å·ï¼ˆ?ï¼‰åªåŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦ï¼›å¦‚æœåœ¨æ–¹æ‹¬å·ä¸­ä½¿ç”¨çŸ­åˆ’çº¿åˆ†éš”ä¸¤ä¸ªå­—ç¬¦ï¼Œè¡¨ç¤ºæ‰€æœ‰åœ¨è¿™ä¸¤ä¸ªå­—ç¬¦èŒƒå›´å†…çš„éƒ½å¯ä»¥åŒ¹é…ï¼ˆæ¯”å¦‚ [0-9] è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ 0 åˆ° 9 çš„æ•°å­—ï¼‰ã€‚ ä½¿ç”¨ä¸¤ä¸ªæ˜Ÿå· (*) è¡¨ç¤ºåŒ¹é…ä»»æ„ä¸­é—´ç›®å½•ï¼Œæ¯”å¦‚ a/**/z å¯ä»¥åŒ¹é… a/z , a/b/z æˆ– a/b/c/z ç­‰ã€‚</p><p>æˆ‘ä»¬å†çœ‹ä¸€ä¸ª .gitignore æ–‡ä»¶çš„ä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># no .a files</span><br><span class="line">*.a</span><br><span class="line"></span><br><span class="line"># but do track lib.a, even though you&apos;re ignoring .a files above</span><br><span class="line">!lib.a</span><br><span class="line"></span><br><span class="line"># only ignore the TODO file in the current directory, not subdir/TODO</span><br><span class="line">/TODO</span><br><span class="line"></span><br><span class="line"># ignore all files in the build/ directory</span><br><span class="line">build/</span><br><span class="line"></span><br><span class="line"># ignore doc/notes.txt, but not doc/server/arch.txt</span><br><span class="line">doc/*.txt</span><br><span class="line"></span><br><span class="line"># ignore all .pdf files in the doc/ directory</span><br><span class="line">doc/**/*.pdf</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹å·²æš‚å­˜å’Œæœªæš‚å­˜çš„ä¿®æ”¹"><a href="#æŸ¥çœ‹å·²æš‚å­˜å’Œæœªæš‚å­˜çš„ä¿®æ”¹" class="headerlink" title="æŸ¥çœ‹å·²æš‚å­˜å’Œæœªæš‚å­˜çš„ä¿®æ”¹"></a>æŸ¥çœ‹å·²æš‚å­˜å’Œæœªæš‚å­˜çš„ä¿®æ”¹</h4><p>å¦‚æœ <code>git status</code> å‘½ä»¤çš„è¾“å‡ºå¯¹äºä½ æ¥è¯´è¿‡äºæ¨¡ç³Šï¼Œä½ æƒ³çŸ¥é“å…·ä½“ä¿®æ”¹äº†ä»€ä¹ˆåœ°æ–¹ï¼Œå¯ä»¥ç”¨ <code>git diff</code> å‘½ä»¤ã€‚ ç¨åæˆ‘ä»¬ä¼šè¯¦ç»†ä»‹ç» <code>git diff</code>ï¼Œä½ å¯èƒ½é€šå¸¸ä¼šç”¨å®ƒæ¥å›ç­”è¿™ä¸¤ä¸ªé—®é¢˜ï¼šå½“å‰åšçš„å“ªäº›æ›´æ–°è¿˜æ²¡æœ‰æš‚å­˜ï¼Ÿ æœ‰å“ªäº›æ›´æ–°å·²ç»æš‚å­˜èµ·æ¥å‡†å¤‡å¥½äº†ä¸‹æ¬¡æäº¤ï¼Ÿ å°½ç®¡ <code>git status</code> å·²ç»é€šè¿‡åœ¨ç›¸åº”æ ä¸‹åˆ—å‡ºæ–‡ä»¶åçš„æ–¹å¼å›ç­”äº†è¿™ä¸ªé—®é¢˜ï¼Œ<code>git diff</code> å°†é€šè¿‡æ–‡ä»¶è¡¥ä¸çš„æ ¼å¼æ˜¾ç¤ºå…·ä½“å“ªäº›è¡Œå‘ç”Ÿäº†æ”¹å˜ã€‚</p><p>å‡å¦‚å†æ¬¡ä¿®æ”¹ README æ–‡ä»¶åæš‚å­˜ï¼Œç„¶åç¼–è¾‘ <code>CONTRIBUTING.md</code> æ–‡ä»¶åå…ˆä¸æš‚å­˜ï¼Œ è¿è¡Œ <code>status</code> å‘½ä»¤å°†ä¼šçœ‹åˆ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">    modified:   README</span><br><span class="line"></span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure><p>è¦æŸ¥çœ‹å°šæœªæš‚å­˜çš„æ–‡ä»¶æ›´æ–°äº†å“ªäº›éƒ¨åˆ†ï¼Œä¸åŠ å‚æ•°ç›´æ¥è¾“å…¥ <code>git diff</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br><span class="line">diff --git a/CONTRIBUTING.md b/CONTRIBUTING.md</span><br><span class="line">index 8ebb991..643e24f 100644</span><br><span class="line">--- a/CONTRIBUTING.md</span><br><span class="line">+++ b/CONTRIBUTING.md</span><br><span class="line">@@ -65,7 +65,8 @@ branch directly, things can get messy.</span><br><span class="line"> Please include a nice description of your changes when you submit your PR;</span><br><span class="line"> if we have to read the whole diff to figure out why you&apos;re contributing</span><br><span class="line"> in the first place, you&apos;re less likely to get feedback and have your change</span><br><span class="line">-merged in.</span><br><span class="line">+merged in. Also, split your changes into comprehensive chunks if your patch is</span><br><span class="line">+longer than a dozen lines.</span><br><span class="line"></span><br><span class="line"> If you are starting to work on a particular area, feel free to submit a PR</span><br><span class="line"> that highlights your work in progress (and note in the PR title that it&apos;s</span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤æ¯”è¾ƒçš„æ˜¯å·¥ä½œç›®å½•ä¸­å½“å‰æ–‡ä»¶å’Œæš‚å­˜åŒºåŸŸå¿«ç…§ä¹‹é—´çš„å·®å¼‚ï¼Œ ä¹Ÿå°±æ˜¯ä¿®æ”¹ä¹‹åè¿˜æ²¡æœ‰æš‚å­˜èµ·æ¥çš„å˜åŒ–å†…å®¹ã€‚</p><p>è‹¥è¦æŸ¥çœ‹å·²æš‚å­˜çš„å°†è¦æ·»åŠ åˆ°ä¸‹æ¬¡æäº¤é‡Œçš„å†…å®¹ï¼Œå¯ä»¥ç”¨ <code>git diff --cached</code> å‘½ä»¤ã€‚ï¼ˆGit 1.6.1 åŠæ›´é«˜ç‰ˆæœ¬è¿˜å…è®¸ä½¿ç”¨ <code>git diff --staged</code>ï¼Œæ•ˆæœæ˜¯ç›¸åŒçš„ï¼Œä½†æ›´å¥½è®°äº›ã€‚ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git diff --staged</span><br><span class="line">diff --git a/README b/README</span><br><span class="line">new file mode 100644</span><br><span class="line">index 0000000..03902a1</span><br><span class="line">--- /dev/null</span><br><span class="line">+++ b/README</span><br><span class="line">@@ -0,0 +1 @@</span><br><span class="line">+My Project</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œ<code>git diff</code> æœ¬èº«åªæ˜¾ç¤ºå°šæœªæš‚å­˜çš„æ”¹åŠ¨ï¼Œè€Œä¸æ˜¯è‡ªä¸Šæ¬¡æäº¤ä»¥æ¥æ‰€åšçš„æ‰€æœ‰æ”¹åŠ¨ã€‚ æ‰€ä»¥æœ‰æ—¶å€™ä½ ä¸€ä¸‹å­æš‚å­˜äº†æ‰€æœ‰æ›´æ–°è¿‡çš„æ–‡ä»¶åï¼Œè¿è¡Œ <code>git diff</code> åå´ä»€ä¹ˆä¹Ÿæ²¡æœ‰ï¼Œå°±æ˜¯è¿™ä¸ªåŸå› ã€‚</p><p>åƒä¹‹å‰è¯´çš„ï¼Œæš‚å­˜ <code>CONTRIBUTING.md</code> åå†ç¼–è¾‘ï¼Œè¿è¡Œ <code>git status</code> ä¼šçœ‹åˆ°æš‚å­˜å‰åçš„ä¸¤ä¸ªç‰ˆæœ¬ã€‚ å¦‚æœæˆ‘ä»¬çš„ç¯å¢ƒï¼ˆç»ˆç«¯è¾“å‡ºï¼‰çœ‹èµ·æ¥å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git add CONTRIBUTING.md</span><br><span class="line">$ echo &apos;# test line&apos; &gt;&gt; CONTRIBUTING.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">    modified:   CONTRIBUTING.md</span><br><span class="line"></span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure><p>ç°åœ¨è¿è¡Œ <code>git diff</code> çœ‹æš‚å­˜å‰åçš„å˜åŒ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br><span class="line">diff --git a/CONTRIBUTING.md b/CONTRIBUTING.md</span><br><span class="line">index 643e24f..87f08c8 100644</span><br><span class="line">--- a/CONTRIBUTING.md</span><br><span class="line">+++ b/CONTRIBUTING.md</span><br><span class="line">@@ -119,3 +119,4 @@ at the</span><br><span class="line"> ## Starter Projects</span><br><span class="line"></span><br><span class="line"> See our [projects list](https://github.com/libgit2/libgit2/blob/development/PROJECTS.md).</span><br><span class="line">+# test line</span><br></pre></td></tr></table></figure><p>ç„¶åç”¨ <code>git diff --cached</code> æŸ¥çœ‹å·²ç»æš‚å­˜èµ·æ¥çš„å˜åŒ–ï¼šï¼ˆ<code>--staged</code> å’Œ <code>--cached</code> æ˜¯åŒä¹‰è¯ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git diff --cached</span><br><span class="line">diff --git a/CONTRIBUTING.md b/CONTRIBUTING.md</span><br><span class="line">index 8ebb991..643e24f 100644</span><br><span class="line">--- a/CONTRIBUTING.md</span><br><span class="line">+++ b/CONTRIBUTING.md</span><br><span class="line">@@ -65,7 +65,8 @@ branch directly, things can get messy.</span><br><span class="line"> Please include a nice description of your changes when you submit your PR;</span><br><span class="line"> if we have to read the whole diff to figure out why you&apos;re contributing</span><br><span class="line"> in the first place, you&apos;re less likely to get feedback and have your change</span><br><span class="line">-merged in.</span><br><span class="line">+merged in. Also, split your changes into comprehensive chunks if your patch is</span><br><span class="line">+longer than a dozen lines.</span><br><span class="line"></span><br><span class="line"> If you are starting to work on a particular area, feel free to submit a PR</span><br><span class="line"> that highlights your work in progress (and note in the PR title that it&apos;s</span><br></pre></td></tr></table></figure><h4 id="æäº¤æ›´æ–°"><a href="#æäº¤æ›´æ–°" class="headerlink" title="æäº¤æ›´æ–°"></a>æäº¤æ›´æ–°</h4><p>ç°åœ¨çš„æš‚å­˜åŒºåŸŸå·²ç»å‡†å¤‡å¦¥å½“å¯ä»¥æäº¤äº†ã€‚ åœ¨æ­¤ä¹‹å‰ï¼Œè¯·ä¸€å®šè¦ç¡®è®¤è¿˜æœ‰ä»€ä¹ˆä¿®æ”¹è¿‡çš„æˆ–æ–°å»ºçš„æ–‡ä»¶è¿˜æ²¡æœ‰ <code>git add</code> è¿‡ï¼Œå¦åˆ™æäº¤çš„æ—¶å€™ä¸ä¼šè®°å½•è¿™äº›è¿˜æ²¡æš‚å­˜èµ·æ¥çš„å˜åŒ–ã€‚ è¿™äº›ä¿®æ”¹è¿‡çš„æ–‡ä»¶åªä¿ç•™åœ¨æœ¬åœ°ç£ç›˜ã€‚ æ‰€ä»¥ï¼Œæ¯æ¬¡å‡†å¤‡æäº¤å‰ï¼Œå…ˆç”¨ <code>git status</code> çœ‹ä¸‹ï¼Œæ˜¯ä¸æ˜¯éƒ½å·²æš‚å­˜èµ·æ¥äº†ï¼Œ ç„¶åå†è¿è¡Œæäº¤å‘½ä»¤ <code>git commit</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼ä¼šå¯åŠ¨æ–‡æœ¬ç¼–è¾‘å™¨ä»¥ä¾¿è¾“å…¥æœ¬æ¬¡æäº¤çš„è¯´æ˜ã€‚</p><p>ç¼–è¾‘å™¨ä¼šæ˜¾ç¤ºç±»ä¼¼ä¸‹é¢çš„æ–‡æœ¬ä¿¡æ¯ï¼ˆæœ¬ä¾‹é€‰ç”¨ Vim çš„å±æ˜¾æ–¹å¼å±•ç¤ºï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Please enter the commit message for your changes. Lines starting</span><br><span class="line"># with &apos;#&apos; will be ignored, and an empty message aborts the commit.</span><br><span class="line"># On branch master</span><br><span class="line"># Changes to be committed:</span><br><span class="line">#new file:   README</span><br><span class="line">#modified:   CONTRIBUTING.md</span><br><span class="line">#</span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line">&quot;.git/COMMIT_EDITMSG&quot; 9L, 283C</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤çš„æäº¤æ¶ˆæ¯åŒ…å«æœ€åä¸€æ¬¡è¿è¡Œ <code>git status</code> çš„è¾“å‡ºï¼Œæ”¾åœ¨æ³¨é‡Šè¡Œé‡Œï¼Œå¦å¤–å¼€å¤´è¿˜æœ‰ä¸€ç©ºè¡Œï¼Œä¾›ä½ è¾“å…¥æäº¤è¯´æ˜ã€‚ ä½ å®Œå…¨å¯ä»¥å»æ‰è¿™äº›æ³¨é‡Šè¡Œï¼Œä¸è¿‡ç•™ç€ä¹Ÿæ²¡å…³ç³»ï¼Œå¤šå°‘èƒ½å¸®ä½ å›æƒ³èµ·è¿™æ¬¡æ›´æ–°çš„å†…å®¹æœ‰å“ªäº›ã€‚ ï¼ˆå¦‚æœæƒ³è¦æ›´è¯¦ç»†çš„å¯¹ä¿®æ”¹äº†å“ªäº›å†…å®¹çš„æç¤ºï¼Œå¯ä»¥ç”¨ <code>-v</code> é€‰é¡¹ï¼Œè¿™ä¼šå°†ä½ æ‰€åšçš„æ”¹å˜çš„ diff è¾“å‡ºæ”¾åˆ°ç¼–è¾‘å™¨ä¸­ä»è€Œä½¿ä½ çŸ¥é“æœ¬æ¬¡æäº¤å…·ä½“åšäº†å“ªäº›ä¿®æ”¹ã€‚ï¼‰ é€€å‡ºç¼–è¾‘å™¨æ—¶ï¼ŒGit ä¼šä¸¢æ‰æ³¨é‡Šè¡Œï¼Œç”¨ä½ è¾“å…¥æäº¤é™„å¸¦ä¿¡æ¯ç”Ÿæˆä¸€æ¬¡æäº¤ã€‚</p><p>å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ <code>commit</code> å‘½ä»¤åæ·»åŠ  <code>-m</code> é€‰é¡¹ï¼Œå°†æäº¤ä¿¡æ¯ä¸å‘½ä»¤æ”¾åœ¨åŒä¸€è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &quot;Story 182: Fix benchmarks for speed&quot;</span><br><span class="line">[master 463dc4f] Story 182: Fix benchmarks for speed</span><br><span class="line"> 2 files changed, 2 insertions(+)</span><br><span class="line"> create mode 100644 README</span><br></pre></td></tr></table></figure><p>å¥½ï¼Œç°åœ¨ä½ å·²ç»åˆ›å»ºäº†ç¬¬ä¸€ä¸ªæäº¤ï¼ å¯ä»¥çœ‹åˆ°ï¼Œæäº¤åå®ƒä¼šå‘Šè¯‰ä½ ï¼Œå½“å‰æ˜¯åœ¨å“ªä¸ªåˆ†æ”¯ï¼ˆ<code>master</code>ï¼‰æäº¤çš„ï¼Œæœ¬æ¬¡æäº¤çš„å®Œæ•´ SHA-1 æ ¡éªŒå’Œæ˜¯ä»€ä¹ˆï¼ˆ<code>463dc4f</code>ï¼‰ï¼Œä»¥åŠåœ¨æœ¬æ¬¡æäº¤ä¸­ï¼Œæœ‰å¤šå°‘æ–‡ä»¶ä¿®è®¢è¿‡ï¼Œå¤šå°‘è¡Œæ·»åŠ å’Œåˆ æ”¹è¿‡ã€‚</p><p>è¯·è®°ä½ï¼Œæäº¤æ—¶è®°å½•çš„æ˜¯æ”¾åœ¨æš‚å­˜åŒºåŸŸçš„å¿«ç…§ã€‚ ä»»ä½•è¿˜æœªæš‚å­˜çš„ä»ç„¶ä¿æŒå·²ä¿®æ”¹çŠ¶æ€ï¼Œå¯ä»¥åœ¨ä¸‹æ¬¡æäº¤æ—¶çº³å…¥ç‰ˆæœ¬ç®¡ç†ã€‚ æ¯ä¸€æ¬¡è¿è¡Œæäº¤æ“ä½œï¼Œéƒ½æ˜¯å¯¹ä½ é¡¹ç›®ä½œä¸€æ¬¡å¿«ç…§ï¼Œä»¥åå¯ä»¥å›åˆ°è¿™ä¸ªçŠ¶æ€ï¼Œæˆ–è€…è¿›è¡Œæ¯”è¾ƒã€‚</p><h4 id="è·³è¿‡ä½¿ç”¨æš‚å­˜åŒºåŸŸ"><a href="#è·³è¿‡ä½¿ç”¨æš‚å­˜åŒºåŸŸ" class="headerlink" title="è·³è¿‡ä½¿ç”¨æš‚å­˜åŒºåŸŸ"></a>è·³è¿‡ä½¿ç”¨æš‚å­˜åŒºåŸŸ</h4><p>å°½ç®¡ä½¿ç”¨æš‚å­˜åŒºåŸŸçš„æ–¹å¼å¯ä»¥ç²¾å¿ƒå‡†å¤‡è¦æäº¤çš„ç»†èŠ‚ï¼Œä½†æœ‰æ—¶å€™è¿™ä¹ˆåšç•¥æ˜¾ç¹çã€‚ Git æä¾›äº†ä¸€ä¸ªè·³è¿‡ä½¿ç”¨æš‚å­˜åŒºåŸŸçš„æ–¹å¼ï¼Œ åªè¦åœ¨æäº¤çš„æ—¶å€™ï¼Œç»™ <code>git commit</code> åŠ ä¸Š <code>-a</code> é€‰é¡¹ï¼ŒGit å°±ä¼šè‡ªåŠ¨æŠŠæ‰€æœ‰å·²ç»è·Ÿè¸ªè¿‡çš„æ–‡ä»¶æš‚å­˜èµ·æ¥ä¸€å¹¶æäº¤ï¼Œä»è€Œè·³è¿‡ <code>git add</code> æ­¥éª¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">    modified:   CONTRIBUTING.md</span><br><span class="line"></span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br><span class="line">$ git commit -a -m &apos;added new benchmarks&apos;</span><br><span class="line">[master 83e38c7] added new benchmarks</span><br><span class="line"> 1 file changed, 5 insertions(+), 0 deletions(-)</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°äº†å—ï¼Ÿæäº¤ä¹‹å‰ä¸å†éœ€è¦ <code>git add</code> æ–‡ä»¶â€œCONTRIBUTING.mdâ€äº†ã€‚</p><h4 id="ç§»é™¤æ–‡ä»¶"><a href="#ç§»é™¤æ–‡ä»¶" class="headerlink" title="ç§»é™¤æ–‡ä»¶"></a>ç§»é™¤æ–‡ä»¶</h4><p>è¦ä» Git ä¸­ç§»é™¤æŸä¸ªæ–‡ä»¶ï¼Œå°±å¿…é¡»è¦ä»å·²è·Ÿè¸ªæ–‡ä»¶æ¸…å•ä¸­ç§»é™¤ï¼ˆç¡®åˆ‡åœ°è¯´ï¼Œæ˜¯ä»æš‚å­˜åŒºåŸŸç§»é™¤ï¼‰ï¼Œç„¶åæäº¤ã€‚ å¯ä»¥ç”¨ <code>git rm</code> å‘½ä»¤å®Œæˆæ­¤é¡¹å·¥ä½œï¼Œå¹¶è¿å¸¦ä»å·¥ä½œç›®å½•ä¸­åˆ é™¤æŒ‡å®šçš„æ–‡ä»¶ï¼Œè¿™æ ·ä»¥åå°±ä¸ä¼šå‡ºç°åœ¨æœªè·Ÿè¸ªæ–‡ä»¶æ¸…å•ä¸­äº†ã€‚</p><p>å¦‚æœåªæ˜¯ç®€å•åœ°ä»å·¥ä½œç›®å½•ä¸­æ‰‹å·¥åˆ é™¤æ–‡ä»¶ï¼Œè¿è¡Œ <code>git status</code> æ—¶å°±ä¼šåœ¨ â€œChanges not staged for commitâ€ éƒ¨åˆ†ï¼ˆä¹Ÿå°±æ˜¯ æœªæš‚å­˜æ¸…å•ï¼‰çœ‹åˆ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ rm PROJECTS.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with &apos;origin/master&apos;.</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add/rm &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">        deleted:    PROJECTS.md</span><br><span class="line"></span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br></pre></td></tr></table></figure><p>ç„¶åå†è¿è¡Œ <code>git rm</code> è®°å½•æ­¤æ¬¡ç§»é™¤æ–‡ä»¶çš„æ“ä½œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git rm PROJECTS.md</span><br><span class="line">rm &apos;PROJECTS.md&apos;</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">    deleted:    PROJECTS.md</span><br></pre></td></tr></table></figure><p>ä¸‹ä¸€æ¬¡æäº¤æ—¶ï¼Œè¯¥æ–‡ä»¶å°±ä¸å†çº³å…¥ç‰ˆæœ¬ç®¡ç†äº†ã€‚ å¦‚æœåˆ é™¤ä¹‹å‰ä¿®æ”¹è¿‡å¹¶ä¸”å·²ç»æ”¾åˆ°æš‚å­˜åŒºåŸŸçš„è¯ï¼Œåˆ™å¿…é¡»è¦ç”¨å¼ºåˆ¶åˆ é™¤é€‰é¡¹ <code>-f</code>ï¼ˆè¯‘æ³¨ï¼šå³ force çš„é¦–å­—æ¯ï¼‰ã€‚ è¿™æ˜¯ä¸€ç§å®‰å…¨ç‰¹æ€§ï¼Œç”¨äºé˜²æ­¢è¯¯åˆ è¿˜æ²¡æœ‰æ·»åŠ åˆ°å¿«ç…§çš„æ•°æ®ï¼Œè¿™æ ·çš„æ•°æ®ä¸èƒ½è¢« Git æ¢å¤ã€‚</p><p>å¦å¤–ä¸€ç§æƒ…å†µæ˜¯ï¼Œæˆ‘ä»¬æƒ³æŠŠæ–‡ä»¶ä» Git ä»“åº“ä¸­åˆ é™¤ï¼ˆäº¦å³ä»æš‚å­˜åŒºåŸŸç§»é™¤ï¼‰ï¼Œä½†ä»ç„¶å¸Œæœ›ä¿ç•™åœ¨å½“å‰å·¥ä½œç›®å½•ä¸­ã€‚ æ¢å¥è¯è¯´ï¼Œä½ æƒ³è®©æ–‡ä»¶ä¿ç•™åœ¨ç£ç›˜ï¼Œä½†æ˜¯å¹¶ä¸æƒ³è®© Git ç»§ç»­è·Ÿè¸ªã€‚ å½“ä½ å¿˜è®°æ·»åŠ  <code>.gitignore</code> æ–‡ä»¶ï¼Œä¸å°å¿ƒæŠŠä¸€ä¸ªå¾ˆå¤§çš„æ—¥å¿—æ–‡ä»¶æˆ–ä¸€å † <code>.a</code> è¿™æ ·çš„ç¼–è¯‘ç”Ÿæˆæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºæ—¶ï¼Œè¿™ä¸€åšæ³•å°¤å…¶æœ‰ç”¨ã€‚ ä¸ºè¾¾åˆ°è¿™ä¸€ç›®çš„ï¼Œä½¿ç”¨ <code>--cached</code> é€‰é¡¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rm --cached README</span><br></pre></td></tr></table></figure><p><code>git rm</code> å‘½ä»¤åé¢å¯ä»¥åˆ—å‡ºæ–‡ä»¶æˆ–è€…ç›®å½•çš„åå­—ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>glob</code> æ¨¡å¼ã€‚ æ¯”æ–¹è¯´ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rm log/\*.log</span><br></pre></td></tr></table></figure><p>æ³¨æ„åˆ°æ˜Ÿå· <code>*</code> ä¹‹å‰çš„åæ–œæ  <code>\</code>ï¼Œ å› ä¸º Git æœ‰å®ƒè‡ªå·±çš„æ–‡ä»¶æ¨¡å¼æ‰©å±•åŒ¹é…æ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨ shell æ¥å¸®å¿™å±•å¼€ã€‚ æ­¤å‘½ä»¤åˆ é™¤ <code>log/</code> ç›®å½•ä¸‹æ‰©å±•åä¸º <code>.log</code> çš„æ‰€æœ‰æ–‡ä»¶ã€‚ ç±»ä¼¼çš„æ¯”å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rm \*~</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤ä¸ºåˆ é™¤ä»¥ <code>~</code> ç»“å°¾çš„æ‰€æœ‰æ–‡ä»¶ã€‚</p><h4 id="ç§»åŠ¨æ–‡ä»¶"><a href="#ç§»åŠ¨æ–‡ä»¶" class="headerlink" title="ç§»åŠ¨æ–‡ä»¶"></a>ç§»åŠ¨æ–‡ä»¶</h4><p>ä¸åƒå…¶å®ƒçš„ VCS ç³»ç»Ÿï¼ŒGit å¹¶ä¸æ˜¾å¼è·Ÿè¸ªæ–‡ä»¶ç§»åŠ¨æ“ä½œã€‚ å¦‚æœåœ¨ Git ä¸­é‡å‘½åäº†æŸä¸ªæ–‡ä»¶ï¼Œä»“åº“ä¸­å­˜å‚¨çš„å…ƒæ•°æ®å¹¶ä¸ä¼šä½“ç°å‡ºè¿™æ˜¯ä¸€æ¬¡æ”¹åæ“ä½œã€‚ ä¸è¿‡ Git éå¸¸èªæ˜ï¼Œå®ƒä¼šæ¨æ–­å‡ºç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Œè‡³äºå…·ä½“æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Œæˆ‘ä»¬ç¨åå†è°ˆã€‚</p><p>æ—¢ç„¶å¦‚æ­¤ï¼Œå½“ä½ çœ‹åˆ° Git çš„ <code>mv</code> å‘½ä»¤æ—¶ä¸€å®šä¼šå›°æƒ‘ä¸å·²ã€‚ è¦åœ¨ Git ä¸­å¯¹æ–‡ä»¶æ”¹åï¼Œå¯ä»¥è¿™ä¹ˆåšï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git mv file_from file_to</span><br></pre></td></tr></table></figure><p>å®ƒä¼šæ°å¦‚é¢„æœŸèˆ¬æ­£å¸¸å·¥ä½œã€‚ å®é™…ä¸Šï¼Œå³ä¾¿æ­¤æ—¶æŸ¥çœ‹çŠ¶æ€ä¿¡æ¯ï¼Œä¹Ÿä¼šæ˜ç™½æ— è¯¯åœ°çœ‹åˆ°å…³äºé‡å‘½åæ“ä½œçš„è¯´æ˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git mv README.md README</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">    renamed:    README.md -&gt; README</span><br></pre></td></tr></table></figure><p>å…¶å®ï¼Œè¿è¡Œ <code>git mv</code> å°±ç›¸å½“äºè¿è¡Œäº†ä¸‹é¢ä¸‰æ¡å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mv README.md README</span><br><span class="line">$ git rm README.md</span><br><span class="line">$ git add README</span><br></pre></td></tr></table></figure><p>å¦‚æ­¤åˆ†å¼€æ“ä½œï¼ŒGit ä¹Ÿä¼šæ„è¯†åˆ°è¿™æ˜¯ä¸€æ¬¡æ”¹åï¼Œæ‰€ä»¥ä¸ç®¡ä½•ç§æ–¹å¼ç»“æœéƒ½ä¸€æ ·ã€‚ ä¸¤è€…å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œ<code>mv</code> æ˜¯ä¸€æ¡å‘½ä»¤è€Œå¦ä¸€ç§æ–¹å¼éœ€è¦ä¸‰æ¡å‘½ä»¤ï¼Œç›´æ¥ç”¨ <code>git mv</code> è½»ä¾¿å¾—å¤šã€‚ ä¸è¿‡æœ‰æ—¶å€™ç”¨å…¶ä»–å·¥å…·æ‰¹å¤„ç†æ”¹åçš„è¯ï¼Œè¦è®°å¾—åœ¨æäº¤å‰åˆ é™¤è€çš„æ–‡ä»¶åï¼Œå†æ·»åŠ æ–°çš„æ–‡ä»¶åã€‚</p><h3 id="æŸ¥çœ‹æäº¤å†å²"><a href="#æŸ¥çœ‹æäº¤å†å²" class="headerlink" title="æŸ¥çœ‹æäº¤å†å²"></a>æŸ¥çœ‹æäº¤å†å²</h3><p>åœ¨æäº¤äº†è‹¥å¹²æ›´æ–°ï¼Œåˆæˆ–è€…å…‹éš†äº†æŸä¸ªé¡¹ç›®ä¹‹åï¼Œä½ ä¹Ÿè®¸æƒ³å›é¡¾ä¸‹æäº¤å†å²ã€‚ å®Œæˆè¿™ä¸ªä»»åŠ¡æœ€ç®€å•è€Œåˆæœ‰æ•ˆçš„å·¥å…·æ˜¯ <code>git log</code> å‘½ä»¤ã€‚</p><p>æ¥ä¸‹æ¥çš„ä¾‹å­ä¼šç”¨æˆ‘ä¸“é—¨ç”¨äºæ¼”ç¤ºçš„ simplegit é¡¹ç›®ï¼Œ è¿è¡Œä¸‹é¢çš„å‘½ä»¤è·å–è¯¥é¡¹ç›®æºä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/schacon/simplegit-progit</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æ­¤é¡¹ç›®ä¸­è¿è¡Œ <code>git log</code>ï¼Œåº”è¯¥ä¼šçœ‹åˆ°ä¸‹é¢çš„è¾“å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class="line"></span><br><span class="line">    changed the version number</span><br><span class="line"></span><br><span class="line">commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Sat Mar 15 16:40:33 2008 -0700</span><br><span class="line"></span><br><span class="line">    removed unnecessary test</span><br><span class="line"></span><br><span class="line">commit a11bef06a3f659402fe7563abf99ad00de2209e6</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Sat Mar 15 10:31:28 2008 -0700</span><br><span class="line"></span><br><span class="line">    first commit</span><br></pre></td></tr></table></figure><p>é»˜è®¤ä¸ç”¨ä»»ä½•å‚æ•°çš„è¯ï¼Œ<code>git log</code> ä¼šæŒ‰æäº¤æ—¶é—´åˆ—å‡ºæ‰€æœ‰çš„æ›´æ–°ï¼Œæœ€è¿‘çš„æ›´æ–°æ’åœ¨æœ€ä¸Šé¢ã€‚ æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šåˆ—å‡ºæ¯ä¸ªæäº¤çš„ SHA-1 æ ¡éªŒå’Œã€ä½œè€…çš„åå­—å’Œç”µå­é‚®ä»¶åœ°å€ã€æäº¤æ—¶é—´ä»¥åŠæäº¤è¯´æ˜ã€‚</p><p><code>git log</code> æœ‰è®¸å¤šé€‰é¡¹å¯ä»¥å¸®åŠ©ä½ æœå¯»ä½ æ‰€è¦æ‰¾çš„æäº¤ï¼Œ æ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»äº›æœ€å¸¸ç”¨çš„ã€‚</p><p>ä¸€ä¸ªå¸¸ç”¨çš„é€‰é¡¹æ˜¯ <code>-p</code>ï¼Œç”¨æ¥æ˜¾ç¤ºæ¯æ¬¡æäº¤çš„å†…å®¹å·®å¼‚ã€‚ ä½ ä¹Ÿå¯ä»¥åŠ ä¸Š <code>-2</code> æ¥ä»…æ˜¾ç¤ºæœ€è¿‘ä¸¤æ¬¡æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">$ git log -p -2</span><br><span class="line">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class="line"></span><br><span class="line">    changed the version number</span><br><span class="line"></span><br><span class="line">diff --git a/Rakefile b/Rakefile</span><br><span class="line">index a874b73..8f94139 100644</span><br><span class="line">--- a/Rakefile</span><br><span class="line">+++ b/Rakefile</span><br><span class="line">@@ -5,7 +5,7 @@ require &apos;rake/gempackagetask&apos;</span><br><span class="line"> spec = Gem::Specification.new do |s|</span><br><span class="line">     s.platform  =   Gem::Platform::RUBY</span><br><span class="line">     s.name      =   &quot;simplegit&quot;</span><br><span class="line">-    s.version   =   &quot;0.1.0&quot;</span><br><span class="line">+    s.version   =   &quot;0.1.1&quot;</span><br><span class="line">     s.author    =   &quot;Scott Chacon&quot;</span><br><span class="line">     s.email     =   &quot;schacon@gee-mail.com&quot;</span><br><span class="line">     s.summary   =   &quot;A simple gem for using Git in Ruby code.&quot;</span><br><span class="line"></span><br><span class="line">commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Sat Mar 15 16:40:33 2008 -0700</span><br><span class="line"></span><br><span class="line">    removed unnecessary test</span><br><span class="line"></span><br><span class="line">diff --git a/lib/simplegit.rb b/lib/simplegit.rb</span><br><span class="line">index a0a60ae..47c6340 100644</span><br><span class="line">--- a/lib/simplegit.rb</span><br><span class="line">+++ b/lib/simplegit.rb</span><br><span class="line">@@ -18,8 +18,3 @@ class SimpleGit</span><br><span class="line">     end</span><br><span class="line"></span><br><span class="line"> end</span><br><span class="line">-</span><br><span class="line">-if $0 == __FILE__</span><br><span class="line">-  git = SimpleGit.new</span><br><span class="line">-  puts git.show</span><br><span class="line">-end</span><br><span class="line">\ No newline at end of file</span><br></pre></td></tr></table></figure><p>è¯¥é€‰é¡¹é™¤äº†æ˜¾ç¤ºåŸºæœ¬ä¿¡æ¯ä¹‹å¤–ï¼Œè¿˜é™„å¸¦äº†æ¯æ¬¡ commit çš„å˜åŒ–ã€‚ å½“è¿›è¡Œä»£ç å®¡æŸ¥ï¼Œæˆ–è€…å¿«é€Ÿæµè§ˆæŸä¸ªæ­æ¡£æäº¤çš„ commit æ‰€å¸¦æ¥çš„å˜åŒ–çš„æ—¶å€™ï¼Œè¿™ä¸ªå‚æ•°å°±éå¸¸æœ‰ç”¨äº†ã€‚ ä½ ä¹Ÿå¯ä»¥ä¸º <code>git log</code> é™„å¸¦ä¸€ç³»åˆ—çš„æ€»ç»“æ€§é€‰é¡¹ã€‚ æ¯”å¦‚è¯´ï¼Œå¦‚æœä½ æƒ³çœ‹åˆ°æ¯æ¬¡æäº¤çš„ç®€ç•¥çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>--stat</code> é€‰é¡¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$ git log --stat</span><br><span class="line">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class="line"></span><br><span class="line">    changed the version number</span><br><span class="line"></span><br><span class="line"> Rakefile | 2 +-</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br><span class="line"></span><br><span class="line">commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Sat Mar 15 16:40:33 2008 -0700</span><br><span class="line"></span><br><span class="line">    removed unnecessary test</span><br><span class="line"></span><br><span class="line"> lib/simplegit.rb | 5 -----</span><br><span class="line"> 1 file changed, 5 deletions(-)</span><br><span class="line"></span><br><span class="line">commit a11bef06a3f659402fe7563abf99ad00de2209e6</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Sat Mar 15 10:31:28 2008 -0700</span><br><span class="line"></span><br><span class="line">    first commit</span><br><span class="line"></span><br><span class="line"> README           |  6 ++++++</span><br><span class="line"> Rakefile         | 23 +++++++++++++++++++++++</span><br><span class="line"> lib/simplegit.rb | 25 +++++++++++++++++++++++++</span><br><span class="line"> 3 files changed, 54 insertions(+)</span><br></pre></td></tr></table></figure><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œ<code>--stat</code> é€‰é¡¹åœ¨æ¯æ¬¡æäº¤çš„ä¸‹é¢åˆ—å‡ºæ‰€æœ‰è¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€æœ‰å¤šå°‘æ–‡ä»¶è¢«ä¿®æ”¹äº†ä»¥åŠè¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶çš„å“ªäº›è¡Œè¢«ç§»é™¤æˆ–æ˜¯æ·»åŠ äº†ã€‚ åœ¨æ¯æ¬¡æäº¤çš„æœ€åè¿˜æœ‰ä¸€ä¸ªæ€»ç»“ã€‚</p><p>å¦å¤–ä¸€ä¸ªå¸¸ç”¨çš„é€‰é¡¹æ˜¯ <code>--pretty</code>ã€‚ è¿™ä¸ªé€‰é¡¹å¯ä»¥æŒ‡å®šä½¿ç”¨ä¸åŒäºé»˜è®¤æ ¼å¼çš„æ–¹å¼å±•ç¤ºæäº¤å†å²ã€‚ è¿™ä¸ªé€‰é¡¹æœ‰ä¸€äº›å†…å»ºçš„å­é€‰é¡¹ä¾›ä½ ä½¿ç”¨ã€‚ æ¯”å¦‚ç”¨ <code>oneline</code> å°†æ¯ä¸ªæäº¤æ”¾åœ¨ä¸€è¡Œæ˜¾ç¤ºï¼ŒæŸ¥çœ‹çš„æäº¤æ•°å¾ˆå¤§æ—¶éå¸¸æœ‰ç”¨ã€‚ å¦å¤–è¿˜æœ‰ <code>short</code>ï¼Œ<code>full</code> å’Œ <code>fuller</code> å¯ä»¥ç”¨ï¼Œå±•ç¤ºçš„ä¿¡æ¯æˆ–å¤šæˆ–å°‘æœ‰äº›ä¸åŒï¼Œè¯·è‡ªå·±åŠ¨æ‰‹å®è·µä¸€ä¸‹çœ‹çœ‹æ•ˆæœå¦‚ä½•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=oneline</span><br><span class="line">ca82a6dff817ec66f44342007202690a93763949 changed the version number</span><br><span class="line">085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7 removed unnecessary test</span><br><span class="line">a11bef06a3f659402fe7563abf99ad00de2209e6 first commit</span><br></pre></td></tr></table></figure><p>ä½†æœ€æœ‰æ„æ€çš„æ˜¯ formatï¼Œå¯ä»¥å®šåˆ¶è¦æ˜¾ç¤ºçš„è®°å½•æ ¼å¼ã€‚ è¿™æ ·çš„è¾“å‡ºå¯¹åæœŸæå–åˆ†ææ ¼å¤–æœ‰ç”¨â€‰â€”â€‰å› ä¸ºä½ çŸ¥é“è¾“å‡ºçš„æ ¼å¼ä¸ä¼šéšç€ Git çš„æ›´æ–°è€Œå‘ç”Ÿæ”¹å˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=format:&quot;%h - %an, %ar : %s&quot;</span><br><span class="line">ca82a6d - Scott Chacon, 6 years ago : changed the version number</span><br><span class="line">085bb3b - Scott Chacon, 6 years ago : removed unnecessary test</span><br><span class="line">a11bef0 - Scott Chacon, 6 years ago : first commit</span><br></pre></td></tr></table></figure><p><code>git log --pretty=format</code> å¸¸ç”¨çš„é€‰é¡¹ åˆ—å‡ºäº†å¸¸ç”¨çš„æ ¼å¼å ä½ç¬¦å†™æ³•åŠå…¶ä»£è¡¨çš„æ„ä¹‰ã€‚</p><div class="note default">            <p><code>git log --pretty=format</code> å¸¸ç”¨çš„é€‰é¡¹</p><table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>%H</td><td>æäº¤å¯¹è±¡ï¼ˆcommitï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸²</td></tr><tr><td>%h</td><td>æäº¤å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸²</td></tr><tr><td>%T</td><td>æ ‘å¯¹è±¡ï¼ˆtreeï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸²</td></tr><tr><td>%t</td><td>æ ‘å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸²</td></tr><tr><td>%P</td><td>çˆ¶å¯¹è±¡ï¼ˆparentï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸²</td></tr><tr><td>%p</td><td>çˆ¶å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸²</td></tr><tr><td>%an</td><td>ä½œè€…ï¼ˆauthorï¼‰çš„åå­—</td></tr><tr><td>%ae</td><td>ä½œè€…çš„ç”µå­é‚®ä»¶åœ°å€</td></tr><tr><td>%ad</td><td>ä½œè€…ä¿®è®¢æ—¥æœŸï¼ˆå¯ä»¥ç”¨ â€“date= é€‰é¡¹å®šåˆ¶æ ¼å¼ï¼‰</td></tr><tr><td>%ar</td><td>ä½œè€…ä¿®è®¢æ—¥æœŸï¼ŒæŒ‰å¤šä¹…ä»¥å‰çš„æ–¹å¼æ˜¾ç¤º</td></tr><tr><td>%cn</td><td>æäº¤è€…ï¼ˆcommitterï¼‰çš„åå­—</td></tr><tr><td>%ce</td><td>æäº¤è€…çš„ç”µå­é‚®ä»¶åœ°å€</td></tr><tr><td>%cd</td><td>æäº¤æ—¥æœŸ</td></tr><tr><td>%cr</td><td>æäº¤æ—¥æœŸï¼ŒæŒ‰å¤šä¹…ä»¥å‰çš„æ–¹å¼æ˜¾ç¤º</td></tr><tr><td>%s</td><td>æäº¤è¯´æ˜</td></tr></tbody></table>          </div><p>ä½ ä¸€å®šå¥‡æ€ª ä½œè€… å’Œ æäº¤è€… ä¹‹é—´ç©¶ç«Ÿæœ‰ä½•å·®åˆ«ï¼Œ å…¶å®ä½œè€…æŒ‡çš„æ˜¯å®é™…ä½œå‡ºä¿®æ”¹çš„äººï¼Œæäº¤è€…æŒ‡çš„æ˜¯æœ€åå°†æ­¤å·¥ä½œæˆæœæäº¤åˆ°ä»“åº“çš„äººã€‚ æ‰€ä»¥ï¼Œå½“ä½ ä¸ºæŸä¸ªé¡¹ç›®å‘å¸ƒè¡¥ä¸ï¼Œç„¶åæŸä¸ªæ ¸å¿ƒæˆå‘˜å°†ä½ çš„è¡¥ä¸å¹¶å…¥é¡¹ç›®æ—¶ï¼Œä½ å°±æ˜¯ä½œè€…ï¼Œè€Œé‚£ä¸ªæ ¸å¿ƒæˆå‘˜å°±æ˜¯æäº¤è€…ã€‚ æˆ‘ä»¬ä¼šåœ¨ <a href="http://pengzhenjin.top/2018/06/09/Gitï¼šåˆ†å¸ƒå¼">åˆ†å¸ƒå¼ Git</a> å†è¯¦ç»†ä»‹ç»ä¸¤è€…ä¹‹é—´çš„ç»†å¾®å·®åˆ«ã€‚</p><p>å½“ oneline æˆ– format ä¸å¦ä¸€ä¸ª <code>log</code> é€‰é¡¹ <code>--graph</code> ç»“åˆä½¿ç”¨æ—¶å°¤å…¶æœ‰ç”¨ã€‚ è¿™ä¸ªé€‰é¡¹æ·»åŠ äº†ä¸€äº› ASCII å­—ç¬¦ä¸²æ¥å½¢è±¡åœ°å±•ç¤ºä½ çš„åˆ†æ”¯ã€åˆå¹¶å†å²ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=format:&quot;%h %s&quot; --graph</span><br><span class="line">* 2d3acf9 ignore errors from SIGCHLD on trap</span><br><span class="line">*  5e3ee11 Merge branch &apos;master&apos; of git://github.com/dustin/grit</span><br><span class="line">|\</span><br><span class="line">| * 420eac9 Added a method for getting the current branch.</span><br><span class="line">* | 30e367c timeout code and tests</span><br><span class="line">* | 5a09431 add timeout protection to grit</span><br><span class="line">* | e1193f8 support for heads with slashes in them</span><br><span class="line">|/</span><br><span class="line">* d6016bc require time for xmlschema</span><br><span class="line">*  11d191e Merge branch &apos;defunkt&apos; into local</span><br></pre></td></tr></table></figure><p>è¿™ç§è¾“å‡ºç±»å‹ä¼šåœ¨æˆ‘ä»¬ä¸‹ä¸€ç« å­¦å®Œåˆ†æ”¯ä¸åˆå¹¶ä»¥åå˜å¾—æ›´åŠ æœ‰è¶£ã€‚</p><p>ä»¥ä¸Šåªæ˜¯ç®€å•ä»‹ç»äº†ä¸€äº› <code>git log</code> å‘½ä»¤æ”¯æŒçš„é€‰é¡¹ã€‚ <code>git log</code> çš„å¸¸ç”¨é€‰é¡¹ åˆ—å‡ºäº†æˆ‘ä»¬ç›®å‰æ¶‰åŠåˆ°çš„å’Œæ²¡æ¶‰åŠåˆ°çš„é€‰é¡¹ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å½±å“ log å‘½ä»¤çš„è¾“å‡ºçš„ï¼š</p><div class="note default">            <p><code>git log</code> çš„å¸¸ç”¨é€‰é¡¹</p><table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-p</td><td>æŒ‰è¡¥ä¸æ ¼å¼æ˜¾ç¤ºæ¯ä¸ªæ›´æ–°ä¹‹é—´çš„å·®å¼‚</td></tr><tr><td>â€“stat</td><td>æ˜¾ç¤ºæ¯æ¬¡æ›´æ–°çš„æ–‡ä»¶ä¿®æ”¹ç»Ÿè®¡ä¿¡æ¯</td></tr><tr><td>â€“shortstat</td><td>åªæ˜¾ç¤º â€“stat ä¸­æœ€åçš„è¡Œæ•°ä¿®æ”¹æ·»åŠ ç§»é™¤ç»Ÿè®¡</td></tr><tr><td>â€“name-only</td><td>ä»…åœ¨æäº¤ä¿¡æ¯åæ˜¾ç¤ºå·²ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•</td></tr><tr><td>â€“name-status</td><td>æ˜¾ç¤ºæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤çš„æ–‡ä»¶æ¸…å•</td></tr><tr><td>â€“abbrev-commit</td><td>ä»…æ˜¾ç¤º SHA-1 çš„å‰å‡ ä¸ªå­—ç¬¦ï¼Œè€Œéæ‰€æœ‰çš„ 40 ä¸ªå­—ç¬¦</td></tr><tr><td>â€“relative-date</td><td>ä½¿ç”¨è¾ƒçŸ­çš„ç›¸å¯¹æ—¶é—´æ˜¾ç¤ºï¼ˆæ¯”å¦‚ï¼Œâ€œ2 weeks agoâ€ï¼‰</td></tr><tr><td>â€“graph</td><td>æ˜¾ç¤º ASCII å›¾å½¢è¡¨ç¤ºçš„åˆ†æ”¯åˆå¹¶å†å²</td></tr><tr><td>â€“pretty</td><td>ä½¿ç”¨å…¶ä»–æ ¼å¼æ˜¾ç¤ºå†å²æäº¤ä¿¡æ¯ã€‚å¯ç”¨çš„é€‰é¡¹åŒ…æ‹¬ onelineï¼Œshortï¼Œfullï¼Œfuller å’Œ formatï¼ˆåè·ŸæŒ‡å®šæ ¼å¼ï¼‰</td></tr></tbody></table>          </div><h4 id="é™åˆ¶è¾“å‡ºé•¿åº¦"><a href="#é™åˆ¶è¾“å‡ºé•¿åº¦" class="headerlink" title="é™åˆ¶è¾“å‡ºé•¿åº¦"></a>é™åˆ¶è¾“å‡ºé•¿åº¦</h4><p>é™¤äº†å®šåˆ¶è¾“å‡ºæ ¼å¼çš„é€‰é¡¹ä¹‹å¤–ï¼Œ<code>git log</code> è¿˜æœ‰è®¸å¤šéå¸¸å®ç”¨çš„é™åˆ¶è¾“å‡ºé•¿åº¦çš„é€‰é¡¹ï¼Œä¹Ÿå°±æ˜¯åªè¾“å‡ºéƒ¨åˆ†æäº¤ä¿¡æ¯ã€‚ ä¹‹å‰ä½ å·²ç»çœ‹åˆ°è¿‡ <code>-2</code> äº†ï¼Œå®ƒåªæ˜¾ç¤ºæœ€è¿‘çš„ä¸¤æ¡æäº¤ï¼Œ å®é™…ä¸Šï¼Œè¿™æ˜¯ <code>-&lt;n&gt;</code> é€‰é¡¹çš„å†™æ³•ï¼Œå…¶ä¸­çš„ <code>n</code> å¯ä»¥æ˜¯ä»»ä½•æ•´æ•°ï¼Œè¡¨ç¤ºä»…æ˜¾ç¤ºæœ€è¿‘çš„è‹¥å¹²æ¡æäº¤ã€‚ ä¸è¿‡å®è·µä¸­æˆ‘ä»¬æ˜¯ä¸å¤ªç”¨è¿™ä¸ªé€‰é¡¹çš„ï¼ŒGit åœ¨è¾“å‡ºæ‰€æœ‰æäº¤æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨åˆ†é¡µç¨‹åºï¼Œæ‰€ä»¥ä½ ä¸€æ¬¡åªä¼šçœ‹åˆ°ä¸€é¡µçš„å†…å®¹ã€‚</p><p>å¦å¤–è¿˜æœ‰æŒ‰ç…§æ—¶é—´ä½œé™åˆ¶çš„é€‰é¡¹ï¼Œæ¯”å¦‚ <code>--since</code> å’Œ <code>--until</code> ä¹Ÿå¾ˆæœ‰ç”¨ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‘½ä»¤åˆ—å‡ºæ‰€æœ‰æœ€è¿‘ä¸¤å‘¨å†…çš„æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log --since=2.weeks</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å¯ä»¥åœ¨å¤šç§æ ¼å¼ä¸‹å·¥ä½œï¼Œæ¯”å¦‚è¯´å…·ä½“çš„æŸä¸€å¤© <code>&quot;2008-01-15&quot;</code>ï¼Œæˆ–è€…æ˜¯ç›¸å¯¹åœ°å¤šä¹…ä»¥å‰ <code>&quot;2 years 1 day 3 minutes ago&quot;</code>ã€‚</p><p>è¿˜å¯ä»¥ç»™å‡ºè‹¥å¹²æœç´¢æ¡ä»¶ï¼Œåˆ—å‡ºç¬¦åˆçš„æäº¤ã€‚ ç”¨ <code>--author</code> é€‰é¡¹æ˜¾ç¤ºæŒ‡å®šä½œè€…çš„æäº¤ï¼Œç”¨ <code>--grep</code> é€‰é¡¹æœç´¢æäº¤è¯´æ˜ä¸­çš„å…³é”®å­—ã€‚ ï¼ˆè¯·æ³¨æ„ï¼Œå¦‚æœè¦å¾—åˆ°åŒæ—¶æ»¡è¶³è¿™ä¸¤ä¸ªé€‰é¡¹æœç´¢æ¡ä»¶çš„æäº¤ï¼Œå°±å¿…é¡»ç”¨ <code>--all-match</code> é€‰é¡¹ã€‚å¦åˆ™ï¼Œæ»¡è¶³ä»»æ„ä¸€ä¸ªæ¡ä»¶çš„æäº¤éƒ½ä¼šè¢«åŒ¹é…å‡ºæ¥ï¼‰</p><p>å¦ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç­›é€‰é€‰é¡¹æ˜¯ <code>-S</code>ï¼Œå¯ä»¥åˆ—å‡ºé‚£äº›æ·»åŠ æˆ–ç§»é™¤äº†æŸäº›å­—ç¬¦ä¸²çš„æäº¤ã€‚ æ¯”å¦‚è¯´ï¼Œä½ æƒ³æ‰¾å‡ºæ·»åŠ æˆ–ç§»é™¤äº†æŸä¸€ä¸ªç‰¹å®šå‡½æ•°çš„å¼•ç”¨çš„æäº¤ï¼Œä½ å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log -Sfunction_name</span><br></pre></td></tr></table></figure><p>æœ€åä¸€ä¸ªå¾ˆå®ç”¨çš„ <code>git log</code> é€‰é¡¹æ˜¯è·¯å¾„ï¼ˆpathï¼‰ï¼Œ å¦‚æœåªå…³å¿ƒæŸäº›æ–‡ä»¶æˆ–è€…ç›®å½•çš„å†å²æäº¤ï¼Œå¯ä»¥åœ¨ <code>git log</code> é€‰é¡¹çš„æœ€åæŒ‡å®šå®ƒä»¬çš„è·¯å¾„ã€‚ å› ä¸ºæ˜¯æ”¾åœ¨æœ€åä½ç½®ä¸Šçš„é€‰é¡¹ï¼Œæ‰€ä»¥ç”¨ä¸¤ä¸ªçŸ­åˆ’çº¿ï¼ˆâ€“ï¼‰éš”å¼€ä¹‹å‰çš„é€‰é¡¹å’Œåé¢é™å®šçš„è·¯å¾„åã€‚</p><p>åœ¨ é™åˆ¶ <code>git log</code> è¾“å‡ºçš„é€‰é¡¹ ä¸­åˆ—å‡ºäº†å¸¸ç”¨çš„é€‰é¡¹</p><div class="note default">            <p>é™åˆ¶ <code>git log</code> è¾“å‡ºçš„é€‰é¡¹</p><table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-(n)</td><td>ä»…æ˜¾ç¤ºæœ€è¿‘çš„ n æ¡æäº¤</td></tr><tr><td>â€“since, â€“after</td><td>ä»…æ˜¾ç¤ºæŒ‡å®šæ—¶é—´ä¹‹åçš„æäº¤</td></tr><tr><td>â€“until, â€“before</td><td>ä»…æ˜¾ç¤ºæŒ‡å®šæ—¶é—´ä¹‹å‰çš„æäº¤</td></tr><tr><td>â€“author</td><td>ä»…æ˜¾ç¤ºæŒ‡å®šä½œè€…ç›¸å…³çš„æäº¤</td></tr><tr><td>â€“committer</td><td>ä»…æ˜¾ç¤ºæŒ‡å®šæäº¤è€…ç›¸å…³çš„æäº¤</td></tr><tr><td>â€“grep</td><td>ä»…æ˜¾ç¤ºå«æŒ‡å®šå…³é”®å­—çš„æäº¤</td></tr><tr><td>-S</td><td>ä»…æ˜¾ç¤ºæ·»åŠ æˆ–ç§»é™¤äº†æŸä¸ªå…³é”®å­—çš„æäº¤</td></tr></tbody></table>          </div><p>æ¥çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œå¦‚æœè¦æŸ¥çœ‹ Git ä»“åº“ä¸­ï¼Œ2008 å¹´ 10 æœˆæœŸé—´ï¼ŒJunio Hamano æäº¤çš„ä½†æœªåˆå¹¶çš„æµ‹è¯•æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æŸ¥è¯¢å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=&quot;%h - %s&quot; --author=gitster --since=&quot;2008-10-01&quot; \</span><br><span class="line">   --before=&quot;2008-11-01&quot; --no-merges -- t/</span><br><span class="line">5610e3b - Fix testcase failure when extended attributes are in use</span><br><span class="line">acd3b9e - Enhance hold_lock_file_for_&#123;update,append&#125;() API</span><br><span class="line">f563754 - demonstrate breakage of detached checkout with symbolic link HEAD</span><br><span class="line">d1a43f2 - reset --hard/read-tree --reset -u: remove unmerged new paths</span><br><span class="line">51a94af - Fix &quot;checkout --track -b newbranch&quot; on detached HEAD</span><br><span class="line">b0ad11e - pull: allow &quot;git pull origin $something:$current_branch&quot; into an unborn branch</span><br></pre></td></tr></table></figure><p>åœ¨è¿‘ 40000 æ¡æäº¤ä¸­ï¼Œä¸Šé¢çš„è¾“å‡ºä»…åˆ—å‡ºäº†ç¬¦åˆæ¡ä»¶çš„ 6 æ¡è®°å½•ã€‚</p><h3 id="æ’¤æ¶ˆæ“ä½œ"><a href="#æ’¤æ¶ˆæ“ä½œ" class="headerlink" title="æ’¤æ¶ˆæ“ä½œ"></a>æ’¤æ¶ˆæ“ä½œ</h3><p>åœ¨ä»»ä½•ä¸€ä¸ªé˜¶æ®µï¼Œä½ éƒ½æœ‰å¯èƒ½æƒ³è¦æ’¤æ¶ˆæŸäº›æ“ä½œã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä¼šå­¦ä¹ å‡ ä¸ªæ’¤æ¶ˆä½ æ‰€åšä¿®æ”¹çš„åŸºæœ¬å·¥å…·ã€‚ æ³¨æ„ï¼Œæœ‰äº›æ’¤æ¶ˆæ“ä½œæ˜¯ä¸å¯é€†çš„ã€‚ è¿™æ˜¯åœ¨ä½¿ç”¨ Git çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå› ä¸ºæ“ä½œå¤±è¯¯è€Œå¯¼è‡´ä¹‹å‰çš„å·¥ä½œä¸¢å¤±çš„å°‘æœ‰çš„å‡ ä¸ªåœ°æ–¹ä¹‹ä¸€ã€‚</p><p>æœ‰æ—¶å€™æˆ‘ä»¬æäº¤å®Œäº†æ‰å‘ç°æ¼æ‰äº†å‡ ä¸ªæ–‡ä»¶æ²¡æœ‰æ·»åŠ ï¼Œæˆ–è€…æäº¤ä¿¡æ¯å†™é”™äº†ã€‚ æ­¤æ—¶ï¼Œå¯ä»¥è¿è¡Œå¸¦æœ‰ <code>--amend</code> é€‰é¡¹çš„æäº¤å‘½ä»¤å°è¯•é‡æ–°æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit --amend</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šå°†æš‚å­˜åŒºä¸­çš„æ–‡ä»¶æäº¤ã€‚ å¦‚æœè‡ªä¸Šæ¬¡æäº¤ä»¥æ¥ä½ è¿˜æœªåšä»»ä½•ä¿®æ”¹ï¼ˆä¾‹å¦‚ï¼Œåœ¨ä¸Šæ¬¡æäº¤åé©¬ä¸Šæ‰§è¡Œäº†æ­¤å‘½ä»¤ï¼‰ï¼Œé‚£ä¹ˆå¿«ç…§ä¼šä¿æŒä¸å˜ï¼Œè€Œä½ æ‰€ä¿®æ”¹çš„åªæ˜¯æäº¤ä¿¡æ¯ã€‚</p><p>æ–‡æœ¬ç¼–è¾‘å™¨å¯åŠ¨åï¼Œå¯ä»¥çœ‹åˆ°ä¹‹å‰çš„æäº¤ä¿¡æ¯ã€‚ ç¼–è¾‘åä¿å­˜ä¼šè¦†ç›–åŸæ¥çš„æäº¤ä¿¡æ¯ã€‚</p><p>ä¾‹å¦‚ï¼Œä½ æäº¤åå‘ç°å¿˜è®°äº†æš‚å­˜æŸäº›éœ€è¦çš„ä¿®æ”¹ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·æ“ä½œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &apos;initial commit&apos;</span><br><span class="line">$ git add forgotten_file</span><br><span class="line">$ git commit --amend</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆä½ åªä¼šæœ‰ä¸€ä¸ªæäº¤â€”â€”ç¬¬äºŒæ¬¡æäº¤å°†ä»£æ›¿ç¬¬ä¸€æ¬¡æäº¤çš„ç»“æœã€‚</p><h4 id="å–æ¶ˆæš‚å­˜çš„æ–‡ä»¶"><a href="#å–æ¶ˆæš‚å­˜çš„æ–‡ä»¶" class="headerlink" title="å–æ¶ˆæš‚å­˜çš„æ–‡ä»¶"></a>å–æ¶ˆæš‚å­˜çš„æ–‡ä»¶</h4><p>æ¥ä¸‹æ¥çš„ä¸¤ä¸ªå°èŠ‚æ¼”ç¤ºå¦‚ä½•æ“ä½œæš‚å­˜åŒºåŸŸä¸å·¥ä½œç›®å½•ä¸­å·²ä¿®æ”¹çš„æ–‡ä»¶ã€‚ è¿™äº›å‘½ä»¤åœ¨ä¿®æ”¹æ–‡ä»¶çŠ¶æ€çš„åŒæ—¶ï¼Œä¹Ÿä¼šæç¤ºå¦‚ä½•æ’¤æ¶ˆæ“ä½œã€‚ ä¾‹å¦‚ï¼Œä½ å·²ç»ä¿®æ”¹äº†ä¸¤ä¸ªæ–‡ä»¶å¹¶ä¸”æƒ³è¦å°†å®ƒä»¬ä½œä¸ºä¸¤æ¬¡ç‹¬ç«‹çš„ä¿®æ”¹æäº¤ï¼Œä½†æ˜¯å´æ„å¤–åœ°è¾“å…¥äº† <code>git add *</code> æš‚å­˜äº†å®ƒä»¬ä¸¤ä¸ªã€‚ å¦‚ä½•åªå–æ¶ˆæš‚å­˜ä¸¤ä¸ªä¸­çš„ä¸€ä¸ªå‘¢ï¼Ÿ <code>git status</code> å‘½ä»¤æç¤ºäº†ä½ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git add *</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">    renamed:    README.md -&gt; README</span><br><span class="line">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure><p>åœ¨ â€œChanges to be committedâ€ æ–‡å­—æ­£ä¸‹æ–¹ï¼Œæç¤ºä½¿ç”¨ <code>git reset HEAD &lt;file&gt;...</code> æ¥å–æ¶ˆæš‚å­˜ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥å–æ¶ˆæš‚å­˜ <code>CONTRIBUTING.md</code> æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git reset HEAD CONTRIBUTING.md</span><br><span class="line">Unstaged changes after reset:</span><br><span class="line">MCONTRIBUTING.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">    renamed:    README.md -&gt; README</span><br><span class="line"></span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤æœ‰ç‚¹å„¿å¥‡æ€ªï¼Œä½†æ˜¯èµ·ä½œç”¨äº†ã€‚ <code>CONTRIBUTING.md</code> æ–‡ä»¶å·²ç»æ˜¯ä¿®æ”¹æœªæš‚å­˜çš„çŠ¶æ€äº†ã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢è¿™ä¸ªç¥å¥‡çš„è°ƒç”¨å°±æ˜¯ä½ éœ€è¦å¯¹ <code>git reset</code> å‘½ä»¤äº†è§£çš„å…¨éƒ¨ã€‚æˆ‘ä»¬å°†ä¼šåœ¨ é‡ç½®æ­å¯† ä¸­äº†è§£ <code>reset</code> çš„æ›´å¤šç»†èŠ‚ä»¥åŠå¦‚ä½•æŒæ¡å®ƒåšä¸€äº›çœŸæ­£æœ‰è¶£çš„äº‹ã€‚</p><h4 id="æ’¤æ¶ˆå¯¹æ–‡ä»¶çš„ä¿®æ”¹"><a href="#æ’¤æ¶ˆå¯¹æ–‡ä»¶çš„ä¿®æ”¹" class="headerlink" title="æ’¤æ¶ˆå¯¹æ–‡ä»¶çš„ä¿®æ”¹"></a>æ’¤æ¶ˆå¯¹æ–‡ä»¶çš„ä¿®æ”¹</h4><p>å¦‚æœä½ å¹¶ä¸æƒ³ä¿ç•™å¯¹ <code>CONTRIBUTING.md</code> æ–‡ä»¶çš„ä¿®æ”¹æ€ä¹ˆåŠï¼Ÿ ä½ è¯¥å¦‚ä½•æ–¹ä¾¿åœ°æ’¤æ¶ˆä¿®æ”¹â€”â€”å°†å®ƒè¿˜åŸæˆä¸Šæ¬¡æäº¤æ—¶çš„æ ·å­ï¼ˆæˆ–è€…åˆšå…‹éš†å®Œçš„æ ·å­ï¼Œæˆ–è€…åˆšæŠŠå®ƒæ”¾å…¥å·¥ä½œç›®å½•æ—¶çš„æ ·å­ï¼‰ï¼Ÿ å¹¸è¿çš„æ˜¯ï¼Œ<code>git status</code> ä¹Ÿå‘Šè¯‰äº†ä½ åº”è¯¥å¦‚ä½•åšã€‚ åœ¨æœ€åä¸€ä¸ªä¾‹å­ä¸­ï¼Œæœªæš‚å­˜åŒºåŸŸæ˜¯è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure><p>å®ƒéå¸¸æ¸…æ¥šåœ°å‘Šè¯‰äº†ä½ å¦‚ä½•æ’¤æ¶ˆä¹‹å‰æ‰€åšçš„ä¿®æ”¹ã€‚ è®©æˆ‘ä»¬æ¥æŒ‰ç…§æç¤ºæ‰§è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -- CONTRIBUTING.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">    renamed:    README.md -&gt; README</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°é‚£äº›ä¿®æ”¹å·²ç»è¢«æ’¤æ¶ˆäº†ã€‚</p><p>å¦‚æœä½ ä»ç„¶æƒ³ä¿ç•™å¯¹é‚£ä¸ªæ–‡ä»¶åšå‡ºçš„ä¿®æ”¹ï¼Œä½†æ˜¯ç°åœ¨ä»ç„¶éœ€è¦æ’¤æ¶ˆï¼Œæˆ‘ä»¬å°†ä¼šåœ¨ <a href="https://pengzhenjin.top/2018/06/07/Gitï¼šåˆ†æ”¯">Git åˆ†æ”¯</a> ä»‹ç»ä¿å­˜è¿›åº¦ä¸åˆ†æ”¯ï¼›è¿™äº›é€šå¸¸æ˜¯æ›´å¥½çš„åšæ³•ã€‚</p><p>è®°ä½ï¼Œåœ¨ Git ä¸­ä»»ä½• å·²æäº¤çš„ ä¸œè¥¿å‡ ä¹æ€»æ˜¯å¯ä»¥æ¢å¤çš„ã€‚ ç”šè‡³é‚£äº›è¢«åˆ é™¤çš„åˆ†æ”¯ä¸­çš„æäº¤æˆ–ä½¿ç”¨ <code>--amend</code> é€‰é¡¹è¦†ç›–çš„æäº¤ä¹Ÿå¯ä»¥æ¢å¤ã€‚ ç„¶è€Œï¼Œä»»ä½•ä½ æœªæäº¤çš„ä¸œè¥¿ä¸¢å¤±åå¾ˆå¯èƒ½å†ä¹Ÿæ‰¾ä¸åˆ°äº†ã€‚</p><h3 id="è¿œç¨‹ä»“åº“çš„ä½¿ç”¨"><a href="#è¿œç¨‹ä»“åº“çš„ä½¿ç”¨" class="headerlink" title="è¿œç¨‹ä»“åº“çš„ä½¿ç”¨"></a>è¿œç¨‹ä»“åº“çš„ä½¿ç”¨</h3><p>ä¸ºäº†èƒ½åœ¨ä»»æ„ Git é¡¹ç›®ä¸Šåä½œï¼Œä½ éœ€è¦çŸ¥é“å¦‚ä½•ç®¡ç†è‡ªå·±çš„è¿œç¨‹ä»“åº“ã€‚ è¿œç¨‹ä»“åº“æ˜¯æŒ‡æ‰˜ç®¡åœ¨å› ç‰¹ç½‘æˆ–å…¶ä»–ç½‘ç»œä¸­çš„ä½ çš„é¡¹ç›®çš„ç‰ˆæœ¬åº“ã€‚ ä½ å¯ä»¥æœ‰å¥½å‡ ä¸ªè¿œç¨‹ä»“åº“ï¼Œé€šå¸¸æœ‰äº›ä»“åº“å¯¹ä½ åªè¯»ï¼Œæœ‰äº›åˆ™å¯ä»¥è¯»å†™ã€‚ ä¸ä»–äººåä½œæ¶‰åŠç®¡ç†è¿œç¨‹ä»“åº“ä»¥åŠæ ¹æ®éœ€è¦æ¨é€æˆ–æ‹‰å–æ•°æ®ã€‚ ç®¡ç†è¿œç¨‹ä»“åº“åŒ…æ‹¬äº†è§£å¦‚ä½•æ·»åŠ è¿œç¨‹ä»“åº“ã€ç§»é™¤æ— æ•ˆçš„è¿œç¨‹ä»“åº“ã€ç®¡ç†ä¸åŒçš„è¿œç¨‹åˆ†æ”¯å¹¶å®šä¹‰å®ƒä»¬æ˜¯å¦è¢«è·Ÿè¸ªç­‰ç­‰ã€‚ åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸€éƒ¨åˆ†è¿œç¨‹ç®¡ç†çš„æŠ€èƒ½ã€‚</p><h4 id="æŸ¥çœ‹è¿œç¨‹ä»“åº“"><a href="#æŸ¥çœ‹è¿œç¨‹ä»“åº“" class="headerlink" title="æŸ¥çœ‹è¿œç¨‹ä»“åº“"></a>æŸ¥çœ‹è¿œç¨‹ä»“åº“</h4><p>å¦‚æœæƒ³æŸ¥çœ‹ä½ å·²ç»é…ç½®çš„è¿œç¨‹ä»“åº“æœåŠ¡å™¨ï¼Œå¯ä»¥è¿è¡Œ <code>git remote</code> å‘½ä»¤ã€‚ å®ƒä¼šåˆ—å‡ºä½ æŒ‡å®šçš„æ¯ä¸€ä¸ªè¿œç¨‹æœåŠ¡å™¨çš„ç®€å†™ã€‚ å¦‚æœä½ å·²ç»å…‹éš†äº†è‡ªå·±çš„ä»“åº“ï¼Œé‚£ä¹ˆè‡³å°‘åº”è¯¥èƒ½çœ‹åˆ° origin â€”â€”è¿™æ˜¯ Git ç»™ä½ å…‹éš†çš„ä»“åº“æœåŠ¡å™¨çš„é»˜è®¤åå­—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/schacon/ticgit</span><br><span class="line">Cloning into &apos;ticgit&apos;...</span><br><span class="line">remote: Reusing existing pack: 1857, done.</span><br><span class="line">remote: Total 1857 (delta 0), reused 0 (delta 0)</span><br><span class="line">Receiving objects: 100% (1857/1857), 374.35 KiB | 268.00 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (772/772), done.</span><br><span class="line">Checking connectivity... done.</span><br><span class="line">$ cd ticgit</span><br><span class="line">$ git remote</span><br><span class="line">origin</span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥æŒ‡å®šé€‰é¡¹ <code>-v</code>ï¼Œä¼šæ˜¾ç¤ºéœ€è¦è¯»å†™è¿œç¨‹ä»“åº“ä½¿ç”¨çš„ Git ä¿å­˜çš„ç®€å†™ä¸å…¶å¯¹åº”çš„ URLã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v</span><br><span class="line">originhttps://github.com/schacon/ticgit (fetch)</span><br><span class="line">originhttps://github.com/schacon/ticgit (push)</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ çš„è¿œç¨‹ä»“åº“ä¸æ­¢ä¸€ä¸ªï¼Œè¯¥å‘½ä»¤ä¼šå°†å®ƒä»¬å…¨éƒ¨åˆ—å‡ºã€‚ ä¾‹å¦‚ï¼Œä¸å‡ ä¸ªåä½œè€…åˆä½œçš„ï¼Œæ‹¥æœ‰å¤šä¸ªè¿œç¨‹ä»“åº“çš„ä»“åº“çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ cd grit</span><br><span class="line">$ git remote -v</span><br><span class="line">bakkdoor  https://github.com/bakkdoor/grit (fetch)</span><br><span class="line">bakkdoor  https://github.com/bakkdoor/grit (push)</span><br><span class="line">cho45     https://github.com/cho45/grit (fetch)</span><br><span class="line">cho45     https://github.com/cho45/grit (push)</span><br><span class="line">defunkt   https://github.com/defunkt/grit (fetch)</span><br><span class="line">defunkt   https://github.com/defunkt/grit (push)</span><br><span class="line">koke      git://github.com/koke/grit.git (fetch)</span><br><span class="line">koke      git://github.com/koke/grit.git (push)</span><br><span class="line">origin    git@github.com:mojombo/grit.git (fetch)</span><br><span class="line">origin    git@github.com:mojombo/grit.git (push)</span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å¯ä»¥è½»æ¾æ‹‰å–å…¶ä¸­ä»»ä½•ä¸€ä¸ªç”¨æˆ·çš„è´¡çŒ®ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬å¤§æ¦‚è¿˜ä¼šæœ‰æŸäº›è¿œç¨‹ä»“åº“çš„æ¨é€æƒé™ï¼Œè™½ç„¶æˆ‘ä»¬ç›®å‰è¿˜ä¸ä¼šåœ¨æ­¤ä»‹ç»ã€‚</p><p>æ³¨æ„è¿™äº›è¿œç¨‹ä»“åº“ä½¿ç”¨äº†ä¸åŒçš„åè®®ï¼›æˆ‘ä»¬å°†ä¼šåœ¨ <a href="http://pengzhenjin.top/2018/06/08/Gitï¼šæœåŠ¡å™¨">åœ¨æœåŠ¡å™¨ä¸Šæ­å»º Git</a> ä¸­äº†è§£å…³äºå®ƒä»¬çš„æ›´å¤šä¿¡æ¯ã€‚</p><h4 id="æ·»åŠ è¿œç¨‹ä»“åº“"><a href="#æ·»åŠ è¿œç¨‹ä»“åº“" class="headerlink" title="æ·»åŠ è¿œç¨‹ä»“åº“"></a>æ·»åŠ è¿œç¨‹ä»“åº“</h4><p>æˆ‘åœ¨ä¹‹å‰çš„ç« èŠ‚ä¸­å·²ç»æåˆ°å¹¶å±•ç¤ºäº†å¦‚ä½•æ·»åŠ è¿œç¨‹ä»“åº“çš„ç¤ºä¾‹ï¼Œä¸è¿‡è¿™é‡Œå°†å‘Šè¯‰ä½ å¦‚ä½•æ˜ç¡®åœ°åšåˆ°è¿™ä¸€ç‚¹ã€‚ è¿è¡Œ <code>git remote add &lt;shortname&gt; &lt;url&gt;</code> æ·»åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ Git ä»“åº“ï¼ŒåŒæ—¶æŒ‡å®šä¸€ä¸ªä½ å¯ä»¥è½»æ¾å¼•ç”¨çš„ç®€å†™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git remote</span><br><span class="line">origin</span><br><span class="line">$ git remote add pb https://github.com/paulboone/ticgit</span><br><span class="line">$ git remote -v</span><br><span class="line">originhttps://github.com/schacon/ticgit (fetch)</span><br><span class="line">originhttps://github.com/schacon/ticgit (push)</span><br><span class="line">pbhttps://github.com/paulboone/ticgit (fetch)</span><br><span class="line">pbhttps://github.com/paulboone/ticgit (push)</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨å­—ç¬¦ä¸² <code>pb</code> æ¥ä»£æ›¿æ•´ä¸ª URLã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³æ‹‰å– Paul çš„ä»“åº“ä¸­æœ‰ä½†ä½ æ²¡æœ‰çš„ä¿¡æ¯ï¼Œå¯ä»¥è¿è¡Œ <code>git fetch pb</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch pb</span><br><span class="line">remote: Counting objects: 43, done.</span><br><span class="line">remote: Compressing objects: 100% (36/36), done.</span><br><span class="line">remote: Total 43 (delta 10), reused 31 (delta 5)</span><br><span class="line">Unpacking objects: 100% (43/43), done.</span><br><span class="line">From https://github.com/paulboone/ticgit</span><br><span class="line"> * [new branch]      master     -&gt; pb/master</span><br><span class="line"> * [new branch]      ticgit     -&gt; pb/ticgit</span><br></pre></td></tr></table></figure><p>ç°åœ¨ Paul çš„ master åˆ†æ”¯å¯ä»¥åœ¨æœ¬åœ°é€šè¿‡ <code>pb/master</code> è®¿é—®åˆ°â€”â€”ä½ å¯ä»¥å°†å®ƒåˆå¹¶åˆ°è‡ªå·±çš„æŸä¸ªåˆ†æ”¯ä¸­ï¼Œæˆ–è€…å¦‚æœä½ æƒ³è¦æŸ¥çœ‹å®ƒçš„è¯ï¼Œå¯ä»¥æ£€å‡ºä¸€ä¸ªæŒ‡å‘è¯¥ç‚¹çš„æœ¬åœ°åˆ†æ”¯ã€‚ ï¼ˆæˆ‘ä»¬å°†ä¼šåœ¨ <a href="http://pengzhenjin.top/2018/06/07/Gitï¼šåˆ†æ”¯">Git åˆ†æ”¯</a> ä¸­è¯¦ç»†ä»‹ç»ä»€ä¹ˆæ˜¯åˆ†æ”¯ä»¥åŠå¦‚ä½•ä½¿ç”¨åˆ†æ”¯ã€‚ï¼‰</p><h4 id="ä»è¿œç¨‹ä»“åº“ä¸­æŠ“å–ä¸æ‹‰å–"><a href="#ä»è¿œç¨‹ä»“åº“ä¸­æŠ“å–ä¸æ‹‰å–" class="headerlink" title="ä»è¿œç¨‹ä»“åº“ä¸­æŠ“å–ä¸æ‹‰å–"></a>ä»è¿œç¨‹ä»“åº“ä¸­æŠ“å–ä¸æ‹‰å–</h4><p>å°±å¦‚åˆšæ‰æ‰€è§ï¼Œä»è¿œç¨‹ä»“åº“ä¸­è·å¾—æ•°æ®ï¼Œå¯ä»¥æ‰§è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch [remote-name]</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šè®¿é—®è¿œç¨‹ä»“åº“ï¼Œä»ä¸­æ‹‰å–æ‰€æœ‰ä½ è¿˜æ²¡æœ‰çš„æ•°æ®ã€‚ æ‰§è¡Œå®Œæˆåï¼Œä½ å°†ä¼šæ‹¥æœ‰é‚£ä¸ªè¿œç¨‹ä»“åº“ä¸­æ‰€æœ‰åˆ†æ”¯çš„å¼•ç”¨ï¼Œå¯ä»¥éšæ—¶åˆå¹¶æˆ–æŸ¥çœ‹ã€‚</p><p>å¦‚æœä½ ä½¿ç”¨ <code>clone</code> å‘½ä»¤å…‹éš†äº†ä¸€ä¸ªä»“åº“ï¼Œå‘½ä»¤ä¼šè‡ªåŠ¨å°†å…¶æ·»åŠ ä¸ºè¿œç¨‹ä»“åº“å¹¶é»˜è®¤ä»¥ â€œoriginâ€ ä¸ºç®€å†™ã€‚ æ‰€ä»¥ï¼Œ<code>git fetch origin</code> ä¼šæŠ“å–å…‹éš†ï¼ˆæˆ–ä¸Šä¸€æ¬¡æŠ“å–ï¼‰åæ–°æ¨é€çš„æ‰€æœ‰å·¥ä½œã€‚ å¿…é¡»æ³¨æ„ <code>git fetch</code> å‘½ä»¤ä¼šå°†æ•°æ®æ‹‰å–åˆ°ä½ çš„æœ¬åœ°ä»“åº“â€”â€”å®ƒå¹¶ä¸ä¼šè‡ªåŠ¨åˆå¹¶æˆ–ä¿®æ”¹ä½ å½“å‰çš„å·¥ä½œã€‚ å½“å‡†å¤‡å¥½æ—¶ä½ å¿…é¡»æ‰‹åŠ¨å°†å…¶åˆå¹¶å…¥ä½ çš„å·¥ä½œã€‚</p><p>å¦‚æœä½ æœ‰ä¸€ä¸ªåˆ†æ”¯è®¾ç½®ä¸ºè·Ÿè¸ªä¸€ä¸ªè¿œç¨‹åˆ†æ”¯ï¼ˆé˜…è¯» <a href="http://pengzhenjin.top/2018/06/07/Gitï¼šåˆ†æ”¯">Git åˆ†æ”¯</a> äº†è§£æ›´å¤šä¿¡æ¯ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ <code>git pull</code> å‘½ä»¤æ¥è‡ªåŠ¨çš„æŠ“å–ç„¶ååˆå¹¶è¿œç¨‹åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ã€‚ è¿™å¯¹ä½ æ¥è¯´å¯èƒ½æ˜¯ä¸€ä¸ªæ›´ç®€å•æˆ–æ›´èˆ’æœçš„å·¥ä½œæµç¨‹ï¼›é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>git clone</code> å‘½ä»¤ä¼šè‡ªåŠ¨è®¾ç½®æœ¬åœ° master åˆ†æ”¯è·Ÿè¸ªå…‹éš†çš„è¿œç¨‹ä»“åº“çš„ master åˆ†æ”¯ï¼ˆæˆ–ä¸ç®¡æ˜¯ä»€ä¹ˆåå­—çš„é»˜è®¤åˆ†æ”¯ï¼‰ã€‚ è¿è¡Œ <code>git pull</code> é€šå¸¸ä¼šä»æœ€åˆå…‹éš†çš„æœåŠ¡å™¨ä¸ŠæŠ“å–æ•°æ®å¹¶è‡ªåŠ¨å°è¯•åˆå¹¶åˆ°å½“å‰æ‰€åœ¨çš„åˆ†æ”¯ã€‚</p><h4 id="æ¨é€åˆ°è¿œç¨‹ä»“åº“"><a href="#æ¨é€åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="æ¨é€åˆ°è¿œç¨‹ä»“åº“"></a>æ¨é€åˆ°è¿œç¨‹ä»“åº“</h4><p>å½“ä½ æƒ³åˆ†äº«ä½ çš„é¡¹ç›®æ—¶ï¼Œå¿…é¡»å°†å…¶æ¨é€åˆ°ä¸Šæ¸¸ã€‚ è¿™ä¸ªå‘½ä»¤å¾ˆç®€å•ï¼š<code>git push [remote-name] [branch-name]</code>ã€‚ å½“ä½ æƒ³è¦å°† master åˆ†æ”¯æ¨é€åˆ° <code>origin</code> æœåŠ¡å™¨æ—¶ï¼ˆå†æ¬¡è¯´æ˜ï¼Œå…‹éš†æ—¶é€šå¸¸ä¼šè‡ªåŠ¨å¸®ä½ è®¾ç½®å¥½é‚£ä¸¤ä¸ªåå­—ï¼‰ï¼Œé‚£ä¹ˆè¿è¡Œè¿™ä¸ªå‘½ä»¤å°±å¯ä»¥å°†ä½ æ‰€åšçš„å¤‡ä»½åˆ°æœåŠ¡å™¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure><p>åªæœ‰å½“ä½ æœ‰æ‰€å…‹éš†æœåŠ¡å™¨çš„å†™å…¥æƒé™ï¼Œå¹¶ä¸”ä¹‹å‰æ²¡æœ‰äººæ¨é€è¿‡æ—¶ï¼Œè¿™æ¡å‘½ä»¤æ‰èƒ½ç”Ÿæ•ˆã€‚ å½“ä½ å’Œå…¶ä»–äººåœ¨åŒä¸€æ—¶é—´å…‹éš†ï¼Œä»–ä»¬å…ˆæ¨é€åˆ°ä¸Šæ¸¸ç„¶åä½ å†æ¨é€åˆ°ä¸Šæ¸¸ï¼Œä½ çš„æ¨é€å°±ä¼šæ¯«æ— ç–‘é—®åœ°è¢«æ‹’ç»ã€‚ ä½ å¿…é¡»å…ˆå°†ä»–ä»¬çš„å·¥ä½œæ‹‰å–ä¸‹æ¥å¹¶å°†å…¶åˆå¹¶è¿›ä½ çš„å·¥ä½œåæ‰èƒ½æ¨é€ã€‚ é˜…è¯» <a href="http://pengzhenjin.top/2018/06/07/Gitï¼šåˆ†æ”¯">Git åˆ†æ”¯</a> äº†è§£å¦‚ä½•æ¨é€åˆ°è¿œç¨‹ä»“åº“æœåŠ¡å™¨çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><h4 id="æŸ¥çœ‹æŸä¸ªè¿œç¨‹ä»“åº“"><a href="#æŸ¥çœ‹æŸä¸ªè¿œç¨‹ä»“åº“" class="headerlink" title="æŸ¥çœ‹æŸä¸ªè¿œç¨‹ä»“åº“"></a>æŸ¥çœ‹æŸä¸ªè¿œç¨‹ä»“åº“</h4><p>å¦‚æœæƒ³è¦æŸ¥çœ‹æŸä¸€ä¸ªè¿œç¨‹ä»“åº“çš„æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>git remote show [remote-name]</code> å‘½ä»¤ã€‚ å¦‚æœæƒ³ä»¥ä¸€ä¸ªç‰¹å®šçš„ç¼©å†™åè¿è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œä¾‹å¦‚ <code>origin</code>ï¼Œä¼šå¾—åˆ°åƒä¸‹é¢ç±»ä¼¼çš„ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git remote show origin</span><br><span class="line">* remote origin</span><br><span class="line">  Fetch URL: https://github.com/schacon/ticgit</span><br><span class="line">  Push  URL: https://github.com/schacon/ticgit</span><br><span class="line">  HEAD branch: master</span><br><span class="line">  Remote branches:</span><br><span class="line">    master                               tracked</span><br><span class="line">    dev-branch                           tracked</span><br><span class="line">  Local branch configured for &apos;git pull&apos;:</span><br><span class="line">    master merges with remote master</span><br><span class="line">  Local ref configured for &apos;git push&apos;:</span><br><span class="line">    master pushes to master (up to date)</span><br></pre></td></tr></table></figure><p>å®ƒåŒæ ·ä¼šåˆ—å‡ºè¿œç¨‹ä»“åº“çš„ URL ä¸è·Ÿè¸ªåˆ†æ”¯çš„ä¿¡æ¯ã€‚ è¿™äº›ä¿¡æ¯éå¸¸æœ‰ç”¨ï¼Œå®ƒå‘Šè¯‰ä½ æ­£å¤„äº master åˆ†æ”¯ï¼Œå¹¶ä¸”å¦‚æœè¿è¡Œ git pullï¼Œå°±ä¼šæŠ“å–æ‰€æœ‰çš„è¿œç¨‹å¼•ç”¨ï¼Œç„¶åå°†è¿œç¨‹ master åˆ†æ”¯åˆå¹¶åˆ°æœ¬åœ° master åˆ†æ”¯ã€‚ å®ƒä¹Ÿä¼šåˆ—å‡ºæ‹‰å–åˆ°çš„æ‰€æœ‰è¿œç¨‹å¼•ç”¨ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªç»å¸¸é‡åˆ°çš„ç®€å•ä¾‹å­ã€‚ å¦‚æœä½ æ˜¯ Git çš„é‡åº¦ä½¿ç”¨è€…ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥é€šè¿‡ <code>git remote show</code> çœ‹åˆ°æ›´å¤šçš„ä¿¡æ¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ git remote show origin</span><br><span class="line">* remote origin</span><br><span class="line">  URL: https://github.com/my-org/complex-project</span><br><span class="line">  Fetch URL: https://github.com/my-org/complex-project</span><br><span class="line">  Push  URL: https://github.com/my-org/complex-project</span><br><span class="line">  HEAD branch: master</span><br><span class="line">  Remote branches:</span><br><span class="line">    master                           tracked</span><br><span class="line">    dev-branch                       tracked</span><br><span class="line">    markdown-strip                   tracked</span><br><span class="line">    issue-43                         new (next fetch will store in remotes/origin)</span><br><span class="line">    issue-45                         new (next fetch will store in remotes/origin)</span><br><span class="line">    refs/remotes/origin/issue-11     stale (use &apos;git remote prune&apos; to remove)</span><br><span class="line">  Local branches configured for &apos;git pull&apos;:</span><br><span class="line">    dev-branch merges with remote dev-branch</span><br><span class="line">    master     merges with remote master</span><br><span class="line">  Local refs configured for &apos;git push&apos;:</span><br><span class="line">    dev-branch                     pushes to dev-branch                     (up to date)</span><br><span class="line">    markdown-strip                 pushes to markdown-strip                 (up to date)</span><br><span class="line">    master                         pushes to master                         (up to date)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤åˆ—å‡ºäº†å½“ä½ åœ¨ç‰¹å®šçš„åˆ†æ”¯ä¸Šæ‰§è¡Œ <code>git push</code> ä¼šè‡ªåŠ¨åœ°æ¨é€åˆ°å“ªä¸€ä¸ªè¿œç¨‹åˆ†æ”¯ã€‚ å®ƒä¹ŸåŒæ ·åœ°åˆ—å‡ºäº†å“ªäº›è¿œç¨‹åˆ†æ”¯ä¸åœ¨ä½ çš„æœ¬åœ°ï¼Œå“ªäº›è¿œç¨‹åˆ†æ”¯å·²ç»ä»æœåŠ¡å™¨ä¸Šç§»é™¤äº†ï¼Œè¿˜æœ‰å½“ä½ æ‰§è¡Œ <code>git pull</code> æ—¶å“ªäº›åˆ†æ”¯ä¼šè‡ªåŠ¨åˆå¹¶ã€‚</p><h4 id="è¿œç¨‹ä»“åº“çš„ç§»é™¤ä¸é‡å‘½å"><a href="#è¿œç¨‹ä»“åº“çš„ç§»é™¤ä¸é‡å‘½å" class="headerlink" title="è¿œç¨‹ä»“åº“çš„ç§»é™¤ä¸é‡å‘½å"></a>è¿œç¨‹ä»“åº“çš„ç§»é™¤ä¸é‡å‘½å</h4><p>å¦‚æœæƒ³è¦é‡å‘½åå¼•ç”¨çš„åå­—å¯ä»¥è¿è¡Œ <code>git remote rename</code> å»ä¿®æ”¹ä¸€ä¸ªè¿œç¨‹ä»“åº“çš„ç®€å†™åã€‚ ä¾‹å¦‚ï¼Œæƒ³è¦å°† <code>pb</code> é‡å‘½åä¸º <code>paul</code>ï¼Œå¯ä»¥ç”¨ <code>git remote rename</code> è¿™æ ·åšï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git remote rename pb paul</span><br><span class="line">$ git remote</span><br><span class="line">origin</span><br><span class="line">paul</span><br></pre></td></tr></table></figure><p>å€¼å¾—æ³¨æ„çš„æ˜¯è¿™åŒæ ·ä¹Ÿä¼šä¿®æ”¹ä½ çš„è¿œç¨‹åˆ†æ”¯åå­—ã€‚ é‚£äº›è¿‡å»å¼•ç”¨ <code>pb/master</code> çš„ç°åœ¨ä¼šå¼•ç”¨ <code>paul/master</code>ã€‚</p><p>å¦‚æœå› ä¸ºä¸€äº›åŸå› æƒ³è¦ç§»é™¤ä¸€ä¸ªè¿œç¨‹ä»“åº“â€”â€”ä½ å·²ç»ä»æœåŠ¡å™¨ä¸Šæ¬èµ°äº†æˆ–ä¸å†æƒ³ä½¿ç”¨æŸä¸€ä¸ªç‰¹å®šçš„é•œåƒäº†ï¼Œåˆæˆ–è€…æŸä¸€ä¸ªè´¡çŒ®è€…ä¸å†è´¡çŒ®äº†â€”â€”å¯ä»¥ä½¿ç”¨ <code>git remote rm</code> ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git remote rm paul</span><br><span class="line">$ git remote</span><br><span class="line">origin</span><br></pre></td></tr></table></figure><h3 id="æ‰“æ ‡ç­¾"><a href="#æ‰“æ ‡ç­¾" class="headerlink" title="æ‰“æ ‡ç­¾"></a>æ‰“æ ‡ç­¾</h3><p>åƒå…¶ä»–ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆVCSï¼‰ä¸€æ ·ï¼ŒGit å¯ä»¥ç»™å†å²ä¸­çš„æŸä¸€ä¸ªæäº¤æ‰“ä¸Šæ ‡ç­¾ï¼Œä»¥ç¤ºé‡è¦ã€‚ æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„æ˜¯äººä»¬ä¼šä½¿ç”¨è¿™ä¸ªåŠŸèƒ½æ¥æ ‡è®°å‘å¸ƒç»“ç‚¹ï¼ˆv1.0 ç­‰ç­‰ï¼‰ã€‚ åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†ä¼šå­¦ä¹ å¦‚ä½•åˆ—å‡ºå·²æœ‰çš„æ ‡ç­¾ã€å¦‚ä½•åˆ›å»ºæ–°æ ‡ç­¾ã€ä»¥åŠä¸åŒç±»å‹çš„æ ‡ç­¾åˆ†åˆ«æ˜¯ä»€ä¹ˆã€‚</p><h4 id="åˆ—å‡ºæ ‡ç­¾"><a href="#åˆ—å‡ºæ ‡ç­¾" class="headerlink" title="åˆ—å‡ºæ ‡ç­¾"></a>åˆ—å‡ºæ ‡ç­¾</h4><p>åœ¨ Git ä¸­åˆ—å‡ºå·²æœ‰çš„æ ‡ç­¾æ˜¯éå¸¸ç®€å•ç›´è§‚çš„ã€‚ åªéœ€è¦è¾“å…¥ <code>git tag</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git tag</span><br><span class="line">v0.1</span><br><span class="line">v1.3</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä»¥å­—æ¯é¡ºåºåˆ—å‡ºæ ‡ç­¾ï¼›ä½†æ˜¯å®ƒä»¬å‡ºç°çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç‰¹å®šçš„æ¨¡å¼æŸ¥æ‰¾æ ‡ç­¾ã€‚ ä¾‹å¦‚ï¼ŒGit è‡ªèº«çš„æºä»£ç ä»“åº“åŒ…å«æ ‡ç­¾çš„æ•°é‡è¶…è¿‡ 500 ä¸ªã€‚ å¦‚æœåªå¯¹ 1.8.5 ç³»åˆ—æ„Ÿå…´è¶£ï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -l &apos;v1.8.5*&apos;</span><br><span class="line">v1.8.5</span><br><span class="line">v1.8.5-rc0</span><br><span class="line">v1.8.5-rc1</span><br><span class="line">v1.8.5-rc2</span><br><span class="line">v1.8.5-rc3</span><br><span class="line">v1.8.5.1</span><br><span class="line">v1.8.5.2</span><br><span class="line">v1.8.5.3</span><br><span class="line">v1.8.5.4</span><br><span class="line">v1.8.5.5</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºæ ‡ç­¾"><a href="#åˆ›å»ºæ ‡ç­¾" class="headerlink" title="åˆ›å»ºæ ‡ç­¾"></a>åˆ›å»ºæ ‡ç­¾</h4><p>Git ä½¿ç”¨ä¸¤ç§ä¸»è¦ç±»å‹çš„æ ‡ç­¾ï¼šè½»é‡æ ‡ç­¾ï¼ˆlightweightï¼‰ä¸é™„æ³¨æ ‡ç­¾ï¼ˆannotatedï¼‰ã€‚</p><p>ä¸€ä¸ªè½»é‡æ ‡ç­¾å¾ˆåƒä¸€ä¸ªä¸ä¼šæ”¹å˜çš„åˆ†æ”¯â€”â€”å®ƒåªæ˜¯ä¸€ä¸ªç‰¹å®šæäº¤çš„å¼•ç”¨ã€‚</p><p>ç„¶è€Œï¼Œé™„æ³¨æ ‡ç­¾æ˜¯å­˜å‚¨åœ¨ Git æ•°æ®åº“ä¸­çš„ä¸€ä¸ªå®Œæ•´å¯¹è±¡ã€‚ å®ƒä»¬æ˜¯å¯ä»¥è¢«æ ¡éªŒçš„ï¼›å…¶ä¸­åŒ…å«æ‰“æ ‡ç­¾è€…çš„åå­—ã€ç”µå­é‚®ä»¶åœ°å€ã€æ—¥æœŸæ—¶é—´ï¼›è¿˜æœ‰ä¸€ä¸ªæ ‡ç­¾ä¿¡æ¯ï¼›å¹¶ä¸”å¯ä»¥ä½¿ç”¨ GNU Privacy Guard ï¼ˆGPGï¼‰ç­¾åä¸éªŒè¯ã€‚ é€šå¸¸å»ºè®®åˆ›å»ºé™„æ³¨æ ‡ç­¾ï¼Œè¿™æ ·ä½ å¯ä»¥æ‹¥æœ‰ä»¥ä¸Šæ‰€æœ‰ä¿¡æ¯ï¼›ä½†æ˜¯å¦‚æœä½ åªæ˜¯æƒ³ç”¨ä¸€ä¸ªä¸´æ—¶çš„æ ‡ç­¾ï¼Œæˆ–è€…å› ä¸ºæŸäº›åŸå› ä¸æƒ³è¦ä¿å­˜é‚£äº›ä¿¡æ¯ï¼Œè½»é‡æ ‡ç­¾ä¹Ÿæ˜¯å¯ç”¨çš„ã€‚</p><h4 id="é™„æ³¨æ ‡ç­¾"><a href="#é™„æ³¨æ ‡ç­¾" class="headerlink" title="é™„æ³¨æ ‡ç­¾"></a>é™„æ³¨æ ‡ç­¾</h4><p>åœ¨ Git ä¸­åˆ›å»ºä¸€ä¸ªé™„æ³¨æ ‡ç­¾æ˜¯å¾ˆç®€å•çš„ã€‚ æœ€ç®€å•çš„æ–¹å¼æ˜¯å½“ä½ åœ¨è¿è¡Œ <code>tag</code> å‘½ä»¤æ—¶æŒ‡å®š <code>-a</code> é€‰é¡¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v1.4 -m &quot;my version 1.4&quot;</span><br><span class="line">$ git tag</span><br><span class="line">v0.1</span><br><span class="line">v1.3</span><br><span class="line">v1.4</span><br></pre></td></tr></table></figure><p><code>-m</code> é€‰é¡¹æŒ‡å®šäº†ä¸€æ¡å°†ä¼šå­˜å‚¨åœ¨æ ‡ç­¾ä¸­çš„ä¿¡æ¯ã€‚ å¦‚æœæ²¡æœ‰ä¸ºé™„æ³¨æ ‡ç­¾æŒ‡å®šä¸€æ¡ä¿¡æ¯ï¼ŒGit ä¼šè¿è¡Œç¼–è¾‘å™¨è¦æ±‚ä½ è¾“å…¥ä¿¡æ¯ã€‚</p><p>é€šè¿‡ä½¿ç”¨ <code>git show</code> å‘½ä»¤å¯ä»¥çœ‹åˆ°æ ‡ç­¾ä¿¡æ¯ä¸å¯¹åº”çš„æäº¤ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git show v1.4</span><br><span class="line">tag v1.4</span><br><span class="line">Tagger: Ben Straub &lt;ben@straub.cc&gt;</span><br><span class="line">Date:   Sat May 3 20:19:12 2014 -0700</span><br><span class="line"></span><br><span class="line">my version 1.4</span><br><span class="line"></span><br><span class="line">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class="line"></span><br><span class="line">    changed the version number</span><br></pre></td></tr></table></figure><p>è¾“å‡ºæ˜¾ç¤ºäº†æ‰“æ ‡ç­¾è€…çš„ä¿¡æ¯ã€æ‰“æ ‡ç­¾çš„æ—¥æœŸæ—¶é—´ã€é™„æ³¨ä¿¡æ¯ï¼Œç„¶åæ˜¾ç¤ºå…·ä½“çš„æäº¤ä¿¡æ¯ã€‚</p><h4 id="è½»é‡æ ‡ç­¾"><a href="#è½»é‡æ ‡ç­¾" class="headerlink" title="è½»é‡æ ‡ç­¾"></a>è½»é‡æ ‡ç­¾</h4><p>å¦ä¸€ç§ç»™æäº¤æ‰“æ ‡ç­¾çš„æ–¹å¼æ˜¯ä½¿ç”¨è½»é‡æ ‡ç­¾ã€‚ è½»é‡æ ‡ç­¾æœ¬è´¨ä¸Šæ˜¯å°†æäº¤æ ¡éªŒå’Œå­˜å‚¨åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­â€”â€”æ²¡æœ‰ä¿å­˜ä»»ä½•å…¶ä»–ä¿¡æ¯ã€‚ åˆ›å»ºè½»é‡æ ‡ç­¾ï¼Œä¸éœ€è¦ä½¿ç”¨ <code>-a</code>ã€<code>-s</code> æˆ– <code>-m</code> é€‰é¡¹ï¼Œåªéœ€è¦æä¾›æ ‡ç­¾åå­—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git tag v1.4-lw</span><br><span class="line">$ git tag</span><br><span class="line">v0.1</span><br><span class="line">v1.3</span><br><span class="line">v1.4</span><br><span class="line">v1.4-lw</span><br><span class="line">v1.5</span><br></pre></td></tr></table></figure><p>è¿™æ—¶ï¼Œå¦‚æœåœ¨æ ‡ç­¾ä¸Šè¿è¡Œ <code>git show</code>ï¼Œä½ ä¸ä¼šçœ‹åˆ°é¢å¤–çš„æ ‡ç­¾ä¿¡æ¯ã€‚ å‘½ä»¤åªä¼šæ˜¾ç¤ºå‡ºæäº¤ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git show v1.4-lw</span><br><span class="line">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class="line"></span><br><span class="line">    changed the version number</span><br></pre></td></tr></table></figure><h4 id="åæœŸæ‰“æ ‡ç­¾"><a href="#åæœŸæ‰“æ ‡ç­¾" class="headerlink" title="åæœŸæ‰“æ ‡ç­¾"></a>åæœŸæ‰“æ ‡ç­¾</h4><p>ä½ ä¹Ÿå¯ä»¥å¯¹è¿‡å»çš„æäº¤æ‰“æ ‡ç­¾ã€‚ å‡è®¾æäº¤å†å²æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=oneline</span><br><span class="line">15027957951b64cf874c3557a0f3547bd83b3ff6 Merge branch &apos;experiment&apos;</span><br><span class="line">a6b4c97498bd301d84096da251c98a07c7723e65 beginning write support</span><br><span class="line">0d52aaab4479697da7686c15f77a3d64d9165190 one more thing</span><br><span class="line">6d52a271eda8725415634dd79daabbc4d9b6008e Merge branch &apos;experiment&apos;</span><br><span class="line">0b7434d86859cc7b8c3d5e1dddfed66ff742fcbc added a commit function</span><br><span class="line">4682c3261057305bdd616e23b64b0857d832627b added a todo file</span><br><span class="line">166ae0c4d3f420721acbb115cc33848dfcc2121a started write support</span><br><span class="line">9fceb02d0ae598e95dc970b74767f19372d61af8 updated rakefile</span><br><span class="line">964f16d36dfccde844893cac5b347e7b3d44abbc commit the todo</span><br><span class="line">8a5cbc430f1a9c3d00faaeffd07798508422908a updated readme</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå‡è®¾åœ¨ v1.2 æ—¶ä½ å¿˜è®°ç»™é¡¹ç›®æ‰“æ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯åœ¨ â€œupdated rakefileâ€ æäº¤ã€‚ ä½ å¯ä»¥åœ¨ä¹‹åè¡¥ä¸Šæ ‡ç­¾ã€‚ è¦åœ¨é‚£ä¸ªæäº¤ä¸Šæ‰“æ ‡ç­¾ï¼Œä½ éœ€è¦åœ¨å‘½ä»¤çš„æœ«å°¾æŒ‡å®šæäº¤çš„æ ¡éªŒå’Œï¼ˆæˆ–éƒ¨åˆ†æ ¡éªŒå’Œï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v1.2 9fceb02</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ä½ å·²ç»åœ¨é‚£æ¬¡æäº¤ä¸Šæ‰“ä¸Šæ ‡ç­¾äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ git tag</span><br><span class="line">v0.1</span><br><span class="line">v1.2</span><br><span class="line">v1.3</span><br><span class="line">v1.4</span><br><span class="line">v1.4-lw</span><br><span class="line">v1.5</span><br><span class="line"></span><br><span class="line">$ git show v1.2</span><br><span class="line">tag v1.2</span><br><span class="line">Tagger: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Mon Feb 9 15:32:16 2009 -0800</span><br><span class="line"></span><br><span class="line">version 1.2</span><br><span class="line">commit 9fceb02d0ae598e95dc970b74767f19372d61af8</span><br><span class="line">Author: Magnus Chacon &lt;mchacon@gee-mail.com&gt;</span><br><span class="line">Date:   Sun Apr 27 20:43:35 2008 -0700</span><br><span class="line"></span><br><span class="line">    updated rakefile</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="å…±äº«æ ‡ç­¾"><a href="#å…±äº«æ ‡ç­¾" class="headerlink" title="å…±äº«æ ‡ç­¾"></a>å…±äº«æ ‡ç­¾</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>git push</code> å‘½ä»¤å¹¶ä¸ä¼šä¼ é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“æœåŠ¡å™¨ä¸Šã€‚ åœ¨åˆ›å»ºå®Œæ ‡ç­¾åä½ å¿…é¡»æ˜¾å¼åœ°æ¨é€æ ‡ç­¾åˆ°å…±äº«æœåŠ¡å™¨ä¸Šã€‚ è¿™ä¸ªè¿‡ç¨‹å°±åƒå…±äº«è¿œç¨‹åˆ†æ”¯ä¸€æ ·â€”â€”ä½ å¯ä»¥è¿è¡Œ <code>git push origin [tagname]</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin v1.5</span><br><span class="line">Counting objects: 14, done.</span><br><span class="line">Delta compression using up to 8 threads.</span><br><span class="line">Compressing objects: 100% (12/12), done.</span><br><span class="line">Writing objects: 100% (14/14), 2.05 KiB | 0 bytes/s, done.</span><br><span class="line">Total 14 (delta 3), reused 0 (delta 0)</span><br><span class="line">To git@github.com:schacon/simplegit.git</span><br><span class="line"> * [new tag]         v1.5 -&gt; v1.5</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦ä¸€æ¬¡æ€§æ¨é€å¾ˆå¤šæ ‡ç­¾ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¸¦æœ‰ <code>--tags</code> é€‰é¡¹çš„ <code>git push</code> å‘½ä»¤ã€‚ è¿™å°†ä¼šæŠŠæ‰€æœ‰ä¸åœ¨è¿œç¨‹ä»“åº“æœåŠ¡å™¨ä¸Šçš„æ ‡ç­¾å…¨éƒ¨ä¼ é€åˆ°é‚£é‡Œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin --tags</span><br><span class="line">Counting objects: 1, done.</span><br><span class="line">Writing objects: 100% (1/1), 160 bytes | 0 bytes/s, done.</span><br><span class="line">Total 1 (delta 0), reused 0 (delta 0)</span><br><span class="line">To git@github.com:schacon/simplegit.git</span><br><span class="line"> * [new tag]         v1.4 -&gt; v1.4</span><br><span class="line"> * [new tag]         v1.4-lw -&gt; v1.4-lw</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå½“å…¶ä»–äººä»ä»“åº“ä¸­å…‹éš†æˆ–æ‹‰å–ï¼Œä»–ä»¬ä¹Ÿèƒ½å¾—åˆ°ä½ çš„é‚£äº›æ ‡ç­¾ã€‚</p><h4 id="åˆ é™¤æ ‡ç­¾"><a href="#åˆ é™¤æ ‡ç­¾" class="headerlink" title="åˆ é™¤æ ‡ç­¾"></a>åˆ é™¤æ ‡ç­¾</h4><p>è¦åˆ é™¤æ‰ä½ æœ¬åœ°ä»“åº“ä¸Šçš„æ ‡ç­¾ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ <code>git tag -d &lt;tagname&gt;</code>ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ é™¤æ‰ä¸€ä¸ªè½»é‡çº§æ ‡ç­¾ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d v1.4-lw</span><br><span class="line">Deleted tag &apos;v1.4-lw&apos; (was e7d5add)</span><br></pre></td></tr></table></figure><p>åº”è¯¥æ³¨æ„çš„æ˜¯ä¸Šè¿°å‘½ä»¤å¹¶ä¸ä¼šä»ä»»ä½•è¿œç¨‹ä»“åº“ä¸­ç§»é™¤è¿™ä¸ªæ ‡ç­¾ï¼Œä½ å¿…é¡»ä½¿ç”¨ <code>git push &lt;remote&gt; :refs/tags/&lt;tagname&gt;</code> æ¥æ›´æ–°ä½ çš„è¿œç¨‹ä»“åº“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin :refs/tags/v1.4-lw</span><br><span class="line">To /git@github.com:schacon/simplegit.git</span><br><span class="line"> - [deleted]         v1.4-lw</span><br></pre></td></tr></table></figure><h4 id="æ£€å‡ºæ ‡ç­¾"><a href="#æ£€å‡ºæ ‡ç­¾" class="headerlink" title="æ£€å‡ºæ ‡ç­¾"></a>æ£€å‡ºæ ‡ç­¾</h4><p>å¦‚æœä½ æƒ³æŸ¥çœ‹æŸä¸ªæ ‡ç­¾æ‰€æŒ‡å‘çš„æ–‡ä»¶ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ <code>git checkout</code> å‘½ä»¤ï¼Œè™½ç„¶è¯´è¿™ä¼šä½¿ä½ çš„ä»“åº“å¤„äºâ€œåˆ†ç¦»å¤´æŒ‡é’ˆï¼ˆdetacthed HEADï¼‰â€çŠ¶æ€â€”â€”è¿™ä¸ªçŠ¶æ€æœ‰äº›ä¸å¥½çš„å‰¯ä½œç”¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout 2.0.0</span><br><span class="line">Note: checking out &apos;2.0.0&apos;.</span><br><span class="line"></span><br><span class="line">You are in &apos;detached HEAD&apos; state. You can look around, make experimental</span><br><span class="line">changes and commit them, and you can discard any commits you make in this</span><br><span class="line">state without impacting any branches by performing another checkout.</span><br><span class="line"></span><br><span class="line">If you want to create a new branch to retain commits you create, you may</span><br><span class="line">do so (now or later) by using -b with the checkout command again. Example:</span><br><span class="line"></span><br><span class="line">  git checkout -b &lt;new-branch&gt;</span><br><span class="line"></span><br><span class="line">HEAD is now at 99ada87... Merge pull request #89 from schacon/appendix-final</span><br><span class="line"></span><br><span class="line">$ git checkout 2.0-beta-0.1</span><br><span class="line">Previous HEAD position was 99ada87... Merge pull request #89 from schacon/appendix-final</span><br><span class="line">HEAD is now at df3f601... add atlas.json and cover image</span><br></pre></td></tr></table></figure><p>åœ¨â€œåˆ†ç¦»å¤´æŒ‡é’ˆâ€çŠ¶æ€ä¸‹ï¼Œå¦‚æœä½ åšäº†æŸäº›æ›´æ”¹ç„¶åæäº¤å®ƒä»¬ï¼Œæ ‡ç­¾ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†ä½ çš„æ–°æäº¤å°†ä¸å±äºä»»ä½•åˆ†æ”¯ï¼Œå¹¶ä¸”å°†æ— æ³•è®¿é—®ï¼Œé™¤éç¡®åˆ‡çš„æäº¤å“ˆå¸Œã€‚å› æ­¤ï¼Œå¦‚æœä½ éœ€è¦è¿›è¡Œæ›´æ”¹â€”â€”æ¯”å¦‚è¯´ä½ æ­£åœ¨ä¿®å¤æ—§ç‰ˆæœ¬çš„é”™è¯¯â€”â€”è¿™é€šå¸¸éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b version2 v2.0.0</span><br><span class="line">Switched to a new branch &apos;version2&apos;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œå¦‚æœåœ¨è¿™ä¹‹ååˆè¿›è¡Œäº†ä¸€æ¬¡æäº¤ï¼Œ<code>version2</code> åˆ†æ”¯ä¼šå› ä¸ºè¿™ä¸ªæ”¹åŠ¨å‘å‰ç§»åŠ¨ï¼Œ<code>version2</code> åˆ†æ”¯å°±ä¼šå’Œ <code>v2.0.0</code> æ ‡ç­¾ç¨å¾®æœ‰äº›ä¸åŒï¼Œè¿™æ—¶å°±åº”è¯¥å½“å¿ƒäº†ã€‚</p><h3 id="Git-åˆ«å"><a href="#Git-åˆ«å" class="headerlink" title="Git åˆ«å"></a>Git åˆ«å</h3><p>åœ¨æˆ‘ä»¬ç»“æŸæœ¬ç«  Git åŸºç¡€ä¹‹å‰ï¼Œæ­£å¥½æœ‰ä¸€ä¸ªå°æŠ€å·§å¯ä»¥ä½¿ä½ çš„ Git ä½“éªŒæ›´ç®€å•ã€å®¹æ˜“ã€ç†Ÿæ‚‰ï¼šåˆ«åã€‚ æˆ‘ä»¬ä¸ä¼šåœ¨ä¹‹åçš„ç« èŠ‚ä¸­å¼•ç”¨åˆ°æˆ–å‡å®šä½ ä½¿ç”¨è¿‡å®ƒä»¬ï¼Œä½†æ˜¯ä½ å¤§æ¦‚åº”è¯¥çŸ¥é“å¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚</p><p>Git å¹¶ä¸ä¼šåœ¨ä½ è¾“å…¥éƒ¨åˆ†å‘½ä»¤æ—¶è‡ªåŠ¨æ¨æ–­å‡ºä½ æƒ³è¦çš„å‘½ä»¤ã€‚ å¦‚æœä¸æƒ³æ¯æ¬¡éƒ½è¾“å…¥å®Œæ•´çš„ Git å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡ <code>git config</code> æ–‡ä»¶æ¥è½»æ¾åœ°ä¸ºæ¯ä¸€ä¸ªå‘½ä»¤è®¾ç½®ä¸€ä¸ªåˆ«åã€‚ è¿™é‡Œæœ‰ä¸€äº›ä¾‹å­ä½ å¯ä»¥è¯•è¯•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.co checkout</span><br><span class="line">$ git config --global alias.br branch</span><br><span class="line">$ git config --global alias.ci commit</span><br><span class="line">$ git config --global alias.st status</span><br></pre></td></tr></table></figure><p>è¿™æ„å‘³ç€ï¼Œå½“è¦è¾“å…¥ <code>git commit</code> æ—¶ï¼Œåªéœ€è¦è¾“å…¥ <code>git ci</code>ã€‚ éšç€ä½ ç»§ç»­ä¸æ–­åœ°ä½¿ç”¨ Gitï¼Œå¯èƒ½ä¹Ÿä¼šç»å¸¸ä½¿ç”¨å…¶ä»–å‘½ä»¤ï¼Œæ‰€ä»¥åˆ›å»ºåˆ«åæ—¶ä¸è¦çŠ¹è±«ã€‚</p><p>åœ¨åˆ›å»ºä½ è®¤ä¸ºåº”è¯¥å­˜åœ¨çš„å‘½ä»¤æ—¶è¿™ä¸ªæŠ€æœ¯ä¼šå¾ˆæœ‰ç”¨ã€‚ ä¾‹å¦‚ï¼Œä¸ºäº†è§£å†³å–æ¶ˆæš‚å­˜æ–‡ä»¶çš„æ˜“ç”¨æ€§é—®é¢˜ï¼Œå¯ä»¥å‘ Git ä¸­æ·»åŠ ä½ è‡ªå·±çš„å–æ¶ˆæš‚å­˜åˆ«åï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.unstage &apos;reset HEAD --&apos;</span><br></pre></td></tr></table></figure><p>è¿™ä¼šä½¿ä¸‹é¢çš„ä¸¤ä¸ªå‘½ä»¤ç­‰ä»·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git unstage fileA</span><br><span class="line">$ git reset HEAD -- fileA</span><br></pre></td></tr></table></figure><p>è¿™æ ·çœ‹èµ·æ¥æ›´æ¸…æ¥šä¸€äº›ã€‚ é€šå¸¸ä¹Ÿä¼šæ·»åŠ ä¸€ä¸ª <code>last</code> å‘½ä»¤ï¼Œåƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.last &apos;log -1 HEAD&apos;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œå¯ä»¥è½»æ¾åœ°çœ‹åˆ°æœ€åä¸€æ¬¡æäº¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git last</span><br><span class="line">commit 66938dae3329c7aebe598c2246a8e6af90d04646</span><br><span class="line">Author: Josh Goebel &lt;dreamer3@example.com&gt;</span><br><span class="line">Date:   Tue Aug 26 19:48:51 2008 +0800</span><br><span class="line"></span><br><span class="line">    test for current head</span><br><span class="line"></span><br><span class="line">    Signed-off-by: Scott Chacon &lt;schacon@example.com&gt;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼ŒGit åªæ˜¯ç®€å•åœ°å°†åˆ«åæ›¿æ¢ä¸ºå¯¹åº”çš„å‘½ä»¤ã€‚ ç„¶è€Œï¼Œä½ å¯èƒ½æƒ³è¦æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Git å­å‘½ä»¤ã€‚ å¦‚æœæ˜¯é‚£æ ·çš„è¯ï¼Œå¯ä»¥åœ¨å‘½ä»¤å‰é¢åŠ å…¥ ! ç¬¦å·ã€‚ å¦‚æœä½ è‡ªå·±è¦å†™ä¸€äº›ä¸ Git ä»“åº“åä½œçš„å·¥å…·çš„è¯ï¼Œé‚£ä¼šå¾ˆæœ‰ç”¨ã€‚ æˆ‘ä»¬ç°åœ¨æ¼”ç¤ºå°† <code>git visual</code> å®šä¹‰ä¸º <code>gitk</code> çš„åˆ«åï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.visual &apos;!gitk&apos;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
